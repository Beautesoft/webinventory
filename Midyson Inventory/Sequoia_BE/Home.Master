<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Home.master.cs" Inherits="Sequoia_BE.Home" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head id="Head_Home" runat="server">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>SEQUOIA</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
        name="viewport">
    <!-- home css -->
    <link href="Css/master.css" rel="stylesheet" />"
    <!-- Bootstrap 3.3.7 -->
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="bower_components/Ionicons/css/ionicons.min.css">
    <!-- Morris chart -->
    <link rel="stylesheet" href="bower_components/morris.js/morris.css">

    <!-- daterange picker -->
    <link rel="stylesheet" href="bower_components/bootstrap-daterangepicker/daterangepicker.css">
    <!-- bootstrap datepicker -->
    <link rel="stylesheet" href="bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css">

    <!-- iCheck for checkboxes and radio inputs -->
    <link rel="stylesheet" href="plugins/iCheck/all.css">
    <!-- Bootstrap Color Picker -->
    <link rel="stylesheet" href="bower_components/bootstrap-colorpicker/dist/css/bootstrap-colorpicker.min.css">
    <!-- Bootstrap time Picker -->
    <link rel="stylesheet" href="plugins/timepicker/bootstrap-timepicker.min.css">
    <!-- DataTable-->
    <link rel="Stylesheet" href="bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css" />
    <!-- Select2 -->
    <link rel="stylesheet" href="bower_components/select2/dist/css/select2.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="dist/css/AdminLTE.min.css">
    <link rel="stylesheet" href="dist/css/jquery.signaturepad.css" />
    <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="dist/css/skins/_all-skins.min.css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->


    <!-- Google Font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
    <style type="text/css">

        .select2-container--default .select2-selection--single, .select2-selection .select2-selection--single {
    border: 1px solid #8b7306;
    border-radius: 20px;
    padding: 6px 12px;
    height: 34px;
}

        .input-group-prepend .input-group-text {
    border: 1px solid #D7CA93;
    background-color: #CFC38F;
    color: white;
    border-bottom-left-radius: 20px !important;
    border-top-left-radius: 20px !important;
}
        .form-control-select2{
  border-radius:36px;
  display:inline-block;
  overflow:hidden;
  background:#cccccc;
  border:1px solid #cccccc;
}


        .input-group  {
                border: 1px solid #D7CA93;
                border-bottom-left-radius: 0px !important;
                border-top-left-radius: 0px !important;
                border-bottom-right-radius: 20px !important;
                border-top-right-radius: 20px !important;
        }


/*.input-group-append:nth-child(n):not(:last-child) {
    border: 1px solid #D7CA93;
    background-color: transparent!important;
    color: #D7CA93;
}*/

.input-group-append .input-group-text {
    border: 1px solid #D7CA93;
    background-color: #CFC38F;
    color: white;
    border-bottom-right-radius: 20px !important;
    border-top-right-radius: 20px !important;
}

.form-control-select2 {
    border: 1px solid #D7CA93;
    border-bottom-left-radius: 20px !important;
    border-top-left-radius: 20px !important;
    border-bottom-right-radius: 20px !important;
    border-top-right-radius: 20px !important;
}

.form-control {
    border: 1px solid #D7CA93;
    border-bottom-left-radius: 20px !important;
    border-top-left-radius: 20px !important;
    border-bottom-right-radius: 20px !important;
    border-top-right-radius: 20px !important;
}


    .form-control[readonly] {
        opacity: 1;
    }

.mandatory-text {
    color: #b32121 !important;
    font-size: 1rem;
}

.no-right-radius {
    border-top: 1px solid #D7CA93;
    border-bottom: 1px solid #D7CA93;
    border-bottom-right-radius: 0px !important;
    border-top-right-radius: 0px !important;
}

.no-left-radius {
    border-top: 1px solid #D7CA93;
    border-bottom: 1px solid #D7CA93;
    border-bottom-left-radius: 0px !important;
    border-top-left-radius: 0px !important;
}

.custom-control-label::before {
    position: absolute;
    top: .25rem;
    left: 0;
    display: block;
    width: 1.3rem;
    height: 1.3rem;
    pointer-events: none;
    content: "";
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    background-color: #dee2e6;
}

.btn-primary {
    color: #fef7db;
    background-color: #CFC38F;
    border-color: #CFC38F;
    border-radius: 30px !important;
    font-weight: bold;
    font-size: 25px;
    padding: 10px 45px;
}

.btn-primaryIcon {
    color: #fef7db;
    background-color: #CFC38F;
    border-color: #CFC38F;
    border-radius: 30px !important;
    font-weight: bold;
    font-size: 25px;
    padding: 0px 25px;
}

.btn-primary2 {
    color: #fef7db;
    background-color: #CFC38F;
    border-color: #CFC38F;
    border-radius: 30px !important;
    font-weight: bold;
    font-size: 14px;
    padding: 6px 12px;
}

.btn-lg {
    font-weight: 400 !important;
    font-size: smaller !important;
}

.btn-block {
    display: block;
    width: 100%;
}

.custom-control-label::after {
    position: absolute;
    top: .25rem;
    left: 0;
    display: block;
    width: 1.3rem;
    height: 1.3rem;
    content: " ";
    background-repeat: no-repeat;
    background-position: center center;
    background-size: 50% 60%;
}



        .section {
    padding: 10px;
    -webkit-border-radius: 20%;
    -moz-border-radius: 20%;
    background-color: #f7f1d9;
    border-color: #CFC38F;
    border-radius: 20px !important;
}
        .rounded {
    border-radius: 50%;
    -webkit-border-radius: 50%;
    -moz-border-radius: 50%;
}


        .skin-blue .main-header .logo:hover {
            background-color: #bc9a07;
        }

        .skin-blue .main-header .navbar {
            /*background-color: #8b7306;*/
            background-color: #cfc38f;
        }

          #removeImg{
    display:none;    
}

        /*a[aria-expanded=true] .fa-plus {
   display: none;
}
a[aria-expanded=false] .fa-minus {
   display: none;
}*/

        div[aria-expanded=true] .fa-plus {
   display: none;
}
div[aria-expanded=false] .fa-minus {
   display: none;
}


        input[type=checkbox] {
    width:25px;height:25px;margin-left: 0px;margin-top: 0px;
}

        .content-wrapper {
            background-color: #f7f1d9;

        }

        .skin-blue .main-header .logo {
            /*background-color: #bc9a07;*/
            background-color: #f7f1d9;
            color: #fff;
            border-bottom: 0 solid transparent;
        }

       .skin-blue .wrapper, .skin-blue .main-sidebar, .skin-blue .left-side {
            background-color: #CFC38F;
        }

        .skin-blue .user-panel>.info,.skin-blue .user-panel>.info>a{
            color:#8b7306

        }

        .skin-blue .sidebar-menu > li.header {
                color: #FFFFFF;
                background: #CFC38F;
        }
        .skin-blue .sidebar-menu>li>a{
            border-left:3px solid transparent;
            color:#FFFFFF;

        }
        .panel-heading
        {
            background: #cfc38f;
            cursor: pointer;
        }
        .panlheader
        {
            /*background: #bc9a07;*/
            background: #cfc38f;
        }

        .skin-blue .sidebar-menu > li:hover > a, .skin-blue .sidebar-menu > li.active > a, .skin-blue .sidebar-menu > li.menu-open > a {
            color: #FFFFFF;
            background: #CFC38F;
        }

        .skin-blue .sidebar-menu > li.active > a {
            border-left-color: #FFFFFF
        }

          .skin-blue .sidebar-menu > li > .treeview-menu {
            margin: 0 1px;
            background: #CFC38F;
            color:#8b7306;
        }

         .skin-blue .sidebar-menu>li > .treeview-menu>li>a{
            color: #FFFFFF;
        }

         .skin-blue .sidebar-menu>li > .treeview-menu>li> ul > li > a{
            color: #FFFFFF;
        }

         .skin-blue .sidebar-menu>li > .treeview-menu>li> ul > li.active > a{
            color: #800080;
        }

         .skin-blue .sidebar-menu>li > .treeview-menu>li.active>a{
            color: 	#800080;
        }

        .btn-primary {
            /*background-color: #8b7306;
            border-color: #8b7306;*/
            background-color: #cfc38f;
            border-color: #cfc38f;
        }

            .btn-primary:hover, .btn-primary:active, .btn-primary.hover {
                background-color: #8b7306;
            }

        .box.box-default {
            border-top-color: #f7f1d9;
        }

        .box {
            border-top: 3px solid #f7f1d9;
        }

        .breadcrumb > li + li:before {
            color: #333;
        }

        div.dataTables_wrapper div.dataTables_filter input {
            /* margin-left: 28.5em; */
            display: inline-block;
            width: 98%;
            margin-right: 21.5em;
        }

        .main-footer {
            position: fixed;
            left: 0;
            bottom: 0;
            width: 100%;
            padding: 6px;
        }

        .notbold {
            font-weight: normal;
            margin-right: 50px;
        }

        ​ .pagination > .active > a, .pagination > .active > a:focus, .pagination > .active > a:hover, .pagination > .active > span, .pagination > .active > span:focus, .pagination > .active > span:hover {
            background-color: #6a6000;
            border-color: #6a6000;
        }

        .form-group.required .control-label:after {
            content: "*";
            color: red;
        }

        .nav-tabs-custom > .nav-tabs > li.active {
            border-top-color: #6a6000;
        }

        .margin {
            margin-right: 10px;
            margin-left: 10px;
            margin-top: 0px;
            margin-bottom: 0px;
        }

        .SOHA_Alert {
            position: absolute;
            z-index: inherit;
            width: 100%;
        }

        time.icon {
            font-size: 1em; /* change icon size */
            display: block;
            position: relative;
            width: 7em;
            height: 6em;
            background-color: #f0f0f0;
            border-radius: 0.6em;
            box-shadow: 0 1px 0 #bdbdbd, 0 2px 0 #fff, 0 3px 0 #bdbdbd, 0 4px 0 #fff, 0 5px 0 #bdbdbd, 0 0 0 1px #bdbdbd;
            overflow: hidden;
        }

            time.icon * {
                display: block;
                width: 100%;
                font-size: 1em;
                font-weight: bold;
                font-style: normal;
                text-align: center;
            }

            time.icon strong {
                position: absolute;
                top: 0;
                padding: 0.4em 0;
                color: #fff;
                background-color: #03518a;
                border-bottom: 1px dashed #03518a;
                box-shadow: 0 2px 0 #03518a;
            }

            time.icon em {
                position: absolute;
                bottom: 0.3em;
                color: #03518a;
            }

            time.icon span {
                font-size: 2em;
                letter-spacing: -0.05em;
                padding-top: 1em;
                color: #2f2f2f;
            }



        .dot_OnGoing {
            height: 10px;
            width: 10px;
            border-radius: 50%;
            display: inline-block;
            background-color: #4DD965;
        }

        .dot_UpComing {
            height: 10px;
            width: 10px;
            border-radius: 50%;
            display: inline-block;
            background-color: #f39c12;
        }

        .dot_Expired {
            height: 10px;
            width: 10px;
            border-radius: 50%;
            display: inline-block;
            background-color: #F44336;
        }

        /*TimeLine*/

        .bold {
            /*font-weight: bold;*/
            padding-left: 20px;
        }

        .time {
            position: absolute;
            left: -150px;
        }

        .timeline-wrapper {
            padding-left: 110px;
            min-width: 400px;
            font-family: 'Helvetica';
            font-size: 12px;
            /*border: 1px solid #CCC;*/
        }

        .statement {
            color: orange;
        }

        .StepProgress {
            position: relative;
            padding-left: 50px;
            list-style: none;
        }

        .StepProgress::before {
                display: inline-block;
                content: '';
                position: absolute;
                top: 0;
                left: 50px;
                width: 10px;
                height: 100%;
                border-left: 2px solid #CCC;
            }

        .StepProgress-item {
            position: relative;
            counter-increment: list;
        }

        .StepProgress-item:not(:last-child) {
                padding-bottom: 20px;
        }

       .StepProgress-item::before {
                display: inline-block;
                content: '';
                position: absolute;
                left: 0px;
                height: 100%;
                width: 10px;
            }

            .StepProgress-item::after {
                content: '';
                display: inline-block;
                position: absolute;
                top: 0;
                left: -5px;
                width: 12px;
                height: 12px;
                border: 2px solid #CCC;
                border-radius: 50%;
                background-color: #FFF;
            }

            .StepProgress-item.is-done::before {
                border-left: 2px solid green;
            }

            .StepProgress-item.is-done::after {
                /*content: "?";*/
                font-size: 10px;
                color: #FFF;
                text-align: center;
                border: 2px solid green;
                background-color: green;
            }

        StepProgress-item.current::before {
            border-left: 2px solid green;
        }

        .StepProgress-item.current::after {
            /*content: "?";*/
            font-size: 10px;
            color: #FFF;
            text-align: center;
            border: 2px solid green;
            background-color: white;
        }

        .StepProgress strong {
            display: block;
        }

        .fabIcon {
            width: 50px;
            height: 50px;
            background-color: #6a6000;
            border-radius: 50%;
            box-shadow: 0 6px 10px 0 #666;
            transition: all 0.1s ease-in-out;
            font-size: 50px;
            color: white;
            text-align: center;
            line-height: 50px;
            position: fixed;
            right: 50px;
            z-index: 5;
            bottom: 100px;
         }

           .fabIcon:hover {
                box-shadow: 0 6px 14px 0 #666;
                transform: scale(1.05);
          }

          .fabIconCustomerClass {
            width: 50px;
            height: 50px;
            background-color: #6a6000;
            border-radius: 50%;
            box-shadow: 0 6px 10px 0 #666;
            transition: all 0.1s ease-in-out;
            font-size: 50px;
            color: white;
            text-align: center;
            line-height: 50px;
            right: 500px;
            bottom: 1px;
            float:right
         }

           .fabIconCustomerClass:hover {
                box-shadow: 0 6px 14px 0 #666;
                transform: scale(1.05);
          }


        .rotate:hover {
            font-size: 1.5em;
            transition: 0s ease-out;
        }

        .card {
            display: block;
            margin-bottom: 20px;
            line-height: 1.42857143;
            background-color: #fff;
            border-radius: 2px;
            box-shadow: 0 2px 5px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12);
            transition: box-shadow .25s;
        }

            .card:hover {
                box-shadow: 0 8px 17px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
            }

        .img-card {
            width: 100%;
            height: 100px;
            border-top-left-radius: 2px;
            border-top-right-radius: 2px;
            display: block;
            overflow: hidden;
        }

            .img-card img {
                width: 100%;
                height: 100px;
                object-fit: cover;
                transition: all .25s ease;
            }


        .card-content {
            padding: 15px;
            text-align: left;
        }

        .RadioButtonWidth label {
            margin-right: 20px;
        }


        .card-title {
            margin-top: 0px;
            font-weight: 700;
            font-size: 1.65em;
        }

            .card-title a {
                color: #000;
                text-decoration: none !important;
            }

        .card-read-more {
            border-top: 1px solid #D4D4D4;
        }

        .card-read-more a {
            text-decoration: none !important;
            padding: 10px;
            font-weight: 600;
            text-transform: uppercase;
        }

        a[aria-expanded=true] .fa-plus {
            display: none;
        }

        a[aria-expanded=false] .fa-minus {
            display: none;
        }

          .collapsepanelbody {
            height:0;
            overflow:hidden;
        }

        .form-horizontal .control-label.text-left{
            text-align: left;
        }
  


        /*TimeLine*/
    </style>

</head>

<body class="skin-blue fixed sidebar-mini sidebar-mini-expand-feature" style="height: auto; min-height: 100%;">
    <form id="frm_Home" runat="server">
        <asp:ScriptManager ID="frmScript" runat="server" />
        <div class="wrapper">

            <div class="modal fade" id="mdlAddDiv" runat="server" style="display: none;">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <div class="row">
                                <div class="col-md-12">
                                    <h4 class="modal-title">Add Division</h4>
                                </div>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Code</label>
                                        <input type="number" class="form-control" runat="server" id="txt_CodemdlAddDiv" maxlength="255" disabled="disabled" placeholder="Enter Code">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group required">
                                        <label class="control-label">Name</label>
                                        <input type="text" maxlength="255" id="txt_NamemdlAddDiv" class="form-control" runat="server" placeholder="Enter Name">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="control-label">Division is Currently active</label>
                                        <input type="checkbox" runat="server" id="chk_ActivemdlAddDiv" >
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-default" id="btnSubmit_mdlAddDiv">Submit</button>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>

            <div class="modal fade" id="mdlAddDept" runat="server" style="display: none;">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <div class="row">
                                <div class="col-md-12">
                                    <h4 class="modal-title">Add Department</h4>
                                </div>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Department Code</label>
                                        <input type="number" class="txtDeptCodeDeptMastermdl form-control" runat="server" id="txtDeptCode_mdlAddDept"   maxlength="2" placeholder="Enter Code">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group required">
                                        <label class="control-label">Description</label>
                                        <input type="text" maxlength="255" id="txtDeptDesc_mdlAddDept" class="form-control" runat="server" placeholder="Enter Description">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="control-label">Validity Period</label>
                                         <select class="form-control select2" style="width: 100%;" clientidmode="Static" runat="server" id="ddl_ValidityPeriodmdlAddDept">
                                    <option value="0">Select</option>
                                    <option value="1">1 year</option>
                                    <option value="2">2 year</option>
                                    <option value="3">3 year</option>
                                    <option value="4">Unlimited</option>
                            </select>
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>FE Sequence No</label>
                                        <input type="number" class="form-control" runat="server" id="txtSeqNo_mdlAddDept" maxlength="255" value="0">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                                <div class="col-md-6" style="margin-top:2%">
                                    <div class="checkbox">
                                <label>
                                    <input type="checkbox" runat="server" id="chkAllowCashSales_mdlAddDept">
                                    &nbsp&nbsp&nbsp&nbsp&nbsp Allow Cash Sales 
                                </label>
                            </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="checkbox">
                                <label>
                                    <input type="checkbox" runat="server" id="chkActive_mdlAddDept">
                                    &nbsp&nbsp&nbsp&nbsp&nbsp  Department is currently active
                                </label>
                            </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="checkbox">
                                <label>
                                    <input type="checkbox" runat="server" id="chkFirstTrial_mdlAddDept">
                                    &nbsp&nbsp&nbsp&nbsp&nbsp  This is first trial
                                </label>
                            </div>
                                </div>
                                
                            </div>
                            <br />
                            <div class="row">
                                    <div class="col-md-6">
                                    <div class="checkbox">
                                <label>
                                    <input type="checkbox" runat="server" id="chkRetail_mdlAddDept">
                                    &nbsp&nbsp&nbsp&nbsp&nbsp  This is retail product
                                </label>
                            </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="checkbox">
                                <label>
                                    <input type="checkbox" runat="server" id="chkSaolon_mdlAddDept">
                                    &nbsp&nbsp&nbsp&nbsp&nbsp  This is salon product
                                </label>
                            </div>
                                </div>
                                </div>
                            <br />

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="checkbox">
                                <label>
                                    <input type="checkbox" runat="server" id="chkService_mdlAddDept">
                                    &nbsp&nbsp&nbsp&nbsp&nbsp  This is service
                                </label>
                            </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="checkbox">
                                <label>
                                    <input type="checkbox" runat="server" id="chkVoucher_mdlAddDept">
                                    &nbsp&nbsp&nbsp&nbsp&nbsp  This is voucher
                                </label>
                            </div>
                                </div>
                           
                            </div>
                            <br />

                            <div class="row">
                                         <div class="col-md-6">
                                    <div class="checkbox">
                                <label>
                                    <input type="checkbox" runat="server" id="chkPrepaid_mdlAddDept">
                                    &nbsp&nbsp&nbsp&nbsp&nbsp  This is prepaid
                                </label>
                            </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="checkbox">
                                <label>
                                    <input type="checkbox" runat="server" id="chkCompound_mdlAddDept">
                                    &nbsp&nbsp&nbsp&nbsp&nbsp  This is compound
                                </label>
                            </div>
                                </div>
                                </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-default" id="btnSubmit_mdlAddDept">Submit</button>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>

            <div class="modal fade" id="mdlAddClass" runat="server" style="display: none;">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <div class="row">
                                <div class="col-md-12">
                                    <h4 class="modal-title">Add Class</h4>
                                </div>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Code</label>
                                        <input type="number" class="form-control" runat="server" id="txt_CodemdlAddClass" maxlength="255" disabled="disabled" placeholder="Enter Code">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group required">
                                        <label class="control-label">Name</label>
                                        <input type="text" maxlength="255" id="txt_NamemdlAddClass" class="form-control" runat="server" placeholder="Enter Name">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class="control-label">Classification is Currently active</label>
                                        <input type="checkbox" runat="server" id="chk_ActivemdlAddClass" >
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-default" id="btnSubmit_mdlAddClass">Submit</button>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>

            <div class="modal fade" id="mdlAddBrand" runat="server" style="display: none;">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <div class="row">
                                <div class="col-md-12">
                                    <h4 class="modal-title">Add Brand</h4>
                                </div>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Code</label>
                                        <input type="text" class="form-control" runat="server" id="txtCode_mdlAddBrand" maxlength="255" disabled="disabled">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group required">
                                        <label class="control-label">Description</label>
                                        <input type="text" class="form-control" runat="server" id="txtName_mdlAddBrand" maxlength="255" placeholder="Enter Description">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <div class="checkbox">
                                <label>
                                    <input type="checkbox" runat="server" id="chk_ActivemdlAddBrand">&nbsp&nbsp&nbsp&nbsp&nbsp Brand is Currently Active
                                </label>
                                </div>
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group required">
                                        <div class="checkbox">
                                <label>
                                    <input type="checkbox" runat="server" id="chk_showRetailmdlAddBrand">&nbsp&nbsp&nbsp&nbsp&nbsp Show on retail
                                </label>
                                </div>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <div class="checkbox">
                                <label>
                                    <input type="checkbox" runat="server" id="chk_showVouchermdlAddBrand">&nbsp&nbsp&nbsp&nbsp&nbsp Show on voucher
                                </label>
                                </div>
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group required">
                                        <div class="checkbox">
                                <label>
                                    <input type="checkbox" runat="server" id="chk_showPrepaidmdlAddBrand">&nbsp&nbsp&nbsp&nbsp&nbsp Show on prepaid
                                </label>
                                </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-default" id="btnSubmit_mdlAddBrand">Submit</button>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>

            <div class="modal fade" id="mdlAddUOM" runat="server" style="display: none;">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <div class="row">
                                <div class="col-md-12">
                                    <h4 class="modal-title">Add UOM</h4>
                                </div>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-5">
                                    <div class="form-group">
                                        <label>UOMC Description</label>
                                        <select id="ddlUomCDesc_mdladdUom" name="select2" runat="server" class="form-control select2" style="width: 100%;" />
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                                <div class="col-md-2">
                                    <div class="form-group required">
                                        <label class="control-label">UOM Unit</label>
                                        <input type="number" maxlength="255" id="addUOMUnit_mdlAddUom" class="form-control" runat="server" placeholder="Unit">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                                <div class="col-md-5">
                                    <div class="form-group">
                                        <label>UOM Description</label>
                                        <select id="ddlUomDesc_mdladdUom" name="select2" runat="server" class="form-control select2" style="width: 100%;" />
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-default" id="btnSubmit_mdlAddUOM">Submit</button>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>

            <div class="modal fade" id="mdlAddLink" runat="server" style="display: none;">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <div class="row">
                                <div class="col-md-12">
                                    <h4 class="modal-title">Add Link</h4>
                                    [<label id="lbl_Type_mdlAddLink">Type</label>-<label id="lbl_Index_mdlAddLink">-1</label>]
                                </div>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Link Code</label>
                                        <input type="text" class="form-control" runat="server" id="txtLinkCode_mdlAddLink" maxlength="255" placeholder="Enter Link Code">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group required">
                                        <label class="control-label">Link Description</label>
                                        <input type="text" class="form-control" runat="server" id="txtLinkDesc_mdlAddLink" maxlength="255" placeholder="Enter Link Description">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-default" id="btnSubmit_mdlAddLink">Submit</button>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>

            <div class="modal fade" id="mdlAddItemUOm" runat="server" style="display: none;">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <div class="row">
                                <div class="col-md-12">
                                    <h4 class="modal-title">Add</h4>
                                    [<label id="lbl_Type_mdlAddItemUOm">Type</label>-<label id="lbl_Index_mdlAddItemUOm">-1</label>]
                                </div>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Item Code</label>
                                        <input type="text" class="form-control" runat="server" id="mdlAddItemUOm_ItemCode" maxlength="255" placeholder="Enter Link Code">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group required">
                                        <label class="control-label">Item Description</label>
                                        <input type="text" class="form-control" runat="server" id="mdlAddItemUOm_ItemDesc" maxlength="255" placeholder="Enter Link Description">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>UOM</label>
                                        <select class="form-control select2" style="width: 100%;" clientidmode="Static" runat="server" id="mdlAddItemUOm__Uom">
                            </select>
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group required">
                                        <label class="control-label">Qty</label>
                                        <input type="number" class="form-control" runat="server" id="mdlAddItemUOm_Qty" placeholder="Enter Qty">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-default" id="btnSubmit_mdlAddItemUOm">Submit</button>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>

            <div class="modal fade" id="mdlEditPriceGRN" runat="server" style="display: none;">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <div class="row">
                                <div class="col-md-12">
                                    <h4 class="modal-title">Edit Qty / Price </h4>
                                    <%--<label id="lbl_Index_mdlEditPriceGRN">-1</label>--%>
                                    <input type="hidden" class="form-control" runat="server" id="lbl_Index_mdlEditPriceGRN" >
                                </div>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Qty</label>
                                        <input type="number" class="form-control" runat="server" id="txtQty_EditPriceGRN" maxlength="255" min="1" required value="1" onkeydown="javascript: return event.keyCode === 8 ||event.keyCode === 46 ? true : !isNaN(Number(event.key))">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group required">
                                        <label class="control-label">Price</label>
                                        <input type="number" class="form-control" runat="server" id="txtPrice_EditPriceGRN" maxlength="255" min="0" required value="0" oninput="restrict(this);">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label>Remark</label>
                                        <input type="text" class="form-control" runat="server" id="txtRemark_EditPriceGRN" maxlength="255">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-default" id="btnSubmit_mdlEditPriceGRN">Submit</button>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>

            <div class="modal fade" id="mdlEditPriceADJ" runat="server" style="display: none;">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <div class="row">
                                <div class="col-md-12">
                                    <h4 class="modal-title">Edit Qty / Price </h4>
                                    <input type="hidden" class="form-control" runat="server" id="lbl_Index_mdlEditPriceADJ" >
                                </div>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Qty</label>
                                        <input type="number" class="form-control" runat="server" id="txtQty_EditPriceADJ" maxlength="255" value="1" min="0" pattern="[0-9]" onkeypress="return !(event.charCode == 46)">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group required">
                                        <label class="control-label">Price</label>
                                        <input type="number" class="form-control" runat="server" id="txtPrice_EditPriceADJ" maxlength="255" min="0" oninput="restrict1(this);">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label>Remark</label>
                                        <input type="text" class="form-control" runat="server" id="txtRemark_EditPriceADJ" maxlength="255">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-default" id="btnSubmit_mdlEditPriceADJ">Submit</button>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>


            <div class="modal fade" id="mdlEditPricePOrderApproval" runat="server" style="display: none;">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <div class="row">
                                <div class="col-md-12">
                                    <h4 class="modal-title">Edit Qty / Price </h4>
                                    <%--<label id="lbl_Index_mdlEditPriceGRN">-1</label>--%>
                                    <input type="hidden" class="form-control" runat="server" id="lbl_Index_mdlEditPricePOrderApproval" >
                                </div>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Qty</label>
                                        <input type="number" class="form-control" runat="server" id="txtQty_EditPricePOrderApproval" maxlength="255" min="1" required value="1" onkeydown="javascript: return event.keyCode === 8 ||event.keyCode === 46 ? true : !isNaN(Number(event.key))">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group required">
                                        <label class="control-label">Price</label>
                                        <input type="number" class="form-control" runat="server" id="txtPrice_EditPricePOrderApproval" maxlength="255" min="0" required value="0" oninput="restrict(this);">
                                    </div>
                                    <!-- /.form-group -->
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label>Remark</label>
                                        <input type="text" class="form-control" runat="server" id="txtRemark_EditPricePOrderApproval" maxlength="255">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-default" id="btnSubmit_mdlEditPricePOrderApproval">Submit</button>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>

            <div class="modal fade" id="mdlSuccessMsg" runat="server" style="display: none;">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <div class="row">
                                <div class="col-md-12">
                                    <h4 class="modal-title">Alert</h4>
                                </div>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-12">
                                        <%--<label id="lbl_text_mdlSuccessMsg"></label>--%>
                                    <input type="text" maxlength="255" id="lbl_text_mdlSuccessMsg" disabled="disabled" style="border:none" runat="server" placeholder="Enter Name">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                        <%--<label id="lbl_DocNo_mdlSuccessMsg"></label>--%>
                                    <input type="text" maxlength="255" id="lbl_DocNo_mdlSuccessMsg" disabled="disabled" style="border:none" runat="server" placeholder="Enter Name">
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" id="btnSubmit_mdlSuccessMsg">Ok</button>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>

            <div class="modal fade" id="mdlAddGRNItem" runat="server" style="display: none;">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <div class="row">
                                <div class="col-md-12">
                                    <h4 class="modal-title">Add Item</h4>GRNItemSearch
                                </div>
                            </div>
                        </div>
                        <div class="modal-body">
                        <table id="stockListingMaster"  clientidmode="Static" class="table table-bordered table-striped datatable" runat="server">
                            <thead>
                                <tr>
                                    <th>NO</th>
                                    <th>Item Code</th>
                                    <th>Item Description</th>
                                    <th>UOM</th>
                                    <th>Brand</th>
                                    <th>Link Code</th>
                                    <th>Range</th>
                                    <th style="text-align:center"><input type="checkbox" id="selectall1" /></th>
                                </tr>
                            </thead>
                        </table>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-default" id="btnSubmit_mdlAddGRNItem">Submit</button>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>


            <header class="main-header">
                <div class="alert alert-success SOHA_Alert hide" id="Alert_Sucess">
                    <button type="button" class="close" data-dismiss="alert">x</button>
                    <strong>Success! </strong>
                    <label id="lblSuccessMessage" class="notbold">Success Message</label>
                </div>
                <div class="alert alert-danger SOHA_Alert hide" id="Alert_Error">
                    <button type="button" class="close" data-dismiss="alert">x</button>
                    <strong>Error! </strong>
                    <label id="lblErrorMessage" class="notbold">Error Message</label>
                </div>
                <div class="alert alert-warning SOHA_Alert hide" id="Alert_Warning">
                    <button type="button" class="close" data-dismiss="alert">x</button>
                    <strong>Warning! </strong>
                    <label id="lblWarningMessage" class="notbold">Warning Message</label>
                </div>

                <!-- Logo -->
                <a href="#" class="logo" >
                    <!-- mini logo for sidebar mini 50x50 pixels -->
                    <span class="logo-mini">
<%--                        <label id="lblInstitutionNameShort" runat="server" class="notbold"></label>--%>
                        <img src="Img/octogonsmall.png" />
                    </span>
                    <!-- logo for regular state and mobile devices -->
                    <span class="logo-lg">
<%--                        <label id="lblInstitutionName" runat="server" class="notbold"></label>--%>
                    <img src="Img/octogonsmall.png" />
                    </span>
                </a>
                <!-- Header Navbar: style can be found in header.less -->
                <nav class="navbar navbar-static-top">
                    <!-- Sidebar toggle button-->
                    <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>

                    </a>

                    <div class="navbar-custom-menu">

                        <ul class="nav navbar-nav">
                                <!-- User Account Menu -->
                                <li>
                                    <a href="UserAuthorization.aspx" runat="server" id="aSetting" class="margin-r-5"><i class="fa fa-gears margin-r-5"></i>Setting</a>
                                </li>
                                <li class="dropdown user user-menu">
                                    <!-- Menu Toggle Button -->
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                        <!-- The user image in the navbar-->
                                        <img src="dist/img/user2-160x160.jpg" class="user-image" alt="User Image">
                                        <!-- hidden-xs hides the username on small devices so only the image appears. -->
                                        <span class="hidden-xs">
                                            <label id="lbl_GlobalUserName" runat="server">Web User</label></span>
                                    </a>
                                    <ul class="dropdown-menu" style="display:none">
                                        <!-- The user image in the menu -->
                                        <li class="user-header">
                                            <img src="dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">
                                            <p>
                                                <label id="lbl_GlobalSignoutUserName" runat="server">Web User</label>
                                            <small>
                                                <label id="lbl_GlobalUserType" runat="server">Web User Type</label></small>
                                            <small>
                                                <label id="lbl_GlobalSignoutUserCode" runat="server">User Code</label></small>
                                            <small>
                                                <label id="lbl_GlobalSignoutSiteCode" runat="server">Site Code</label></small>

                                            </p>
                                        </li>
                                        <!-- Menu Body -->

                                        <!-- Menu Footer-->
                                        <li class="user-footer">
                                            <div class="pull-right">
                                                <%--<a href="Login.aspx" class="btn btn-default btn-flat">Sign out</a>--%>
                                            </div>
                                        </li>

                                    </ul>
                                </li>
                                <li>
                                    <a href="Login.aspx" style="font-weight:bold" runat="server" id="a4" class="dropdown user user-menu"> Sign out</a>
                                </li>
                            </ul>

                        
                    </div>
                </nav>
            </header>
            <!-- =============================================== -->
            <!-- Left side column. contains the sidebar -->
            <aside class="main-sidebar">
                <!-- sidebar: style can be found in sidebar.less -->
                <section class="sidebar">
                    <!-- search form -->
                    <%--<form action="#" method="get" class="sidebar-form">--%>
                    <div class="input-group sidebar-form" style="display:none">
                        <input type="text" id="txtGlobalSearch_Home" runat="server" class="form-control" placeholder="Search">
                        <span class="input-group-btn">
                            <button type="button" name="search" onserverclick="GlobalSearch_Click" runat="server" class="btn btn-flat">
                                <i class="fa fa-search"></i>
                            </button>
                        </span>
                    </div>
                    <%-- </form>--%>
                    <!-- /.search form -->
                    <!-- sidebar menu: : style can be found in sidebar.less -->
 <ul class="sidebar-menu" data-widget="tree">
                        <li class="header"><h4>MAIN MENU</h4> </li>
<%--                        <li id="mDashBoard.aspx">
                            <a href="Products.aspx">
                                <i class="fa fa-dashboard"></i><span>Dash Board 仪表板</span>
                            </a>
                        </li>
                         --%>

                        <li id="mInventory" class="treeview">
                             <a href="#">
                                <i class="fa fa-file"></i><span>Inventory</span>
                                <span class="pull-right-container">
                                    <i class="fa fa-angle-left pull-right"></i>
                                </span>
                            </a>
                            <ul class="treeview-menu">
                                <li><a href="GRNList.aspx" id="GRNList_aspx" runat="server"><i class="fa fa-list-alt"></i>Goods Receive Note</a></li>
                                <li style="display:none"><a href="GRN.aspx"><i class="fa fa-male"></i>Goods Receive Note</a></li>
                                <li><a href="GRNOutList.aspx" id="GRNOutList_aspx" runat="server"><i class="fa fa-tasks "></i>Goods Transfer Out</a></li>
                                <li style="display:none"><a href="GRNOut.aspx"><i class="fa fa-male"></i>Goods Transfer Out</a></li>
                                <li><a href="GRNInList.aspx" id="GRNInList_aspx" runat="server"><i class="fa fa-list "></i>Goods Transfer In</a></li>
                                <li style="display:none"><a href="GRNIn.aspx"><i class="fa fa-male"></i>Goods Transfer In</a></li>
                                <li><a href="GRNReturnList.aspx" id="GRNReturnList_aspx" runat="server"><i class="fa fa-undo "></i>Goods Return Note</a></li>
                                <li style="display:none"><a href="GRNReturn.aspx"><i class="fa fa-male"></i>Goods Return Note</a></li>
                                
                                <li><a href="StockAdjList.aspx" id="StockAdjList_aspx" runat="server"><i class="fa fa-th "></i>Stock Adjustment</a></li>
                                <li style="display:none"><a href="StockAdj.aspx"><i class="fa fa-male"></i>Stock Adjustment</a></li>

                                <li><a href="StkUsageMemoList.aspx" id="StkUsageMemoList_aspx" runat="server"><i class="fa fa-th "></i>Stock Usage Memo</a></li>
                                <li style="display:none"><a href="StockUsageMemo.aspx"><i class="fa fa-male"></i>Stock Usage Memo</a></li>
                                
                                <%--<li><a href="POReqList.aspx" id="PR" runat="server"><i class="fa fa-indent "></i>Outlet PO</a></li>
                                <li style="display:none"><a href="PoRequest.aspx"><i class="fa fa-male"></i>Item Master</a></li>
                                <li><a href="POAppList.aspx" id="PO" runat="server"><i class="fa fa-address-book-o "></i>Invoice With Outlet PO</a></li>
                                <li><a href="DOWithGRNList.aspx" id="A3" runat="server"><i class="fa fa-indent "></i> Delivery Order Approval</a></li>--%>

                                <li style="display:none"><a href="PoApproval.aspx"><i class="fa fa-male"></i>Purchase Approval</a></li>
                                <li><a href="POList.aspx" id="POList_aspx" runat="server"><i class="fa fa-indent "></i>Purchase Order</a></li>
                                <li><a href="POApprovedList.aspx" id="POApprovedList_aspx" runat="server"><i class="fa fa-indent "></i>Approved Purchase Order</a></li>
                                <li><a href="POWithGRNList.aspx" id="POWithGRNList_aspx" runat="server"><i class="fa fa-indent "></i> Purchase Order Approval</a></li>

                                <%--<li style="display:none"><a href="PoApproval.aspx"><i class="fa fa-male"></i>Purchase Approval</a></li>
                                <li><a href="POList.aspx" id="A1" runat="server"><i class="fa fa-indent "></i>Outlet RO</a></li>
                                <li><a href="POApprovedList.aspx" id="A5" runat="server"><i class="fa fa-indent "></i>Approved RO </a></li>
                                <li><a href="POWithGRNList.aspx" id="A2" runat="server"><i class="fa fa-indent "></i> Outlet RO Approval</a></li>--%>

                                <%--<li><a href="StockCount.aspx" id="A4" runat="server"><i class="fa fa-indent "></i> Stock Count</a></li>--%>
                                <li><a href="webBI_StockBalance.aspx" id="webBI_StockBalance_aspx" runat="server"><i class="fa fa-indent "></i> Stock Balance</a></li>
                            </ul>


                        </li>


                    </ul>                </section>
                <!-- /.sidebar -->
            </aside>
            <!-- =============================================== -->
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper" style="padding-bottom: 15px;">

                <asp:ContentPlaceHolder ID="Content_PageBody" runat="server">
                </asp:ContentPlaceHolder>

            </div>
            <!-- /.content-wrapper -->
            <footer class="main-footer fixed">
                <div class="row">
                    <div class="col-md-12">
                        <div class="center-block">
                            <%--<strong>Copyright &copy; 2019 <a href="http://beautesoft.com/">Sequoia Pte. Ltd</a></strong> All rights reserved. <b>Version </b>
                            <label style="font-weight: 500;" runat="server" id="lbl_VersionInfo_Home">X.X.X (Dated:dd/MM/yyyy)</label>--%>
                        </div>
                    </div>
                </div>
            </footer>
            <!-- Control Sidebar -->
            <aside class="control-sidebar control-sidebar-dark">
                <!-- Create the tabs -->
                <ul class="nav nav-tabs nav-justified control-sidebar-tabs">
                    <%--<li><a href="#control-sidebar-home-tab" data-toggle="tab"><i class="fa fa-home"></i></a></li>

      <li><a href="#control-sidebar-settings-tab" data-toggle="tab"><i class="fa fa-gears"></i></a></li>--%>
                </ul>
                <!-- Tab panes -->
                <div class="tab-content">

                    <!-- Home tab content -->
                    <div class="tab-pane" id="control-sidebar-home-tab">
                        <h3 class="control-sidebar-heading">Recent Activity</h3>
                        <ul class="control-sidebar-menu">
                            <li>
                                <a href="javascript:void(0)">
                                    <i class="menu-icon fa fa-birthday-cake bg-red"></i>

                                    <div class="menu-info">
                                        <h4 class="control-sidebar-subheading">Langdon's Birthday</h4>

                                        <p>Will be 23 on April 24th</p>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)">
                                    <i class="menu-icon fa fa-user bg-yellow"></i>

                                    <div class="menu-info">
                                        <h4 class="control-sidebar-subheading">Frodo Updated His Profile</h4>

                                        <p>New phone +1(800)555-1234</p>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)">
                                    <i class="menu-icon fa fa-envelope-o bg-light-blue"></i>

                                    <div class="menu-info">
                                        <h4 class="control-sidebar-subheading">Nora Joined Mailing List</h4>

                                        <p>nora@example.com</p>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)">
                                    <i class="menu-icon fa fa-file-code-o bg-green"></i>

                                    <div class="menu-info">
                                        <h4 class="control-sidebar-subheading">Cron Job 254 Executed</h4>

                                        <p>Execution time 5 seconds</p>
                                    </div>
                                </a>
                            </li>
                        </ul>
                        <!-- /.control-sidebar-menu -->

                        <h3 class="control-sidebar-heading">Tasks Progress</h3>
                        <ul class="control-sidebar-menu">
                            <li>
                                <a href="javascript:void(0)">
                                    <h4 class="control-sidebar-subheading">Custom Template Design
                <span class="label label-danger pull-right">70%</span>
                                    </h4>

                                    <div class="progress progress-xxs">
                                        <div class="progress-bar progress-bar-danger" style="width: 70%"></div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)">
                                    <h4 class="control-sidebar-subheading">Update Resume
                <span class="label label-success pull-right">95%</span>
                                    </h4>

                                    <div class="progress progress-xxs">
                                        <div class="progress-bar progress-bar-success" style="width: 95%"></div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)">
                                    <h4 class="control-sidebar-subheading">Laravel Integration
                <span class="label label-warning pull-right">50%</span>
                                    </h4>

                                    <div class="progress progress-xxs">
                                        <div class="progress-bar progress-bar-warning" style="width: 50%"></div>
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)">
                                    <h4 class="control-sidebar-subheading">Back End Framework
                <span class="label label-primary pull-right">68%</span>
                                    </h4>

                                    <div class="progress progress-xxs">
                                        <div class="progress-bar progress-bar-primary" style="width: 68%"></div>
                                    </div>
                                </a>
                            </li>
                        </ul>
                        <!-- /.control-sidebar-menu -->

                    </div>
                    <!-- /.tab-pane -->
                    <!-- Stats tab content -->
                    <div class="tab-pane" id="control-sidebar-stats-tab">Stats Tab Content</div>
                    <!-- /.tab-pane -->
                    <!-- Settings tab content -->
                    <div class="tab-pane" id="control-sidebar-settings-tab">
                        <%--<form method="post">--%>
                        <h3 class="control-sidebar-heading">General Settings</h3>

                        <div class="form-group">
                            <label class="control-sidebar-subheading">
                                Report panel usage
              <input type="checkbox" class="pull-right" checked>
                            </label>

                            <p>
                                Some information about this general settings option
                            </p>
                        </div>
                        <!-- /.form-group -->

                        <div class="form-group">
                            <label class="control-sidebar-subheading">
                                Allow mail redirect
              <input type="checkbox" class="pull-right" checked>
                            </label>

                            <p>
                                Other sets of options are available
                            </p>
                        </div>
                        <!-- /.form-group -->

                        <div class="form-group">
                            <label class="control-sidebar-subheading">
                                Expose author name in posts
              <input type="checkbox" class="pull-right" checked>
                            </label>

                            <p>
                                Allow the user to show his name in blog posts
                            </p>
                        </div>
                        <!-- /.form-group -->

                        <h3 class="control-sidebar-heading">Chat Settings</h3>

                        <div class="form-group">
                            <label class="control-sidebar-subheading">
                                Show me as online
              <input type="checkbox" class="pull-right" checked>
                            </label>
                        </div>
                        <!-- /.form-group -->

                        <div class="form-group">
                            <label class="control-sidebar-subheading">
                                Turn off notifications
              <input type="checkbox" class="pull-right">
                            </label>
                        </div>
                        <!-- /.form-group -->

                        <div class="form-group">
                            <label class="control-sidebar-subheading">
                                Delete chat history
              <a href="javascript:void(0)" class="text-red pull-right"><i class="fa fa-trash-o"></i></a>
                            </label>
                        </div>
                        <!-- /.form-group -->
                        <%--</form>--%>
                    </div>
                    <!-- /.tab-pane -->
                </div>
            </aside>
            <!-- /.control-sidebar -->
            <!-- Add the sidebar's background. This div must be placed
       immediately after the control sidebar -->
            <div class="control-sidebar-bg">
            </div>
        </div>

        <!-- ./wrapper -->
        <!-- jQuery 3 -->
        <script src="bower_components/jquery/dist/jquery.min.js"></script>
        <!-- Bootstrap 3.3.7 -->
        <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
        <!-- Select2 -->
        <script src="bower_components/select2/dist/js/select2.full.min.js"></script>
        <!-- InputMask -->
        <script src="plugins/input-mask/jquery.inputmask.js"></script>
        <script src="plugins/input-mask/jquery.inputmask.date.extensions.js"></script>
        <script src="plugins/input-mask/jquery.inputmask.extensions.js"></script>
        <!-- Signature Pad -->
        <script src="dist/js/jquery.signaturepad.min.js"></script>


        <!-- date-range-picker -->
        <script src="bower_components/moment/min/moment.min.js"></script>
        <script src="bower_components/bootstrap-daterangepicker/daterangepicker.js"></script>
        <!-- bootstrap datepicker -->
        <script src="bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
        <
        <!-- bootstrap color picker -->

        <script src="bower_components/bootstrap-colorpicker/dist/js/bootstrap-colorpicker.min.js"></script>
        <!-- bootstrap time picker -->
        <script src="plugins/timepicker/bootstrap-timepicker.min.js"></script>
        <!-- SlimScroll -->
        <script src="bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
        <!-- iCheck 1.0.1 -->
        <script src="plugins/iCheck/icheck.min.js"></script>
        <!-- FastClick -->
        <script src="bower_components/fastclick/lib/fastclick.js"></script>
        <!-- AdminLTE App -->
        <script src="dist/js/adminlte.min.js"></script>
        <!-- AdminLTE for demo purposes -->
        <script src="dist/js/demo.js"></script>

        <script src="bower_components/chart.js/Chart.js"></script>

        <!-- ./wrapper -->
        <!-- DataTables -->
        <script src="bower_components/datatables.net/js/jquery.dataTables.min.js"></script>
        <script src="bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
        <!-- Full Calender -->
        <script src="bower_components/moment/moment.js"></script>
        <%--<script src="bower_components/fullcalendar/dist/fullcalendar.min.js"></script>--%>
        <!-- page script -->        

        <script>

            <!--- Time Line --->


        //function toggleIcon(e) {
        //            $(e.target)
        //                .prev('.panel-heading')
        //                .find(".more-less")
        //                .toggleClass('fa fa-minus');
        // }
        // $('.panel-group').on('hidden.bs.collapse', toggleIcon);
        // $('.panel-group').on('shown.bs.collapse', toggleIcon);

            
  

    // Bind panels behaviour to button

   //Abu
            $(document).ready(function () {
                $('#txt_StockName').keyup(function () {
                    $('#txt_StockDesc').val(this.value);
                });
            });


    $(document).ready(function () {
        $('.sidebar-menu').tree();
        var url = window.location.href;
       
         $('ul.sidebar-menu a').filter(function () {
            return this.href == url;
        }).parent().siblings().removeClass('active').end().addClass('active');

        $('ul.sidebar-menu a').filter(function () {
            return this.href == url;
        }).parentsUntil(".sidebar-menu > .treeview-menu li a").siblings().removeClass("active").end().addClass("active");  


        ///ngOnInit() {
            //$(document).ready(() => {
            //    const trees: any = $('[data-widget="tree"]');
            //    trees.tree();
            //});
        //}
          
    });

    $('.select2').select2();

    $(document).ready(function () {
        $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
            $.fn.dataTable.tables({ visible: true, api: true }).columns.adjust();
        });
    });

         
            $(document).ready(function () {
                $('#txtDate_VendorMaster').datepicker();
               
            });


            $(document).ready(function () {

                $('#txt_StartTime').timepicker();
                $('#txt_EndTime').timepicker();

            });
           


  

     //Haji Coding Start


     //cities add function

     $('[id$="btnOutletMaster_City_AddNew"]').click(function () {
        var counter = 0;
        var newRow = $("<tr>");
        var cols = "";
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_CityMaster" runat="server" maxlength="255" placeholder="Enter Code"></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_CityMaster" runat="server" maxlength="255" placeholder="Enter Name"></td>';
        cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_CityMaster editor - active"></td>';
        cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Add_CityMaster  glyphicon glyphicon-plus"></i></div></td>';
        newRow.append(cols);
        $("#tblSiteAddress_City").append(newRow);
        counter++;
        $('[id$="btnOutletMaster_City_AddNew"]').prop('disabled', true);
     });

     $(document).on("click", ".Add_CityMaster", function () {
        var rowIndex = $('#tblSiteAddress_City tr').index($(this).closest('tr'));
        //var _Master = $('[id$="ddlCommonMaster"]').val().replace("'", "");
        var _Master = 'CITY';
        var _Code = $('#txtCode_CityMaster').val().replace("'", "");
        var _Name = $('#txtName_CityMaster').val().replace("'", "");
        var _Checked = $('#tblSiteAddress_City tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        if (_Checked) _Checked = false;else _Checked = true;
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }
        if (_Validation == true) {
            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
            if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_CityMaster editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_CityMaster editor-active"></td>';
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_CityMaster glyphicon glyphicon-pencil"></i></div></td>';
            newRow.append(cols);
            $("#tblSiteAddress_City").append(newRow);
            counter++;
            $('[id$="btnOutletMaster_City_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMasterNew',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
        }
    });

            $(document).on("click", ".chk_CityMaster", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {

                    var rowIndex = $('#tblSiteAddress_City tr').index($(this).closest('tr'));
                    var _Master = 'CITY';
                    var _Code = $('#tblSiteAddress_City tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblSiteAddress_City tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblSiteAddress_City tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) _Checked = false; else _Checked = true;
                    var _ID = $('#tblSiteAddress_City tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;
                    
                }

    });

     $(document).on("click", ".edit_CityMaster", function () {
        var rowIndex = $('#tblSiteAddress_City tr').index($(this).closest('tr'));
        var _Name = $('#tblSiteAddress_City tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblSiteAddress_City tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtNameEdit_CityMaster" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblSiteAddress_City tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_CityMaster glyphicon glyphicon-edit"></i></div>');
        $('#txtNameEdit_CityMaster').val(_Name);
    });

     $(document).on("click", ".editOp_CityMaster", function () {
        var rowIndex = $('#tblSiteAddress_City tr').index($(this).closest('tr'));
        var _Master = 'CITY';
        var _Code = $('#tblSiteAddress_City tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
        var _Name = $('#txtNameEdit_CityMaster').val().replace("'", "");
        var _Checked = $('#tblSiteAddress_City tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        var _ID = $('#tblSiteAddress_City tr').eq(rowIndex).find('td:eq(4)').html();
        if (_Checked) _Checked = false; else _Checked = true;
        var _Validation = true;
        if (_Name == '') {
            _Validation = false;
        }
        if (_Validation == true) {
            $('#tblSiteAddress_City tr').eq(rowIndex).find('td:eq(1)').html(_Name);
            $('#tblSiteAddress_City tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_CityMaster glyphicon glyphicon-pencil"></i></div>');
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMasterUpdate',
                data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
        }

    });

    //state Functions
            
    $('[id$="btnOutletMaster_State_AddNew"]').click(function () {
        var counter = 0;
        var newRow = $("<tr>");
        var cols = "";
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_StateMaster" runat="server" maxlength="255" placeholder="Enter Code"></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_StateMaster" runat="server" maxlength="255" placeholder="Enter Name"></td>';
        cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_StateMaster editor - active"></td>';
        cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Add_StateMaster glyphicon glyphicon-plus"></i></div></td>';
        newRow.append(cols);
        $("#tblSiteAddress_State").append(newRow);
        counter++;
        $('[id$="btnOutletMaster_State_AddNew"]').prop('disabled', true);
    });

    $(document).on("click", ".Add_StateMaster", function () {
        var rowIndex = $('#tblSiteAddress_State tr').index($(this).closest('tr'));
        var _Master = 'STATE';
        var _Code = $('#txtCode_StateMaster').val().replace("'", "");
        var _Name = $('#txtName_StateMaster').val().replace("'", "");
         var _Checked = $('#tblSiteAddress_City tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        if (_Checked) _Checked = false;else _Checked = true;
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }
        if (_Validation == true) {
            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
            if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_StateMaster editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_StateMaster editor-active"></td>';
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_StateMaster glyphicon glyphicon-pencil"></i></div></td>';
            newRow.append(cols);
            $("#tblSiteAddress_State").append(newRow);
            counter++;
            $('[id$="btnOutletMaster_State_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMasterNew',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
        }
            });

            $(document).on("click", ".chk_StateMaster", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {

                    var rowIndex = $('#tblSiteAddress_State tr').index($(this).closest('tr'));
                    var _Master = 'STATE';
                    var _Code = $('#tblSiteAddress_State tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblSiteAddress_State tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblSiteAddress_State tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) _Checked = false; else _Checked = true;
                    var _ID = $('#tblSiteAddress_State tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;                    
                }
    });

     $(document).on("click", ".edit_StateMaster", function () {
        var rowIndex = $('#tblSiteAddress_State tr').index($(this).closest('tr'));
        var _Name = $('#tblSiteAddress_State tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblSiteAddress_State tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtNameEdit_StateMaster" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblSiteAddress_State tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_StateMaster glyphicon glyphicon-edit"></i></div>');
        $('#txtNameEdit_StateMaster').val(_Name);
    });

     $(document).on("click", ".editOp_StateMaster", function () {
        var rowIndex = $('#tblSiteAddress_State tr').index($(this).closest('tr'));
        var _Master = 'STATE';
        var _Code = $('#tblSiteAddress_State tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
        var _Name = $('#txtNameEdit_StateMaster').val().replace("'", "");
        var _Checked = $('#tblSiteAddress_State tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        var _ID = $('#tblSiteAddress_State tr').eq(rowIndex).find('td:eq(4)').html();
        if (_Checked) _Checked = false; else _Checked = true;
        var _Validation = true;
        if (_Name == '') {
            _Validation = false;
        }
        if (_Validation == true) {
            $('#tblSiteAddress_State tr').eq(rowIndex).find('td:eq(1)').html(_Name);
            $('#tblSiteAddress_State tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_StateMaster glyphicon glyphicon-pencil"></i></div>');
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMasterUpdate',
                data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
        }

            });

     //Site Group add function

    $('[id$="btnOutletMaster_SiteGroup_AddNew"]').click(function () {
        var counter = 0;
        var newRow = $("<tr>");
        var cols = "";

        var _ID = $('#tblSite_Group tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblSite_Group tr:last td:last').html();   
        var _Prefix = $('#tblSite_Group tr:last td:nth-child(6)').html();   

        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_SiteGroupMaster" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_SiteGroupMaster" runat="server" maxlength="255" placeholder="Enter Name"></td>';
        cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_SiteGroupMaster editor - active"></td>';
        cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Add_SiteGroupMaster  glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"></td>';
        newRow.append(cols);
         $("#tblSite_Group").append(newRow);
            
        $('#tblSite_Group tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblSite_Group tr:last td:last').html(parseInt(_ControlNo) + 1 + '');   
        $('#tblSite_Group tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblSite_Group tr:last td:nth-child(6)').html(_Prefix);   

        counter++;
         $('[id$="btnOutletMaster_SiteGroup_AddNew"]').prop('disabled', true);
      
    });

    $(document).on("click", ".Add_SiteGroupMaster", function () {
         var rowIndex = $('#tblSite_Group tr').index($(this).closest('tr'));
        var _Master = 'SITE GROUP';
        var _Code = $('#tblSite_Group tr').eq(rowIndex).find('td:eq(0)').html();
        var _ControlNo = $('#tblSite_Group tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtName_SiteGroupMaster').val().replace("'", "");
        var _Checked = $('#tblSite_Group tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        if (_Checked) _Checked = false; else _Checked = true;
        var _ID = $('#tblSite_Group tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblSite_Group tr:last td:nth-child(6)').html();   
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_SiteGroupMaster editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_SiteGroupMaster editor-active"></td>';
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_SiteGroupMaster glyphicon glyphicon-pencil"></i></div></td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblSite_Group").append(newRow);
            counter++;
            $('[id$="btnOutletMaster_SiteGroup_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
    });

            $(document).on("click", ".chk_SiteGroupMaster", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {
                    var rowIndex = $('#tblSite_Group tr').index($(this).closest('tr'));
                    var _Master = 'SITE GROUP';
                    var _Code = $('#tblSite_Group tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblSite_Group tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblSite_Group tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) _Checked = false; else _Checked = true;
                    var _ID = $('#tblSite_Group tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;                 
                }
    });

    $(document).on("click", ".edit_SiteGroupMaster", function () {
        var rowIndex = $('#tblSite_Group tr').index($(this).closest('tr'));
        var _Name = $('#tblSite_Group tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblSite_Group tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtNameEdit_SiteGroupMaster" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblSite_Group tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_SiteGroupMaster glyphicon glyphicon-edit"></i></div>');
        $('#txtNameEdit_SiteGroupMaster').val(_Name);
    });

            $(document).on("click", ".editOp_SiteGroupMaster", function () {
                var rowIndex = $('#tblSite_Group tr').index($(this).closest('tr'));
                var _Master = 'SITE GROUP';
                var _Code = $('#tblSite_Group tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtNameEdit_SiteGroupMaster').val().replace("'", "");
                var _Checked = $('#tblSite_Group tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblSite_Group tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) _Checked = false; else _Checked = true;
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblSite_Group tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblSite_Group tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_SiteGroupMaster glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

    //Country functions

    $('[id$="btnOutletMaster_Country_AddNew"]').click(function () {
        var counter = 0;
        var newRow = $("<tr>");
        var cols = "";
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_CountryMaster" runat="server" maxlength="255" placeholder="Enter Code"></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_CountryMaster" runat="server" maxlength="255" placeholder="Enter Name"></td>';
        cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_CountryMaster editor - active"></td>';
        cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Add_CountryMaster  glyphicon glyphicon-plus"></i></div></td>';
        newRow.append(cols);
        $("#tblSiteAddress_Country").append(newRow);
        counter++;
        $('[id$="btnOutletMaster_Country_AddNew"]').prop('disabled', true);
    });        

    $(document).on("click", ".Add_CountryMaster", function () {
        var rowIndex = $('#tblSiteAddress_Country tr').index($(this).closest('tr'));
        var _Master = 'COUNTRY';
        var _Code = $('#txtCode_CountryMaster').val().replace("'", "");
        var _Name = $('#txtName_CountryMaster').val().replace("'", "");
        var _Checked = $('#tblSiteAddress_Country tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        if (_Checked) _Checked = false;else _Checked = true;
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }
        if (_Validation == true) {
            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
            if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_CountryMaster editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_CountryMaster editor-active"></td>';
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_CountryMaster glyphicon glyphicon-pencil"></i></div></td>';
            newRow.append(cols);
            $("#tblSiteAddress_Country").append(newRow);
            counter++;
            $('[id$="btnOutletMaster_Country_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMasterNew',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
        }
            });

            $(document).on("click", ".chk_CountryMaster", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {

                    var rowIndex = $('#tblSiteAddress_Country tr').index($(this).closest('tr'));
                    var _Master = 'COUNTRY';
                    var _Code = $('#tblSiteAddress_Country tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblSiteAddress_Country tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblSiteAddress_Country tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) _Checked = false; else _Checked = true;
                    var _ID = $('#tblSiteAddress_Country tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;                    
                }

    });

    $(document).on("click", ".edit_CountryMaster", function () {
        var rowIndex = $('#tblSiteAddress_Country tr').index($(this).closest('tr'));
        var _Name = $('#tblSiteAddress_Country tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblSiteAddress_Country tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtNameEdit_CountryMaster" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblSiteAddress_Country tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_CountryMaster glyphicon glyphicon-edit"></i></div>');
        $('#txtNameEdit_CountryMaster').val(_Name);
    });

            $(document).on("click", ".editOp_CountryMaster", function () {
                var rowIndex = $('#tblSiteAddress_Country tr').index($(this).closest('tr'));
                var _Master = 'COUNTRY';
                var _Code = $('#tblSiteAddress_Country tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtNameEdit_CountryMaster').val().replace("'", "");
                var _Checked = $('#tblSiteAddress_Country tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblSiteAddress_Country tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) _Checked = false; else _Checked = true;
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblSiteAddress_Country tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblSiteAddress_Country tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_CountryMaster glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

  

      // Occupation Type

    $('[id$="btnOccupationType_AddNew"]').click(function () {

        var newRow = $("<tr>");
        var cols = "";
        var _ID = $('#tblOccupationType tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblOccupationType tr:last td:last').html();   
        var _Prefix = $('#tblOccupationType tr:last td:nth-child(6)').html();   
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_OccupationType" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_OccupationType" runat="server" maxlength="255" placeholder="Enter Name"></td>';
        cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_OccupationType editor - active"></td>';
        cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="Add_OccupationType glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        newRow.append(cols);
        $("#tblOccupationType").append(newRow);

        $('#tblOccupationType tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblOccupationType tr:last td:last').html(parseInt(_ControlNo) + 1 + '');  
        $('#tblOccupationType tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblOccupationType tr:last td:nth-child(6)').html(_Prefix);   

      //  counter++;
         $('[id$="btnOccupationType_AddNew"]').prop('disabled', true);
      
            });

    $(document).on("click", ".Add_OccupationType", function () {
         var rowIndex = $('#tblOccupationType tr').index($(this).closest('tr'));
        var _Master = 'OCCUPATION TYPE';
        var _Code = $('#tblOccupationType tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblOccupationType tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtName_OccupationType').val().replace("'", "");
        var _Checked = $('#tblOccupationType tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        if (_Checked) _Checked = false; else _Checked = true;
        var _ControlNo = $('#tblOccupationType tr:last td:last').html();   
        var _ID = $('#tblOccupationType tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblOccupationType tr:last td:nth-child(6)').html();   
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_OccupationType editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_OccupationType editor-active"></td>';
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_OccupationType glyphicon glyphicon-pencil"></i></div></td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblOccupationType").append(newRow);
            counter++;
            $('[id$="btnOccupationType_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
            });

            $(document).on("click", ".chk_OccupationType", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {
                    var rowIndex = $('#tblOccupationType tr').index($(this).closest('tr'));
                    var _Master = 'OCCUPATION TYPE';
                    var _Code = $('#tblOccupationType tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblOccupationType tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblOccupationType tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) _Checked = false; else _Checked = true;
                    var _ID = $('#tblOccupationType tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;                 
                }
    });

    $(document).on("click", ".edit_OccupationType", function () {
        var rowIndex = $('#tblOccupationType tr').index($(this).closest('tr'));
        var _Name = $('#tblOccupationType tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblOccupationType tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtNameedit_OccupationType" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblOccupationType tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_OccupationType glyphicon glyphicon-edit"></i></div>');
        $('#txtNameedit_OccupationType').val(_Name);
    });

            $(document).on("click", ".editOp_OccupationType", function () {
                var rowIndex = $('#tblOccupationType tr').index($(this).closest('tr'));
                var _Master = 'OCCUPATION TYPE';
                var _Code = $('#tblOccupationType tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtNameedit_OccupationType').val().replace("'", "");
                var _Checked = $('#tblOccupationType tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblOccupationType tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) _Checked = false; else _Checked = true;
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblOccupationType tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblOccupationType tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_OccupationType glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

     // Occupation Type Ends

      // Source

    $('[id$="btnSource_AddNew"]').click(function () {

        var newRow = $("<tr>");
        var cols = "";
        var _ID = $('#tblSource tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblSource tr:last td:last').html();   
        var _Prefix = $('#tblSource tr:last td:nth-child(6)').html();   
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_Source" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_Source" runat="server" maxlength="255" placeholder="Enter Description"></td>';
        cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_Source editor - active"></td>';
        cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="Add_Source glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        newRow.append(cols);
        $("#tblSource").append(newRow);

        $('#tblSource tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblSource tr:last td:last').html(parseInt(_ControlNo) + 1 + '');  
        $('#tblSource tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblSource tr:last td:nth-child(6)').html(_Prefix);   

      //  counter++;
         $('[id$="btnSource_AddNew"]').prop('disabled', true);
      
            });

     $(document).on("click", ".Add_Source", function () {
         var rowIndex = $('#tblSource tr').index($(this).closest('tr'));
        var _Master = 'SOURCE';
        var _Code = $('#tblSource tr').eq(rowIndex).find('td:eq(0)').html();
        var _ControlNo = $('#tblSource tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtName_Source').val().replace("'", "");
        var _Checked = $('#tblSource tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        //if (_Checked) _Checked = false; else _Checked = true;
         if (_Checked) {
             _Checked = true;
         }
         else {
             _Checked = false;
         }
        var _ControlNo = $('#tblSource tr:last td:last').html();   
        var _ID = $('#tblSource tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblSource tr:last td:nth-child(6)').html();   
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_Source editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_Source editor-active"></td>';
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_Source glyphicon glyphicon-pencil"></i></div></td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblSource").append(newRow);
            counter++;
         $('[id$="btnSource_AddNew"]').prop('disabled', false);
         
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                    alert('Success');
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
            });

            $(document).on("click", ".chk_Source", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {
                    var rowIndex = $('#tblSource tr').index($(this).closest('tr'));
                    var _Master = 'SOURCE';
                    var _Code = $('#tblSource tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblSource tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblSource tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) {
                        _Checked = true;
                    }
                    else {
                        _Checked = false;
                    }
                    var _ID = $('#tblSource tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                    else {
                        return false;                     
                    }
    });

    $(document).on("click", ".edit_Source", function () {
        var rowIndex = $('#tblSource tr').index($(this).closest('tr'));
        var _Name = $('#tblSource tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblSource tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtNameedit_Source" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblSource tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_Source glyphicon glyphicon-edit"></i></div>');
        $('#txtNameedit_Source').val(_Name);
    });

            $(document).on("click", ".editOp_Source", function () {
                var rowIndex = $('#tblSource tr').index($(this).closest('tr'));
                var _Master = 'SOURCE';
                var _Code = $('#tblSource tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtNameedit_Source').val().replace("'", "");
                var _Checked = $('#tblSource tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblSource tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) {
                    _Checked = true;
                }
                else {
                    _Checked = false;
                }
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblSource tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblSource tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_Source glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

     // Source Ends

    // Block Reason

    $('[id$="btnBlockReason_AddNew"]').click(function () {

        var newRow = $("<tr>");
        var cols = "";
        var _ID = $('#tblBlockReasons tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblBlockReasons tr:last td:last').html();   
        var _Prefix = $('#tblBlockReasons tr:last td:nth-child(6)').html();   
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_BlockReasons" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtDesc_BlockReason" runat="server" maxlength="255" placeholder="Enter Description"></td>';
        cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_BlockReason editor - active"></td>';
        cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="Add_BlockReason glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        newRow.append(cols);
        $("#tblBlockReasons").append(newRow);

        $('#tblBlockReasons tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblBlockReasons tr:last td:last').html(parseInt(_ControlNo) + 1 + '');  
        $('#tblBlockReasons tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblBlockReasons tr:last td:nth-child(6)').html(_Prefix);   

      //  counter++;
         $('[id$="btnBlockReason_AddNew"]').prop('disabled', true);
      
            });

    $(document).on("click", ".Add_BlockReason", function () {
         var rowIndex = $('#tblBlockReasons tr').index($(this).closest('tr'));
        var _Master = 'BlockReason';
        var _Code = $('#tblBlockReasons tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblBlockReasons tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtDesc_BlockReason').val().replace("'", "");
        var _Checked = $('#tblBlockReasons tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        if (_Checked) {
             _Checked = true;
         }
         else {
             _Checked = false;
         }
        var _ControlNo = $('#tblBlockReasons tr:last td:last').html();   
        var _ID = $('#tblBlockReasons tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblBlockReasons tr:last td:nth-child(6)').html();   
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_BlockReason editor-active"></td>';
           } else {
               cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_BlockReason editor-active"></td>';
                
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_BlockReason glyphicon glyphicon-pencil"></i></div></td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblBlockReasons").append(newRow);
            counter++;
            $('[id$="btnBlockReason_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
            });

            $(document).on("click", ".chk_BlockReason", function () {


                var confirmation = confirm("Are you sure ?");
                if (confirmation) {

                    var rowIndex = $('#tblBlockReasons tr').index($(this).closest('tr'));
                    var _Master = 'BlockReason';
                    var _Code = $('#tblBlockReasons tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblBlockReasons tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblBlockReasons tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) {
                        _Checked = true;
                    }
                    else {
                        _Checked = false;
                    }
                    var _ID = $('#tblBlockReasons tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;
                    
                }

    });

    $(document).on("click", ".edit_BlockReason", function () {
        var rowIndex = $('#tblBlockReasons tr').index($(this).closest('tr'));
        var _Name = $('#tblBlockReasons tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblBlockReasons tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtNameedit_BlockReason" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblBlockReasons tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_BlockReason glyphicon glyphicon-edit"></i></div>');
        $('#txtNameedit_BlockReason').val(_Name);
    });

            $(document).on("click", ".editOp_BlockReason", function () {
                var rowIndex = $('#tblBlockReasons tr').index($(this).closest('tr'));
                var _Master = 'BlockReason';
                var _Code = $('#tblBlockReasons tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtNameedit_BlockReason').val().replace("'", "");
                var _Checked = $('#tblBlockReasons tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblBlockReasons tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) {
                    _Checked = true;
                }
                else {
                    _Checked = false;
                }
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblBlockReasons tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblBlockReasons tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_BlockReason glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

     // Block Reason Ends

     // Adjustment Reason

    $('[id$="btnAdjustmentReason_AddNew"]').click(function () {

        var newRow = $("<tr>");
        var cols = "";
        var _ID = $('#tblAdjustmentReasons tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblAdjustmentReasons tr:last td:last').html();   
        var _Prefix = $('#tblAdjustmentReasons tr:last td:nth-child(6)').html();   
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_AdjustmentReason" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtDesc_AdjustmentReason" runat="server" maxlength="255" placeholder="Enter Description"></td>';
        cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_AdjustmentReason editor - active"></td>';
        cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="Add_AdjustmentReason glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        newRow.append(cols);
        $("#tblAdjustmentReasons").append(newRow);

        $('#tblAdjustmentReasons tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblAdjustmentReasons tr:last td:last').html(parseInt(_ControlNo) + 1 + '');  
        $('#tblAdjustmentReasons tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblAdjustmentReasons tr:last td:nth-child(6)').html(_Prefix);   

      //  counter++;
         $('[id$="btnAdjustmentReason_AddNew"]').prop('disabled', true);
      
            });

     $(document).on("click", ".Add_AdjustmentReason", function () {
         var rowIndex = $('#tblAdjustmentReasons tr').index($(this).closest('tr'));
        var _Master = 'AdjustmentReason';
        var _Code = $('#tblAdjustmentReasons tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblAdjustmentReasons tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtDesc_AdjustmentReason').val().replace("'", "");
        var _Checked = $('#tblAdjustmentReasons tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
         if (_Checked) {
             _Checked = true;
         }
         else {
             _Checked = false;
         }
        var _ControlNo = $('#tblAdjustmentReasons tr:last td:last').html();   
        var _ID = $('#tblAdjustmentReasons tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblAdjustmentReasons tr:last td:nth-child(6)').html();   
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_AdjustmentReason editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_AdjustmentReason editor-active"></td>';
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_AdjustmentReason glyphicon glyphicon-pencil"></i></div></td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblAdjustmentReasons").append(newRow);
            counter++;
            $('[id$="btnAdjustmentReason_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
            });

     $(document).on("click", ".chk_AdjustmentReason", function () {
         var confirmation = confirm("Are you sure ?");
         if (confirmation) {

             var rowIndex = $('#tblAdjustmentReasons tr').index($(this).closest('tr'));
             var _Master = 'AdjustmentReason';
             var _Code = $('#tblAdjustmentReasons tr').eq(rowIndex).find('td:eq(0)').html();
             var _Name = $('#tblAdjustmentReasons tr').eq(rowIndex).find('td:eq(1)').html();
             var _Checked = $('#tblAdjustmentReasons tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
             if (_Checked) {
                 _Checked = true;
             }
             else {
                 _Checked = false;
             }
             var _ID = $('#tblAdjustmentReasons tr').eq(rowIndex).find('td:eq(4)').html();
             $.ajax({
                 type: "POST",
                 url: 'DashBoard.aspx/CommonMasterUpdate',
                 data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                 contentType: "application/json; charset=utf-8",
                 dataType: "json",
                 success: function (msg) {
                     $("#divResult").html("success");
                 },
                 error: function (e) {
                     $("#divResult").html("Something Wrong.");
                 }
             });
         }
         else {
             return false;
             
         }

    });

    $(document).on("click", ".edit_AdjustmentReason", function () {
        var rowIndex = $('#tblAdjustmentReasons tr').index($(this).closest('tr'));
        var _Name = $('#tblAdjustmentReasons tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblAdjustmentReasons tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtDescedit_AdjustmentReason" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblAdjustmentReasons tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_AdjustmentReason glyphicon glyphicon-edit"></i></div>');
        $('#txtDescedit_AdjustmentReason').val(_Name);
    });

            $(document).on("click", ".editOp_AdjustmentReason", function () {
                var rowIndex = $('#tblAdjustmentReasons tr').index($(this).closest('tr'));
                var _Master = 'AdjustmentReason';
                var _Code = $('#tblAdjustmentReasons tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtDescedit_AdjustmentReason').val().replace("'", "");
                var _Checked = $('#tblAdjustmentReasons tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblAdjustmentReasons tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) {
                    _Checked = true;
                }
                else {
                    _Checked = false;
                }
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblAdjustmentReasons tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblAdjustmentReasons tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_AdjustmentReason glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

    // Adjustment Reason Ends

     // Diagnosis

    $('[id$="btnDiagnosis_AddNew"]').click(function () {

        var newRow = $("<tr>");
        var cols = "";
        var _ID = $('#tblDiagnosis tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblDiagnosis tr:last td:last').html();   
        var _Prefix = $('#tblDiagnosis tr:last td:nth-child(6)').html();   
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_Diagnosis" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtDesc_Diagnosis" runat="server" maxlength="255" placeholder="Enter Description"></td>';
        cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_Diagnosis editor - active"></td>';
        cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="Add_Diagnosis glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        newRow.append(cols);
        $("#tblDiagnosis").append(newRow);

        $('#tblDiagnosis tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblDiagnosis tr:last td:last').html(parseInt(_ControlNo) + 1 + '');  
        $('#tblDiagnosis tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblDiagnosis tr:last td:nth-child(6)').html(_Prefix);   

      //  counter++;
         $('[id$="btnDiagnosis_AddNew"]').prop('disabled', true);
      
            });

     $(document).on("click", ".Add_Diagnosis", function () {
         var rowIndex = $('#tblDiagnosis tr').index($(this).closest('tr'));
        var _Master = 'Diagnosis';
        var _Code = $('#tblDiagnosis tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblDiagnosis tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtDesc_Diagnosis').val().replace("'", "");
        var _Checked = $('#tblDiagnosis tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        if (_Checked) {
             _Checked = true;
         }
         else {
             _Checked = false;
         }
        var _ControlNo = $('#tblDiagnosis tr:last td:last').html();   
        var _ID = $('#tblDiagnosis tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblDiagnosis tr:last td:nth-child(6)').html();   
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_Diagnosis editor-active"></td>';
            } else {
               cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_Diagnosis editor-active"></td>';
                
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_Diagnosis glyphicon glyphicon-pencil"></i></div></td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblDiagnosis").append(newRow);
            counter++;
            $('[id$="btnDiagnosis_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
            });

    $(document).on("click", ".chk_Diagnosis", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {

                    var rowIndex = $('#tblDiagnosis tr').index($(this).closest('tr'));
                    var _Master = 'Diagnosis';
                    var _Code = $('#tblDiagnosis tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblDiagnosis tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblDiagnosis tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) {
                        _Checked = true;
                    }
                    else {
                        _Checked = false;
                    }
                    var _ID = $('#tblDiagnosis tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;
                    
                }
    });

    $(document).on("click", ".edit_Diagnosis", function () {
        var rowIndex = $('#tblDiagnosis tr').index($(this).closest('tr'));
        var _Name = $('#tblDiagnosis tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblDiagnosis tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtDescedit_Diagnosis" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblDiagnosis tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_Diagnosis glyphicon glyphicon-edit"></i></div>');
        $('#txtDescedit_Diagnosis').val(_Name);
    });

            $(document).on("click", ".editOp_Diagnosis", function () {
                var rowIndex = $('#tblDiagnosis tr').index($(this).closest('tr'));
                var _Master = 'Diagnosis';
                var _Code = $('#tblDiagnosis tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtDescedit_Diagnosis').val().replace("'", "");
                var _Checked = $('#tblDiagnosis tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblDiagnosis tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) {
                    _Checked = true;
                }
                else {
                    _Checked = false;
                }
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblDiagnosis tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblDiagnosis tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_Diagnosis glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

    // Diagnosis Ends

    // Item Status Group 

    //$('[id$="btnItemStatusGroup_AddNew"]').click(function () {

    //    var newRow = $("<tr>");
    //    var cols = "";
    //    var _ID = $('#tblItemStatusGroup tr:last td:nth-child(6)').html();  
    //    var _ControlNo = $('#tblItemStatusGroup tr:last td:last').html();   
    //    var _Prefix = $('#tblItemStatusGroup tr:last td:nth-child(7)').html();   
 
    //    cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_ItemStatusGroup" runat="server" maxlength="255" placeholder=""></td>';
    //    cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtDesc_ItemStatusGroup" runat="server" maxlength="255" placeholder="Enter Description"></td>';
    //    cols += '<td style="width: 25%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtShortDesc_ItemStatusGroup" runat="server" maxlength="255" placeholder="Enter Short Description"></td>';
    //    cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_ItemStatusGroup editor - active"></td>';
    //    cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="Add_ItemStatusGroup glyphicon glyphicon-plus"></i></div></td>';
    //    cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
    //    cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
    //    cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
    //    newRow.append(cols);
    //    $("#tblItemStatusGroup").append(newRow);

    //    $('#tblItemStatusGroup tr:last td:first').html(_Prefix + _ControlNo + '');
    //    $('#tblItemStatusGroup tr:last td:last').html(parseInt(_ControlNo) + 1 + '');  
    //    $('#tblItemStatusGroup tr:last td:nth-child(6)').html(parseInt(_ID) + 1 + '');   
    //    $('#tblItemStatusGroup tr:last td:nth-child(7)').html(_Prefix);   

    //  //  counter++;
    //     $('[id$="btnItemStatusGroup_AddNew"]').prop('disabled', true);
      
    //        });

    //  $(document).on("click", ".Add_ItemStatusGroup", function () {
    //     var rowIndex = $('#tblItemStatusGroup tr').index($(this).closest('tr'));
    //    var _Master = 'ItemStatusGroup';
    //    var _Code = $('#tblItemStatusGroup tr').eq(rowIndex).find('td:eq(1)').html();
    //    var _ControlNo = $('#tblItemStatusGroup tr').eq(rowIndex).find('td:last').html();
    //    var _Name = $('#txtDesc_ItemStatusGroup').val().replace("'", "");
    //   // var _Name = $('#txtDesc_ItemStatusGroup').val().replace("'", "");
    //    var _Checked = $('#tblItemStatusGroup tr').eq(rowIndex).find('td:eq(3) input').is(':checked');
    //    if (_Checked) {
    //         _Checked = true;
    //     }
    //     else {
    //         _Checked = false;
    //     }
    //    var _ControlNo = $('#tblItemStatusGroup tr:last td:last').html();   
    //    var _ID = $('#tblItemStatusGroup tr:last td:nth-child(6)').html();  
    //    var _Prefix = $('#tblItemStatusGroup tr:last td:nth-child(7)').html();   
    //    var _Validation = true;
    //    if (_Code == '') {
    //        _Validation = false;
    //    }
    //    if (_Name == '') {
    //        _Validation = false;
    //    }

    //        $(this).closest("tr").remove();
    //        var counter = 0;
    //        var newRow = $("<tr>");
    //        var cols = "";
    //        cols += '<td style="width: 40%;">' + _Code + '</td>';
    //        cols += '<td style="width: 40%;">' + _Name + '</td>';
    //       if (_Checked) {
    //            cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_ItemStatusGroup editor-active"></td>';
    //        } else {
    //            cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_ItemStatusGroup editor-active"></td>';
    //        }
    //        cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_ItemStatusGroup glyphicon glyphicon-pencil"></i></div></td>';
    //        cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
    //        cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
    //        cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
    //        newRow.append(cols);
    //        $("#tblItemStatusGroup").append(newRow);
    //        counter++;
    //        $('[id$="btnItemStatusGroup_AddNew"]').prop('disabled', false);
    //        $.ajax({
    //            type: "POST",
    //            url: 'DashBoard.aspx/CommonMaster',
    //            data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
    //            contentType: "application/json; charset=utf-8",
    //            dataType: "json",
    //            success: function (msg) {
    //                $("#divResult").html("success");
    //            },
    //            error: function (e) {
    //                $("#divResult").html("Something Wrong.");
    //            }
    //        });
    //        });

    //        $(document).on("click", ".chk_ItemStatusGroup", function () {
    //            var confirmation = confirm("Are you sure ?");
    //            if (confirmation) {
    //                var rowIndex = $('#tblItemStatusGroup tr').index($(this).closest('tr'));
    //                var _Master = 'ItemStatusGroup';
    //                var _Code = $('#tblItemStatusGroup tr').eq(rowIndex).find('td:eq(0)').html();
    //                var _Name = $('#tblItemStatusGroup tr').eq(rowIndex).find('td:eq(1)').html();
    //                var _Checked = $('#tblItemStatusGroup tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
    //                if (_Checked) {
    //                    _Checked = true;
    //                }
    //                else {
    //                    _Checked = false;
    //                }
    //                var _ID = $('#tblItemStatusGroup tr').eq(rowIndex).find('td:eq(4)').html();
    //                $.ajax({
    //                    type: "POST",
    //                    url: 'DashBoard.aspx/CommonMasterUpdate',
    //                    data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
    //                    contentType: "application/json; charset=utf-8",
    //                    dataType: "json",
    //                    success: function (msg) {
    //                        $("#divResult").html("success");
    //                    },
    //                    error: function (e) {
    //                        $("#divResult").html("Something Wrong.");
    //                    }
    //                });
    //            }
    //            else {
    //                return false;
                    
    //            }
    //});

    //$(document).on("click", ".edit_ItemStatusGroup", function () {
    //    var rowIndex = $('#tblItemStatusGroup tr').index($(this).closest('tr'));
    //    var _Name = $('#tblItemStatusGroup tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
    //    $('#tblItemStatusGroup tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtDescedit_ItemStatusGroup" runat="server" maxlength="255" placeholder="Enter Description">');
    //    $('#tblItemStatusGroup tr').eq(rowIndex).find('td:eq(2)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtShortDescedit_ItemStatusGroup" runat="server" maxlength="255" placeholder="Enter Short Description">');
    //    $('#tblItemStatusGroup tr').eq(rowIndex).find('td:eq(4)').html('<div class="tools"><i class="editOp_ItemStatusGroup glyphicon glyphicon-edit"></i></div>');
    //    $('#txtDescedit_ItemStatusGroup').val(_Name);
    //});

    //$(document).on("click", ".editOp_ItemStatusGroup", function () {
    //    var rowIndex = $('#tblItemStatusGroup tr').index($(this).closest('tr'));
    //    var _Master = 'ItemStatusGroup';
    //    var _Code = $('#tblItemStatusGroup tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
    //    var _Name = $('#txtDescedit_ItemStatusGroup').val().replace("'", "");
    //    var _Checked = $('#tblItemStatusGroup tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
    //    var _ID = $('#tblItemStatusGroup tr').eq(rowIndex).find('td:eq(4)').html();
    //     if (_Checked) {
    //         _Checked = true;
    //     }
    //     else {
    //         _Checked = false;
    //     }
    //    var _Validation = true;
    //    if (_Name == '') {
    //        _Validation = false;
    //    }
    //    if (_Validation == true) {
    //        $('#tblItemStatusGroup tr').eq(rowIndex).find('td:eq(1)').html(_Name);
    //        $('#tblItemStatusGroup tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_ItemStatusGroup glyphicon glyphicon-pencil"></i></div>');
    //        $.ajax({
    //            type: "POST",
    //            url: 'DashBoard.aspx/CommonMasterUpdate',
    //            data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
    //            contentType: "application/json; charset=utf-8",
    //            dataType: "json",
    //            success: function (msg) {
    //                $("#divResult").html("success");
    //            },
    //            error: function (e) {
    //                $("#divResult").html("Something Wrong.");
    //            }
    //        });
    //    }

    //        })

    // Item Status Group Ends

    // Discount Reason

    $('[id$="btnDiscountReason_AddNew"]').click(function () {

        var newRow = $("<tr>");
        var cols = "";
        var _ID = $('#tblDiscountReasons tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblDiscountReasons tr:last td:last').html();   
        var _Prefix = $('#tblDiscountReasons tr:last td:nth-child(6)').html();   
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_DiscountReason" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtDesc_DiscountReason" runat="server" maxlength="255" placeholder="Enter Description"></td>';
        cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_DiscountReason editor - active"></td>';
        cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="Add_DiscountReason glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        newRow.append(cols);
        $("#tblDiscountReasons").append(newRow);

        $('#tblDiscountReasons tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblDiscountReasons tr:last td:last').html(parseInt(_ControlNo) + 1 + '');  
        $('#tblDiscountReasons tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblDiscountReasons tr:last td:nth-child(6)').html(_Prefix);   

      //  counter++;
         $('[id$="btnDiscountReason_AddNew"]').prop('disabled', true);
      
            });

    $(document).on("click", ".Add_DiscountReason", function () {
         var rowIndex = $('#tblDiscountReasons tr').index($(this).closest('tr'));
        var _Master = 'DiscountReason';
        var _Code = $('#tblDiscountReasons tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblDiscountReasons tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtDesc_DiscountReason').val().replace("'", "");
        var _Checked = $('#tblDiscountReasons tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
         if (_Checked) {
             _Checked = true;
         }
         else {
             _Checked = false;
         }
        var _ControlNo = $('#tblDiscountReasons tr:last td:last').html();   
        var _ID = $('#tblDiscountReasons tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblDiscountReasons tr:last td:nth-child(6)').html();   
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_DiscountReason editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_DiscountReason editor-active"></td>';
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_DiscountReason glyphicon glyphicon-pencil"></i></div></td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblDiscountReasons").append(newRow);
            counter++;
            $('[id$="btnDiscountReason_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
            });

            $(document).on("click", ".chk_DiscountReason", function () {

                var confirmation = confirm("Are you sure ?");
                if (confirmation) {

                    var rowIndex = $('#tblDiscountReasons tr').index($(this).closest('tr'));
                    var _Master = 'DiscountReason';
                    var _Code = $('#tblDiscountReasons tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblDiscountReasons tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblDiscountReasons tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) {
                        _Checked = true;
                    }
                    else {
                        _Checked = false;
                    }
                    var _ID = $('#tblDiscountReasons tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;               
                    
                    
                    
                }

    });

    $(document).on("click", ".edit_DiscountReason", function () {
        var rowIndex = $('#tblDiscountReasons tr').index($(this).closest('tr'));
        var _Name = $('#tblDiscountReasons tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblDiscountReasons tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtDescedit_DiscountReason" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblDiscountReasons tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_DiscountReason glyphicon glyphicon-edit"></i></div>');
        $('#txtDescedit_DiscountReason').val(_Name);
    });

            $(document).on("click", ".editOp_DiscountReason", function () {
                var rowIndex = $('#tblDiscountReasons tr').index($(this).closest('tr'));
                var _Master = 'DiscountReason';
                var _Code = $('#tblDiscountReasons tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtDescedit_DiscountReason').val().replace("'", "");
                var _Checked = $('#tblDiscountReasons tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblDiscountReasons tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) {
                    _Checked = true;
                }
                else {
                    _Checked = false;
                }
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblDiscountReasons tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblDiscountReasons tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_DiscountReason glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

     // Discount Reason Ends

    // FOC Reason 

    //$('[id$="btnFocReason_AddNew"]').click(function () {

    //    var newRow = $("<tr>");
    //    var cols = "";
    //    var _ID = $('#tblFoctReasons tr:last td:nth-child(6)').html();  
    //    var _ControlNo = $('#tblFoctReasons tr:last td:last').html();   
    //    var _Prefix = $('#tblFoctReasons tr:last td:nth-child(7)').html();   
 
    //    cols += '<td style="width: 20%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_FocReason" runat="server" maxlength="255" placeholder=""></td>';
    //    cols += '<td style="width: 30%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtDesc_FocReason" runat="server" maxlength="255" placeholder="Enter Description"></td>';
    //    cols += '<td style="width: 30%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtShortDesc_FocReason" runat="server" maxlength="255" placeholder="Enter Description"></td>';
    //    cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_FocReason editor - active"></td>';
    //    cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Add_FocReason glyphicon glyphicon-plus"></i></div></td>';
    //    cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
    //    cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
    //    cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
    //    newRow.append(cols);
    //    $("#tblFoctReasons").append(newRow);

    //    $('#tblFoctReasons tr:last td:first').html(_Prefix + _ControlNo + '');
    //    $('#tblFoctReasons tr:last td:last').html(parseInt(_ControlNo) + 1 + '');  
    //    $('#tblFoctReasons tr:last td:nth-child(6)').html(parseInt(_ID) + 1 + '');   
    //    $('#tblFoctReasons tr:last td:nth-child(7)').html(_Prefix);   

    //  //  counter++;
    //     $('[id$="btnFocReason_AddNew"]').prop('disabled', true);
      
    //        });

    //$(document).on("click", ".Add_FocReason", function () {
    //     var rowIndex = $('#tblFoctReasons tr').index($(this).closest('tr'));
    //    var _Master = 'FocReason';
    //    var _Code = $('#tblFoctReasons tr').eq(rowIndex).find('td:eq(0)').html();
    //    var _ControlNo = $('#tblFoctReasons tr').eq(rowIndex).find('td:last').html();
    //    var _Name = $('#txtDesc_FocReason').val().replace("'", "");
    //    var _Checked = $('#tblFoctReasons tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
    //     if (_Checked) {
    //         _Checked = true;
    //     }
    //     else {
    //         _Checked = false;
    //     }
    //    var _ControlNo = $('#tblFoctReasons tr:last td:last').html();   
    //    var _ID = $('#tblFoctReasons tr:last td:nth-child(5)').html();  
    //    var _Prefix = $('#tblFoctReasons tr:last td:nth-child(6)').html();   
    //    var _Validation = true;
    //    if (_Code == '') {
    //        _Validation = false;
    //    }
    //    if (_Name == '') {
    //        _Validation = false;
    //    }

    //        $(this).closest("tr").remove();
    //        var counter = 0;
    //        var newRow = $("<tr>");
    //        var cols = "";
    //        cols += '<td style="width: 40%;">' + _Code + '</td>';
    //        cols += '<td style="width: 40%;">' + _Name + '</td>';
    //       if (_Checked) {
    //            cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_FocReason editor-active"></td>';
    //        } else {
    //            cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_FocReason editor-active"></td>';
    //        }
    //        cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_FocReason glyphicon glyphicon-pencil"></i></div></td>';
    //        cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
    //        cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
    //        cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
    //        newRow.append(cols);
    //        $("#tblFoctReasons").append(newRow);
    //        counter++;
    //        $('[id$="btnFocReason_AddNew"]').prop('disabled', false);
    //        $.ajax({
    //            type: "POST",
    //            url: 'DashBoard.aspx/CommonMaster',
    //            data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
    //            contentType: "application/json; charset=utf-8",
    //            dataType: "json",
    //            success: function (msg) {
    //                $("#divResult").html("success");
    //            },
    //            error: function (e) {
    //                $("#divResult").html("Something Wrong.");
    //            }
    //        });
    //        });

    //        $(document).on("click", ".chk_FocReason", function () {
    //            var confirmation = confirm("Are you sure ?");
    //            if (confirmation) {

    //                var rowIndex = $('#tblFoctReasons tr').index($(this).closest('tr'));
    //                var _Master = 'FocReason';
    //                var _Code = $('#tblFoctReasons tr').eq(rowIndex).find('td:eq(0)').html();
    //                var _Name = $('#tblFoctReasons tr').eq(rowIndex).find('td:eq(1)').html();
    //                var _Checked = $('#tblFoctReasons tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
    //                if (_Checked) {
    //                    _Checked = true;
    //                }
    //                else {
    //                    _Checked = false;
    //                }
    //                var _ID = $('#tblFoctReasons tr').eq(rowIndex).find('td:eq(4)').html();
    //                $.ajax({
    //                    type: "POST",
    //                    url: 'DashBoard.aspx/CommonMasterUpdate',
    //                    data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
    //                    contentType: "application/json; charset=utf-8",
    //                    dataType: "json",
    //                    success: function (msg) {
    //                        $("#divResult").html("success");
    //                    },
    //                    error: function (e) {
    //                        $("#divResult").html("Something Wrong.");
    //                    }
    //                });
    //            }
    //            else {
    //                return false;
                    
    //            }
    //});

    //$(document).on("click", ".edit_FocReason", function () {
    //    var rowIndex = $('#tblFoctReasons tr').index($(this).closest('tr'));
    //    var _Name = $('#tblFoctReasons tr').eq(rowIndex).find('td:eq(2)').html().replace("'", "");
    //    $('#tblFoctReasons tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtDescedit_FocReason" runat="server" maxlength="255" placeholder="Enter Name">');
    //    $('#tblFoctReasons tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_FocReason glyphicon glyphicon-edit"></i></div>');
    //    $('#txtDescedit_FocReason').val(_Name);
    //});

    //$(document).on("click", ".editOp_FocReason", function () {
    //    var rowIndex = $('#tblFoctReasons tr').index($(this).closest('tr'));
    //    var _Master = 'FocReason';
    //    var _Code = $('#tblFoctReasons tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
    //    var _Name = $('#txtDescedit_FocReason').val().replace("'", "");
    //    var _Checked = $('#tblFoctReasons tr').eq(rowIndex).find('td:eq(3) input').is(':checked');
    //    var _ID = $('#tblFoctReasons tr').eq(rowIndex).find('td:eq(5)').html();
    //    if (_Checked) {
    //         _Checked = true;
    //     }
    //     else {
    //         _Checked = false;
    //     }
    //    var _Validation = true;
    //    if (_Name == '') {
    //        _Validation = false;
    //    }
    //    if (_Validation == true) {
    //        $('#tblFoctReasons tr').eq(rowIndex).find('td:eq(2)').html(_Name);
    //        $('#tblFoctReasons tr').eq(rowIndex).find('td:eq(5)'.html('<div class="tools"><i class="edit_FocReason glyphicon glyphicon-pencil"></i></div>');
    //        $.ajax({
    //            type: "POST",
    //            url: 'DashBoard.aspx/CommonMasterUpdate',
    //            data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
    //            contentType: "application/json; charset=utf-8",
    //            dataType: "json",
    //            success: function (msg) {
    //                $("#divResult").html("success");
    //            },
    //            error: function (e) {
    //                $("#divResult").html("Something Wrong.");
    //            }
    //        });
    //    }

    //        })

     // FOC Reason ENds

     // Payment Type

    $('[id$="btnPaymentType_AddNew"]').click(function () {

        var newRow = $("<tr>");
        var cols = "";
        var _ID = $('#tblPaymentType tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblPaymentType tr:last td:last').html();   
        var _Prefix = $('#tblPaymentType tr:last td:nth-child(6)').html();   
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_PaymentType" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_PaymentType" runat="server" maxlength="255" placeholder="Enter Name"></td>';
        cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_PaymentType editor - active"></td>';
        cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="Add_PaymentType glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        newRow.append(cols);
        $("#tblPaymentType").append(newRow);

        $('#tblPaymentType tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblPaymentType tr:last td:last').html(parseInt(_ControlNo) + 1 + '');  
        $('#tblPaymentType tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblPaymentType tr:last td:nth-child(6)').html(_Prefix);   

      //  counter++;
         $('[id$="btnPaymentType_AddNew"]').prop('disabled', true);
      
            });

    $(document).on("click", ".Add_PaymentType", function () {
         var rowIndex = $('#tblPaymentType tr').index($(this).closest('tr'));
        var _Master = 'PaymentType';
        var _Code = $('#tblPaymentType tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblPaymentType tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtName_PaymentType').val().replace("'", "");
        var _Checked = $('#tblPaymentType tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
         if (_Checked) {
             _Checked = true;
         }
         else {
             _Checked = false;
         }
        var _ControlNo = $('#tblPaymentType tr:last td:last').html();   
        var _ID = $('#tblPaymentType tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblPaymentType tr:last td:nth-child(6)').html();   
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_PaymentType editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_PaymentType editor-active"></td>';
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_PaymentType glyphicon glyphicon-pencil"></i></div></td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblPaymentType").append(newRow);
            counter++;
            $('[id$="btnPaymentType_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
            });

     $(document).on("click", ".chk_PaymentType", function () {
        var rowIndex = $('#tblPaymentType tr').index($(this).closest('tr'));
         var _Master = 'PaymentType';
        var _Code = $('#tblPaymentType tr').eq(rowIndex).find('td:eq(0)').html();
        var _Name = $('#tblPaymentType tr').eq(rowIndex).find('td:eq(1)').html();
        var _Checked = $('#tblPaymentType tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        if (_Checked) {
             _Checked = true;
         }
         else {
             _Checked = false;
         }
        var _ID = $('#tblPaymentType tr').eq(rowIndex).find('td:eq(4)').html();
        $.ajax({
            type: "POST",
            url: 'DashBoard.aspx/CommonMasterUpdate',
            data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                $("#divResult").html("success");
            },
            error: function (e) {
                $("#divResult").html("Something Wrong.");
            }
        });

    });

    $(document).on("click", ".edit_PaymentType", function () {
        var rowIndex = $('#tblPaymentType tr').index($(this).closest('tr'));
        var _Name = $('#tblPaymentType tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblPaymentType tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtNameedit_PaymentType" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblPaymentType tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_PaymentType glyphicon glyphicon-edit"></i></div>');
        $('#txtNameedit_PaymentType').val(_Name);
    });

            $(document).on("click", ".editOp_PaymentType", function () {
                var rowIndex = $('#tblPaymentType tr').index($(this).closest('tr'));
                var _Master = 'OCCUPATION TYPE';
                var _Code = $('#tblPaymentType tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtNameedit_PaymentType').val().replace("'", "");
                var _Checked = $('#tblPaymentType tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblPaymentType tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) {
                    _Checked = true;
                }
                else {
                    _Checked = false;
                }
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblPaymentType tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblPaymentType tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_PaymentType glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

     // Payment Type Ends

    // Appointment Group

    $('[id$="btnAppointmentGroup_AddNew"]').click(function () {

        var newRow = $("<tr>");
        var cols = "";
        var _ID = $('#tblAppointmentGroup tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblAppointmentGroup tr:last td:last').html();   
        var _Prefix = $('#tblAppointmentGroup tr:last td:nth-child(6)').html();   
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_AppointmentGroup" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtDesc_AppointmentGroup" runat="server" maxlength="255" placeholder="Enter Description"></td>';
        cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_AppointmentGroup editor - active"></td>';
        cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="Add_AppointmentGroup glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        newRow.append(cols);
        $("#tblAppointmentGroup").append(newRow);

        $('#tblAppointmentGroup tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblAppointmentGroup tr:last td:last').html(parseInt(_ControlNo) + 1 + '');  
        $('#tblAppointmentGroup tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblAppointmentGroup tr:last td:nth-child(6)').html(_Prefix);   

      //  counter++;
         $('[id$="btnAppointmentGroup_AddNew"]').prop('disabled', true);
      
            });

    $(document).on("click", ".Add_AppointmentGroup", function () {
         var rowIndex = $('#tblAppointmentGroup tr').index($(this).closest('tr'));
        var _Master = 'AppointmentGroup';
        var _Code = $('#tblAppointmentGroup tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblAppointmentGroup tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtDesc_AppointmentGroup').val().replace("'", "");
        var _Checked = $('#tblAppointmentGroup tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
         if (_Checked) {
             _Checked = true;
         }
         else {
             _Checked = false;
         }
        var _ControlNo = $('#tblAppointmentGroup tr:last td:last').html();   
        var _ID = $('#tblAppointmentGroup tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblAppointmentGroup tr:last td:nth-child(6)').html();   
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_AppointmentGroup editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_AppointmentGroup editor-active"></td>';
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_AppointmentGroup glyphicon glyphicon-pencil"></i></div></td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblAppointmentGroup").append(newRow);
            counter++;
            $('[id$="btnAppointmentGroup_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                    alert('Success');
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
            });

            $(document).on("click", ".chk_AppointmentGroup", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {
                    var rowIndex = $('#tblAppointmentGroup tr').index($(this).closest('tr'));
                    var _Master = 'AppointmentGroup';
                    var _Code = $('#tblAppointmentGroup tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblAppointmentGroup tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblAppointmentGroup tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) {
                        _Checked = true;
                    }
                    else {
                        _Checked = false;
                    }
                    var _ID = $('#tblAppointmentGroup tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;
                    
                }

    });

    $(document).on("click", ".edit_AppointmentGroup", function () {
        var rowIndex = $('#tblAppointmentGroup tr').index($(this).closest('tr'));
        var _Name = $('#tblAppointmentGroup tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblAppointmentGroup tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtDescedit_AppointmentGroup" runat="server" maxlength="255" placeholder="Enter Description">');
        $('#tblAppointmentGroup tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_AppointmentGroup glyphicon glyphicon-edit"></i></div>');
        $('#txtDescedit_AppointmentGroup').val(_Name);
    });

            $(document).on("click", ".editOp_AppointmentGroup", function () {
                var rowIndex = $('#tblAppointmentGroup tr').index($(this).closest('tr'));
                var _Master = 'AppointmentGroup';
                var _Code = $('#tblAppointmentGroup tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtDescedit_AppointmentGroup').val().replace("'", "");
                var _Checked = $('#tblAppointmentGroup tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblAppointmentGroup tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) {
                    _Checked = true;
                }
                else {
                    _Checked = false;
                }
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblAppointmentGroup tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblAppointmentGroup tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_AppointmentGroup glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

     // Appointment Group Ends

     // Transaction Reason

    $('[id$="btnTransactionReason_AddNew"]').click(function () {

        var newRow = $("<tr>");
        var cols = "";

        var _ID = $('#tblTransactionReason tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblTransactionReason tr:last td:last').html();   
        var _Prefix = $('#tblTransactionReason tr:last td:nth-child(6)').html();   
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_TransactionReason" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtDesc_TransactionReason" runat="server" maxlength="255" placeholder="Enter Description"></td>';
        cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_TransactionReason editor - active"></td>';
        cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="Add_TransactionReason glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        newRow.append(cols);
        $("#tblTransactionReason").append(newRow);

        $('#tblTransactionReason tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblTransactionReason tr:last td:last').html(parseInt(_ControlNo) + 1 + '');  
        $('#tblTransactionReason tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblTransactionReason tr:last td:nth-child(6)').html(_Prefix);   

       counter++;
         $('[id$="btnTransactionReason_AddNew"]').prop('disabled', true);
      
            });

    $(document).on("click", ".Add_TransactionReason", function () {
         var rowIndex = $('#tblTransactionReason tr').index($(this).closest('tr'));
        var _Master = 'TransactionReason';
        var _Code = $('#tblTransactionReason tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblTransactionReason tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtDesc_TransactionReason').val().replace("'", "");
        var _Checked = $('#tblTransactionReason tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
         if (_Checked) {
             _Checked = true;
         }
         else {
             _Checked = false;
         }
        var _ControlNo = $('#tblTransactionReason tr:last td:last').html();   
        var _ID = $('#tblTransactionReason tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblTransactionReason tr:last td:nth-child(6)').html();   
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_TransactionReason editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_TransactionReason editor-active"></td>';
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_TransactionReason glyphicon glyphicon-pencil"></i></div></td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblTransactionReason").append(newRow);
            counter++;
            $('[id$="btnTransactionReason_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                    alert('Success');
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
            });

            $(document).on("click", ".chk_TransactionReason", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {

                    var rowIndex = $('#tblTransactionReason tr').index($(this).closest('tr'));
                    var _Master = 'OCCUPATION TYPE';
                    var _Code = $('#tblTransactionReason tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblTransactionReason tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblTransactionReason tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) {
                        _Checked = true;
                    }
                    else {
                        _Checked = false;
                    }
                    var _ID = $('#tblTransactionReason tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;
                    
                }
    });

    $(document).on("click", ".edit_TransactionReason", function () {
        var rowIndex = $('#tblTransactionReason tr').index($(this).closest('tr'));
        var _Name = $('#tblTransactionReason tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblTransactionReason tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtDescedit_TransactionReason" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblTransactionReason tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_TransactionReason glyphicon glyphicon-edit"></i></div>');
        $('#txtDescedit_TransactionReason').val(_Name);
    });

            $(document).on("click", ".editOp_TransactionReason", function () {
                var rowIndex = $('#tblTransactionReason tr').index($(this).closest('tr'));
                var _Master = 'OCCUPATION TYPE';
                var _Code = $('#tblTransactionReason tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtDescedit_TransactionReason').val().replace("'", "");
                var _Checked = $('#tblTransactionReason tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblTransactionReason tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) {
                    _Checked = true;
                }
                else {
                    _Checked = false;
                }
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblTransactionReason tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblTransactionReason tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_TransactionReason glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

     //Transaction Reason Ends

   

    // VOIDTransactionReason

    $('[id$="btnVOIDTransactionReason_AddNew"]').click(function () {

        var newRow = $("<tr>");
        var cols = "";
        var _ID = $('#tblVOIDTransactionReason tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblVOIDTransactionReason tr:last td:last').html();   
        var _Prefix = $('#tblVOIDTransactionReason tr:last td:nth-child(6)').html();   
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_VOIDTransactionReason" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtDesc_VOIDTransactionReason" runat="server" maxlength="255" placeholder="Enter Description"></td>';
        cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_VOIDTransactionReason editor - active"></td>';
        cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="Add_VOIDTransactionReason glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        newRow.append(cols);
        $("#tblVOIDTransactionReason").append(newRow);

        $('#tblVOIDTransactionReason tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblVOIDTransactionReason tr:last td:last').html(parseInt(_ControlNo) + 1 + '');  
        $('#tblVOIDTransactionReason tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblVOIDTransactionReason tr:last td:nth-child(6)').html(_Prefix);   

      //  counter++;
         $('[id$="btnVOIDTransactionReason_AddNew"]').prop('disabled', true);
      
            });

    $(document).on("click", ".Add_VOIDTransactionReason", function () {
         var rowIndex = $('#tblVOIDTransactionReason tr').index($(this).closest('tr'));
        var _Master = 'VOIDTransactionReason';
        var _Code = $('#tblVOIDTransactionReason tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblVOIDTransactionReason tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtDesc_VOIDTransactionReason').val().replace("'", "");
        var _Checked = $('#tblVOIDTransactionReason tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
         if (_Checked) {
             _Checked = true;
         }
         else {
             _Checked = false;
         }
        var _ControlNo = $('#tblVOIDTransactionReason tr:last td:last').html();   
        var _ID = $('#tblVOIDTransactionReason tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblVOIDTransactionReason tr:last td:nth-child(6)').html();   
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
               cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_VOIDTransactionReason editor-active"></td>';
           } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_VOIDTransactionReason editor-active"></td>';
                
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_VOIDTransactionReason glyphicon glyphicon-pencil"></i></div></td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblVOIDTransactionReason").append(newRow);
            counter++;
            $('[id$="btnVOIDTransactionReason_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
            });

     $(document).on("click", ".chk_VOIDTransactionReason", function () {
        var rowIndex = $('#tblVOIDTransactionReason tr').index($(this).closest('tr'));
        var _Master = 'OCCUPATION TYPE';
        var _Code = $('#tblVOIDTransactionReason tr').eq(rowIndex).find('td:eq(0)').html();
        var _Name = $('#tblVOIDTransactionReason tr').eq(rowIndex).find('td:eq(1)').html();
        var _Checked = $('#tblVOIDTransactionReason tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
         if (_Checked) {
             _Checked = true;
         }
         else {
             _Checked = false;
         }
        var _ID = $('#tblVOIDTransactionReason tr').eq(rowIndex).find('td:eq(4)').html();
        $.ajax({
            type: "POST",
            url: 'DashBoard.aspx/CommonMasterUpdate',
            data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                $("#divResult").html("success");
            },
            error: function (e) {
                $("#divResult").html("Something Wrong.");
            }
        });

    });

    $(document).on("click", ".edit_VOIDTransactionReason", function () {
        var rowIndex = $('#tblVOIDTransactionReason tr').index($(this).closest('tr'));
        var _Name = $('#tblVOIDTransactionReason tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblVOIDTransactionReason tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtDescedit_VOIDTransactionReason" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblVOIDTransactionReason tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_VOIDTransactionReason glyphicon glyphicon-edit"></i></div>');
        $('#txtNameedit_VOIDTransactionReason').val(_Name);
    });

            $(document).on("click", ".editOp_VOIDTransactionReason", function () {
                var rowIndex = $('#tblVOIDTransactionReason tr').index($(this).closest('tr'));
                var _Master = 'OCCUPATION TYPE';
                var _Code = $('#tblVOIDTransactionReason tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtDescedit_VOIDTransactionReason').val().replace("'", "");
                var _Checked = $('#tblVOIDTransactionReason tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblVOIDTransactionReason tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) {
                    _Checked = true;
                }
                else {
                    _Checked = false;
                }
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblVOIDTransactionReason tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblVOIDTransactionReason tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_VOIDTransactionReason glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

     // VOIDTransactionReason Ends


      //Customer Type

     $('[id$="btnCustomerMaster_Type_AddNew"]').click(function () {
        var counter = 0;
         var newRow = $("<tr>");
          var cols = "";
        var _ID = $('#tblCustomerType tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblCustomerType tr:last td:last').html();   
        var _Prefix = $('#tblCustomerType tr:last td:nth-child(6)').html();     
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_CustomerTypeMaster" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_CustomerTypeMaster" runat="server" maxlength="255" placeholder="Enter Name"></td>';
        cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_CustomerTypeMaster editor - active"></td>';
         cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Add_CustomerTypeMaster glyphicon glyphicon-plus"></i></div></td>';
         cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        newRow.append(cols);
         $("#tblCustomerType").append(newRow);

         
        $('#tblCustomerType tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblCustomerType tr:last td:last').html(parseInt(_ControlNo) + 1 + '');  
        $('#tblCustomerType tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblCustomerType tr:last td:nth-child(6)').html(_Prefix);   

        //$('#tblCustomerType tr:last td:first').html((parseInt(_ID) + 1) + '');

        counter++;
         $('[id$="btnCustomerMaster_Type_AddNew"]').prop('disabled', true);
      
     });

    $(document).on("click", ".Add_CustomerTypeMaster", function () {
         var rowIndex = $('#tblCustomerType tr').index($(this).closest('tr'));
        var _Master = 'CUSTOMER TYPE';
        var _Code =$('#tblCustomerType tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblCustomerType tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtName_CustomerTypeMaster').val().replace("'", "");
        var _Checked = $('#tblCustomerType tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        if (_Checked) _Checked = false; else _Checked = true;
        var _ControlNo = $('#tblCustomerType tr:last td:last').html();   
        var _ID = $('#tblCustomerType tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblCustomerType tr:last td:nth-child(6)').html();   
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_CustomerTypeMaster editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_CustomerTypeMaster editor-active"></td>';
            }
          cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_CustomerTypeMaster glyphicon glyphicon-pencil"></i></div></td>';
           cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblCustomerType").append(newRow);
            counter++;
            $('[id$="btnCustomerMaster_Type_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
    });

            $(document).on("click", ".chk_CustomerTypeMaster", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {
                    var rowIndex = $('#tblCustomerType tr').index($(this).closest('tr'));
                    var _Master = 'CUSTOMER TYPE';
                    var _Code = $('#tblCustomerType tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblCustomerType tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblCustomerType tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) _Checked = false; else _Checked = true;
                    var _ID = $('#tblCustomerType tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;                 
                }
    });

    $(document).on("click", ".edit_CustomerTypeMaster", function () {
        var rowIndex = $('#tblCustomerType tr').index($(this).closest('tr'));
        var _Name = $('#tblCustomerType tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblCustomerType tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtNameEdit_CustomerTypeMaster" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblCustomerType tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_CustomerTypeMaster glyphicon glyphicon-edit"></i></div>');
        $('#txtNameEdit_CustomerTypeMaster').val(_Name);
    });

            $(document).on("click", ".editOp_CustomerTypeMaster", function () {
                var rowIndex = $('#tblCustomerType tr').index($(this).closest('tr'));
                var _Master = 'CUSTOMER TYPE';
                var _Code = $('#tblCustomerType tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtNameEdit_CustomerTypeMaster').val().replace("'", "");
                var _Checked = $('#tblCustomerType tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblCustomerType tr').eq(rowIndex).find('td:eq(4)').html();

                if (_Checked) _Checked = false; else _Checked = true;
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblCustomerType tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblCustomerType tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_CustomerTypeMaster glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });


    //Customer Group1 

    $('[id$="btnCustomerMaster_Group1_AddNew"]').click(function () {

        var newRow = $("<tr>");
        var cols = "";
        var _ID = $('#tblCustomerGrp1 tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblCustomerGrp1 tr:last td:last').html();   
        var _Prefix = $('#tblCustomerGrp1 tr:last td:nth-child(6)').html();   
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_CustomerGrp1Master" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_CustomerGrp1Master" runat="server" maxlength="255" placeholder="Enter Name"></td>';
        cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_CustomerGrp1Master editor - active"></td>';
        cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="Add_CustomerGrp1Master glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        newRow.append(cols);
        $("#tblCustomerGrp1").append(newRow);

        $('#tblCustomerGrp1 tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblCustomerGrp1 tr:last td:last').html(parseInt(_ControlNo) + 1 + '');  
        $('#tblCustomerGrp1 tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblCustomerGrp1 tr:last td:nth-child(6)').html(_Prefix);   

        counter++;
         $('[id$="btnCustomerMaster_Group1_AddNew"]').prop('disabled', true);
      
    });

    $(document).on("click", ".Add_CustomerGrp1Master", function () {
         var rowIndex = $('#tblCustomerGrp1 tr').index($(this).closest('tr'));
        var _Master = 'CUSTOMER GRP1';
        var _Code = $('#tblCustomerGrp1 tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblCustomerGrp1 tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtName_CustomerGrp1Master').val().replace("'", "");
        var _Checked = $('#tblCustomerGrp1 tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        if (_Checked) _Checked = false; else _Checked = true;
        var _ControlNo = $('#tblCustomerGrp1 tr:last td:last').html();   
        var _ID = $('#tblCustomerGrp1 tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblCustomerGrp1 tr:last td:nth-child(6)').html();   
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_CustomerGrp1Master editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_CustomerGrp1Master editor-active"></td>';
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_CustomerGrp1Master glyphicon glyphicon-pencil"></i></div></td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblCustomerGrp1").append(newRow);
            counter++;
            $('[id$="btnCustomerMaster_Type_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
    });

            $(document).on("click", ".chk_CustomerGrp1Master", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {
                    var rowIndex = $('#tblCustomerGrp1 tr').index($(this).closest('tr'));
                    var _Master = 'CUSTOMER GRP1';
                    var _Code = $('#tblCustomerGrp1 tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblCustomerGrp1 tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblCustomerGrp1 tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) _Checked = false; else _Checked = true;
                    var _ID = $('#tblCustomerGrp1 tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;                 
                }
    });

    $(document).on("click", ".edit_CustomerGrp1Master", function () {
        var rowIndex = $('#tblCustomerGrp1 tr').index($(this).closest('tr'));
        var _Name = $('#tblCustomerGrp1 tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblCustomerGrp1 tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtNameEdit_CustomerGrp1Master" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblCustomerGrp1 tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_CustomerGrp1Master glyphicon glyphicon-edit"></i></div>');
        $('#txtNameEdit_CustomerGrp1Master').val(_Name);
    });

            $(document).on("click", ".editOp_CustomerGrp1Master", function () {
                var rowIndex = $('#tblCustomerGrp1 tr').index($(this).closest('tr'));
                var _Master = 'CUSTOMER GRP1';
                var _Code = $('#tblCustomerGrp1 tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtNameEdit_CustomerGrp1Master').val().replace("'", "");
                var _Checked = $('#tblCustomerGrp1 tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblCustomerGrp1 tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) _Checked = false; else _Checked = true;
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblCustomerGrp1 tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblCustomerGrp1 tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_CustomerGrp1Master glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

      //Customer Group2 

    $('[id$="btnCustomerMaster_Group2_AddNew"]').click(function () {
        var newRow = $("<tr>");
        var cols = "";
        var _ID = $('#tblCustomerGrp2 tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblCustomerGrp2 tr:last td:last').html();   
        var _Prefix = $('#tblCustomerGrp2 tr:last td:nth-child(6)').html();   
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_CustomerGrp2Master" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_CustomerGrp2Master" runat="server" maxlength="255" placeholder="Enter Name"></td>';
        cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_CustomerGrp2Master editor - active"></td>';
        cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="Add_CustomerGrp2Master glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        newRow.append(cols);
        $("#tblCustomerGrp2").append(newRow);

        $('#tblCustomerGrp2 tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblCustomerGrp2 tr:last td:last').html(parseInt(_ControlNo) + 1 + '');
        $('#tblCustomerGrp2 tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblCustomerGrp2 tr:last td:nth-child(6)').html(_Prefix);   

        counter++;
         $('[id$="btnCustomerMaster_Group2_AddNew"]').prop('disabled', true);
      
    });

    $(document).on("click", ".Add_CustomerGrp2Master", function () {
         var rowIndex = $('#tblCustomerGrp2 tr').index($(this).closest('tr'));
        var _Master = 'CUSTOMER GRP2';
        var _Code = $('#tblCustomerGrp2 tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblCustomerGrp2 tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtName_CustomerGrp2Master').val().replace("'", "");
        var _Checked = $('#tblCustomerGrp2 tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        if (_Checked) _Checked = false; else _Checked = true;
        var _ControlNo = $('#tblCustomerGrp2 tr:last td:last').html();   
        var _ID = $('#tblCustomerGrp2 tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblCustomerGrp2 tr:last td:nth-child(6)').html();  
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_CustomerGrp2Master editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_CustomerGrp2Master editor-active"></td>';
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_CustomerGrp2Master glyphicon glyphicon-pencil"></i></div></td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblCustomerGrp2").append(newRow);
            counter++;
            $('[id$="btnCustomerMaster_Group2_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
    });

            $(document).on("click", ".chk_CustomerGrp2Master", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {
                    var rowIndex = $('#tblCustomerGrp2 tr').index($(this).closest('tr'));
                    var _Master = 'CUSTOMER GRP2';
                    var _Code = $('#tblCustomerGrp2 tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblCustomerGrp2 tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblCustomerGrp2 tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) _Checked = false; else _Checked = true;
                    var _ID = $('#tblCustomerGrp2 tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;                 
                }
    });

    $(document).on("click", ".edit_CustomerGrp2Master", function () {
        var rowIndex = $('#tblCustomerGrp2 tr').index($(this).closest('tr'));
        var _Name = $('#tblCustomerGrp2 tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblCustomerGrp2 tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtNameEdit_CustomerGrp2Master" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblCustomerGrp2 tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_CustomerGrp2Master glyphicon glyphicon-edit"></i></div>');
        $('#txtNameEdit_CustomerGrp2Master').val(_Name);
    });

            $(document).on("click", ".editOp_CustomerGrp2Master", function () {
                var rowIndex = $('#tblCustomerGrp2 tr').index($(this).closest('tr'));
                var _Master = 'CUSTOMER GRP2';
                var _Code = $('#tblCustomerGrp2 tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtNameEdit_CustomerGrp2Master').val().replace("'", "");
                var _Checked = $('#tblCustomerGrp2 tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblCustomerGrp2 tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) _Checked = false; else _Checked = true;
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblCustomerGrp2 tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblCustomerGrp2 tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_CustomerGrp2Master glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

    //Customer Group3 

    $('[id$="btnCustomerMaster_Group3_AddNew"]').click(function () {
        var newRow = $("<tr>");
        var cols = "";
        //var _ID = $('#tblCustomerGrp3 tr:last td:nth-child(5)').html();  
        //var _ControlNo = $('#tblCustomerGrp3 tr:last td:last').html();   
        //var _Prefix = $('#tblCustomerGrp3 tr:last td:nth-child(6)').html();   
        var _ControlNo = $('#tblCustomerGrp3 tr:last td:last').html();   
        var _ID = $('#tblCustomerGrp3 tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblCustomerGrp3 tr:last td:nth-child(6)').html();  
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_CustomerGrp3Master" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_CustomerGrp3Master" runat="server" maxlength="255" placeholder="Enter Name"></td>';
        cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_CustomerGrp3Master editor - active"></td>';
        cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="Add_CustomerGrp3Master glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        newRow.append(cols);
        $("#tblCustomerGrp3").append(newRow);

        $('#tblCustomerGrp3 tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblCustomerGrp3 tr:last td:last').html(parseInt(_ControlNo) + 1 + ''); 
        $('#tblCustomerGrp3 tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblCustomerGrp3 tr:last td:nth-child(6)').html(_Prefix);   

        counter++;
         $('[id$="btnCustomerMaster_Group3_AddNew"]').prop('disabled', true);
      
     }); 

    $(document).on("click", ".Add_CustomerGrp3Master", function () {
         var rowIndex = $('#tblCustomerGrp3 tr').index($(this).closest('tr'));
        var _Master = 'CUSTOMER GRP3';
        var _Code = $('#tblCustomerGrp3 tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblCustomerGrp3 tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtName_CustomerGrp3Master').val().replace("'", "");
        var _Checked = $('#tblCustomerGrp3 tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        var _ControlNo = $('#tblCustomerGrp3 tr:last td:last').html();   
        var _ID = $('#tblCustomerGrp3 tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblCustomerGrp3 tr:last td:nth-child(6)').html();  
        if (_Checked) _Checked = false;else _Checked = true;
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_CustomerGrp3Master editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_CustomerGrp3Master editor-active"></td>';
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_CustomerGrp3Master glyphicon glyphicon-pencil"></i></div></td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblCustomerGrp3").append(newRow);
            counter++;
            $('[id$="btnCustomerMaster_Group3_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
    });

            $(document).on("click", ".chk_CustomerGrp3Master", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {
                    var rowIndex = $('#tblCustomerGrp3 tr').index($(this).closest('tr'));
                    var _Master = 'CUSTOMER GRP3';
                    var _Code = $('#tblCustomerGrp3 tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblCustomerGrp3 tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblCustomerGrp3 tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) _Checked = false; else _Checked = true;
                    var _ID = $('#tblCustomerGrp3 tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;                 
                }
    });

    $(document).on("click", ".edit_CustomerGrp3Master", function () {
        var rowIndex = $('#tblCustomerGrp3 tr').index($(this).closest('tr'));
        var _Name = $('#tblCustomerGrp3 tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblCustomerGrp3 tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtNameEdit_CustomerGrp3Master" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblCustomerGrp3 tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_CustomerGrp3Master glyphicon glyphicon-edit"></i></div>');
        $('#txtNameEdit_CustomerGrp3Master').val(_Name);
    });

            $(document).on("click", ".editOp_CustomerGrp3Master", function () {
                var rowIndex = $('#tblCustomerGrp3 tr').index($(this).closest('tr'));
                var _Master = 'CUSTOMER GRP3';
                var _Code = $('#tblCustomerGrp3 tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtNameEdit_CustomerGrp3Master').val().replace("'", "");
                var _Checked = $('#tblCustomerGrp3 tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblCustomerGrp3 tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) _Checked = false; else _Checked = true;
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblCustomerGrp3 tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblCustomerGrp3 tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_CustomerGrp3Master glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

   //Product Group

    $('[id$="btnCustomerMaster_ProductGroup_AddNew"]').click(function () {
        var newRow = $("<tr>");
        var cols = "";
        var _ID = $('#tblProductGrp tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblProductGrp tr:last td:last').html();   
        var _Prefix = $('#tblProductGrp tr:last td:nth-child(6)').html();   
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_ProductGrpMaster" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_ProductGrpMaster" runat="server" maxlength="255" placeholder="Enter Name"></td>';
        cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_ProductGrpMaster editor - active"></td>';
        cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="Add_ProductGrpMaster glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"><div class="tools"></div></td>';
        newRow.append(cols);
        $("#tblProductGrp").append(newRow);

        $('#tblProductGrp tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblProductGrp tr:last td:last').html(parseInt(_ControlNo) + 1 + ''); 
        $('#tblProductGrp tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblProductGrp tr:last td:nth-child(6)').html(_Prefix);   

        counter++;
         $('[id$="btnCustomerMaster_ProductGroup_AddNew"]').prop('disabled', true);
      
     }); 

    $(document).on("click", ".Add_ProductGrpMaster", function () {
         var rowIndex = $('#tblProductGrp tr').index($(this).closest('tr'));
        var _Master = 'PRODUCT GRP';
        var _Code = $('#tblProductGrp tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblProductGrp tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtName_ProductGrpMaster').val().replace("'", "");
        var _Checked = $('#tblProductGrp tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        if (_Checked) _Checked = false; else _Checked = true;
        var _ControlNo = $('#tblProductGrp tr:last td:last').html();   
        var _ID = $('#tblProductGrp tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblProductGrp tr:last td:nth-child(6)').html();
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_ProductGrpMaster editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_ProductGrpMaster editor-active"></td>';
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_ProductGrpMaster glyphicon glyphicon-pencil"></i></div></td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
            cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblProductGrp").append(newRow);
            counter++;
            $('[id$="btnCustomerMaster_ProductGroup_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
    });

            $(document).on("click", ".chk_ProductGrpMaster", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {
                    var rowIndex = $('#tblProductGrp tr').index($(this).closest('tr'));
                    var _Master = 'PRODUCT GRP';
                    var _Code = $('#tblProductGrp tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblProductGrp tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblProductGrp tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) _Checked = false; else _Checked = true;
                    var _ID = $('#tblProductGrp tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;                 
                }
    });

    $(document).on("click", ".edit_ProductGrpMaster", function () {
        var rowIndex = $('#tblProductGrp tr').index($(this).closest('tr'));
        var _Name = $('#tblProductGrp tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblProductGrp tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtNameEdit_ProductGrpMaster" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblProductGrp tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_ProductGrpMaster glyphicon glyphicon-edit"></i></div>');
        $('#txtNameEdit_ProductGrpMaster').val(_Name);
    });

            $(document).on("click", ".editOp_ProductGrpMaster", function () {
                var rowIndex = $('#tblProductGrp tr').index($(this).closest('tr'));
                var _Master = 'PRODUCT GRP';
                var _Code = $('#tblProductGrp tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtNameEdit_ProductGrpMaster').val().replace("'", "");
                var _Checked = $('#tblProductGrp tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblProductGrp tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) _Checked = false; else _Checked = true;
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblProductGrp tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblProductGrp tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_ProductGrpMaster glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

    //Race

    $('[id$="btnCustomerMaster_Race_AddNew"]').click(function () {

        var newRow = $("<tr>");
        var cols = "";
        var _ID = $('#tblRace tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblRace tr:last td:last').html();   
        var _Prefix = $('#tblRace tr:last td:nth-child(6)').html();   
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_CustomerRaceMaster" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_CustomerRaceMaster" runat="server" maxlength="255" placeholder="Enter Name"></td>';
        cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_CustomerRaceMaster editor - active"></td>';
        cols += '<td style="width: 5%; text-align:center;"><div class="tools"><i class="Add_CustomerRaceMaster glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"></td>';
        newRow.append(cols);
        $("#tblRace").append(newRow);

        $('#tblRace tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblRace tr:last td:last').html(parseInt(_ControlNo) + 1 + '');   
        $('#tblRace tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblRace tr:last td:nth-child(6)').html(_Prefix);   

        counter++;
         $('[id$="btnCustomerMaster_Race_AddNew"]').prop('disabled', true);
      
    });

    $(document).on("click", ".Add_CustomerRaceMaster", function () {
        var rowIndex = $('#tblRace tr').index($(this).closest('tr'));
        var _Master = 'RACE';
        var _Code = $('#tblRace tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblRace tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtName_CustomerRaceMaster').val().replace("'", "");
        var _Checked = $('#tblRace tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        if (_Checked) _Checked = false; else _Checked = true;
        var _ControlNo = $('#tblRace tr:last td:last').html();   
        var _ID = $('#tblRace tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblRace tr:last td:nth-child(6)').html();   
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_CustomerRaceMaster editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_CustomerRaceMaster editor-active"></td>';
            }
           cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_CustomerRaceMaster glyphicon glyphicon-pencil"></i></div></td>';
           cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
           cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
           cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblRace").append(newRow);
            counter++;
            $('[id$="btnCustomerMaster_Race_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
    });

            $(document).on("click", ".chk_CustomerRaceMaster", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {
                    var rowIndex = $('#tblRace tr').index($(this).closest('tr'));
                    var _Master = 'RACE';
                    var _Code = $('#tblRace tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblRace tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblRace tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) _Checked = false; else _Checked = true;
                    var _ID = $('#tblRace tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;                    
                }
    });

    $(document).on("click", ".edit_CustomerRaceMaster", function () {
        var rowIndex = $('#tblRace tr').index($(this).closest('tr'));
        var _Name = $('#tblRace tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblRace tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtNameEdit_CustomerRaceMaster" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblRace tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_CustomerRaceMaster glyphicon glyphicon-edit"></i></div>');
        $('#txtNameEdit_CustomerRaceMaster').val(_Name);
    });

            $(document).on("click", ".editOp_CustomerRaceMaster", function () {
                var rowIndex = $('#tblRace tr').index($(this).closest('tr'));
                var _Master = 'RACE';
                var _Code = $('#tblRace tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtNameEdit_CustomerRaceMaster').val().replace("'", "");
                var _Checked = $('#tblRace tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblRace tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) _Checked = false; else _Checked = true;
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblRace tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblRace tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_CustomerRaceMaster glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

    //Age Group

    $('[id$="btnCustomerMaster_AgeGroup_AddNew"]').click(function () {

        var newRow = $("<tr>");
        var cols = "";
        var _ID = $('#tblAgeGroup tr:last td:nth-child(6)').html();  
        var _ControlNo = $('#tblAgeGroup tr:last td:last').html();   
        var _Prefix = $('#tblAgeGroup tr:last td:nth-child(7)').html();   
 
        cols += '<td style="width: 20%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_CustomerAgeGroupMaster" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 20%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtAgeGrp_CustomerAgeGroupMaster" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_CustomerAgeGroupMaster" runat="server" maxlength="255" placeholder="Enter Name"></td>';
        cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_CustomerAgeGroupMaster editor - active"></td>';
        cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Add_CustomerAgeGroupMaster glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none;"></td>';
        cols += '<td style="width: 5%; text-align:center;display:none;"></td>';
        cols += '<td style="width: 5%; text-align:center;display:none;"></td>';
        newRow.append(cols);
        $("#tblAgeGroup").append(newRow);

        $('#tblAgeGroup tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblAgeGroup tr:last td:last').html(parseInt(_ControlNo) + 1 + '');   
        $('#tblAgeGroup tr:last td:nth-child(6)').html(parseInt(_ID) + 1 + '');   
        $('#tblAgeGroup tr:last td:nth-child(7)').html(_Prefix);   

        counter++;
         $('[id$="btnCustomerMaster_AgeGroup_AddNew"]').prop('disabled', true);
      
    });

    $(document).on("click", ".Add_CustomerAgeGroupMaster", function () {
        var rowIndex = $('#tblAgeGroup tr').index($(this).closest('tr'));
        var _Code = $('#tblAgeGroup tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblAgeGroup tr').eq(rowIndex).find('td:last').html();
        var _AgeGrp =  $('#txtAgeGrp_CustomerAgeGroupMaster').val().replace("'", "");
        var _Name = $('#txtName_CustomerAgeGroupMaster').val().replace("'", "");
        var _Checked = $('#tblAgeGroup tr').eq(rowIndex).find('td:eq(3) input').is(':checked');
        if (_Checked) _Checked = false; else _Checked = true;
        var _ControlNo = $('#tblAgeGroup tr:last td:last').html();   
        var _ID = $('#tblAgeGroup tr:last td:nth-child(6)').html();  
        var _Prefix = $('#tblAgeGroup tr:last td:nth-child(7)').html();   
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 20%;">' + _Code + '</td>';
            cols += '<td style="width: 20%;">' + _AgeGrp + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_CustomerAgeGroupMaster editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_CustomerAgeGroupMaster editor-active"></td>';
            }
           cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_CustomerAgeGroupMaster glyphicon glyphicon-pencil"></i></div></td>';
           cols += '<td style="width: 5%; text-align:center">' + _ID + '</td>';
           cols += '<td style="width: 5%; text-align:center">' + _Prefix + '</td>';
           cols += '<td style="width: 5%; text-align:center">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblAgeGroup").append(newRow);
            counter++;
            $('[id$="btnCustomerMaster_AgeGroup_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/AgeGroupMaster',
                data: "{'Code':'" + _Code + "','AgeGroup':'" + _AgeGrp + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
    });

            $(document).on("click", ".chk_CustomerAgeGroupMaster", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {
                    var rowIndex = $('#tblAgeGroup tr').index($(this).closest('tr'));
                    var _Code = $('#tblAgeGroup tr').eq(rowIndex).find('td:eq(0)').html();
                    var _AgeGroup = $('#tblAgeGroup tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Name = $('#tblAgeGroup tr').eq(rowIndex).find('td:eq(2)').html();
                    var _Checked = $('#tblAgeGroup tr').eq(rowIndex).find('td:eq(3) input').is(':checked');
                    if (_Checked) _Checked = false; else _Checked = true;
                    var _ID = $('#tblAgeGroup tr').eq(rowIndex).find('td:eq(5)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/AgeGroupMasterUpdate',
                        data: "{'id':'" + _ID + "','Code':'" + _Code + "','AgeGroup':'" + _AgeGroup + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;                    
                }
    });

    $(document).on("click", ".edit_CustomerAgeGroupMaster", function () {
        var rowIndex = $('#tblAgeGroup tr').index($(this).closest('tr'));
        var _AgeGroup = $('#tblAgeGroup tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        var _Name = $('#tblAgeGroup tr').eq(rowIndex).find('td:eq(2)').html().replace("'", "");
        $('#tblAgeGroup tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtAgeGroupEdit_CustomerAgeGroupMaster" runat="server" maxlength="255" placeholder="Enter Age Group">');
        $('#tblAgeGroup tr').eq(rowIndex).find('td:eq(2)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtNameEdit_CustomerAgeGroupMaster" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblAgeGroup tr').eq(rowIndex).find('td:eq(4)').html('<div class="tools"><i class="editOp_CustomerAgeGroupMaster glyphicon glyphicon-edit"></i></div>');
        $('#txtAgeGroupEdit_CustomerAgeGroupMaster').val(_AgeGroup);
        $('#txtNameEdit_CustomerAgeGroupMaster').val(_Name);
    });

            $(document).on("click", ".editOp_CustomerAgeGroupMaster", function () {
                var rowIndex = $('#tblAgeGroup tr').index($(this).closest('tr'));
                var _Code = $('#tblAgeGroup tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _AgeGroup = $('#txtAgeGroupEdit_CustomerAgeGroupMaster').val().replace("'", "");
                var _Name = $('#txtNameEdit_CustomerAgeGroupMaster').val().replace("'", "");
                var _Checked = $('#tblAgeGroup tr').eq(rowIndex).find('td:eq(3) input').is(':checked');
                var _ID = $('#tblAgeGroup tr').eq(rowIndex).find('td:eq(5)').html();
                if (_Checked) _Checked = false; else _Checked = true;
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblAgeGroup tr').eq(rowIndex).find('td:eq(1)').html(_AgeGroup);
                    $('#tblAgeGroup tr').eq(rowIndex).find('td:eq(2)').html(_Name);
                    $('#tblAgeGroup tr').eq(rowIndex).find('td:eq(4)').html('<div class="tools"><i class="edit_CustomerAgeGroupMaster glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/AgeGroupMasterUpdate',
                        data: "{'id':'" + _ID + "','Code':'" + _Code + "','AgeGroup':'" + _AgeGroup + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

     //Skin Type

    $('[id$="btnCustomerMaster_SkinType_AddNew"]').click(function () {

        var newRow = $("<tr>");
        var cols = "";
        var _ID = $('#tblSkinType tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblSkinType tr:last td:last').html();   
        var _Prefix = $('#tblSkinType tr:last td:nth-child(6)').html();   
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_CustomerSkinTypeMaster" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_CustomerSkinTypeMaster" runat="server" maxlength="255" placeholder="Enter Name"></td>';
        cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_CustomerSkinTypeMaster editor - active"></td>';
        cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="Add_CustomerSkinTypeMaster glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"></td>';
        newRow.append(cols);
        $("#tblSkinType").append(newRow);

        $('#tblSkinType tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblSkinType tr:last td:last').html(parseInt(_ControlNo) + 1 + '');   
        $('#tblSkinType tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblSkinType tr:last td:nth-child(6)').html(_Prefix);   

        counter++;
         $('[id$="btnCustomerMaster_SkinType_AddNew"]').prop('disabled', true);
      
    });

    $(document).on("click", ".Add_CustomerSkinTypeMaster", function () {
        var rowIndex = $('#tblSkinType tr').index($(this).closest('tr'));
        var _Master = 'SKIN TYPE';
        var _Code = $('#tblSkinType tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblSkinType tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtName_CustomerSkinTypeMaster').val().replace("'", "");
        var _Checked = $('#tblSkinType tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        if (_Checked) _Checked = false; else _Checked = true;
        var _ControlNo = $('#tblSkinType tr:last td:last').html();   
        var _ID = $('#tblSkinType tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblSkinType tr:last td:nth-child(6)').html();   
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_CustomerSkinTypeMaster editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_CustomerSkinTypeMaster editor-active"></td>';
            }
           cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_CustomerSkinTypeMaster glyphicon glyphicon-pencil"></i></div></td>';
           cols += '<td style="width: 5%; text-align:center">' + _ID + '</td>';
           cols += '<td style="width: 5%; text-align:center">' + _Prefix + '</td>';
           cols += '<td style="width: 5%; text-align:center">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblSkinType").append(newRow);
            counter++;
            $('[id$="btnCustomerMaster_SkinType_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
    });

            $(document).on("click", ".chk_CustomerSkinTypeMaster", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {
                    var rowIndex = $('#tblSkinType tr').index($(this).closest('tr'));
                    var _Master = 'SKIN TYPE';
                    var _Code = $('#tblSkinType tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblSkinType tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblSkinType tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) _Checked = false; else _Checked = true;
                    var _ID = $('#tblSkinType tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;                 
                }
    });

    $(document).on("click", ".edit_CustomerSkinTypeMaster", function () {
        var rowIndex = $('#tblSkinType tr').index($(this).closest('tr'));
        var _Name = $('#tblSkinType tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblSkinType tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtNameEdit_CustomerSkinTypeMaster" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblSkinType tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_CustomerSkinTypeMaster glyphicon glyphicon-edit"></i></div>');
        $('#txtNameEdit_CustomerSkinTypeMaster').val(_Name);
    });

            $(document).on("click", ".editOp_CustomerSkinTypeMaster", function () {
                var rowIndex = $('#tblSkinType tr').index($(this).closest('tr'));
                var _Master = 'SKIN TYPE';
                var _Code = $('#tblSkinType tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtNameEdit_CustomerSkinTypeMaster').val().replace("'", "");
                var _Checked = $('#tblSkinType tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblSkinType tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) _Checked = false; else _Checked = true;
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblSkinType tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblSkinType tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_CustomerSkinTypeMaster glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });
            
      //Language

    $('[id$="btnCustomerMaster_Language_AddNew"]').click(function () {

        var newRow = $("<tr>");
        var cols = "";
        var _ID = $('#tblLanguage tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblLanguage tr:last td:last').html();   
        var _Prefix = $('#tblLanguage tr:last td:nth-child(6)').html();   
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_CustomerLanguageMaster" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_CustomerLanguageMaster" runat="server" maxlength="255" placeholder="Enter Name"></td>';
        cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_CustomerLanguageMaster editor - active"></td>';
        cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="Add_CustomerLanguageMaster glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"></td>';
        newRow.append(cols);
        $("#tblLanguage").append(newRow);

        $('#tblLanguage tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblLanguage tr:last td:last').html(parseInt(_ControlNo) + 1 + '');   
        $('#tblLanguage tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblLanguage tr:last td:nth-child(6)').html(_Prefix);   

        counter++;
         $('[id$="btnCustomerMaster_Language_AddNew"]').prop('disabled', true);
      
    });

    $(document).on("click", ".Add_CustomerLanguageMaster", function () {
        var rowIndex = $('#tblLanguage tr').index($(this).closest('tr'));
        var _Master = 'LANGUAGE';
        var _Code = $('#tblLanguage tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblLanguage tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtName_CustomerLanguageMaster').val().replace("'", "");
        var _Checked = $('#tblLanguage tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        if (_Checked) _Checked = false; else _Checked = true;
        var _ControlNo = $('#tblLanguage tr:last td:last').html();   
        var _ID = $('#tblLanguage tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblLanguage tr:last td:nth-child(6)').html();   
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_CustomerLanguageMaster editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_CustomerLanguageMaster editor-active"></td>';
            }
           cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_CustomerLanguageMaster glyphicon glyphicon-pencil"></i></div></td>';
           cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
           cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
           cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblLanguage").append(newRow);
            counter++;
            $('[id$="btnCustomerMaster_Language_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
    });

            $(document).on("click", ".chk_CustomerLanguageMaster", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {
                    var rowIndex = $('#tblLanguage tr').index($(this).closest('tr'));
                    var _Master = 'LANGUAGE';
                    var _Code = $('#tblLanguage tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblLanguage tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblLanguage tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) _Checked = false; else _Checked = true;
                    var _ID = $('#tblLanguage tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;                 
                }
    });

    $(document).on("click", ".edit_CustomerLanguageMaster", function () {
        var rowIndex = $('#tblLanguage tr').index($(this).closest('tr'));
        var _Name = $('#tblLanguage tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblLanguage tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtNameEdit_CustomerLanguageMaster" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblLanguage tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_CustomerLanguageMaster glyphicon glyphicon-edit"></i></div>');
        $('#txtNameEdit_CustomerLanguageMaster').val(_Name);
    });

            $(document).on("click", ".editOp_CustomerLanguageMaster", function () {
                var rowIndex = $('#tblLanguage tr').index($(this).closest('tr'));
                var _Master = 'LANGUAGE';
                var _Code = $('#tblLanguage tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtNameEdit_CustomerLanguageMaster').val().replace("'", "");
                var _Checked = $('#tblLanguage tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblLanguage tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) _Checked = false; else _Checked = true;
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblLanguage tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblLanguage tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_CustomerLanguageMaster glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

       //Locations

    $('[id$="btnCustomerMaster_Location_AddNew"]').click(function () {

        var newRow = $("<tr>");
        var cols = "";
        var _ID = $('#tblLocation tr:last td:nth-child(5)').html();  
        var _ControlNo = $('#tblLocation tr:last td:last').html();   
        var _Prefix = $('#tblLocation tr:last td:nth-child(6)').html();   
 
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_CustomerLocationMaster" runat="server" maxlength="255" placeholder=""></td>';
        cols += '<td style="width: 40%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_CustomerLocationMaster" runat="server" maxlength="255" placeholder="Enter Name"></td>';
        cols += '<td style="width: 5%; text-align:center"><input type="checkbox" class="chk_CustomerLocationMaster editor - active"></td>';
        cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="Add_CustomerLocationMaster glyphicon glyphicon-plus"></i></div></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"></td>';
        cols += '<td style="width: 5%; text-align:center;display:none"></td>';
        newRow.append(cols);
        $("#tblLocation").append(newRow);

        $('#tblLocation tr:last td:first').html(_Prefix + _ControlNo + '');
        $('#tblLocation tr:last td:last').html(parseInt(_ControlNo) + 1 + '');   
        $('#tblLocation tr:last td:nth-child(5)').html(parseInt(_ID) + 1 + '');   
        $('#tblLocation tr:last td:nth-child(6)').html(_Prefix);   

        counter++;
         $('[id$="btnCustomerMaster_Location_AddNew"]').prop('disabled', true);
      
    });

    $(document).on("click", ".Add_CustomerLocationMaster", function () {
        var rowIndex = $('#tblLocation tr').index($(this).closest('tr'));
        var _Master = 'LOCATION';
        var _Code = $('#tblLocation tr').eq(rowIndex).find('td:eq(0)').html();
        //var _ControlNo = $('#tblLocation tr').eq(rowIndex).find('td:last').html();
        var _Name = $('#txtName_CustomerLocationMaster').val().replace("'", "");
        var _Checked = $('#tblLocation tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
        if (_Checked) _Checked = false; else _Checked = true;
        var _ControlNo = $('#tblLocation tr:last td:last').html();   
        var _ID = $('#tblLocation tr:last td:nth-child(5)').html();  
        var _Prefix = $('#tblLocation tr:last td:nth-child(6)').html();   
        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }

            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 40%;">' + _Code + '</td>';
            cols += '<td style="width: 40%;">' + _Name + '</td>';
           if (_Checked) {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" class="chk_CustomerLocationMaster editor-active"></td>';
            } else {
                cols += '<td style="width: 10%; text-align:center"><input type="checkbox" checked class="chk_CustomerLocationMaster editor-active"></td>';
            }
           cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_CustomerLocationMaster glyphicon glyphicon-pencil"></i></div></td>';
           cols += '<td style="width: 5%; text-align:center;display:none">' + _ID + '</td>';
           cols += '<td style="width: 5%; text-align:center;display:none">' + _Prefix + '</td>';
           cols += '<td style="width: 5%; text-align:center;display:none">' + _ControlNo + '</td>';
            newRow.append(cols);
            $("#tblLocation").append(newRow);
            counter++;
            $('[id$="btnCustomerMaster_Location_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DashBoard.aspx/CommonMaster',
                data: "{'Master':'" + _Master + "','Operation':'S','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "','controlNo':'" + _ControlNo + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
    });

            $(document).on("click", ".chk_CustomerLocationMaster", function () {
                var confirmation = confirm("Are you sure ?");
                if (confirmation) {
                    var rowIndex = $('#tblLocation tr').index($(this).closest('tr'));
                    var _Master = 'LOCATION';
                    var _Code = $('#tblLocation tr').eq(rowIndex).find('td:eq(0)').html();
                    var _Name = $('#tblLocation tr').eq(rowIndex).find('td:eq(1)').html();
                    var _Checked = $('#tblLocation tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                    if (_Checked) _Checked = false; else _Checked = true;
                    var _ID = $('#tblLocation tr').eq(rowIndex).find('td:eq(4)').html();
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                else {
                    return false;                 
                }
    });

    $(document).on("click", ".edit_CustomerLocationMaster", function () {
        var rowIndex = $('#tblLocation tr').index($(this).closest('tr'));
        var _Name = $('#tblLocation tr').eq(rowIndex).find('td:eq(1)').html().replace("'", "");
        $('#tblLocation tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control " id="txtNameEdit_CustomerLocationMaster" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#tblLocation tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_CustomerLocationMaster glyphicon glyphicon-edit"></i></div>');
        $('#txtNameEdit_CustomerLocationMaster').val(_Name);
    });

            $(document).on("click", ".editOp_CustomerLocationMaster", function () {
                var rowIndex = $('#tblLocation tr').index($(this).closest('tr'));
                var _Master = 'LOCATION';
                var _Code = $('#tblLocation tr').eq(rowIndex).find('td:eq(0)').html().replace("'", "");
                var _Name = $('#txtNameEdit_CustomerLocationMaster').val().replace("'", "");
                var _Checked = $('#tblLocation tr').eq(rowIndex).find('td:eq(2) input').is(':checked');
                var _ID = $('#tblLocation tr').eq(rowIndex).find('td:eq(4)').html();
                if (_Checked) _Checked = false; else _Checked = true;
                var _Validation = true;
                if (_Name == '') {
                    _Validation = false;
                }
                if (_Validation == true) {
                    $('#tblLocation tr').eq(rowIndex).find('td:eq(1)').html(_Name);
                    $('#tblLocation tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_CustomerLocationMaster glyphicon glyphicon-pencil"></i></div>');
                    $.ajax({
                        type: "POST",
                        url: 'DashBoard.aspx/CommonMasterUpdate',
                        data: "{'id':'" + _ID + "','Master':'" + _Master + "','Operation':'U','Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }

            });

    //Customer Class

    $('[id$="btnOperation"]').click(function () {

                var details = [];
                var rows = $('#tblDiscount tbody >tr');
                 var columns;
                var classid = $('[id$="txtClassID"]').val();
                 for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.departmentid = Number($(columns[3]).html());
                    obj.classid = Number(classid);
                    var txtdis = $(columns[2]).find('input');
                    obj.discount = txtdis.val();
                    obj.isactive = 1;
                    details.push(obj);
                }

                $.ajax({
                    type: "POST",
                    url: "CustomerClass.aspx/AddDepartmentDiscountsData",
                    data: '{Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                        //alert(r.d);
                    }
                });

        });

    $(".btnFillter_TemplateList .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#TemplateList').DataTable();
        table
            .column(4)
            .search(inputValue)
            .draw();
    });

    $(".btnFillter_LeadGroupList .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#LeadGroupList').DataTable();
        table
            .column(4)
            .search(inputValue)
            .draw();
    });

    $(".btnFillter_LeadMaster .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#LeadMaster').DataTable();
        table
            .column(5)
            .search(inputValue)
            .draw();
    });

    $(".btnFillter_CampaignMaster .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#CampaignMaster').DataTable();
        table
            .column(4)
            .search(inputValue)
            .draw();
    });

    $(".btnFillter_ActivityList .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#ActivityList').DataTable();
        table
            .column(6)
            .search(inputValue)
            .draw();
    });

    </script>
        
    <script>
                    
            function PaymentCalculation() {
                var _Cash = 0;
                var _Cashless = 0;
                var _Card = 0;
                var _Check = 0;
                var _Claims = 0;
                var _Adjustment = 0;
                var _OnlineTransfer = 0;
                var _Voucher = 0;
                var _Total = 0;
                var _Overall = 0;
                var _BalanceDue = 0;

                if ($("#mdlAddPaymentMean #txtCashSum_mdlAddPaymentMean").val() != '') { _Cash = parseFloat($("#mdlAddPaymentMean #txtCashSum_mdlAddPaymentMean").val()) };
                if ($("#mdlAddPaymentMean #txtCashlessSum_mdlAddPaymentMean").val() != '') { _Cashless = parseFloat($("#mdlAddPaymentMean #txtCashlessSum_mdlAddPaymentMean").val()) };
                if ($("#mdlAddPaymentMean #txtCardSum_mdlAddPaymentMean").val() != '') { _Card = parseFloat($("#mdlAddPaymentMean #txtCardSum_mdlAddPaymentMean").val()) };
                if ($("#mdlAddPaymentMean #txtCheckSum_mdlAddPaymentMean").val() != '') { _Check = parseFloat($("#mdlAddPaymentMean #txtCheckSum_mdlAddPaymentMean").val()) };
                if ($("#mdlAddPaymentMean #txtTransferSum_mdlAddPaymentMean").val() != '') { _OnlineTransfer = parseFloat($("#mdlAddPaymentMean #txtTransferSum_mdlAddPaymentMean").val()) };
                if ($("#mdlAddPaymentMean #txtVoucherSum_mdlAddPaymentMean").val() != '') { _Voucher = parseFloat($("#mdlAddPaymentMean #txtVoucherSum_mdlAddPaymentMean").val()) };
                if ($("#mdlAddPaymentMean #lbl_mdlAddPaymentMean_For").text() == 'Invoice') {
                    _Total = parseFloat($('[id$="lblInvoiceTotal_Invoice"]').text());
                }
                else {
                    _Total = parseFloat($('[id$="lblPaymentTotal_Payment"]').text());
                }

                $('#InvoiceClaim_mdlAddPaymentMean').find('tr').each(
                  function (i) {
                      if (i > 0) {
                          if ($('#txtAmount_mdlAddPaymentMean_' + i + '').val() != '') {


                              _Claims = parseFloat(_Claims) + parseFloat($('#txtAmount_mdlAddPaymentMean_' + i + '').val());


                          }
                      }
                  });

                $('#InvoiceAdjustment_mdlAddPaymentMean').find('tr').each(
                 function (i) {
                     if (i > 0) {
                         if ($('#txtAdjAmount_mdlAddPaymentMean_' + i + '').val() != '') {

                             _Adjustment = parseFloat(_Adjustment) + parseFloat($('#txtAdjAmount_mdlAddPaymentMean_' + i + '').val());

                         }
                     }
                 });



                _Overall = _Cash + _Cashless + _Card + _Check + _OnlineTransfer + _Claims + _Voucher + _Adjustment;
                _BalanceDue = _Total - _Overall;

                $("#mdlAddPaymentMean #lblTotalAmount_mdlAddPaymentMean").text(_Total.toFixed(2));
                $("#mdlAddPaymentMean #lblOverAllAmount_mdlAddPaymentMean").text(_Overall.toFixed(2));
                $("#mdlAddPaymentMean #lblBalanceDueAmount_mdlAddPaymentMean").text(_BalanceDue.toFixed(2));
                if ($("#mdlAddPaymentMean #lbl_mdlAddPaymentMean_For").text() == 'Invoice') {
                    $('[id$="lblPaymentMean_Cash_Invoice"]').text(_Cash.toFixed(2));
                    $('[id$="lblPaymentMean_Cashless_Invoice"]').text(_Cashless.toFixed(2));
                    $('[id$="lblPaymentMean_Card_Invoice"]').text(_Card.toFixed(2));
                    $('[id$="lblPaymentMean_Check_Invoice"]').text(_Check.toFixed(2));
                    $('[id$="lblPaymentMean_Transfer_Invoice"]').text(_OnlineTransfer.toFixed(2));
                    $('[id$="lblPaymentMean_Voucher_Invoice"]').text(_Voucher.toFixed(2));
                    $('[id$="lblPaymentMean_Adjustment_Invoice"]').text(_Adjustment.toFixed(2));
                    $('[id$="lblPaymentMean_PaymentTotal_Invoice"]').text(_Overall.toFixed(2));
                    $('[id$="lblInvoiceAmountDue_Invoice"]').text(_BalanceDue.toFixed(2));
                }
                else {
                    $('[id$="lblPaymentMean_Cash_Payment"]').text(_Cash.toFixed(2));
                    $('[id$="lblPaymentMean_Cashless_Payment"]').text(_Cashless.toFixed(2));
                    $('[id$="lblPaymentMean_Card_Payment"]').text(_Card.toFixed(2));
                    $('[id$="lblPaymentMean_Check_Payment"]').text(_Check.toFixed(2));
                    $('[id$="lblPaymentMean_Transfer_Payment"]').text(_OnlineTransfer.toFixed(2));
                    $('[id$="lblPaymentMean_Voucher_Payment"]').text(_Voucher.toFixed(2));
                    $('[id$="lblPaymentMean_PaymentTotal_Payment"]').text(_Overall.toFixed(2));
                }

        };

        function fnEvaluationRadio(_Session, _Row, Value) {
            $.ajax({
                type: "POST",
                url: 'CourseEvaluation.aspx/UpdateSurvey',
                data: "{'Session':'" + _Session + "','Row':'" + _Row + "','Value':'" + Value + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
        }
        

         //Mari 

            $(function () {
                $('#StudentMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=StudentList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Code/Name/ID/Contact"
                    },
                    'columns': [
                      {
                          'data': 'StudentCode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="StudentMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                      }, null, null, null, null, { "sType": "date-uk" },
                       {
                           'data': 'Balance',
                           'render': function (data, type, row, meta) {
                               data = '<a href="StudentAccount.aspx?PKey=' + row[0] + '">' + row[6] + '</b>';
                               return data;
                           }
                       }, null]
                })
            });

               //$(function () {
               // $('#TaskMaster').DataTable({
               //     'sAjaxSource': 'Utilities/DataModels.ashx?ID=TaskList',
               //     'paging': true,
               //     'lengthChange': true,
               //     'searching': true,
               //     'ordering': true,
               //     'info': true,
               //     'autoWidth': true,
               //     language: {
               //         searchPlaceholder: "Search By Code/Name/ID/Contact"
               //     },
               //     'columns': [
               //         null,null
               //     ]
               // })
               //});

            function VocherClick(element) {
                if (element.checked) {
                    document.getElementById('VoucherDate_ItemMaster').style.display = "";
                }
                else {
                    document.getElementById('VoucherDate_ItemMaster').style.display = "none";
                }

            }

            function ReorderClick(element) {
                if (element.checked) {
                    document.getElementById('Reorderlevel_ItemMaster').style.display = "";
                }
                else {
                    document.getElementById('Reorderlevel_ItemMaster').style.display = "none";
                }

            }

            function ReplenishmentClick(element) {
                if (element.checked) {
                    document.getElementById('Replenishment_ItemMaster').style.display = "";
                    document.getElementById('Replenishment_ItemMaster1').style.display = "";
                }
                else {
                    document.getElementById('Replenishment_ItemMaster').style.display = "none";
                    document.getElementById('Replenishment_ItemMaster1').style.display = "none";
                }

            }



             $("#chk_ReplenishmentItemMaster").click( function(){
                var _val = $(this).is(':checked') ? 'checked' : 'unchecked';
                if (_val == 'unchecked') {
                    document.getElementById('Replenishment_ItemMaster').style.display = "none";
                }
                else {
                    document.getElementById('Replenishment_ItemMaster').style.display = "";
                }

             });


             $("#selectall").click(function () {
        $(".case").prop('checked', $(this).prop('checked'));
    });
    
    $(".case").change(function(){
        if (!$(this).prop("checked")){
            $("#selectall").prop("checked",false);
        }
    });



            $(function () {
                $('#TaskMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=TaskList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Code/Name/ID/Contact"
                    },
                    'columns': [
                        null, null
                    ]
                });
            });

            $(function () {
                $('#ItemUsageMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=ItemUsage',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Description/Item Code/Barcode"
                    },
                    'columns': [
                        null, null, null,
                        {
                            'data': null,
                            'render': function (data, type, row, meta) {
                                data = '<i class="edit_mdlAddItemUsage glyphicon glyphicon-pencil"></i></a>';
                                return data;
                            }
                        }


                    ]
                });
            });

            $(document).on("click", ".edit_mdlAddItemUsage", function () {
                var rowIndex = $('#ItemUsageMaster tr').index($(this).closest('tr'));
                var itemcode = $('#ItemUsageMaster tr').eq(rowIndex).find('td:eq(1)').html();
                $('#mdlAddItemUOm__Uom').find('option').remove();
                $.ajax({
                    type: "POST",
                    url: 'Utilities/DataModels.ashx?ID=UsageUomPrice&PKey=' + itemcode + '',
                    dataType: "json",
                    Cache: false,
                    success: function (data) {
                        var JsonArray = JSON.stringify(data);
                        var Json = JSON.parse(JsonArray);
                        var div_data = "";
                        for (i = 0; i < Json.aaData.length; i++) {
                            div_data += "<option value=" + Json.aaData[i][0] + ">" + Json.aaData[i][1] + "</option>";
                        }
                        $('#mdlAddItemUOm__Uom').append(div_data);
                    }
                });

        $("#mdlAddItemUOm").modal();
                $("#mdlAddItemUOm #lbl_Type_mdlAddItemUOm").text('Edit');

        $("#mdlAddItemUOm #lbl_Index_mdlAddItemUOm").text(rowIndex);
        $("#mdlAddItemUOm #mdlAddItemUOm_ItemCode").val($('#ItemUsageMaster tr').eq(rowIndex).find('td:eq(1)').html());
        $("#mdlAddItemUOm #mdlAddItemUOm_ItemDesc").val($('#ItemUsageMaster tr').eq(rowIndex).find('td:eq(0)').html()).trigger();
             });


               $('[id$="btnSubmit_mdlAddItemUOm"]').click(function () {
                   var searchString = $('#mdlAddItemUOm_ItemCode').val();
                   if (valueInTable('ItemUsageMasterModule', 0, searchString)) { 
                    $("#mdlAddItemUOm").modal('hide');
                    alert("already Exists");
                    return false;
                   }
                   //var table = document.getElementById("ItemUsageMasterModule");
                   //var rows = my_table.getElementsByTagName("tr");
                   // for(var i = 1; i < rows.length; i++) {
    		             //   var cells = rows.length[i].nodeValue;
    		             //   alert(cells);
                   //}


                   // $("#ItemUsageMasterModule tr td:nth-child(0)").each(function () {
                   // var texttocheck = this.innerText.trim();
                   // if (texttocheck == searchString) {
                   //     var errMsg = "user already exists in the list";
                   //     alert(errMsg);
                   //     return false;
                   // }
                   // return false;
                   //});


                var counter = 0;
                var newRow = $("<tr>");
                var cols = "";
                cols += '<td>' + $('#mdlAddItemUOm_ItemCode').val().replace("'", "") + '</td>';
                cols += '<td>' + $('#mdlAddItemUOm_ItemDesc').val().replace("'", "") + '</td>';
                cols += '<td>' + $('#mdlAddItemUOm_Qty').val().replace("'", "") + '</td>';
                cols += '<td>' + $('#mdlAddItemUOm__Uom').val().replace("'", "") + '</td>';
                cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Remove_mdlAddItemUOm glyphicon glyphicon-trash"></i></div></td>';
                newRow.append(cols);
                $("#ItemUsageMasterModule").append(newRow);
                counter++;
                $("#mdlAddItemUOm").modal('hide');
               });

            $(document).on("click", ".Remove_mdlAddItemUOm", function () {
        var rowIndex = $('#ItemUsageMasterModule tr').index($(this).closest('tr'));
        $(this).closest("tr").remove();
            });


            function valueInTable(tableID, columnNum, searchString)
            {
                var found = false;
                $("#ItemUsageMasterModule tr").each(function () {
                var itemCode = $(this).find("td").eq(0).html();
                if (itemCode == searchString)
                    {
                        found = true;
                        return false;
                    }
             });

                return found;
            }


            



            //$("#chkAmnt_VoucherItemMaster").click( function(){
            //    var _val = $(this).is(':checked') ? 'checked' : 'unchecked';
            //    if (_val == 'checked') {
            //        document.getElementById('chkPercent_VoucherItemMaster').checked  = false;
            //    }
            //    else {
            //        document.getElementById('chkPercent_VoucherItemMaster').checked = true;
            //    }

            //});

            //$("#chkPercent_Voucher").click( function(){
            //    var _val = $(this).is(':checked') ? 'checked' : 'unchecked';
            //    if (_val == 'checked') {
            //        document.getElementById('chkAmnt_Voucher').checked  = false;
            //    }
            //    else {
            //        document.getElementById('chkAmnt_Voucher').checked = true;
            //    }

            //});



            $("#chk_InclusiveAll").click( function(){
                var _val = $(this).is(':checked') ? 'checked' : 'unchecked';
                if (_val == 'checked') {
                    //$('#ddl_InclusiveDept').empty();
                    document.getElementById('ddl_InclusiveDept').disabled =true;
                }
                else {
                    document.getElementById('ddl_InclusiveDept').disabled =false;
                }

            });

            $('[id$="ddl_InclusiveType"]').change(function () {
                var type = this.value;
                 $.ajax({
                    type: "POST",
                    url: 'Utilities/DataModels.ashx?ID=PrepaidDept&PKey=' + type + '',
                    dataType: "json",
                    Cache: false,
                    success: function (data) {
                        var JsonArray = JSON.stringify(data);
                        var Json = JSON.parse(JsonArray);
                        var div_data = ""
                        for (i = 0; i < Json.aaData.length; i++) {
                            div_data += "<option value=" + Json.aaData[i][1] + ">" + Json.aaData[i][1] + "</option>";
                        }
                        $('#ddl_InclusiveDept').empty().append(div_data);
                    }
                 });
            });

            $('[id$="ddl_ExclusiveType"]').change(function () {
                var type = this.value;
                 $.ajax({
                    type: "POST",
                    url: 'Utilities/DataModels.ashx?ID=PrepaidDept&PKey=' + type + '',
                    dataType: "json",
                    Cache: false,
                    success: function (data) {
                        var JsonArray = JSON.stringify(data);
                        var Json = JSON.parse(JsonArray);
                        var div_data = ""
                        for (i = 0; i < Json.aaData.length; i++) {
                            div_data += "<option value=" + Json.aaData[i][1] + ">" + Json.aaData[i][1] + "</option>";
                        }
                        $('#ddl_ExclusiveDept').empty().append(div_data);
                    }
                 });
            });


            $('[id$="btnSubmit_AddBrandMaster"]').click(function () {

                var itmCode = $('[id$="txtCode_Brand"]').val();
                var itmDesc = $('[id$="txtName_Brand"]').val();
                var itmStatus = $('[id$="chk_ActiveBrandMaster"]').is(':checked') ? 'True' : 'False';
                var retailProductBrand = $('[id$="chk_showRetailBrandMaster"]').is(':checked') ? 'True' : 'False';
                var voucherBrand = $('[id$="chk_showVoucherBrandMaster"]').is(':checked') ? 'True' : 'False';
                var prepaidBrand = $('[id$="chk_showPrepaidBrandMaster"]').is(':checked') ? 'True' : 'False';

                var btnText = $('[id$="btnSubmit_AddBrandMaster"]').text();
                if (btnText == "Add") {
                    $.ajax({
                        type: "POST",
                        url: 'BrandMaster.aspx/AddBrandMasterData',
                        data: "{'itmCode':'" + itmCode + "','itmDesc':'" + itmDesc + "','itmStatus':'" + itmStatus + "','retailProductBrand':'" + retailProductBrand + "','voucherBrand':'" + voucherBrand + "','prepaidBrand':'" + prepaidBrand + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });

                }
                else {

                    $.ajax({
                        type: "POST",
                        url: 'BrandMaster.aspx/EditBrandMasterData',
                        data: "{'itmCode':'" + itmCode + "','itmDesc':'" + itmDesc + "','itmStatus':'" + itmStatus + "','retailProductBrand':'" + retailProductBrand + "','voucherBrand':'" + voucherBrand + "','prepaidBrand':'" + prepaidBrand + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                $(location).attr('href',"BrandMasterList.aspx");

        });

        $('.btn').on('click', function() {
    var $this = $(this);
  $this.button('loading');
    setTimeout(function() {
       $this.button('reset');
   }, 3000);
        });


                $('[id$="btnSubmit_AddRangeProductMaster"]').click(function () {

                    var itmCode = $('[id$="txtCode_RangeProduct"]').val();
                    var itmDesc = $('[id$="txtName_RangeProduct"]').val();
                    var itmStatus = $('[id$="chk_ActiveRangeProduct"]').is(':checked') ? 'True' : 'False';
                    var itmBrand= $('[id$="ddl_BrandRangeProduct"]').val();

                var btnText = $('[id$="btnSubmit_AddRangeProductMaster"]').text();
                if (btnText == "Add") {
                    $.ajax({
                        type: "POST",
                        url: 'RangeMasterProduct.aspx/AddRangeMasterProductData',
                        data: "{'itmCode':'" + itmCode + "','itmDesc':'" + itmDesc + "','itmStatus':'" + itmStatus + "','itmBrand':'" + itmBrand + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });

                }
                else {

                    $.ajax({
                        type: "POST",
                        url: 'RangeMasterProduct.aspx/EditAddRangeMasterProductData',
                        data: "{'itmCode':'" + itmCode + "','itmDesc':'" + itmDesc + "','itmStatus':'" + itmStatus + "','itmBrand':'" + itmBrand + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                $(location).attr('href',"RangeMasterProductList.aspx");

                });

            $('[id$="btnSubmit_AddRangeServiceMaster"]').click(function () {

                    var itmCode = $('[id$="txtCode_RangeService"]').val();
                    var itmDesc = $('[id$="txtName_RangeService"]').val();
                    var itmStatus = $('[id$="chk_ActiveRangeService"]').is(':checked') ? 'True' : 'False';
                    var itmDept= $('[id$="ddl_BrandRangeService"]').val();

                var btnText = $('[id$="btnSubmit_AddRangeServiceMaster"]').text();
                if (btnText == "Add") {
                    $.ajax({
                        type: "POST",
                        url: 'RangeMasterService.aspx/AddRangeMasterServiceData',
                        data: "{'itmCode':'" + itmCode + "','itmDesc':'" + itmDesc + "','itmStatus':'" + itmStatus + "','itmDept':'" + itmDept + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });

                }
                else {

                    $.ajax({
                        type: "POST",
                        url: 'RangeMasterService.aspx/EditAddRangeMasterServiceData',
                        data: "{'itmCode':'" + itmCode + "','itmDesc':'" + itmDesc + "','itmStatus':'" + itmStatus + "','itmDept':'" + itmDept + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                $(location).attr('href',"RangeMasterServiceList.aspx");

              });

              $('[id$="btnSubmit_AddRangeVoucherMaster"]').click(function () {

                    var itmCode = $('[id$="txtCode_RangeVoucher"]').val();
                    var itmDesc = $('[id$="txtName_RangeVoucher"]').val();
                    var itmStatus = $('[id$="chk_ActiveRangeVoucher"]').is(':checked') ? 'True' : 'False';
                    var itmBrand= $('[id$="ddl_BrandRangeVoucher"]').val();

                var btnText = $('[id$="btnSubmit_AddRangeVoucherMaster"]').text();
                if (btnText == "Add") {
                    $.ajax({
                        type: "POST",
                        url: 'RangeMasterVoucher.aspx/AddRangeMasterVoucherData',
                        data: "{'itmCode':'" + itmCode + "','itmDesc':'" + itmDesc + "','itmStatus':'" + itmStatus + "','itmBrand':'" + itmBrand + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });

                }
                else {

                    $.ajax({
                        type: "POST",
                        url: 'RangeMasterVoucher.aspx/EditAddRangeMasterVoucherData',
                        data: "{'itmCode':'" + itmCode + "','itmDesc':'" + itmDesc + "','itmStatus':'" + itmStatus + "','itmBrand':'" + itmBrand + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                $(location).attr('href',"RangeMasterVoucherList.aspx");

              });

            $('[id$="btnSubmit_AddRangePrepaidMaster"]').click(function () {

                    var itmCode = $('[id$="txtCode_RangePrepaid"]').val();
                    var itmDesc = $('[id$="txtName_RangePrepaid"]').val();
                    var itmStatus = $('[id$="chk_ActiveRangePrepaid"]').is(':checked') ? 'True' : 'False';
                    var itmBrand= $('[id$="ddl_BrandRangePrepaid"]').val();

                var btnText = $('[id$="btnSubmit_AddRangePrepaidMaster"]').text();
                if (btnText == "Add") {
                    $.ajax({
                        type: "POST",
                        url: 'RangeMasterPrepaid.aspx/AddRangeMasterPrepaidData',
                        data: "{'itmCode':'" + itmCode + "','itmDesc':'" + itmDesc + "','itmStatus':'" + itmStatus + "','itmBrand':'" + itmBrand + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });

                }
                else {

                    $.ajax({
                        type: "POST",
                        url: 'RangeMasterPrepaid.aspx/EditAddRangeMasterPrepaidData',
                        data: "{'itmCode':'" + itmCode + "','itmDesc':'" + itmDesc + "','itmStatus':'" + itmStatus + "','itmBrand':'" + itmBrand + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                $(location).attr('href',"RangeMasterPrepaidList.aspx");

              });


            $('[id$="btnSubmit_AddRangeCompoundMaster"]').click(function () {

                    var itmCode = $('[id$="txtCode_RangeCompound"]').val();
                    var itmDesc = $('[id$="txtName_RangeCompound"]').val();
                    var itmStatus = $('[id$="chk_ActiveRangeCompound"]').is(':checked') ? 'True' : 'False';
                    var itmDept= $('[id$="ddl_BrandRangeCompound"]').val();

                var btnText = $('[id$="btnSubmit_AddRangeCompoundMaster"]').text();
                if (btnText == "Add") {
                    $.ajax({
                        type: "POST",
                        url: 'RangeMasterCompound.aspx/AddRangeMasterCompoundData',
                        data: "{'itmCode':'" + itmCode + "','itmDesc':'" + itmDesc + "','itmStatus':'" + itmStatus + "','itmDept':'" + itmDept + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });

                }
                else {

                    $.ajax({
                        type: "POST",
                        url: 'RangeMasterCompound.aspx/EditAddRangeMasterCompoundData',
                        data: "{'itmCode':'" + itmCode + "','itmDesc':'" + itmDesc + "','itmStatus':'" + itmStatus + "','itmDept':'" + itmDept + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                $(location).attr('href',"RangeMasterCompoundList.aspx");

            });

              $('[id$="btnSubmit_AddDeptMaster"]').click(function () {

                  var itmCode = $('[id$="txtDeptCode_DeptMaster"]').val();
                  var itmDesc = $('[id$="txtDeptDesc_DeptMaster"]').val();
                  var itmStatus = $('[id$="chkActive_DeptMaster"]').is(':checked') ? 'True' : 'False';
                  var itmSeq= $('[id$="txtSeqNo_DeptMaster"]').val();
                  var allowcashsales = $('[id$="chkAllowCashSales_DeptMaster"]').is(':checked') ? 'True' : 'False';
                  var itmShowonsales ='False';
                  var isfirsttrial = $('[id$="chkFirstTrial_DeptMaster"]').is(':checked') ? 'True' : 'False';
                  var isVoucher = $('[id$="chkVoucher_DeptMaster"]').is(':checked') ? 'True' : 'False';
                  var isPrepaid = $('[id$="chkPrepaid_DeptMaster"]').is(':checked') ? 'True' : 'False';
                  var isRetailproduct = $('[id$="chkRetail_DeptMaster"]').is(':checked') ? 'True' : 'False';
                  var isSalonproduct = $('[id$="chkSaolon_DeptMaster"]').is(':checked') ? 'True' : 'False';
                  var isPackage = 'False';
                  var validityPeriod= $('[id$="ddl_ValidityPeriodDeptMaster"]').val();
                  var isService = $('[id$="chkService_DeptMaster"]').is(':checked') ? 'True' : 'False';
                  var isCompound = $('[id$="chkCompound_DeptMaster"]').is(':checked') ? 'True' : 'False';


                var btnText = $('[id$="btnSubmit_AddDeptMaster"]').text();
                if (btnText == "Add") {
                    $.ajax({
                        type: "POST",
                        url: 'DepartmentMaster.aspx/AddDeptMasterData',
                        data: "{'itmCode':'" + itmCode + "','itmDesc':'" + itmDesc + "','itmStatus':'" + itmStatus + "','itmSeq':'" + itmSeq + "','allowcashsales':'" + allowcashsales + "','itmShowonsales':'" + itmShowonsales + "','isfirsttrial':'" + isfirsttrial + "','isVoucher':'" + isVoucher + "','isPrepaid':'" + isPrepaid + "','isRetailproduct':'" + isRetailproduct + "','isSalonproduct':'" + isSalonproduct + "','isPackage':'" + isPackage + "','isService':'" + isService + "','isCompound':'" + isCompound + "','validityPeriod':'" + validityPeriod + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });

                }
                else {

                    $.ajax({
                        type: "POST",
                        url: 'DepartmentMaster.aspx/EditAddDeptMasterData',
                        data: "{'itmCode':'" + itmCode + "','itmDesc':'" + itmDesc + "','itmStatus':'" + itmStatus + "','itmSeq':'" + itmSeq + "','allowcashsales':'" + allowcashsales + "','itmShowonsales':'" + itmShowonsales + "','isfirsttrial':'" + isfirsttrial + "','isVoucher':'" + isVoucher + "','isPrepaid':'" + isPrepaid + "','isRetailproduct':'" + isRetailproduct + "','isSalonproduct':'" + isSalonproduct + "','isPackage':'" + isPackage + "','isService':'" + isService + "','isCompound':'" + isCompound + "','validityPeriod':'" + validityPeriod + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                $(location).attr('href',"DeptMasterList.aspx");

        });


        $('[id$="btnSubmit_AddDivMaster"]').click(function () {

                  var Code = $('[id$="txtCode_DivMaster"]').val();
                  var Name = $('[id$="txtName_DivMaster"]').val();
                  var InActive = $('[id$="chk_ActiveDivMaster"]').is(':checked') ? 'True' : 'False';

                var btnText = $('[id$="btnSubmit_AddDivMaster"]').text();
                if (btnText == "Add") {
                    $.ajax({
                        type: "POST",
                        url: 'DivMaster.aspx/DivisionMasterCall',
                        data: "{'Code':'" + Code + "','Name':'" + Name + "','InActive':'" + InActive + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });

                }
                else {

                    $.ajax({
                        type: "POST",
                        url: 'DivMaster.aspx/UpdateDivisionMasterCall',
                        data: "{'Code':'" + Code + "','Name':'" + Name + "','InActive':'" + InActive + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                $(location).attr('href',"DivisionMaster.aspx");

              });

  $('[id$="btnSubmit_AddClassMaster"]').click(function () {

                  var Code = $('[id$="txtCode_ClassMaster"]').val();
                  var Name = $('[id$="txtName_ClassMaster"]').val();
                  var InActive = $('[id$="chk_ActiveClassMaster"]').is(':checked') ? 'True' : 'False';

                var btnText = $('[id$="btnSubmit_AddClassMaster"]').text();
                if (btnText == "Add") {
                    $.ajax({
                        type: "POST",
                        url: 'ClassificationMaster.aspx/ClassMasterCall',
                        data: "{'Code':'" + Code + "','Name':'" + Name + "','InActive':'" + InActive + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });

                }
                else {

                    $.ajax({
                        type: "POST",
                        url: 'ClassificationMaster.aspx/UpdateClassMasterCall',
                        data: "{'Code':'" + Code + "','Name':'" + Name + "','InActive':'" + InActive + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });
                }
                $(location).attr('href',"ClassificationMaster.aspx");

              });

            $('[id$="btnSubmit_AddItemMaster"]').click(function () {

                var run1 = $('[id$="ddl_Div"]').val();
                var run2 = $('[id$="ddl_Dept"]').val();
                $('[id$="txt_RunningNo1"]').val(run1 + run2);

                var stockobjValidation = {};
                stockobjValidation.itemDiv = $('[id$="ddl_Div"]').val();
                stockobjValidation.itemDept = $('[id$="ddl_Dept"]').val();
                stockobjValidation.itemClass = $('[id$="ddl_Class"]').val();
                stockobjValidation.itemBrand = $('[id$="ddl_Brand"]').val();
                stockobjValidation.itemRange = $('[id$="ddl_Range"]').val();
                stockobjValidation.itemName = $('[id$="txt_StockName"]').val();

                if (stockobjValidation.itemDiv == "") {
                    alert("Div is Empty");
                    return false;
                }
                if (stockobjValidation.itemDept == "") {
                    alert("Department is Empty");
                    return false;
                }
                if (stockobjValidation.itemClass == "") {
                    alert("Class is Empty");
                    return false;
                }
                if (stockobjValidation.itemBrand == "") {
                    alert("Brand is Empty");
                    return false;
                }
                if (stockobjValidation.itemRange == null) {
                    alert("Range is Empty");
                    return false;
                }

                if (stockobjValidation.itemRange == "") {
                    alert("Range is Empty");
                    return false;
                }

                if (stockobjValidation.itemName == "") {
                    alert("Stock Name is Empty");
                    return false;
                }


                var btnTextItemMaster = $('[id$="btnSubmit_AddItemMaster"]').text();
                
                var SequoiaUri = '<%=ConfigurationManager.AppSettings["SequoiaUri"].ToString()%>';
                $.ajax({
                    type: 'GET',
                    url: SequoiaUri + "api/GetDeptRunningNo?DivCode=" + run1 + "&DeptCode=" + run2 + "",
                    dataType: "json",
                    Cache: false,
                    success: function (data) {
                        $.each(data.result, function (i, data) {
                            if (btnTextItemMaster == "Add") {
                                $('[id$="txt_RunningNo2"]').val(data.controlNo);
                            }
                        });


                        var stockdetails = [];
                        var stockobj = {};
                        var runNo1 = $('[id$="txt_RunningNo1"]').val();
                        var runNo2 = $('[id$="txt_RunningNo2"]').val();
                        var itemCode = runNo1 + runNo2;
                        stockobj.itemCode = itemCode;
                        stockobj.itemDiv = $('[id$="ddl_Div"]').val();
                        stockobj.itemDept = $('[id$="ddl_Dept"]').val();
                        stockobj.itemClass = $('[id$="ddl_Class"]').val();
                        stockobj.itemBrand = $('[id$="ddl_Brand"]').val();
                        stockobj.itemRange = $('[id$="ddl_Range"]').val();
                        var itemName = $('[id$="txt_StockName"]').val();;
                        stockobj.itemName = $('[id$="txt_StockName"]').val();
                        stockobj.itemDesc = $('[id$="txt_StockDesc"]').val();

                        if (stockobj.itemDiv == "") {
                            alert("Div is Empty");
                            return false;
                        }
                        if (stockobj.itemDept == "") {
                            alert("Department is Empty");
                            return false;
                        }
                        if (stockobj.itemClass == "") {
                            alert("Class is Empty");
                            return false;
                        }
                        if (stockobj.itemBrand == "") {
                            alert("Brand is Empty");
                            return false;
                        }
                        if (stockobj.itemRange == "") {
                            alert("Range is Empty");
                            return false;
                        }


                        stockobj.limitserviceFlexionly = $('[id$="chk_AutoAddOpenCode"]').is(':checked') ? 'True' : 'False';
                        stockobj.isOpenPrepaid = $('[id$="chk_openPrepaid"]').is(':checked') ? 'True' : 'False';
                        stockobj.itemType = $('[id$="ddl_stockType"]').val();
                        //stockobj.itemSupp = $('[id$="ddl_supplier"]').val();
                        stockobj.itemSupp = "";
                        stockobj.itemPrice = $('[id$="txt_price"]').val();
                        stockobj.itemPriceFloor = $('[id$="txt_floorPrice"]').val();
                        stockobj.costPrice = $('[id$="txt_Cost"]').val();
                        stockobj.serviceCost = $('[id$="txt_Cost"]').val();
                        stockobj.serviceCostPercent = $('[id$="chk_Percent"]').is(':checked') ? 'True' : 'False';
                        stockobj.disclimit = $('[id$="txt_Disc"]').val();
                        stockobj.disctypeamount = $('[id$="chk_discType"]').is(':checked') ? 'True' : 'False';
                        stockobj.autocustdisc = $('[id$="chk_AutoCustDisc"]').is(':checked') ? 'True' : 'False';

                        stockobj.itemIsactive = $('[id$="chk_Active"]').is(':checked') ? 'True' : 'False';
                        stockobj.commissionable = $('[id$="chk_Commissionable"]').is(':checked') ? 'True' : 'False';
                        stockobj.itemFoc = $('[id$="chk_RedeemItem"]').is(':checked') ? 'True' : 'False';
                        stockobj.isGst = $('[id$="chk_Tax"]').is(':checked') ? 'True' : 'False';
                        stockobj.isHaveTax = $('[id$="chk_Tax"]').is(':checked') ? 'True' : 'False';
                        stockobj.isAllowFoc = $('[id$="chk_ItemallowFOC"]').is(':checked') ? 'True' : 'False';
                        stockobj.accountCode = $('[id$="txt_AccCodeItemMaster"]').val();

                        stockobj.voucherIsvalidUntilDate = $('[id$="chk_VoucherValidItemMaster"]').is(':checked') ? 'True' : 'False';
                        var voucherValidUntilDate = $('[id$="dt_VoucherValItemMaster"]').val();
                        if (voucherValidUntilDate == "") {
                            stockobj.voucherValidUntilDate = null;
                        }
                        else {
                            stockobj.voucherValidUntilDate = new Date(Date.parse(voucherValidUntilDate)).format("yyyy/MM/dd");
                        }
                        stockobj.voucherValue = $('[id$="txtVouValueItemMaster"]').val();
                        stockobj.voucherValueIsAmount;

                        //var radioValue = $("#option_Amount_ItemMaster:checked").val();
                        var radioValue = $('[id$="option_Amount_ItemMaster"]').val();
                        if (radioValue == "Amount") {
                            voucherValueIsAmount = false;
                        }
                        else {
                            voucherValueIsAmount = true;
                        }
                        stockobj.voucherValidPeriod = $('[id$="ddl_ValidityPeriodItemMaster"]').val();

                        stockobj.prepaidValidPeriod = $('[id$="ddl_ValidPeriodItemMaster"]').val();
                        var membercardnoaccess = $('[id$="chk_MemberCardItemMaster"]').is(':checked') ? 'True' : 'False';
                        stockobj.membercardnoaccess = $('[id$="chk_MemberCardItemMaster"]').is(':checked') ? 'True' : 'False';
                        stockobj.prepaidValue = $('[id$="txt_PrepaidValue"]').val();
                        stockobj.prepaidSellAmt = $('[id$="txt_PrepaidAmnt"]').val();

                        stockobj.reorderActive = $('[id$="chk_ReorderLevelItemMaster"]').is(':checked') ? 'True' : 'False';
                        stockobj.reorderMinqty = $('[id$="txt_minQtyItemMaster"]').val();
                        stockobj.custReplenishDays = $('[id$="txt_ReplenishmentItemMaster"]').val();
                        stockobj.custAdvanceDays = $('[id$="txt_RemindAdvItemMaster"]').val();
                        stockobj.trading = $('[id$="chk_ReplenishmentItemMaster"]').is(':checked') ? 'True' : 'False';

                        stockobj.workcomm = $('[id$="ddlWorkCommGroup_itemMaster"]').val();
                        stockobj.salescomm = $('[id$="ddlSalesCommGroup_itemMaster"]').val();
                        stockobj.workcommpoints = $('[id$="txtworkPoints_ItemMaster"]').val();
                        stockobj.salescommpoints = $('[id$="txtSalesPoints_ItemMaster"]').val();

                        stockobj.serviceExpireActive = $('[id$="chkExpiryStatus_ItemMaster"]').is(':checked') ? 'True' : 'False';
                        stockobj.serviceExpireMonth = $('[id$="txtserviceExpiryMonth_ItemMaster"]').val();
                        stockobj.treatmentLimitActive = $('[id$="chkServiceLimit_ItemMaster"]').is(':checked') ? 'True' : 'False';
                        stockobj.treatmentLimitCount = $('[id$="txtServiceLimit_ItemMaster"]').val();
                        stockobj.limitserviceFlexionly = $('[id$="chkServiceFlexi_ItemMaster"]').is(':checked') ? 'True' : 'False';

                        stockobj.t1TaxCode = $('[id$="ddl1stTax_ItemMaster"]').val();
                        stockobj.t2TaxCode = $('[id$="ddl2ndTax_ItemMaster"]').val();



                        stockdetails.push(stockobj);

                        //var stockdetailsNew = [];
                        //var stockobjNew = {};
                        //stockobjNew.stockcode = itemCode;
                        //stockobjNew.stockname = $('[id$="txt_StockName"]').val();
                        //stockobjNew.type = $('[id$="ddl_stockType"]').val();
                        //stockobjNew.isactive = $('[id$="chk_Active"]').is(':checked') ? 'True' : 'False';
                        //stockobjNew.division =$('#ddl_Div option:selected').html();
                        //stockobjNew.rangecode = $('[id$="ddl_Range"]').val();
                        //stockobjNew.range =$('#ddl_Range option:selected').html();
                        //stockobjNew.deptcode = $('[id$="ddl_Dept"]').val();
                        //stockobjNew.department =$('#ddl_Dept option:selected').html();
                        //stockobjNew.classcode = $('[id$="ddl_Class"]').val();
                        //stockobjNew.class =$('#ddl_Class option:selected').html();
                        //stockobjNew.brandcode = $('[id$="ddl_Brand"]').val();
                        //stockobjNew.brand =$('#ddl_Brand option:selected').html();
                        //stockdetailsNew.push(stockobjNew);


                        
                        if (btnTextItemMaster == "Add") {

                            $.ajax({
                                type: "POST",
                                url: "ItemMaster.aspx/AddItemMasterData",
                                data: '{ Details :' + JSON.stringify(stockdetails) + '}',
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (r) {
                                    
                                    //   alert(r.d);
                                }
                            });


                            //$.ajax({
                            //type: "POST",
                            //url: "ItemMaster.aspx/Addstockdetails",
                            //data: '{ Details :' + JSON.stringify(stockdetailsNew) + '}',
                            //contentType: "application/json; charset=utf-8",
                            //dataType: "json",
                            //success: function (r) {
                            // //   alert(r.d);
                            //}
                            //});


                            //$.ajax({
                            //    type: "POST",
                            //    url: 'ItemMaster.aspx/AddItemMasterData',
                            //    data: "{'itemCode':'" + itemCode + "','itemDiv':'" + itemDiv + "','itemDept':'" + itemDept + "','itemClass':'" + itemClass + "','itemBrand':'" + itemBrand + "','itemRange':'" + itemRange + "','itemName':'" + itemName + "','itemDesc':'" + itemDesc + "','limitserviceFlexionly':'" + limitserviceFlexionly + "','isOpenPrepaid':'" + isOpenPrepaid + "','itemType':'" + itemType + "','itemSupp':'" + itemSupp + "','itemPrice':'" + itemPrice + "','itemPriceFloor':'" + itemPriceFloor + "','costPrice':'" + costPrice + "','disclimit':'" + disclimit + "','disctypeamount':'" + disctypeamount + "','autocustdisc':'" + autocustdisc + "','itemIsactive':'" + itemIsactive + "','commissionable':'" + commissionable + "','itemFoc':'" + itemFoc + "','isGst':'" + isGst + "','isAllowFoc':'" + isAllowFoc + "','accountCode':'" + accountCode + "','voucherIsvalidUntilDate':'" + voucherIsvalidUntilDate + "','voucherValidUntilDate':'" + voucherValidUntilDate + "','voucherValue':'" + voucherValue + "','voucherValueIsAmount':'" + voucherValueIsAmount + "','voucherValidPeriod':'" + voucherValidPeriod + "','reorderActive':'" + reorderActive + "','reorderMinqty':'" + reorderMinqty + "','custReplenishDays':'" + custReplenishDays + "','custAdvanceDays':'" + custAdvanceDays + "','trading':'" + trading + "'}",
                            //    contentType: "application/json; charset=utf-8",
                            //    dataType: "json",
                            //    success: function (msg) {
                            //        $("#divResult").html("success");
                            //    },
                            //    error: function (e) {
                            //        $("#divResult").html("Something Wrong.");
                            //    }
                            //});

                            var details = [];
                            var details1 = [];

                            var rows = $('#UOMModule tbody >tr');
                            var UomEntryrows = $('#UOMEntryModule tbody >tr');
                            var columns;
                            for (var i = 1; i < rows.length; i++) {
                                columns = $(rows[i]).find('td');
                                var obj = {};
                                obj.itemCode = itemCode;
                                obj.itemUom = $(columns[1]).html();
                                obj.uomDesc = $(columns[2]).html();
                                obj.uomUnit = $(columns[4]).html();
                                obj.itemUom2 = $(columns[5]).html();
                                obj.uom2Desc = $(columns[6]).html();

                                Entrycolumns = $(UomEntryrows[i]).find('td');
                                obj.itemPrice = $(Entrycolumns[2]).find('input').val();
                                obj.itemCost = $(Entrycolumns[3]).find('input').val();
                                obj.minMargin = $(Entrycolumns[4]).find('input').val();

                                obj.isactive = true;
                                obj.itemUompriceSeq = $(columns[0]).html();
                                details.push(obj);
                            }




                            //$('[id*=UOMModule] tr:not(:has(th))').each(function () {
                            //    var obj = {};
                            //    obj.itemCode = itemCode;
                            //    obj.itemUom = $.trim($(this).find('td').eq(1).html());
                            //    obj.uomDesc = $.trim($(this).find('td').eq(4).html());
                            //    obj.uomUnit = $.trim($(this).find('td').eq(3).html());
                            //    obj.isactive = true;
                            //    obj.itemUompriceSeq = $.trim($(this).find('td').eq(0).html());
                            //    details.push(obj);
                            //});

                            //$('[id*=UOMEntryModule] tr:not(:has(th))').each(function () {
                            //    var obj1 = {};
                            //    obj1.itemCode = itemCode;
                            //    obj1.uomDesc = $.trim($(this).find('td').eq(0).html());
                            //    obj1.itemPrice = $.trim($(this).find('td').eq(1).html());
                            //    obj1.itemCost = $.trim($(this).find('td').eq(2).html());
                            //    obj1.minMargin = $.trim($(this).find('td').eq(3).html());
                            //    details1.push(obj1);
                            //});



                            $.ajax({
                                type: "POST",
                                url: "ItemMaster.aspx/AddItemMasterUOMData",
                                data: '{ Details :' + JSON.stringify(details) + '}',
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (r) {
                                    //   alert(r.d);
                                }
                            });

                            var LinkdetailsForP = [];
                            var LinkobjForP = {};
                            LinkobjForP.itemCode = itemCode + "0000";
                            LinkobjForP.linkCode = itemCode + "0000";
                            LinkobjForP.linkDesc = itemName;
                            LinkobjForP.linkType = "P";
                            LinkobjForP.itmIsactive = true;
                            LinkdetailsForP.push(LinkobjForP);
                            $.ajax({
                                type: "POST",
                                url: "ItemMaster.aspx/AddItemMasterLinkData",
                                data: '{ Details :' + JSON.stringify(LinkdetailsForP) + '}',
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (r) {
                                    //alert(r.d);
                                }
                            });



                            var Linkdetails = [];
                            var Linkrows = $('#LinkModule tbody >tr');
                            var Linkcolumns;
                            for (var j = 1; j < Linkrows.length; j++) {
                                Linkcolumns = $(Linkrows[j]).find('td');
                                var Linkobj = {};
                                Linkobj.itemCode = itemCode + "0000";
                                Linkobj.linkCode = $(Linkcolumns[0]).html();
                                Linkobj.linkDesc = $(Linkcolumns[1]).html();
                                Linkobj.linkType = "L";
                                Linkobj.itmIsactive = true;
                                Linkdetails.push(Linkobj);
                            }



                            $.ajax({
                                type: "POST",
                                url: "ItemMaster.aspx/AddItemMasterLinkData",
                                data: '{ Details :' + JSON.stringify(Linkdetails) + '}',
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (r) {
                                    //alert(r.d);
                                }
                            });


                            var ServiceDetails1 = [];
                            var Servicerows1 = $('#ServiceAvailabe tbody >tr');
                            var Servicecolumns1;
                            for (var j = 1; j < Servicerows1.length; j++) {
                                Servicecolumns1 = $(Servicerows1[j]).find('td');
                                var Serviceobj1 = {};
                                Serviceobj1.itemCode = itemCode;
                                Serviceobj1.itemSrvcode = $(Servicecolumns1[2]).html() + "0000";
                                Serviceobj1.itemSrvdesc = $(Servicecolumns1[1]).html();
                                Serviceobj1.itmIsactive = true;
                                ServiceDetails1.push(Serviceobj1);
                            }



                            $.ajax({
                                type: "POST",
                                url: "ItemMaster.aspx/AddServiceData",
                                data: '{ Details :' + JSON.stringify(ServiceDetails1) + '}',
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (r) {
                                    //alert(r.d);
                                }
                            });






                            var StockListingdetails = [];
                            var StockListingrows = $('#stockListingMaster tbody >tr');
                            var StockListingcolumns;
                            for (var k = 1; k < StockListingrows.length; k++) {

                                StockListingcolumns = $(StockListingrows[k]).find('td');
                                var checked = $(StockListingcolumns[2]).is(':checked') ? 'True' : 'False';
                                if (StockListingcolumns.find('input[type="checkbox"]').is(':checked')) {
                                    //if (checked == 'True') {
                                    var StockListingobj = {};
                                    StockListingobj.itemCode = itemCode;
                                    StockListingobj.itemBarcode = itemCode + "0000";
                                    StockListingobj.itemsiteCode = $(StockListingcolumns[0]).html();
                                    StockListingobj.onhandQty = "0";
                                    StockListingobj.itemstocklistStatus = StockListingcolumns.find('input[type="checkbox"]').is(':checked') ? 'True' : 'False';;
                                    StockListingdetails.push(StockListingobj);
                                }
                            }

                            if (jQuery.isEmptyObject(StockListingdetails)) {
                                var StockListingobj1 = {};
                                StockListingobj1.itemCode = itemCode;
                                StockListingobj1.itemBarcode = itemCode + "0000";
                                StockListingobj1.itemsiteCode =  '<%=Session["User_SiteCode"]%>';
                                StockListingobj1.onhandQty = "0";
                                StockListingobj1.itemstocklistStatus = "True";
                        StockListingdetails.push(StockListingobj1);
                    }


                    $.ajax({
                        type: "POST",
                        url: "ItemMaster.aspx/AddItemMasterstockListing",
                        data: '{ Details :' + JSON.stringify(StockListingdetails) + '}',
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (r) {
                        }
                    });

                    var ItemUsagedetails = [];
                    var ItemUsagerows = $('#ItemUsageMasterModule tbody >tr');
                    var ItemUsagecolumns;
                    for (var L = 1; L < ItemUsagerows.length; L++) {

                        ItemUsagecolumns = $(ItemUsagerows[L]).find('td');
                        var ItemUsageobj = {};

                        ItemUsageobj.serviceCode = $(ItemUsagecolumns[0]).html() + "0000";
                        ItemUsageobj.itemCode = itemCode + "0000";
                        ItemUsageobj.qty = $(ItemUsagecolumns[2]).html();
                        ItemUsageobj.uom = $(ItemUsagecolumns[3]).html();
                        ItemUsageobj.sequence = L;
                        ItemUsageobj.serviceDesc = $(ItemUsagecolumns[1]).html();
                        ItemUsageobj.itemDesc = itemName;
                        ItemUsageobj.isactive = true;
                        ItemUsagedetails.push(ItemUsageobj);
                    }
                    $.ajax({
                        type: "POST",
                        url: "ItemMaster.aspx/AddItemMasterItemUsage",
                        data: '{ Details :' + JSON.stringify(ItemUsagedetails) + '}',
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (r) {
                            //alert(r.d);
                        }
                    });


                    var PrepaidDetails = [];
                    var Prepaidrows = $('#PrepaidCondModule tbody >tr');
                    var Prepaidcolumns;
                    for (var M = 1; M < Prepaidrows.length; M++) {

                        Prepaidcolumns = $(Prepaidrows[M]).find('td');
                        var Prepaidobj = {};

                        Prepaidobj.pItemtype = $(Prepaidcolumns[0]).html();
                        Prepaidobj.itemCode = itemCode ;
                        Prepaidobj.conditiontype1 = $(Prepaidcolumns[1]).html();
                        Prepaidobj.conditiontype2 = $(Prepaidcolumns[2]).html();
                        Prepaidobj.amount = $(Prepaidcolumns[3]).html();
                        Prepaidobj.rate = $(Prepaidcolumns[4]).html();
                        Prepaidobj.membercardnoaccess = membercardnoaccess;
                        PrepaidDetails.push(Prepaidobj);
                    }
                    $.ajax({
                        type: "POST",
                        url: "ItemMaster.aspx/AddItemMasterPrepaidConditions",
                        data: '{ Details :' + JSON.stringify(PrepaidDetails) + '}',
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (r) {
                            //alert(r.d);
                        }
                    });

                    var BatchDetails = [];
                    var Batchrows = $('#UOMModule tbody >tr');
                    var Batchcolumns;
                    if (Batchrows.length > 1) {
                        Batchcolumns = $(Batchrows[1]).find('td');
                        var batchobj = {};
                        batchobj.itemCode = itemCode;
                        batchobj.siteCode = '<%=Session["User_SiteCode"]%>';
                    batchobj.batchNo = null;
                    batchobj.uom = $(columns[1]).html();
                    batchobj.qty = "0";
                    batchobj.expDate = null;
                    batchobj.batchCost = "0";
                    BatchDetails.push(batchobj);
                }
                else {
                    var batchobj1 = {};
                    batchobj1.itemCode = itemCode;
                    batchobj1.siteCode = '<%=Session["User_SiteCode"]%>';
                        batchobj1.batchNo = null;
                        batchobj1.uom = "";
                        batchobj1.qty = "0";
                        batchobj1.expDate = null;
                        batchobj1.batchCost = "0";
                        BatchDetails.push(batchobj1);
                    }

                    $.ajax({
                        type: "POST",
                        url: "ItemMaster.aspx/AddItemMasterItemBatch",
                        data: '{ Details :' + JSON.stringify(BatchDetails) + '}',
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (r) {
                            //alert(r.d);
                        }
                    });


                    var TypeVal = $('[id$="ddl_stockType"]').val();
                    var divVal = $('[id$="ddl_Div"]').val();

                    if (TypeVal == "PACKAGE") {
                        PackageAdd();


                    }


                    if (divVal == 3 && TypeVal == "SINGLE") {

                        //if ($('[id$="chk_AutoAddOpenCode"]').is(':checked')) {
                        var isOpenCode = $('[id$="chk_AutoAddOpenCode"]').is(':checked') ? 'checked' : 'unchecked';
                        if (isOpenCode == 'checked') {

                            courseAdd();

                        }
                    }



                }
                else {

                    $.ajax({
                        type: "POST",
                        url: "ItemMaster.aspx/EditAddItemMasterData",
                        data: '{ Details :' + JSON.stringify(stockdetails) + '}',
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (r) {
                            
                            //   alert(r.d);
                        }
                    });

                    //$.ajax({
                    //type: "POST",
                    //url: "ItemMaster.aspx/EditAddstockdetails",
                    //data: '{ Details :' + JSON.stringify(stockdetailsNew) + '}',
                    //contentType: "application/json; charset=utf-8",
                    //dataType: "json",
                    //success: function (r) {
                    // //   alert(r.d);
                    //}
                    //});


                    // $.ajax({
                    //    type: "POST",
                    //    url: 'ItemMaster.aspx/EditAddItemMasterData',
                    //    data: "{'itemCode':'" + itemCode + "','itemDiv':'" + itemDiv + "','itemDept':'" + itemDept + "','itemClass':'" + itemClass + "','itemBrand':'" + itemBrand + "','itemRange':'" + itemRange + "','itemName':'" + itemName + "','itemDesc':'" + itemDesc + "','limitserviceFlexionly':'" + limitserviceFlexionly + "','isOpenPrepaid':'" + isOpenPrepaid + "','itemType':'" + itemType + "','itemSupp':'" + itemSupp + "','itemPrice':'" + itemPrice + "','itemPriceFloor':'" + itemPriceFloor + "','costPrice':'" + costPrice + "','disclimit':'" + disclimit + "','disctypeamount':'" + disctypeamount + "','autocustdisc':'" + autocustdisc + "','itemIsactive':'" + itemIsactive + "','commissionable':'" + commissionable + "','itemFoc':'" + itemFoc + "','isGst':'" + isGst + "','isAllowFoc':'" + isAllowFoc + "','accountCode':'" + accountCode + "','voucherIsvalidUntilDate':'" + voucherIsvalidUntilDate + "','voucherValidUntilDate':'" + voucherValidUntilDate + "','voucherValue':'" + voucherValue + "','voucherValueIsAmount':'" + voucherValueIsAmount + "','voucherValidPeriod':'" + voucherValidPeriod + "','reorderActive':'" + reorderActive + "','reorderMinqty':'" + reorderMinqty + "','custReplenishDays':'" + custReplenishDays + "','custAdvanceDays':'" + custAdvanceDays + "','trading':'" + trading + "'}",
                    //    contentType: "application/json; charset=utf-8",
                    //    dataType: "json",
                    //    success: function (msg) {
                    //        $("#divResult").html("success");
                    //    },
                    //    error: function (e) {
                    //        $("#divResult").html("Something Wrong.");
                    //    }
                    //});

                    var details = [];
                    var details1 = [];

                    var rows = $('#UOMModule tbody >tr');
                    var UomEntryrows = $('#UOMEntryModule tbody >tr');
                    var columns;
                    for (var i = 1; i < rows.length; i++) {
                        columns = $(rows[i]).find('td');
                        var obj = {};
                        obj.itemCode = itemCode;
                        obj.itemUom = $(columns[1]).html();
                        obj.uomDesc = $(columns[2]).html();
                        obj.uomUnit = $(columns[4]).html();
                        obj.itemUom2 = $(columns[5]).html();
                        obj.uom2Desc = $(columns[6]).html();

                        obj.id = $(columns).find('input:hidden').val();

                        Entrycolumns = $(UomEntryrows[i]).find('td');
                        obj.itemPrice = $(Entrycolumns[2]).find('input').val();
                        obj.itemCost = $(Entrycolumns[3]).find('input').val();
                        obj.minMargin = $(Entrycolumns[4]).find('input').val();

                        obj.isactive = true;
                        obj.itemUompriceSeq = $(columns[0]).html();
                        details.push(obj);
                    }

                    $.ajax({
                        type: "POST",
                        url: "ItemMaster.aspx/EditAddItemMasterUOMData",
                        data: '{ Details :' + JSON.stringify(details) + '}',
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (r) {
                            //   alert(r.d);
                        }
                    });

                    var Linkdetails = [];
                    var Linkrows = $('#LinkModule tbody >tr');
                    var Linkcolumns;
                    for (var j = 1; j < Linkrows.length; j++) {
                        Linkcolumns = $(Linkrows[j]).find('td');
                        var Linkobj = {};
                        Linkobj.itemCode = itemCode;
                        Linkobj.linkCode = $(Linkcolumns[0]).html();
                        Linkobj.linkDesc = $(Linkcolumns[1]).html();
                        Linkobj.linkType = "P";
                        Linkobj.itmIsactive = true;
                        Linkobj.itmId = $(Linkcolumns).find('input:hidden').val();
                        Linkdetails.push(Linkobj);
                    }
                    $.ajax({
                        type: "POST",
                        url: "ItemMaster.aspx/EditAddItemMasterLinkData",
                        data: '{ Details :' + JSON.stringify(Linkdetails) + '}',
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (r) {
                            //alert(r.d);
                        }
                    });

                    var ServiceDetails = [];
                    var Servicerows = $('#ServiceAvailabe tbody >tr');
                    var Servicecolumns;
                    for (var j = 1; j < Servicerows.length; j++) {
                        Servicecolumns = $(Servicerows[j]).find('td');
                        var Serviceobj = {};
                        Serviceobj.itemCode = itemCode;
                        Serviceobj.itemSrvcode = $(Servicecolumns[2]).html() + "0000";
                        Serviceobj.itemSrvdesc = $(Servicecolumns[1]).html();
                        Serviceobj.itmIsactive = true;
                        Serviceobj.itmId = $(Servicecolumns).find('input:hidden').val();
                        ServiceDetails.push(Serviceobj);
                    }



                    $.ajax({
                        type: "POST",
                        url: "ItemMaster.aspx/EditServiceData",
                        data: '{ Details :' + JSON.stringify(ServiceDetails) + '}',
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (r) {
                            //alert(r.d);
                        }
                    });


                            var StockListingdetails = [];
                            var StockListingrows = $('#stockListingMaster tbody >tr');
                            var StockListingcolumns;
                            for (var k = 1; k < StockListingrows.length; k++) {

                                StockListingcolumns = $(StockListingrows[k]).find('td');
                                var checked = $(StockListingcolumns[2]).is(':checked') ? 'True' : 'False';
                                if (StockListingcolumns.find('input[type="checkbox"]').is(':checked')) {
                                //if (checked == 'True') {
                                var StockListingobj = {};
                                StockListingobj.itemCode = itemCode;
                                StockListingobj.itemBarcode = itemCode + "0000";
                                StockListingobj.itemsiteCode = $(StockListingcolumns[0]).html();
                                StockListingobj.onhandQty = "0";
                                StockListingobj.itemstocklistStatus = StockListingcolumns.find('input[type="checkbox"]').is(':checked') ? 'True' : 'False';;
                                StockListingdetails.push(StockListingobj);
                                }
                            }

                            if (jQuery.isEmptyObject(StockListingdetails)) {
                                var StockListingobj1 = {};
                                StockListingobj1.itemCode = itemCode;
                                StockListingobj1.itemBarcode = itemCode + "0000";
                                StockListingobj1.itemsiteCode = '<%=Session["User_SiteCode"]%>';
                                StockListingobj1.onhandQty = "0";
                                StockListingobj1.itemstocklistStatus = "True";
                                StockListingdetails.push(StockListingobj1);
                            }


                    $.ajax({
                        type: "POST",
                        url: "ItemMaster.aspx/EditAddItemMasterstockListing",
                        data: '{ Details :' + JSON.stringify(StockListingdetails) + '}',
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (r) {
                        }
                    });

                    var ItemUsagedetails = [];
                    var ItemUsagerows = $('#ItemUsageMasterModule tbody >tr');
                    var ItemUsagecolumns;
                    for (var L = 1; L < ItemUsagerows.length; L++) {

                        ItemUsagecolumns = $(ItemUsagerows[L]).find('td');
                        var ItemUsageobj = {};

                        ItemUsageobj.serviceCode = $(ItemUsagecolumns[0]).html();
                        ItemUsageobj.itemCode = itemCode;
                        ItemUsageobj.qty = $(ItemUsagecolumns[2]).html();
                        ItemUsageobj.uom = $(ItemUsagecolumns[3]).html();
                        ItemUsageobj.sequence = L;
                        ItemUsageobj.serviceDesc = $(ItemUsagecolumns[1]).html();
                        ItemUsageobj.itemDesc = itemName;
                        ItemUsageobj.isactive = true;
                        ItemUsageobj.id = $(ItemUsagecolumns).find('input:hidden').val();
                        ItemUsagedetails.push(ItemUsageobj);
                    }
                    $.ajax({
                        type: "POST",
                        url: "ItemMaster.aspx/EditAddItemMasterItemUsage",
                        data: '{ Details :' + JSON.stringify(ItemUsagedetails) + '}',
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (r) {
                            //alert(r.d);
                        }
                    });

                    var TypeVal = $('[id$="ddl_stockType"]').val();
                    var divVal = $('[id$="ddl_Div"]').val();

                    if (TypeVal == "PACKAGE") {
                        EditPackageAdd();


                    }


                    var PrepaidDetails = [];
                    var Prepaidrows = $('#PrepaidCondModule tbody >tr');
                    var Prepaidcolumns;
                    for (var M = 1; M < Prepaidrows.length; M++) {

                        Prepaidcolumns = $(Prepaidrows[M]).find('td');
                        var Prepaidobj = {};

                        Prepaidobj.pItemtype = $(Prepaidcolumns[0]).html();
                        Prepaidobj.itemCode = itemCode;
                        Prepaidobj.conditiontype1 = $(Prepaidcolumns[1]).html();
                        Prepaidobj.conditiontype2 = $(Prepaidcolumns[2]).html();
                        Prepaidobj.amount = $(Prepaidcolumns[3]).html();
                        Prepaidobj.rate = $(Prepaidcolumns[4]).html();
                        Prepaidobj.membercardnoaccess = membercardnoaccess;
                        Prepaidobj.itemid = $(Prepaidcolumns).find('input:hidden').val();
                        PrepaidDetails.push(Prepaidobj);
                    }
                    $.ajax({
                        type: "POST",
                        url: "ItemMaster.aspx/EditAddItemMasterPrepaidConditions",
                        data: '{ Details :' + JSON.stringify(PrepaidDetails) + '}',
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (r) {
                            //alert(r.d);
                        }
                    });

                        }

                        $(location).attr('href', "ItemMasterList.aspx");

                    }
                });

                
                
                

              });


        function PackageAdd() {

            var runNo1 = $('[id$="txt_RunningNo1"]').val();
                var runNo2 = $('[id$="txt_RunningNo2"]').val();
                var itemCode = runNo1 + runNo2;
            var PackageTabledetails = [];
                    var packagerows = $('#PackageEntryModule tbody >tr');
                    var packagecolumns;
                    for (var i = 1; i < packagerows.length; i++) {
                        packagecolumns = $(packagerows[i]).find('td');
                        var Packobj = {};
                        Packobj.code =  $(packagecolumns[0]).html()+"0000";
                        Packobj.description =  $('[id$="txt_StockName"]').val();
                        Packobj.cost = null;
                        Packobj.price = $(packagecolumns[3]).html();
                        Packobj.discount = $(packagecolumns[5]).html();
                        Packobj.packageCode =itemCode;
                        Packobj.qty = $(packagecolumns[2]).html();
                        Packobj.uom = $(packagecolumns[7]).html();
                        Packobj.packageBarcode = null;
                        Packobj.discPercent = null;
                        Packobj.unitPrice = $(packagecolumns[3]).html();
                        Packobj.ttlUprice = $(packagecolumns[4]).html();
                        Packobj.siteCode = '<%=Session["User_SiteCode"]%>';
                        if (Packobj.siteCode == "") { Packobj.siteCode="S1" }
                        Packobj.lineNo = i;
                        Packobj.isactive = true;
                        Packobj.treatmentLimitActive= false;
                        PackageTabledetails.push(Packobj);
                    }

                      $.ajax({
                    type: "POST",
                    url: "ItemMaster.aspx/AddPackageDtlData",
                    data: '{ Details :' + JSON.stringify(PackageTabledetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                    }
                        });


                        var Packagedetails = [];
                        var Packageobj = {};
                        Packageobj.code = itemCode;
                        Packageobj.description = $('[id$="txt_StockName"]').val();
                        Packageobj.price = $('[id$="txtcontentTot_ItemMaster"]').val();
                        Packageobj.discount = 0;
                        //Packageobj.dateCreated = new Date().getMonth() + 1;
                        Packageobj.dateCreated = null;
                        //var ThisHour = new Date().getHours();
                        //var ThisMinute = new Date().getMinutes();
                        //Packageobj.timeCreated = ThisHour.toString() + ":" + ThisMinute.toString();
                        Packageobj.timeCreated = null;
                        Packageobj.userName = "";
                        Packageobj.packageBarcode = $('[id$="txt_StockDesc"]').val();
                        Packageobj.unitPrice = $('[id$="txtcontentTot_ItemMaster"]').val();

                        var packagefromDate = $('[id$="dtFromDatePackage_ItemMaster"]').val();
                        if (packagefromDate == "") {
                            Packageobj.fromDate = null;
                        }
                        else {
                                var datearray = packagefromDate.split("/");

                                Packageobj.fromDate = datearray[2] + '/' + datearray[1] + '/' + datearray[0];
                                //Packageobj.fromDate = new Date(Date.parse(packagefromDate)).format("yyyy/MM/dd");
                        }

                        var packagetoDate = $('[id$="dtToDatePackage_ItemMaster"]').val();
                        if (packagetoDate == "") {
                            Packageobj.toDate = null;
                        }
                        else {
                                var datearray = packagefromDate.split("/");
                                Packageobj.fromDate = datearray[2] + '/' + datearray[1] + '/' + datearray[0];
                                //Packageobj.toDate = new Date(Date.parse(packagetoDate)).format("yyyy/MM/dd");
                        }

                        var packageFromTime = $('[id$="dtFromTimePackage_ItemMaster"]').val();
                        if (packageFromTime == "") {
                            Packageobj.fromTime = null;
                        }
                        else {
                                //Packageobj.fromTime = new Date(Date.parse(packageFromTime)).format("yyyy/MM/dd, h:MM:ss TT");
                            Packageobj.fromTime = '1899-12-30 ' + packageFromTime;
                        }

                        var packagetoTime = $('[id$="dtToTimePackage_ItemMaster"]').val();
                        if (packagetoTime == "") {
                            Packageobj.toTime = null;
                        }
                        else {
                                //Packageobj.toTime = new Date(Date.parse(packagetoTime)).format("yyyy/MM/dd HH:mm:ss");
                            Packageobj.toTime ='1899-12-30 '+ packagetoTime;
                        }
                        Packageobj.siteCode = '<%=Session["User_SiteCode"]%>';
                        if (Packobj.siteCode == "") { Packobj.siteCode="S1" }
                        Packageobj.manualDisc = $('[id$="chkPacakgeManual_ItemMaster"]').is(':checked') ? 'True' : 'False';
                        Packageobj.istdt = $('[id$="chkApptTDT_ItemMaster"]').is(':checked') ? 'True' : 'False';
                        Packageobj.apptlimit = $('[id$="chkApptTDT_ItemMaster"]').is(':checked') ? 'True' : 'False';

                        Packagedetails.push(Packageobj);

                        $.ajax({
                    type: "POST",
                    url: "ItemMaster.aspx/AddPackageMasData",
                    data: '{ Details :' + JSON.stringify(Packagedetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                    }
                        });
        }

        function EditPackageAdd() {

            var runNo1 = $('[id$="txt_RunningNo1"]').val();
                var runNo2 = $('[id$="txt_RunningNo2"]').val();
                var itemCode = runNo1 + runNo2;
            var PackageTabledetails = [];
                    var packagerows = $('#PackageEntryModule tbody >tr');
                    var packagecolumns;
                    for (var i = 1; i < packagerows.length; i++) {
                        packagecolumns = $(packagerows[i]).find('td');
                        var Packobj = {};
                        Packobj.code =  $(packagecolumns[0]).html()+"0000";
                        Packobj.description =  $('[id$="txt_StockName"]').val();
                        Packobj.cost = null;
                        Packobj.price = $(packagecolumns[3]).html();
                        Packobj.discount = $(packagecolumns[5]).html();
                        Packobj.packageCode =itemCode;
                        Packobj.qty = $(packagecolumns[2]).html();
                        Packobj.uom = $(packagecolumns[7]).html();
                        Packobj.packageBarcode = null;
                        Packobj.discPercent = null;
                        Packobj.unitPrice = $(packagecolumns[3]).html();
                        Packobj.ttlUprice = $(packagecolumns[4]).html();
                        Packobj.siteCode = '<%=Session["User_SiteCode"]%>';
                        if (Packobj.siteCode == "") { Packobj.siteCode="S1" }
                        Packobj.lineNo = i;
                        Packobj.isactive = true;
                        Packobj.treatmentLimitActive= false;
                        PackageTabledetails.push(Packobj);
                    }

                      $.ajax({
                    type: "POST",
                    url: "ItemMaster.aspx/EditPackageDtlData",
                    data: '{ Details :' + JSON.stringify(PackageTabledetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                    }
                        });


                        var Packagedetails = [];
                        var Packageobj = {};
                        Packageobj.code = itemCode;
                        Packageobj.description = $('[id$="txt_StockName"]').val();
                        Packageobj.price = $('[id$="txtcontentTot_ItemMaster"]').val();
                        Packageobj.discount = 0;
                        //Packageobj.dateCreated = new Date().getMonth() + 1;
                        Packageobj.dateCreated = null;
                        //var ThisHour = new Date().getHours();
                        //var ThisMinute = new Date().getMinutes();
                        //Packageobj.timeCreated = ThisHour.toString() + ":" + ThisMinute.toString();
                        Packageobj.timeCreated = null;
                        Packageobj.userName = "";
                        Packageobj.packageBarcode = $('[id$="txt_StockDesc"]').val();
                        Packageobj.unitPrice = $('[id$="txtcontentTot_ItemMaster"]').val();

                        var packagefromDate = $('[id$="dtFromDatePackage_ItemMaster"]').val();
                        if (packagefromDate == "") {
                            Packageobj.fromDate = null;
                        }
                        else {
                                var datearray = packagefromDate.split("/");

                                Packageobj.fromDate = datearray[2] + '/' + datearray[1] + '/' + datearray[0];
                                //Packageobj.fromDate = new Date(Date.parse(packagefromDate)).format("yyyy/MM/dd");
                        }

                        var packagetoDate = $('[id$="dtToDatePackage_ItemMaster"]').val();
                        if (packagetoDate == "") {
                            Packageobj.toDate = null;
                        }
                        else {
                                var datearray = packagefromDate.split("/");
                                Packageobj.fromDate = datearray[2] + '/' + datearray[1] + '/' + datearray[0];
                                //Packageobj.toDate = new Date(Date.parse(packagetoDate)).format("yyyy/MM/dd");
                        }

                        var packageFromTime = $('[id$="dtFromTimePackage_ItemMaster"]').val();
                        if (packageFromTime == "") {
                            Packageobj.fromTime = null;
                        }
                        else {
                                //Packageobj.fromTime = new Date(Date.parse(packageFromTime)).format("yyyy/MM/dd, h:MM:ss TT");
                            Packageobj.fromTime = '1899-12-30 ' + packageFromTime;
                        }

                        var packagetoTime = $('[id$="dtToTimePackage_ItemMaster"]').val();
                        if (packagetoTime == "") {
                            Packageobj.toTime = null;
                        }
                        else {
                                //Packageobj.toTime = new Date(Date.parse(packagetoTime)).format("yyyy/MM/dd HH:mm:ss");
                            Packageobj.toTime ='1899-12-30 '+ packagetoTime;
                        }
                        Packageobj.siteCode = '<%=Session["User_SiteCode"]%>';
                        if (Packobj.siteCode == "") { Packobj.siteCode="S1" }
                        Packageobj.manualDisc = $('[id$="chkPacakgeManual_ItemMaster"]').is(':checked') ? 'True' : 'False';
                        Packageobj.istdt = $('[id$="chkApptTDT_ItemMaster"]').is(':checked') ? 'True' : 'False';
                        Packageobj.apptlimit = $('[id$="chkApptTDT_ItemMaster"]').is(':checked') ? 'True' : 'False';

                        Packagedetails.push(Packageobj);

                        $.ajax({
                    type: "POST",
                    url: "ItemMaster.aspx/EditPackageMasData",
                    data: '{ Details :' + JSON.stringify(Packagedetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                    }
                        });
        }

        function courseAdd() {

            var stockdetails1 = [];
            var stockobj1 = {};
                var runNo1 = $('[id$="txt_RunningNo1"]').val();
                var runNo2 = $('[id$="txt_RunningNo2"]').val();
                var num= runNo1 + runNo2;
                var itemCode1  = Number(num) + 1;
                stockobj1.itemCode = itemCode1;
                stockobj1.itemDiv = $('[id$="ddl_Div"]').val();
                stockobj1.itemDept = $('[id$="ddl_Dept"]').val();
                stockobj1.itemClass = $('[id$="ddl_Class"]').val();
                stockobj1.itemBrand = $('[id$="ddl_Brand"]').val();
                stockobj1.itemRange = $('[id$="ddl_Range"]').val();
                stockobj1.itemName = $('[id$="txt_StockName"]').val();
                stockobj1.itemDesc = $('[id$="txt_StockDesc"]').val();
                stockobj1.limitserviceFlexionly = $('[id$="chk_AutoAddOpenCode"]').is(':checked') ? 'True' : 'False';
                stockobj1.isOpenPrepaid = $('[id$="chk_openPrepaid"]').is(':checked') ? 'True' : 'False';
                stockobj1.itemType = "COURSE";
                //stockobj.itemSupp = $('[id$="ddl_supplier"]').val();
                stockobj1.itemSupp = "";
                stockobj1.itemPrice = $('[id$="txt_price"]').val();
                stockobj1.itemPriceFloor = $('[id$="txt_floorPrice"]').val();
                stockobj1.costPrice = $('[id$="txt_Cost"]').val();
                stockobj1.disclimit = $('[id$="txt_Disc"]').val();
                stockobj1.disctypeamount = $('[id$="chk_discType"]').is(':checked') ? 'True' : 'False';
                stockobj1.autocustdisc = $('[id$="chk_AutoCustDisc"]').is(':checked') ? 'True' : 'False';

                stockobj1.itemIsactive = $('[id$="chk_Active"]').is(':checked') ? 'True' : 'False';
                stockobj1.commissionable = $('[id$="chk_Commissionable"]').is(':checked') ? 'True' : 'False';
                stockobj1.itemFoc = $('[id$="chk_RedeemItem"]').is(':checked') ? 'True' : 'False';
                stockobj1.isGst = $('[id$="chk_Tax"]').is(':checked') ? 'True' : 'False';
                stockobj1.isAllowFoc = $('[id$="chk_ItemallowFOC"]').is(':checked') ? 'True' : 'False';
                stockobj1.accountCode = $('[id$="txt_AccCodeItemMaster"]').val();

                stockobj1.voucherIsvalidUntilDate = $('[id$="chk_VoucherValidItemMaster"]').is(':checked') ? 'True' : 'False';
                var voucherValidUntilDate1 = $('[id$="dt_VoucherValItemMaster"]').val();
                if (voucherValidUntilDate1 == "") {
                    stockobj1.voucherValidUntilDate = null;
                }
                else {
                    stockobj1.voucherValidUntilDate = new Date(Date.parse(voucherValidUntilDate1)).format("yyyy/MM/dd");
                }
                stockobj1.voucherValue = $('[id$="txtVouValueItemMaster"]').val();
                stockobj1.voucherValueIsAmount;

                //var radioValue = $("#option_Amount_ItemMaster:checked").val();
                var radioValue1 = $('[id$="option_Amount_ItemMaster"]').val();
                if (radioValue1=="Amount") {
                        voucherValueIsAmount = true;
                }
                else {
                        voucherValueIsAmount = false;
                }
                stockobj1.voucherValidPeriod = $('[id$="ddl_ValidityPeriodItemMaster"]').val();

                stockobj1.prepaidValidPeriod = $('[id$="ddl_ValidPeriodItemMaster"]').val();
                var membercardnoaccess1= $('[id$="chk_MemberCardItemMaster"]').is(':checked') ? 'True' : 'False';
                stockobj1.membercardnoaccess = $('[id$="chk_MemberCardItemMaster"]').is(':checked') ? 'True' : 'False';
                stockobj1.prepaidValue = $('[id$="txt_PrepaidValue"]').val();
                stockobj1.prepaidSellAmt = $('[id$="txt_PrepaidAmnt"]').val();

                stockobj1.reorderActive = $('[id$="chk_ReorderLevelItemMaster"]').is(':checked') ? 'True' : 'False';
                stockobj1.reorderMinqty = $('[id$="txt_minQtyItemMaster"]').val();
                stockobj1.custReplenishDays = $('[id$="txt_ReplenishmentItemMaster"]').val();
                stockobj1.custAdvanceDays = $('[id$="txt_RemindAdvItemMaster"]').val();
                stockobj1.trading = $('[id$="chk_ReplenishmentItemMaster"]').is(':checked') ? 'True' : 'False';

                stockobj1.workcomm = $('[id$="ddlWorkCommGroup_itemMaster"]').val();
                stockobj1.salescomm = $('[id$="ddlSalesCommGroup_itemMaster"]').val();
                stockobj1.workcommpoints = $('[id$="txtworkPoints_ItemMaster"]').val();
                stockobj1.salescommpoints = $('[id$="txtSalesPoints_ItemMaster"]').val();

                stockobj1.serviceExpireActive = $('[id$="chkExpiryStatus_ItemMaster"]').is(':checked') ? 'True' : 'False';
                stockobj1.serviceExpireMonth = $('[id$="txtserviceExpiryMonth_ItemMaster"]').val();
                stockobj1.treatmentLimitActive = $('[id$="chkServiceLimit_ItemMaster"]').is(':checked') ? 'True' : 'False';
                stockobj1.treatmentLimitCount = $('[id$="txtServiceLimit_ItemMaster"]').val();
                stockobj1.limitserviceFlexionly = $('[id$="chkServiceFlexi_ItemMaster"]').is(':checked') ? 'True' : 'False';

                stockobj1.t1TaxCode = $('[id$="ddl1stTax_ItemMaster"]').val();
                stockobj1.t2TaxCode = $('[id$="ddl2ndTax_ItemMaster"]').val();



                            stockdetails1.push(stockobj1);

                            $.ajax({
                    type: "POST",
                    url: "ItemMaster.aspx/AddItemMasterData",
                    data: '{ Details :' + JSON.stringify(stockdetails1) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                    }
                    });


                    //$.ajax({
                    //type: "POST",
                    //url: "ItemMaster.aspx/Addstockdetails",
                    //data: '{ Details :' + JSON.stringify(stockdetailsNew) + '}',
                    //contentType: "application/json; charset=utf-8",
                    //dataType: "json",
                    //success: function (r) {
                    // //   alert(r.d);
                    //}
                    //});


                    //$.ajax({
                    //    type: "POST",
                    //    url: 'ItemMaster.aspx/AddItemMasterData',
                    //    data: "{'itemCode':'" + itemCode + "','itemDiv':'" + itemDiv + "','itemDept':'" + itemDept + "','itemClass':'" + itemClass + "','itemBrand':'" + itemBrand + "','itemRange':'" + itemRange + "','itemName':'" + itemName + "','itemDesc':'" + itemDesc + "','limitserviceFlexionly':'" + limitserviceFlexionly + "','isOpenPrepaid':'" + isOpenPrepaid + "','itemType':'" + itemType + "','itemSupp':'" + itemSupp + "','itemPrice':'" + itemPrice + "','itemPriceFloor':'" + itemPriceFloor + "','costPrice':'" + costPrice + "','disclimit':'" + disclimit + "','disctypeamount':'" + disctypeamount + "','autocustdisc':'" + autocustdisc + "','itemIsactive':'" + itemIsactive + "','commissionable':'" + commissionable + "','itemFoc':'" + itemFoc + "','isGst':'" + isGst + "','isAllowFoc':'" + isAllowFoc + "','accountCode':'" + accountCode + "','voucherIsvalidUntilDate':'" + voucherIsvalidUntilDate + "','voucherValidUntilDate':'" + voucherValidUntilDate + "','voucherValue':'" + voucherValue + "','voucherValueIsAmount':'" + voucherValueIsAmount + "','voucherValidPeriod':'" + voucherValidPeriod + "','reorderActive':'" + reorderActive + "','reorderMinqty':'" + reorderMinqty + "','custReplenishDays':'" + custReplenishDays + "','custAdvanceDays':'" + custAdvanceDays + "','trading':'" + trading + "'}",
                    //    contentType: "application/json; charset=utf-8",
                    //    dataType: "json",
                    //    success: function (msg) {
                    //        $("#divResult").html("success");
                    //    },
                    //    error: function (e) {
                    //        $("#divResult").html("Something Wrong.");
                    //    }
                    //});

                    var UOMModuledetails1 = [];

                var rows1 = $('#UOMModule tbody >tr');
                var UomEntryrows1 = $('#UOMEntryModule tbody >tr');
                var columns1;
                for (var i = 1; i < rows1.length; i++) {
                    columns1 = $(rows1[i]).find('td');
                    var obj1 = {};
                    obj1.itemCode = itemCode1;
                    obj1.itemUom = $(columns1[1]).html();
                    obj1.uomDesc = $(columns1[2]).html();
                    obj1.uomUnit = $(columns1[4]).html();
                    obj1.itemUom2 = $(columns1[5]).html();
                    obj1.uom2Desc = $(columns1[6]).html();

                    Entrycolumns = $(UomEntryrows[i]).find('td');
                    obj1.itemPrice = $(Entrycolumns[2]).find('input').val();
                    obj1.itemCost = $(Entrycolumns[3]).find('input').val();
                    obj1.minMargin = $(Entrycolumns[4]).find('input').val();

                    obj1.isactive = true;
                    obj1.itemUompriceSeq = $(columns[0]).html();
                    UOMModuledetails1.push(obj1);
                }

                


                //$('[id*=UOMModule] tr:not(:has(th))').each(function () {
                //    var obj = {};
                //    obj.itemCode = itemCode;
                //    obj.itemUom = $.trim($(this).find('td').eq(1).html());
                //    obj.uomDesc = $.trim($(this).find('td').eq(4).html());
                //    obj.uomUnit = $.trim($(this).find('td').eq(3).html());
                //    obj.isactive = true;
                //    obj.itemUompriceSeq = $.trim($(this).find('td').eq(0).html());
                //    details.push(obj);
                //});

                //$('[id*=UOMEntryModule] tr:not(:has(th))').each(function () {
                //    var obj1 = {};
                //    obj1.itemCode = itemCode;
                //    obj1.uomDesc = $.trim($(this).find('td').eq(0).html());
                //    obj1.itemPrice = $.trim($(this).find('td').eq(1).html());
                //    obj1.itemCost = $.trim($(this).find('td').eq(2).html());
                //    obj1.minMargin = $.trim($(this).find('td').eq(3).html());
                //    details1.push(obj1);
                //});



                   $.ajax({
                    type: "POST",
                    url: "ItemMaster.aspx/AddItemMasterUOMData",
                    data: '{ Details :' + JSON.stringify(UOMModuledetails1) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                    }
                });

                var LinkdetailsForP1 = [];
                    var LinkobjForP1 = {};
                    LinkobjForP1.itemCode = itemCode1+"0000";
                    LinkobjForP1.linkCode =itemCode1+"0000";
                    LinkobjForP1.linkDesc = $('[id$="txt_StockName"]').val();
                    LinkobjForP1.linkType ="P";
                    LinkobjForP1.itmIsactive = true;
                    LinkdetailsForP1.push(LinkobjForP1);
                $.ajax({
                    type: "POST",
                    url: "ItemMaster.aspx/AddItemMasterLinkData",
                    data: '{ Details :' + JSON.stringify(LinkdetailsForP1) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                        //alert(r.d);
                    }
                    });



                var Linkdetails1 = [];
                var Linkrows1 = $('#LinkModule tbody >tr');
                var Linkcolumns1;
                for (var j= 1; j < Linkrows1.length; j++) {
                    Linkcolumns1 = $(Linkrows1[j]).find('td');
                    var Linkobj1 = {};
                    Linkobj1.itemCode = itemCode1+"0000";
                    Linkobj1.linkCode =$(Linkcolumns1[0]).html()+"C";
                    Linkobj1.linkDesc = $(Linkcolumns1[1]).html();
                    Linkobj1.linkType ="L";
                    Linkobj1.itmIsactive = true;
                    Linkdetails1.push(Linkobj1);
                }

                $.ajax({
                    type: "POST",
                    url: "ItemMaster.aspx/AddItemMasterLinkData",
                    data: '{ Details :' + JSON.stringify(Linkdetails1) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                        //alert(r.d);
                    }
                });


                var StockListingdetails1 = [];
                var StockListingrows1 = $('#stockListingMaster tbody >tr');
                var StockListingcolumns1;
                for (var k = 1; k < StockListingrows1.length; k++) {

                    StockListingcolumns1 = $(StockListingrows1[k]).find('td');
                    var checked = $(StockListingcolumns1[2]).is(':checked') ? 'True' : 'False';
                    if (StockListingcolumns1.find('input[type="checkbox"]').is(':checked')) {
                    //if (checked == 'True') {
                        var StockListingobj3 = {};
                        StockListingobj3.itemCode = itemCode1;
                        StockListingobj3.itemBarcode = itemCode1+"0000";
                        StockListingobj3.itemsiteCode = $(StockListingcolumns1[0]).html();
                        StockListingobj3.onhandQty = "0";
                        StockListingdetails1.push(StockListingobj3);
                    }
                }

                if (jQuery.isEmptyObject(StockListingdetails1)) {
                    var StockListingobj4 = {};
                        StockListingobj4.itemCode = itemCode1;
                        StockListingobj4.itemBarcode = itemCode1+"0000";
                        StockListingobj4.itemsiteCode =  '<%=Session["User_SiteCode"]%>';
                        StockListingobj4.onhandQty = "0";
                        StockListingdetails1.push(StockListingobj4);
                }


                $.ajax({
                    type: "POST",
                    url: "ItemMaster.aspx/AddItemMasterstockListing",
                    data: '{ Details :' + JSON.stringify(StockListingdetails1) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                    }
                });

                                var ItemUsagedetails1 = [];
                var ItemUsagerows1 = $('#ItemUsageMasterModule tbody >tr');
                var ItemUsagecolumns1;
                for (var L = 1; L < ItemUsagerows1.length; L++) {

                    ItemUsagecolumns1 = $(ItemUsagerows1[L]).find('td');
                    var ItemUsageobj1 = {};
                        
                    ItemUsageobj1.serviceCode = $(ItemUsagecolumns1[0]).html()+"0000";
                    ItemUsageobj1.itemCode = itemCode1+"0000";
                    ItemUsageobj1.qty = $(ItemUsagecolumns1[2]).html();
                    ItemUsageobj1.uom = $(ItemUsagecolumns1[3]).html();
                    ItemUsageobj1.sequence = L;
                    ItemUsageobj1.serviceDesc = $(ItemUsagecolumns1[1]).html();
                    ItemUsageobj1.itemDesc = $('[id$="txt_StockName"]').val();
                    ItemUsageobj1.isactive = true;
                    ItemUsagedetails1.push(ItemUsageobj1);
                }
                $.ajax({
                    type: "POST",
                    url: "ItemMaster.aspx/AddItemMasterItemUsage",
                    data: '{ Details :' + JSON.stringify(ItemUsagedetails1) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                        //alert(r.d);
                    }
                });


                var PrepaidDetails1 = [];
                var Prepaidrows1 = $('#PrepaidCondModule tbody >tr');
                var Prepaidcolumns1;
                for (var M = 1; M < Prepaidrows1.length; M++) {

                    Prepaidcolumns1 = $(Prepaidrows1[M]).find('td');
                    var Prepaidobj1 = {};
                        
                    Prepaidobj1.pItemtype = $(Prepaidcolumns1[0]).html();
                    Prepaidobj1.itemCode = itemCode1;
                    Prepaidobj1.conditiontype1 = $(Prepaidcolumns1[1]).html();
                    Prepaidobj1.conditiontype2 = $(Prepaidcolumns1[2]).html();
                    Prepaidobj1.amount = $(Prepaidcolumns1[3]).html();
                    Prepaidobj1.rate = $(Prepaidcolumns1[4]).html();
                    Prepaidobj1.membercardnoaccess = membercardnoaccess1;
                    PrepaidDetails1.push(Prepaidobj1);
                }
                $.ajax({
                    type: "POST",
                    url: "ItemMaster.aspx/AddItemMasterPrepaidConditions",
                    data: '{ Details :' + JSON.stringify(PrepaidDetails1) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                        //alert(r.d);
                    }
                });

                var BatchDetails1 = [];
                var Batchrows1 = $('#UOMModule tbody >tr');
                var Batchcolumns1;
                if (Batchrows1.length > 1) {
                        Batchcolumns1 = $(Batchrows1[1]).find('td');
                        var batchobj3 = {};
                        batchobj3.itemCode = itemCode1;
                        batchobj3.siteCode = '<%=Session["User_SiteCode"]%>';
                        batchobj3.batchNo = null;
                        batchobj3.uom = $(columns[1]).html();
                        batchobj3.qty = "0";
                        batchobj3.expDate = null;
                        batchobj3.batchCost = "0";
                        BatchDetails1.push(batchobj3);
                }
                else {
                        var batchobj4 = {};
                        batchobj4.itemCode = itemCode1;
                        batchobj4.siteCode = '<%=Session["User_SiteCode"]%>';
                        batchobj4.batchNo = null;
                        batchobj4.uom = "";
                        batchobj4.qty = "0";
                        batchobj4.expDate = null;
                        batchobj4.batchCost = "0";
                        BatchDetails1.push(batchobj4);
                }

                $.ajax({
                    type: "POST",
                    url: "ItemMaster.aspx/AddItemMasterItemBatch",
                    data: '{ Details :' + JSON.stringify(BatchDetails1) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                        //alert(r.d);
                    }
                    });

        }


            $('[id$="btnSubmit_AddInclusive"]').click(function () {

                var _val = $('[id$="txtInclusive_amnt"]').val();
                if (_val != "") {

                    var value;
                    var counter = 0;
                    var newRow = $("<tr>");
                    var cols = "";
                    var _Code = "";
                    //var amnt = document.getElementById('txtInclusive_amnt').value;
                    var amnt = $('[id$="txtInclusive_amnt"]').val();
                    cols += '<td style="width: 6%; text-align:center">' + "Inclusive" + '</td>';
                    cols += '<td style="width: 6%; text-align:center">' + $('#ddl_InclusiveType').val() + '</td>';
                    if (document.getElementById('chk_InclusiveAll').checked) {
                        cols += '<td style="width: 6%; text-align:center">' + "All" + '</td>';
                    }
                    else {
                        cols += '<td style="width: 6%; text-align:center">' + $('#ddl_InclusiveDept').val() + '</td>';
                    }
                    cols += '<td style="width: 7%; text-align:center">' + parseFloat($('[id$="txtInclusive_amnt"]').val().replace("'", "")).toFixed(2) + '</td>';
                    //cols += '<td style="width: 7%; text-align:center">' + amnt + '</td>';
                    cols += '<td style="width: 7%; text-align:center">' + "Amount $" + '</td>';
                    cols += '<td style="width: 2%; text-align:center"><div class="tools"><i class="Remove_PrepaidCondModule glyphicon glyphicon-trash"></i></div></td>';

                    newRow.append(cols);
                    $("#PrepaidCondModule").append(newRow);
                    counter++;
                }
                else {
                    alert("Price is empty...");
                }

        var _Total = 0;
        $('#PrepaidCondModule').find('tr').each(
           function (i) {
               if ($('#PrepaidCondModule').find('tr:eq(' + (i + 1) + ') td:eq(3)').text() != '')
               { _Total = parseFloat(_Total) + parseFloat($('#PrepaidCondModule').find('tr:eq(' + (i + 1) + ') td:eq(3)').text()); }
            });
                    $('[id$="txt_PrepaidValue"]').val(_Total.toFixed(2));
                    $('[id$="txt_PrepaidAmnt"]').val(_Total.toFixed(2));
                    $('[id$="txt_price"]').val(_Total.toFixed(2));

                });



             $('[id$="btnSubmit_AddExclusive"]').click(function () {
        var value;
        var counter = 0;
        var newRow = $("<tr>");
        var cols = "";
                    var _Code = "";
                    //var amnt = document.getElementById('txtInclusive_amnt').value;
        cols += '<td style="width: 6%; text-align:center">' + "Exclusive" + '</td>';
                    cols += '<td style="width: 6%; text-align:center">' + $('#ddl_ExclusiveType').val() + '</td>';
                    cols += '<td style="width: 6%; text-align:center">' + $('#ddl_ExclusiveDept').val() + '</td>';
                    cols += '<td style="width: 7%; text-align:center">' + "" + '</td>';
                    //cols += '<td style="width: 7%; text-align:center">' + amnt + '</td>';
        cols += '<td style="width: 7%; text-align:center">' + "" + '</td>';
        cols += '<td style="width: 2%; text-align:center"><div class="tools"><i class="Remove_PrepaidCondModule glyphicon glyphicon-trash"></i></div></td>';

        newRow.append(cols);
        $("#PrepaidCondModule").append(newRow);
        counter++;

             });



             $(document).on("click", ".Remove_PrepaidCondModule", function () {
                 var rowIndex = $('#PrepaidCondModule tr').index($(this).closest('tr'));
                 $(this).closest("tr").remove();
                 var _Total = 0;
                 $('#PrepaidCondModule').find('tr').each(
           function (i) {
               if ($('#PrepaidCondModule').find('tr:eq(' + (i + 1) + ') td:eq(3)').text() != '' )
               { _Total = parseFloat(_Total) + parseFloat($('#PrepaidCondModule').find('tr:eq(' + (i + 1) + ') td:eq(3)').text()); }
            });
        $('[id$="txt_PrepaidValue"]').val(_Total.toFixed(2));
                 $('[id$="txt_PrepaidAmnt"]').val(_Total.toFixed(2));
                 $('[id$="txt_price"]').val(_Total.toFixed(2));

             });

            $('[id$="txt_PrepaidAmnt"]').change(function () {
                var _Total = 0;
                _Total = parseFloat($('[id$="txt_PrepaidAmnt"]').val())
                $('[id$="txt_PrepaidAmnt"]').val(_Total.toFixed(2));
                $('[id$="txt_price"]').val(_Total.toFixed(2));
            });


            //$("#chk_showSalon").click(function () {
            //    alert("abcd");
            //                            });

            $("#chk_showSalon").click( function(){
                var Salon = $(this).is(':checked') ? 'checked' : 'unchecked';
                var Retail = $("#chk_showRetail").is(':checked') ? 'checked' : 'unchecked';

                $('#ItemUsageMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=ItemUsage1&PKey=' + Salon + '&PKey1=' + Retail + '',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                     "bDestroy": true,
                    language: {
                        searchPlaceholder: "Search By Description/Item Code/Barcode"
                    },
                    'columns': [
                        null, null, null,
                        {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<i class="edit_mdlAddItemUsage glyphicon glyphicon-pencil"></i></a>';
                              return data;
                          }
                        }


                    ]
                })

            });

         $(function () {
                $('#ItemListMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=ItemList',
                    'paging': true,
                    'lengthChange': true,
                    'responsive': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Stock Code/Stock Name/Link Code/Type/Division/Class/Dept/Brand/Range"
                    },
                    'columns': [
                        {
                          'data': 'stockcode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="ItemMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                      },null,null,null,null,null,null,null,null,null
                    ]

                })
            });

            $(".btnFillter_ItemMasterList .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#ItemListMaster').DataTable();
        table
            .column(7)
            .search(inputValue)
            .draw();
            });

            $(function () {
                $('#BrandListMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=BrandList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Code/ Description"
                    },
                    'columns': [
                        {
                          'data': 'itmCode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="BrandMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                      },null,null,null,null,null
                    ]
                })
            });

            $(".btnFillter_BrandList .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#BrandListMaster').DataTable();
        table
            .column(2)
            .search(inputValue)
            .draw();
            });

             $(function () {
                $('#RangeProductListMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=RangeProductList&PKey=isproduct',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Code/ Description / Brand "
                    },
                    'columns': [
                        {
                          'data': 'itmCode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="RangeMasterProduct.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null,null,null
                      ]
                })
            });

            $(".btnFillter_RangeMasterProductList .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#RangeProductListMaster').DataTable();
        table
            .column(3)
            .search(inputValue)
            .draw();
            });


                $(function () {
                $('#RangeVoucherListMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=RangeProductList&PKey=isvoucher',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Code/ Description /Brand "
                    },
                    'columns': [
                        {
                          'data': 'itmCode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="RangeMasterVoucher.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null,null,null
                      ]
                })
            });

            $(".btnFillter_RangeMasterVoucherList .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#RangeVoucherListMaster').DataTable();
        table
            .column(3)
            .search(inputValue)
            .draw();
            });


                $(function () {
                $('#RangePrepaidListMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=RangeProductList&PKey=isprepaid',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Code/ Description / Brand "
                    },
                    'columns': [
                        {
                          'data': 'itmCode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="RangeMasterPrepaid.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null,null,null
                      ]
                })
            });

            $(".btnFillter_RangeMasterPrepaidList .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#RangePrepaidListMaster').DataTable();
        table
            .column(3)
            .search(inputValue)
            .draw();
            });

        $(function () {
                $('#ConfigEquipmentListMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=ConfigEquipmentList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    'columns': [
                     {
                         'data': 'itemsiteCode',
                         'render': function (data, type, row, meta) {
                             data = '<a href="EquipmentMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                             return data;
                         }
                     }, null, null,null]
                })
            });

              $(function () {
                $('#RangeServiceListMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=RangeServiceList&PKey=isservice',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Code/ Desription /Service"
                    },
                    'columns': [
                        {
                          'data': 'itmCode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="RangeMasterService.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null,null,null
                      ]
                })
            });

            $(".btnFillter_RangeMasterServiceList .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#RangeServiceListMaster').DataTable();
        table
            .column(3)
            .search(inputValue)
            .draw();
            });


            
              $(function () {
                $('#RangeCompoundListMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=RangeServiceList&PKey=iscompound',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Code/ Description / Service"
                    },
                    'columns': [
                        {
                          'data': 'itmCode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="RangeMasterCompound.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null,null,null
                      ]
                })
            });

            $(".btnFillter_RangeMasterCompoundList .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#RangeCompoundListMaster').DataTable();
        table
            .column(3)
            .search(inputValue)
            .draw();
            });

            $(function () {
                $('#DeptListMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=DeptListMaster',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Department Code/ Description / Sequence / Active"
                    },
                    'columns': [
                        {
                          'data': 'itmCode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="DepartmentMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null,null,null
                      ]
                })
            });

            $(".btnFillter_DeptListMaster .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#DeptListMaster').DataTable();
        table
            .column(3)
            .search(inputValue)
            .draw();
            });

        //    $('[id$="txtDeptCode_DeptMaster"]').change(function () {
        //$.ajax({
        //    type: 'POST',
        //    url: 'Utilities/DataModels.ashx?ID=DeptCodeCheck&PKey=' + this.value + '',
        //    dataType: "json",
        //    Cache: false,
        //    success: function (data) {
        //        var JsonArray = JSON.stringify(data);
        //        var Json = JSON.parse(JsonArray);
        //        if (Json.iTotalRecords == 0) {
        //        }
        //        else {
        //            $('[id$="txtDeptCode_DeptMaster"]').val("");
        //            alert("Code already Exists");
        //        }
        //    }
        //});
        //    });

            
        $(function () {
                $('#DivisionMasterPage').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=DivListMaster',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Division Code/ Description/ Division is currently active"
                    },
                    'columns': [
                        {
                          'data': 'itmCode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="DivMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null,null
                      ]
                })
            });

            $(".btnFillter_DivListMaster .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#DivisionMasterPage').DataTable();
        table
            .column(2)
            .search(inputValue)
            .draw();
        });

        $(function () {
                $('#ClassificationMasterPage').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=ClassListMaster',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Classification Code/ Description/ Classification is currently active"
                    },
                    'columns': [
                        {
                          'data': 'itmCode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="ClassMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null,null
                      ]
                })
            });

            $(".btnFillter_ClassListMaster .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#ClassificationMasterPage').DataTable();
        table
            .column(2)
            .search(inputValue)
            .draw();
            });



            $("#chk_showRetail").click( function(){
                var  Retail = $(this).is(':checked') ? 'checked' : 'unchecked';
                var Salon= $("#chk_showSalon").is(':checked') ? 'checked' : 'unchecked';

                $('#ItemUsageMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=ItemUsage1&PKey=' + Salon + '&PKey1=' + Retail + '',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                     "bDestroy": true,
                    language: {
                        searchPlaceholder: "Search By Description/Item Code/Barcode"
                    },
                    'columns': [
                        null, null, null,
                        {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<i class="edit_mdlAddItemUsage glyphicon glyphicon-pencil"></i></a>';
                              return data;
                          }
                        }


                    ]
                })

            });



            //$('#chk_VoucherValid').on('change', function () {
            //        alert("already Exists");
            //});



                //   $(function () {
                //$('#TaskMaster').DataTable({
                //    'sAjaxSource': 'Utilities/DataModels.ashx?ID=TaskList',
                //    'paging': true,
                //    'lengthChange': true,
                //    'searching': true,
                //    'ordering': true,
                //    'info': true,
                //    'autoWidth': true,
                //    language: {
                //        searchPlaceholder: "Search By Code/Name/ID/Contact"
                //    },
                //    'columns':
                //        [
                //            { "data": "taskID"}, 
                //            { "data": "taskDescription" }
                //        ]
                //})
                //   });

    //        $(".chk_VoucherValid").change(function() {
    //if(this.checked) {
    //    alert("unchecked");
    //}
    //        });

    //        $(document).ready(function () {
    //$(document).on('change', 'input[Id="chk_VoucherValid"]', function (e) {
    //    alert($(this).val());
    //});
    //        });

//            $('#chk_VoucherValid').click (function ()
//{
//var thisCheck = $(this);
//if (thischeck.is (':checked'))
//{
//document.getElementById('dateIdItemMaster').style.display = "";
//}
//            });


        //    $('#chk_VoucherValid').on('change', function () {

        //var _val = $(this).is(':checked') ? 'checked' : 'unchecked';
        //if (_val == 'unchecked') {
        //    alert("unchecked");
        //}
        //else {
        //    alert("checked");
        //}
        //    });


              //$('#chk_VoucherValid').on('change', function () {
              //      var _val = $(this).is(':checked') ? 'checked' : 'unchecked';
       
              //});


            $('[id$="btnDivisionMaster_AddNew"]').click(function () {
        var counter = 0;
        var newRow = $("<tr>");
        var cols = "";
        cols += '<td style="width: 30%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_DivisionMaster" runat="server" maxlength="255" placeholder="Enter Code"></td>';
        cols += '<td style="width: 30%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_DivisionMaster" runat="server" maxlength="255" placeholder="Enter Name"></td>';
        cols += '<td style="width: 30%; text-align:center"><input type="checkbox"   class="chk_mdlDivisionMaster editor - active" runat="server" id="chk_ActiveDivMaster"></td>';
        cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Add_mdlDivisionMaster  glyphicon glyphicon-plus"></i></div></td>';
                
        newRow.append(cols);
        $("#DivisionMasterPage").append(newRow);
        counter++;
        $('[id$="btnDivisionMaster_AddNew"]').prop('disabled', true);
            });

            function valueInTableDivision(tableID, columnNum, searchString){
  var found = false;
                $("#DivisionMasterPage tr").each(function () {
      var itemCode = $(this).find("td").eq(0).html();
    if (itemCode == searchString ){
      found = true;
      return false;
    }
  });

  return found;
            }


             $(document).on("click", ".Add_mdlDivisionMaster", function () {
        var rowIndex = $('#DivisionMasterPage tr').index($(this).closest('tr'));
        var _Code = $('#txtCode_DivisionMaster').val().replace("'", "");
                 var _Name = $('#txtName_DivisionMaster').val().replace("'", "");
                 var _Active = $('[id$="chk_ActiveDivMaster"]').is(':checked') ? 'True' : 'False';

                 		   if (valueInTableDivision('DivisionMasterPage', 0, _Code)) { 
                    alert("Code already Exists");
                    return false;
                 }

        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }
        if (_Validation == true) {
            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 30%;">' + _Code + '</td>';
            cols += '<td style="width: 30%;">' + _Name + '</td>';
            if (_Active == "True") {
                cols += '<td style="width: 30%; text-align:center"><input type="checkbox" checked class="chk_mdlDivisionMaster editor-active"></td>';
            }
            else {
                cols += '<td style="width: 30%; text-align:center"><input type="checkbox" class="chk_mdlDivisionMaster editor-active"></td>';
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_mdlDivisionMaster glyphicon glyphicon-pencil"></i></div></td>';
            newRow.append(cols);
            $("#DivisionMasterPage").append(newRow);
            counter++;
            $('[id$="btnDivisionMaster_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'DivisionMaster.aspx/DivisionMasterCall',
                data: "{'Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Active + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
        }
             });


            $(document).on("click", ".edit_mdlDivisionMaster", function () {
        var rowIndex = $('#DivisionMasterPage tr').index($(this).closest('tr'));
        var _Name = $('#DivisionMasterPage tr').eq(rowIndex).find('td:eq(1)').html();
        $('#DivisionMasterPage tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control"   id="txtNameEdit_DivisionMaster" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#DivisionMasterPage tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_mdlDivisionMaster glyphicon glyphicon-edit"></i></div>');
        $('#txtNameEdit_DivisionMaster').val(_Name);
    });

            $(document).on("click", ".editOp_mdlDivisionMaster", function () {
        var rowIndex = $('#DivisionMasterPage tr').index($(this).closest('tr'));
        var _Code = $('#DivisionMasterPage tr').eq(rowIndex).find('td:eq(0)').html();
        var _Name = $('#txtNameEdit_DivisionMaster').val();
        var _Checked = ($('#DivisionMasterPage tr').eq(rowIndex).find('td:eq(2) input').is(':checked') ? 'True' : 'False');
        var _Validation = true;
        if (_Name == '') {
            _Validation = false;
        }
        if (_Validation == true) {
            $('#DivisionMasterPage tr').eq(rowIndex).find('td:eq(1)').html(_Name);
            $('#DivisionMasterPage tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_mdlDivisionMaster glyphicon glyphicon-pencil"></i></div>');
            $.ajax({
                type: "POST",
                url: 'DivisionMaster.aspx/UpdateDivisionMasterCall',
                data: "{'Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
        }

            });


            $('[id$="btnClassificationMaster_AddNew"]').click(function () {
        var counter = 0;
        var newRow = $("<tr>");
        var cols = "";
        cols += '<td style="width: 30%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtCode_ClassificationMaster" runat="server" maxlength="255" placeholder="Enter Code"></td>';
        cols += '<td style="width: 30%;"><input type="text" style="width: 100%; Height:30px;" class="form-control" id="txtName_ClassificationMaster" runat="server" maxlength="255" placeholder="Enter Name"></td>';
        cols += '<td style="width: 30%; text-align:center"><input type="checkbox"   class="chk_mdlClassificationMaster editor - active" runat="server" id="chk_ActiveClassificationMaster"></td>';
        cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Add_mdlClassificationMaster  glyphicon glyphicon-plus"></i></div></td>';
        newRow.append(cols);
        $("#ClassificationMasterPage").append(newRow);
        counter++;
        $('[id$="btnClassificationMaster_AddNew"]').prop('disabled', true);
            });

            function valueInTableClassification(tableID, columnNum, searchString){
  var found = false;
                $("#ClassificationMasterPage tr").each(function () {
      var itemCode = $(this).find("td").eq(0).html();
    if (itemCode == searchString ){
      found = true;
      return false;
    }
  });

  return found;
            }


             $(document).on("click", ".Add_mdlClassificationMaster", function () {
        var rowIndex = $('#ClassificationMasterPage tr').index($(this).closest('tr'));
        var _Code = $('#txtCode_ClassificationMaster').val().replace("'", "");
                 var _Name = $('#txtName_ClassificationMaster').val().replace("'", "");
                 var _Active = $('[id$="chk_ActiveClassificationMaster"]').is(':checked') ? 'True' : 'False';

                 		   if (valueInTableClassification('ClassificationMasterPage', 0, _Code)) { 
                    alert("Code already Exists");
                    return false;
                 }

        var _Validation = true;
        if (_Code == '') {
            _Validation = false;
        }
        if (_Name == '') {
            _Validation = false;
        }
        if (_Validation == true) {
            $(this).closest("tr").remove();
            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 30%;">' + _Code + '</td>';
            cols += '<td style="width: 30%;">' + _Name + '</td>';
            if (_Active == "True") {
                cols += '<td style="width: 30%; text-align:center"><input type="checkbox" checked class="chk_mdlClassificationMaster editor-active"></td>';
            }
            else {
                cols += '<td style="width: 30%; text-align:center"><input type="checkbox" class="chk_mdlClassificationMaster editor-active"></td>';
            }
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="edit_mdlClassificationMaster glyphicon glyphicon-pencil"></i></div></td>';
            newRow.append(cols);
            $("#ClassificationMasterPage").append(newRow);
            counter++;
            $('[id$="btnClassificationMaster_AddNew"]').prop('disabled', false);
            $.ajax({
                type: "POST",
                url: 'ClassificationMaster.aspx/ClassMasterCall',
                data: "{'Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Active + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {ItemListMaster
                    $("#divResult").html("Something Wrong.");
                }
            });
        }
             });


            $(document).on("click", ".edit_mdlClassificationMaster", function () {
        var rowIndex = $('#ClassificationMasterPage tr').index($(this).closest('tr'));
        var _Name = $('#ClassificationMasterPage tr').eq(rowIndex).find('td:eq(1)').html();
        $('#ClassificationMasterPage tr').eq(rowIndex).find('td:eq(1)').html('<input type="text" style="width: 100%; Height:25px;" class="form-control"   id="txtNameEdit_ClassificationMaster" runat="server" maxlength="255" placeholder="Enter Name">');
        $('#ClassificationMasterPage tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="editOp_mdlClassificationMaster glyphicon glyphicon-edit"></i></div>');
        $('#txtNameEdit_ClassificationMaster').val(_Name);
    });

            $(document).on("click", ".editOp_mdlClassificationMaster", function () {
        var rowIndex = $('#ClassificationMasterPage tr').index($(this).closest('tr'));
        var _Code = $('#ClassificationMasterPage tr').eq(rowIndex).find('td:eq(0)').html();
        var _Name = $('#txtNameEdit_ClassificationMaster').val();
        var _Checked = ($('#ClassificationMasterPage tr').eq(rowIndex).find('td:eq(2) input').is(':checked') ? 'True' : 'False');
        var _Validation = true;
        if (_Name == '') {
            _Validation = false;
        }
        if (_Validation == true) {
            $('#ClassificationMasterPage tr').eq(rowIndex).find('td:eq(1)').html(_Name);
            $('#ClassificationMasterPage tr').eq(rowIndex).find('td:eq(3)').html('<div class="tools"><i class="edit_mdlClassificationMaster glyphicon glyphicon-pencil"></i></div>');
            $.ajax({
                type: "POST",
                url: 'ClassificationMaster.aspx/UpdateClassMasterCall',
                data: "{'Code':'" + _Code + "','Name':'" + _Name + "','InActive':'" + _Checked + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });
        }

            });


            $('[id$="dt_VoucherValItemMaster"]').datepicker({
        format: 'dd/mm/yyyy',
        autoclose: true
             });


            //$('[id$="ddl_Dept"]').change(function () {
            //    var run1 = $('[id$="ddl_Div"]').val();
            //    $('[id$="txt_RunningNo1"]').val(run1 + this.value);

            //    $.ajax({
            //        type: 'POST',
            //        url: 'Utilities/DataModels.ashx?ID=DeptInfo&PKey=' + run1 + '&PKey1=' + this.value + '',
            //        dataType: "json",
            //        Cache: false,
            //        success: function (data) {
            //            var JsonArray = JSON.stringify(data);
            //            var Json = JSON.parse(JsonArray);
            //            $('[id$="txt_RunningNo2"]').val(Json.aaData[0][2]);
            //        }
            //    });

            //});

        $('[id$="ddl_Dept"]').change(function () {
            var run1 = $('[id$="ddl_Div"]').val();
            if (run1 == 3) {
                //$('#ddl_Range').find('option').remove();
                $('#ddl_Range').empty();
                var apiUrl = '<%=ConfigurationManager.AppSettings["uri"].ToString()%>';
                $.ajax({
                    type: "GET",
                    url: apiUrl + "api/ItemRanges?filter={\"where\":{\"itmDept\":\"" + this.value + "\"}}",
                    dataType: "json",
                    Cache: false,
                    success: function (data) {
                        var JsonArray = JSON.stringify(data);
                        var Json = JSON.parse(JsonArray);
                        var div_data = "";
                        for (i = 0; i < Json.length; i++) {
                            div_data += "<option value='" + Json[i].itmCode + "'>" + Json[i].itmDesc + "</option>";
                        }
                        $('#ddl_Range').append(div_data);
                    }
                });
            }

            <%--var run1 = $('[id$="ddl_Div"]').val();
            $('[id$="txt_RunningNo1"]').val(run1 + this.value);
            var SequoiaUri = '<%=ConfigurationManager.AppSettings["SequoiaUri"].ToString()%>';
            var run1 = $('[id$="ddl_Div"]').val();
            $.ajax({
                type: 'GET',
                url: SequoiaUri + "api/GetDeptRunningNo?DivCode=" + run1 + "&DeptCode=" + this.value + "",
                dataType: "json",
                Cache: false,
                success: function (data) {
                    var JsonArray = JSON.stringify(data);
                    var Json = JSON.parse(JsonArray);
                    var item = Json[1];
                    $.each(data.result, function (i, data) {
                        $('[id$="txt_RunningNo2"]').val(data.controlNo);
                    });

                }
            });--%>

        });

        $('[id$="ddl_Brand"]').change(function () {
            var run1 = $('[id$="ddl_Div"]').val();
            if (run1 != 3) {
                //$('#ddl_Range').find('option').remove();
                $('#ddl_Range').empty();
                var apiUrl = '<%=ConfigurationManager.AppSettings["uri"].ToString()%>';
                $.ajax({
                    type: "GET",
                    url: apiUrl + "api/ItemRanges?filter={\"where\":{\"itmBrand\":\"" + this.value + "\"}}",
                    dataType: "json",
                    Cache: false,
                    success: function (data) {
                        var JsonArray = JSON.stringify(data);
                        var Json = JSON.parse(JsonArray);
                        var div_data = "";
                        for (i = 0; i < Json.length; i++) {
                            div_data += "<option value='" + Json[i].itmCode + "'>" + Json[i].itmDesc + "</option>";
                        }
                        $('#ddl_Range').append(div_data);
                    }
                });
            }
        });

        //function PageloadItemMas() {

        //    $.ajax({
        //        type: "POST",
        //        url: 'Utilities/DataModels.ashx?ID=RangeBasedDept&PKey=' + 30 + '',
        //        dataType: "json",
        //        Cache: false,
        //        success: function (data) {
        //            var JsonArray = JSON.stringify(data);
        //            var Json = JSON.parse(JsonArray);
        //            var div_data = "";
        //            for (i = 0; i < Json.aaData.length; i++) {
        //                div_data += "<option value=" + Json.aaData[i][0] + ">" + Json.aaData[i][1] + "</option>";
        //            }
        //            $('#ddl_Range').append(div_data);
        //        }
        //    });

        //    $.ajax({
        //        type: 'POST',
        //        url: 'Utilities/DataModels.ashx?ID=DeptInfo&PKey=' + 1 + '&PKey1=' + 31 + '',
        //        dataType: "json",
        //        Cache: false,
        //        success: function (data) {
        //            var JsonArray = JSON.stringify(data);
        //            var Json = JSON.parse(JsonArray);
        //            $('[id$="txt_RunningNo2"]').val(Json.aaData[0][2]);
        //        }
        //    });


        //}

            function DivChange() {
                var run1 = $('[id$="ddl_Div"]').val();
                var div_data = "";
                $('#ddl_stockType').empty();
                if (run1 == 1) {

                    div_data += "<option value=" + "SINGLE" + ">" + "SINGLE" + "</option>";
                    div_data += "<option value=" + "PACKAGE" + ">" + "PACKAGE" + "</option>";
                    $('#ddl_stockType').append(div_data);

                    document.getElementById('brid1_ItemMaster').style.display = "";
                    document.getElementById('brid2_ItemMaster').style.display = "";
                    document.getElementById('brid3_ItemMaster').style.display = "";
                    document.getElementById('brid4_ItemMaster').style.display = "";
                    document.getElementById('brid5_ItemMaster').style.display = "";
                    document.getElementById('brid6_ItemMaster').style.display = "none";
                    document.getElementById('brid7_ItemMaster').style.display = "none";
                    document.getElementById('brid8_ItemMaster').style.display = "none";
                    document.getElementById('brid9_ItemMaster').style.display = "";

                    document.getElementById('divUOM').style.display = "";
                    document.getElementById('divUOMHeader').style.display = "";
                    document.getElementById('divStkBalance').style.display = "";
                    document.getElementById('divStkBalanceHeader').style.display = "";
                    document.getElementById('divLinkCode').style.display = "";
                    document.getElementById('divLinkCodeHeader').style.display = "";
                    document.getElementById('divStockListing').style.display = "";
                    document.getElementById('divStockListingHeader').style.display = "";

                    document.getElementById('divItemUsage').style.display = "none";
                    document.getElementById('divItemUsageHeader').style.display = "none";
                    document.getElementById('divVoucher').style.display = "none";
                    document.getElementById('divVoucherHeader').style.display = "none";
                    document.getElementById('divPrepaid').style.display = "none";
                    document.getElementById('divPrepaidHeader').style.display = "none";

                    document.getElementById('divAccCode').style.display = "";
                    document.getElementById('divAccCodeHeader').style.display = "";







                    document.getElementById('supplierId').style.display = "";
                    document.getElementById('PriceId1').style.display = "none";
                    document.getElementById('PriceId2').style.display = "none";
                    document.getElementById('PriceId3').style.display = "none";
                    document.getElementById('PriceId4').style.display = "none";
                    document.getElementById('FocId').style.display = "";
                    document.getElementById('lblopenPrepiad').style.display = "none";
                    document.getElementById('PrepaidId').style.display = "none";
                    document.getElementById('RedeemId').style.display = "";
                    document.getElementById('DiscId').style.display = "";
                    document.getElementById('OpenCodeId').style.display = "none";
                }
                else if (run1 == 2) {

                    div_data += "<option value=" + "SINGLE" + ">" + "SINGLE" + "</option>";
                    div_data += "<option value=" + "PACKAGE" + ">" + "PACKAGE" + "</option>";
                    $('#ddl_stockType').append(div_data);

                    document.getElementById('brid1_ItemMaster').style.display = "";
                    document.getElementById('brid2_ItemMaster').style.display = "";
                    document.getElementById('brid3_ItemMaster').style.display = "";
                    document.getElementById('brid4_ItemMaster').style.display = "";
                    document.getElementById('brid5_ItemMaster').style.display = "";
                    document.getElementById('brid6_ItemMaster').style.display = "none";
                    document.getElementById('brid7_ItemMaster').style.display = "none";
                    document.getElementById('brid8_ItemMaster').style.display = "none";
                    document.getElementById('brid9_ItemMaster').style.display = "";

                    document.getElementById('divUOM').style.display = "";
                    document.getElementById('divUOMHeader').style.display = "";
                    document.getElementById('divStkBalance').style.display = "";
                    document.getElementById('divStkBalanceHeader').style.display = "";
                    document.getElementById('divLinkCode').style.display = "";
                    document.getElementById('divLinkCodeHeader').style.display = "";
                    document.getElementById('divStockListing').style.display = "";
                    document.getElementById('divStockListingHeader').style.display = "";

                    document.getElementById('divItemUsage').style.display = "none";
                    document.getElementById('divItemUsageHeader').style.display = "none";
                    document.getElementById('divVoucher').style.display = "none";
                    document.getElementById('divVoucherHeader').style.display = "none";
                    document.getElementById('divPrepaid').style.display = "none";
                    document.getElementById('divPrepaidHeader').style.display = "none";

                    document.getElementById('divAccCode').style.display = "";
                    document.getElementById('divAccCodeHeader').style.display = "";

                    document.getElementById('supplierId').style.display = "";
                    document.getElementById('PriceId1').style.display = "none";
                    document.getElementById('PriceId2').style.display = "none";
                    document.getElementById('PriceId3').style.display = "none";
                    document.getElementById('PriceId4').style.display = "none";
                    document.getElementById('FocId').style.display = "";
                    document.getElementById('lblopenPrepiad').style.display = "none";
                    document.getElementById('PrepaidId').style.display = "none";
                    document.getElementById('RedeemId').style.display = "";
                    document.getElementById('DiscId').style.display = "";
                    document.getElementById('OpenCodeId').style.display = "none";
                }
                else if (run1 == 3) {

                    div_data += "<option value=" + "SINGLE" + ">" + "SINGLE" + "</option>";
                    div_data += "<option value=" + "PACKAGE" + ">" + "PACKAGE" + "</option>";
                    div_data += "<option value=" + "COURSE" + ">" + "COURSE" + "</option>";
                    $('#ddl_stockType').append(div_data);

                    document.getElementById('brid1_ItemMaster').style.display = "none";
                    document.getElementById('brid2_ItemMaster').style.display = "none";
                    document.getElementById('brid3_ItemMaster').style.display = "";
                    document.getElementById('brid4_ItemMaster').style.display = "";
                    document.getElementById('brid5_ItemMaster').style.display = "";
                    document.getElementById('brid6_ItemMaster').style.display = "none";
                    document.getElementById('brid7_ItemMaster').style.display = "none";
                    document.getElementById('brid8_ItemMaster').style.display = "";
                    document.getElementById('brid9_ItemMaster').style.display = "";

                    document.getElementById('divUOM').style.display = "none";
                    document.getElementById('divUOMHeader').style.display = "none";
                    document.getElementById('divStkBalance').style.display = "none";
                    document.getElementById('divStkBalanceHeader').style.display = "none";
                    document.getElementById('divLinkCode').style.display = "";
                    document.getElementById('divLinkCodeHeader').style.display = "";
                    document.getElementById('divStockListing').style.display = "";
                    document.getElementById('divStockListingHeader').style.display = "";
                    document.getElementById('divItemUsage').style.display = "";
                    document.getElementById('divItemUsageHeader').style.display = "";

                    document.getElementById('divVoucher').style.display = "none";
                    document.getElementById('divVoucherHeader').style.display = "none";
                    document.getElementById('divPrepaid').style.display = "none";
                    document.getElementById('divPrepaidHeader').style.display = "none";

                    document.getElementById('divAccCode').style.display = "";
                    document.getElementById('divAccCodeHeader').style.display = "";


                    document.getElementById('supplierId').style.display = "none";
                    document.getElementById('PriceId1').style.display = "";
                    document.getElementById('PriceId2').style.display = "";
                    document.getElementById('PriceId3').style.display = "";
                    document.getElementById('PriceId4').style.display = "";
                    document.getElementById('lblopenPrepiad').style.display = "";
                    document.getElementById('OpenCodeId').style.display = "";
                    document.getElementById('FocId').style.display = "";
                    document.getElementById('DiscId').style.display = "";
                    document.getElementById('RedeemId').style.display = "";

                    var typeVal = $('[id$="ddl_stockType"]').val();
                    if (typeVal == "SINGLE") {
                        document.getElementById('lblopenPrepiad').style.display = "";
                        document.getElementById('OpenCodeId').style.display = "";
                    }
                    else {
                        document.getElementById('lblopenPrepiad').style.display = "none";
                        document.getElementById('OpenCodeId').style.display = "none";
                    }

                }
                else if (run1 == 4) {

                    div_data += "<option value=" + "SINGLE" + ">" + "SINGLE" + "</option>";
                    $('#ddl_stockType').append(div_data);

                    document.getElementById('brid1_ItemMaster').style.display = "";
                    document.getElementById('brid2_ItemMaster').style.display = "";
                    document.getElementById('brid3_ItemMaster').style.display = "";
                    document.getElementById('brid4_ItemMaster').style.display = "";
                    document.getElementById('brid5_ItemMaster').style.display = "";
                    document.getElementById('brid6_ItemMaster').style.display = "none";
                    document.getElementById('brid7_ItemMaster').style.display = "";
                    document.getElementById('brid8_ItemMaster').style.display = "none";
                    document.getElementById('brid9_ItemMaster').style.display = "";


                    document.getElementById('divUOM').style.display = "";
                    document.getElementById('divUOMHeader').style.display = "none";
                    document.getElementById('divStkBalance').style.display = "none";
                    document.getElementById('divStkBalanceHeader').style.display = "none";
                    document.getElementById('divLinkCode').style.display = "none";
                    document.getElementById('divLinkCodeHeader').style.display = "";
                    document.getElementById('divStockListing').style.display = "";
                    document.getElementById('divStockListingHeader').style.display = "";

                    document.getElementById('divItemUsage').style.display = "none";
                    document.getElementById('divItemUsageHeader').style.display = "none";
                    document.getElementById('divPrepaid').style.display = "none";
                    document.getElementById('divPrepaidHeader').style.display = "none";

                    document.getElementById('divVoucher').style.display = "";
                    document.getElementById('divVoucherHeader').style.display = "";
                    document.getElementById('divAccCode').style.display = "";
                    document.getElementById('divAccCodeHeader').style.display = "";


                    document.getElementById('supplierId').style.display = "none";
                    document.getElementById('lblopenPrepiad').style.display = "none";
                    document.getElementById('OpenCodeId').style.display = "none";
                    document.getElementById('PrepaidId').style.display = "none";
                    document.getElementById('PriceId1').style.display = "none";
                    document.getElementById('PriceId2').style.display = "none";
                    document.getElementById('PriceId3').style.display = "none";
                    document.getElementById('PriceId4').style.display = "none";
                    document.getElementById('DiscId').style.display = "none";
                    document.getElementById('RedeemId').style.display = "none";
                    document.getElementById('FocId').style.display = "";
                    document.getElementById('OpenCodeId').style.display = "none";
                }
                else if (run1 == 5) {

                    div_data += "<option value=" + "SINGLE" + ">" + "SINGLE" + "</option>";
                    $('#ddl_stockType').append(div_data);

                    document.getElementById('brid1_ItemMaster').style.display = "none";
                    document.getElementById('brid2_ItemMaster').style.display = "none";
                    document.getElementById('brid3_ItemMaster').style.display = "none";
                    document.getElementById('brid4_ItemMaster').style.display = "";
                    document.getElementById('brid5_ItemMaster').style.display = "none";
                    document.getElementById('brid6_ItemMaster').style.display = "none";
                    document.getElementById('brid7_ItemMaster').style.display = "";
                    document.getElementById('brid8_ItemMaster').style.display = "";
                    document.getElementById('brid9_ItemMaster').style.display = "";

                    document.getElementById('divUOM').style.display = "none";
                    document.getElementById('divUOMHeader').style.display = "none";
                    document.getElementById('divStkBalance').style.display = "none";
                    document.getElementById('divStkBalanceHeader').style.display = "none";
                    document.getElementById('divLinkCode').style.display = "none";
                    document.getElementById('divLinkCodeHeader').style.display = "none";

                    document.getElementById('divStockListing').style.display = "";
                    document.getElementById('divStockListingHeader').style.display = "";

                    document.getElementById('divItemUsage').style.display = "none";
                    document.getElementById('divItemUsageHeader').style.display = "none";
                    document.getElementById('divPrepaid').style.display = "";
                    document.getElementById('divPrepaidHeader').style.display = "";

                    document.getElementById('divVoucher').style.display = "none";
                    document.getElementById('divVoucherHeader').style.display = "none";
                    document.getElementById('divAccCode').style.display = "";
                    document.getElementById('divAccCodeHeader').style.display = "";


                    document.getElementById('lblopenPrepiad').style.display = "";
                    document.getElementById('PriceId1').style.display = "";
                    document.getElementById('PriceId2').style.display = "none";
                    document.getElementById('PriceId3').style.display = "none";
                    document.getElementById('PriceId4').style.display = "none";
                    document.getElementById('PrepaidId').style.display = "";
                    document.getElementById('OpenCodeId').style.display = "none";
                    document.getElementById('RedeemId').style.display = "none";
                    document.getElementById('FocId').style.display = "";
                    document.getElementById('DiscId').style.display = "none";
                    document.getElementById('OpenCodeId').style.display = "none";
                }

               

                var TypeVal = $('[id$="ddl_stockType"]').val();
            var divVal = $('[id$="ddl_Div"]').val();

                    if (divVal == 3 && TypeVal == "SINGLE") {
                        document.getElementById('lblopenPrepiad').style.display = "";
                        document.getElementById('OpenCodeId').style.display = "";
                    }
                    else {
                        document.getElementById('lblopenPrepiad').style.display = "none";
                        document.getElementById('OpenCodeId').style.display = "none";
                    }

            if (TypeVal == "SINGLE") {
                    document.getElementById('brid10_ItemMaster').style.display = "none";
                    document.getElementById('divPackage').style.display = "none";
                    document.getElementById('divPackageHeader').style.display = "none";

                    document.getElementById('brid8_ItemMaster').style.display = "none";
                    document.getElementById('divService').style.display = "none";
                    document.getElementById('divServiceHeader').style.display = "none";
                }
                else if (TypeVal == "PACKAGE") {
                    document.getElementById('brid10_ItemMaster').style.display = "";
                    document.getElementById('divPackage').style.display = "";
                    document.getElementById('divPackageHeader').style.display = "";

                    document.getElementById('brid8_ItemMaster').style.display = "none";
                    document.getElementById('divService').style.display = "none";
                    document.getElementById('divServiceHeader').style.display = "none";
                    
                }
                else if (TypeVal == "COURSE") {
                    document.getElementById('brid10_ItemMaster').style.display = "none";
                    document.getElementById('divPackage').style.display = "none";
                    document.getElementById('divPackageHeader').style.display = "none";

                    document.getElementById('brid8_ItemMaster').style.display = "";
                    document.getElementById('divService').style.display = "";
                    document.getElementById('divServiceHeader').style.display = "";
                }

                
                var _Expiryval = $('[id$="chkExpiryStatus_ItemMaster"]').is(':checked') ? 'checked' : 'unchecked';
                if (_Expiryval == 'checked') {
                    document.getElementById('serviceExpiryMonth').style.display = "";
                    //$("[id*=txtservicExpiryMonth_ItemMaster]").show();
                }
                else {
                    document.getElementById('serviceExpiryMonth').style.display = "none";
                }

                var _ServiceLimitVal = $('[id$="chkServiceLimit_ItemMaster"]').is(':checked') ? 'checked' : 'unchecked';
                if (_ServiceLimitVal == 'checked') {
                    document.getElementById('ServiceLimit').style.display = "";
                    //$("[id*=txtservicExpiryMonth_ItemMaster]").show();
                }
                else {
                    document.getElementById('ServiceLimit').style.display = "none";
                }



                var _val = $('[id$="chkServiceFlexi_ItemMaster"]').is(':checked') ? 'checked' : 'unchecked';

            if (_val == 'checked') {

                    $(function () {
                $('#ServiceSearch').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=ServiceItemSearchList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    "iDisplayLength": 3,
                     "bLengthChange": false,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Item Code/Item Description/Item UOM/Item Brand/Link Code/Range"
                    },
                    'columns': [
                        null, null, null, null, null, null, null,null, null, null,
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtQty_Service" value="1" >';
                              return data;
                          }
                        },
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtCost_Service" >';
                              return data;
                          }
                        },

                        {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              //data = '<button type="button" class="btn btn-primary" id="btnAdd_GRN">Select</button>';
                              //data = '<a><i class="Add_ItemToGRN glyphicon glyphicon-hand-up"></i></a>';
                              data = '<a class="Add_ItemToService btn btn-info btn-primary"><i class=" glyphicon glyphicon-hand-up"></i></a></p>';
                              return data;
                          }
                        }

                    ],
                     "columnDefs": [
                         {
                               "targets": [ 7 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 8 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 9 ],
                               "visible": false,
                               "searchable": false               
                         }

                    ],  



                })

                });

                    document.getElementById('serviceOption1').style.display = "";
                    document.getElementById('serviceOption2').style.display = "";
                    document.getElementById('ServiceSearch').style.display = "";
                    document.getElementById('ServiceAvailabe').style.display = "";
                }
                else
                {
                    $('#ServiceSearch').dataTable().fnClearTable();
                    $('#ServiceSearch').dataTable().fnDestroy();
                    document.getElementById('serviceOption1').style.display = "none";
                    document.getElementById('serviceOption2').style.display = "none";
                    document.getElementById('ServiceSearch').style.display = "none";
                    document.getElementById('ServiceAvailabe').style.display = "none";
                }

            } 

            $('[id$="ddl_Div"]').change(function () {
                //$('[id$="txt_RunningNo1"]').val(this.value);
                var run1 = this.value;
                

                //$.ajax({
                //    type: 'POST',
                //    url: 'Utilities/DataModels.ashx?ID=DivInfo&PKey=' + this.value + '',
                //    dataType: "json",
                //    Cache: false,
                //    success: function (data) {
                //        var JsonArray = JSON.stringify(data);
                //        var Json = JSON.parse(JsonArray);
                //        $('[id$="txt_RunningNo1"]').val(run1 + Json.aaData[0][0]);
                //        $('[id$="ddl_Dept"]').val(Json.aaData[0][0]);
                //        $('#ddl_Dept').val(Json.aaData[0][0]);
                //        $('[id$="txt_RunningNo2"]').val(Json.aaData[0][2]);
                //        //$('#ddl_Dept option:selected').val(Json.aaData[0][0]);
                //        //$("#ddl_Dept > [value=" + Json.aaData[0][0] + "]").attr("selected", "true");
                //        //$('#ddl_Dept').val(Json.aaData[0][0]).attr("selected", "selected");
                //        //$("#ddl_Dept").val(Json.aaData[0][0]).trigger("chosen:updated");
                //        //$("#ddl_Dept option[text=" + Json.aaData[0][0] + "]").attr('selected', 'selected');
                //        //document.getElementById('ddl_Dept').value = Json.aaData[0][0];
                //        //$('[id$="ddl_Dept"]').val(Json.aaData[0][0]);
                //        //$('#ddl_Dept option:selected').attr("selected",null);
                //        //document.getElementById('ddl_Dept').innerText = Json.aaData[0][1];
                //    }
                //});
                $('#ddl_stockType').empty();
                var div_data = "";
                if (run1 == 1) {

                    div_data += "<option value=" + "SINGLE" + ">" + "SINGLE" + "</option>";
                    div_data += "<option value=" + "PACKAGE" + ">" + "PACKAGE" + "</option>";
                    $('#ddl_stockType').append(div_data);

                    document.getElementById('brid1_ItemMaster').style.display = "";
                    document.getElementById('brid2_ItemMaster').style.display = "";
                    document.getElementById('brid3_ItemMaster').style.display = "";
                    document.getElementById('brid4_ItemMaster').style.display = "";
                    document.getElementById('brid5_ItemMaster').style.display = "";
                    document.getElementById('brid6_ItemMaster').style.display = "none";
                    document.getElementById('brid7_ItemMaster').style.display = "none";
                    document.getElementById('brid8_ItemMaster').style.display = "none";
                    document.getElementById('brid9_ItemMaster').style.display = "";

                    document.getElementById('divUOM').style.display = "";
                    document.getElementById('divUOMHeader').style.display = "";
                    document.getElementById('divStkBalance').style.display = "";
                    document.getElementById('divStkBalanceHeader').style.display = "";
                    document.getElementById('divLinkCode').style.display = "";
                    document.getElementById('divLinkCodeHeader').style.display = "";
                    document.getElementById('divStockListing').style.display = "";
                    document.getElementById('divStockListingHeader').style.display = "";

                    document.getElementById('divItemUsage').style.display = "none";
                    document.getElementById('divItemUsageHeader').style.display = "none";
                    document.getElementById('divVoucher').style.display = "none";
                    document.getElementById('divVoucherHeader').style.display = "none";
                    document.getElementById('divPrepaid').style.display = "none";
                    document.getElementById('divPrepaidHeader').style.display = "none";

                    document.getElementById('divAccCode').style.display = "";
                    document.getElementById('divAccCodeHeader').style.display = "";







                    document.getElementById('supplierId').style.display = "";
                    document.getElementById('PriceId1').style.display = "none";
                    document.getElementById('PriceId2').style.display = "none";
                    document.getElementById('PriceId3').style.display = "none";
                    document.getElementById('PriceId4').style.display = "none";
                    document.getElementById('FocId').style.display = "";
                    document.getElementById('lblopenPrepiad').style.display = "none";
                    document.getElementById('PrepaidId').style.display = "none";
                    document.getElementById('RedeemId').style.display = "";
                    document.getElementById('DiscId').style.display = "";
                    document.getElementById('OpenCodeId').style.display = "none";
                }
                else if (run1 == 2) {

                    div_data += "<option value=" + "SINGLE" + ">" + "SINGLE" + "</option>";
                    div_data += "<option value=" + "PACKAGE" + ">" + "PACKAGE" + "</option>";
                    $('#ddl_stockType').append(div_data);

                    document.getElementById('brid1_ItemMaster').style.display = "";
                    document.getElementById('brid2_ItemMaster').style.display = "";
                    document.getElementById('brid3_ItemMaster').style.display = "";
                    document.getElementById('brid4_ItemMaster').style.display = "";
                    document.getElementById('brid5_ItemMaster').style.display = "";
                    document.getElementById('brid6_ItemMaster').style.display = "none";
                    document.getElementById('brid7_ItemMaster').style.display = "none";
                    document.getElementById('brid8_ItemMaster').style.display = "none";
                    document.getElementById('brid9_ItemMaster').style.display = "";

                    document.getElementById('divUOM').style.display = "";
                    document.getElementById('divUOMHeader').style.display = "";
                    document.getElementById('divStkBalance').style.display = "";
                    document.getElementById('divStkBalanceHeader').style.display = "";
                    document.getElementById('divLinkCode').style.display = "";
                    document.getElementById('divLinkCodeHeader').style.display = "";
                    document.getElementById('divStockListing').style.display = "";
                    document.getElementById('divStockListingHeader').style.display = "";

                    document.getElementById('divItemUsage').style.display = "none";
                    document.getElementById('divItemUsageHeader').style.display = "none";
                    document.getElementById('divVoucher').style.display = "none";
                    document.getElementById('divVoucherHeader').style.display = "none";
                    document.getElementById('divPrepaid').style.display = "none";
                    document.getElementById('divPrepaidHeader').style.display = "none";

                    document.getElementById('divAccCode').style.display = "";
                    document.getElementById('divAccCodeHeader').style.display = "";

                    document.getElementById('supplierId').style.display = "";
                    document.getElementById('PriceId1').style.display = "none";
                    document.getElementById('PriceId2').style.display = "none";
                    document.getElementById('PriceId3').style.display = "none";
                    document.getElementById('PriceId4').style.display = "none";
                    document.getElementById('FocId').style.display = "";
                    document.getElementById('lblopenPrepiad').style.display = "none";
                    document.getElementById('PrepaidId').style.display = "none";
                    document.getElementById('RedeemId').style.display = "";
                    document.getElementById('DiscId').style.display = "";
                    document.getElementById('OpenCodeId').style.display = "none";
                }
                else if (run1 == 3) {

                    div_data += "<option value=" + "SINGLE" + ">" + "SINGLE" + "</option>";
                    div_data += "<option value=" + "PACKAGE" + ">" + "PACKAGE" + "</option>";
                    div_data += "<option value=" + "COURSE" + ">" + "COURSE" + "</option>";
                    $('#ddl_stockType').append(div_data);

                    document.getElementById('brid1_ItemMaster').style.display = "none";
                    document.getElementById('brid2_ItemMaster').style.display = "none";
                    document.getElementById('brid3_ItemMaster').style.display = "";
                    document.getElementById('brid4_ItemMaster').style.display = "";
                    document.getElementById('brid5_ItemMaster').style.display = "";
                    document.getElementById('brid6_ItemMaster').style.display = "none";
                    document.getElementById('brid7_ItemMaster').style.display = "none";
                    document.getElementById('brid8_ItemMaster').style.display = "";
                    document.getElementById('brid9_ItemMaster').style.display = "";

                    document.getElementById('divUOM').style.display = "none";
                    document.getElementById('divUOMHeader').style.display = "none";
                    document.getElementById('divStkBalance').style.display = "none";
                    document.getElementById('divStkBalanceHeader').style.display = "none";
                    document.getElementById('divLinkCode').style.display = "";
                    document.getElementById('divLinkCodeHeader').style.display = "";
                    document.getElementById('divStockListing').style.display = "";
                    document.getElementById('divStockListingHeader').style.display = "";
                    document.getElementById('divItemUsage').style.display = "";
                    document.getElementById('divItemUsageHeader').style.display = "";

                    document.getElementById('divVoucher').style.display = "none";
                    document.getElementById('divVoucherHeader').style.display = "none";
                    document.getElementById('divPrepaid').style.display = "none";
                    document.getElementById('divPrepaidHeader').style.display = "none";

                    document.getElementById('divAccCode').style.display = "";
                    document.getElementById('divAccCodeHeader').style.display = "";


                    document.getElementById('supplierId').style.display = "none";
                    document.getElementById('PriceId1').style.display = "";
                    document.getElementById('PriceId2').style.display = "";
                    document.getElementById('PriceId3').style.display = "";
                    document.getElementById('PriceId4').style.display = "";
                    document.getElementById('lblopenPrepiad').style.display = "";
                    document.getElementById('OpenCodeId').style.display = "";
                    document.getElementById('FocId').style.display = "";
                    document.getElementById('DiscId').style.display = "";
                    document.getElementById('RedeemId').style.display = "";

                    var typeVal = $('[id$="ddl_stockType"]').val();
                    if (typeVal == "SINGLE") {
                        document.getElementById('lblopenPrepiad').style.display = "";
                        document.getElementById('OpenCodeId').style.display = "";
                    }
                    else {
                        document.getElementById('lblopenPrepiad').style.display = "none";
                        document.getElementById('OpenCodeId').style.display = "none";
                    }

                }
                else if (run1 == 4) {

                    div_data += "<option value=" + "SINGLE" + ">" + "SINGLE" + "</option>";
                    $('#ddl_stockType').append(div_data);

                    document.getElementById('brid1_ItemMaster').style.display = "";
                    document.getElementById('brid2_ItemMaster').style.display = "";
                    document.getElementById('brid3_ItemMaster').style.display = "";
                    document.getElementById('brid4_ItemMaster').style.display = "";
                    document.getElementById('brid5_ItemMaster').style.display = "";
                    document.getElementById('brid6_ItemMaster').style.display = "none";
                    document.getElementById('brid7_ItemMaster').style.display = "";
                    document.getElementById('brid8_ItemMaster').style.display = "none";
                    document.getElementById('brid9_ItemMaster').style.display = "";


                    document.getElementById('divUOM').style.display = "";
                    document.getElementById('divUOMHeader').style.display = "none";
                    document.getElementById('divStkBalance').style.display = "none";
                    document.getElementById('divStkBalanceHeader').style.display = "none";
                    document.getElementById('divLinkCode').style.display = "none";
                    document.getElementById('divLinkCodeHeader').style.display = "";
                    document.getElementById('divStockListing').style.display = "";
                    document.getElementById('divStockListingHeader').style.display = "";

                    document.getElementById('divItemUsage').style.display = "none";
                    document.getElementById('divItemUsageHeader').style.display = "none";
                    document.getElementById('divPrepaid').style.display = "none";
                    document.getElementById('divPrepaidHeader').style.display = "none";

                    document.getElementById('divVoucher').style.display = "";
                    document.getElementById('divVoucherHeader').style.display = "";
                    document.getElementById('divAccCode').style.display = "";
                    document.getElementById('divAccCodeHeader').style.display = "";


                    document.getElementById('supplierId').style.display = "none";
                    document.getElementById('lblopenPrepiad').style.display = "none";
                    document.getElementById('OpenCodeId').style.display = "none";
                    document.getElementById('PrepaidId').style.display = "none";
                    document.getElementById('PriceId1').style.display = "none";
                    document.getElementById('PriceId2').style.display = "none";
                    document.getElementById('PriceId3').style.display = "none";
                    document.getElementById('PriceId4').style.display = "none";
                    document.getElementById('DiscId').style.display = "none";
                    document.getElementById('RedeemId').style.display = "none";
                    document.getElementById('FocId').style.display = "";
                    document.getElementById('OpenCodeId').style.display = "none";
                }
                else if (run1 == 5) {

                    div_data += "<option value=" + "SINGLE" + ">" + "SINGLE" + "</option>";
                    $('#ddl_stockType').append(div_data);

                    document.getElementById('brid1_ItemMaster').style.display = "none";
                    document.getElementById('brid2_ItemMaster').style.display = "none";
                    document.getElementById('brid3_ItemMaster').style.display = "none";
                    document.getElementById('brid4_ItemMaster').style.display = "";
                    document.getElementById('brid5_ItemMaster').style.display = "none";
                    document.getElementById('brid6_ItemMaster').style.display = "none";
                    document.getElementById('brid7_ItemMaster').style.display = "";
                    document.getElementById('brid8_ItemMaster').style.display = "";
                    document.getElementById('brid9_ItemMaster').style.display = "";

                    document.getElementById('divUOM').style.display = "none";
                    document.getElementById('divUOMHeader').style.display = "none";
                    document.getElementById('divStkBalance').style.display = "none";
                    document.getElementById('divStkBalanceHeader').style.display = "none";
                    document.getElementById('divLinkCode').style.display = "none";
                    document.getElementById('divLinkCodeHeader').style.display = "none";

                    document.getElementById('divStockListing').style.display = "";
                    document.getElementById('divStockListingHeader').style.display = "";

                    document.getElementById('divItemUsage').style.display = "none";
                    document.getElementById('divItemUsageHeader').style.display = "none";
                    document.getElementById('divPrepaid').style.display = "";
                    document.getElementById('divPrepaidHeader').style.display = "";

                    document.getElementById('divVoucher').style.display = "none";
                    document.getElementById('divVoucherHeader').style.display = "none";
                    document.getElementById('divAccCode').style.display = "";
                    document.getElementById('divAccCodeHeader').style.display = "";


                    document.getElementById('lblopenPrepiad').style.display = "";
                    document.getElementById('PriceId1').style.display = "";
                    document.getElementById('PriceId2').style.display = "none";
                    document.getElementById('PriceId3').style.display = "none";
                    document.getElementById('PriceId4').style.display = "none";
                    document.getElementById('PrepaidId').style.display = "";
                    document.getElementById('OpenCodeId').style.display = "none";
                    document.getElementById('RedeemId').style.display = "none";
                    document.getElementById('FocId').style.display = "";
                    document.getElementById('DiscId').style.display = "none";
                    document.getElementById('OpenCodeId').style.display = "none";
                }

        
            });

      

        //      $(function () {
        //$('input').iCheck({
        //    checkboxClass: 'icheckbox_square-blue',
        //    radioClass: 'iradio_square-blue',
        //    increaseArea: '20%' /* optional */
        //});
        //      });


            $('[id$="btn_AddRow_UOM"]').click(function () {
                $("#mdlAddUOM").modal();
            });

             $('[id$="btn_AddDivItemMaster"]').click(function () {
                 $("#mdlAddDiv").modal();

                   $.ajax({
            type: 'POST',
            url: 'Utilities/DataModels.ashx?ID=DivControlNo',
            dataType: "json",
            Cache: false,
            success: function (data) {
                    var JsonArray = JSON.stringify(data);
                    var Json = JSON.parse(JsonArray);
                $('[id$="txt_CodemdlAddDiv"]').val(Json.aaData[0][0]);
                $('[id$="txt_NamemdlAddDiv"]').val("");
                $("#chk_ActivemdlAddDiv").prop("checked", false);
                }
                });

             });

            $('[id$="txt_CodemdlAddDiv"]').change(function () {
        $.ajax({
            type: 'POST',
            url: 'Utilities/DataModels.ashx?ID=DivCodeCheck&PKey=' + this.value + '',
            dataType: "json",
            Cache: false,
            success: function (data) {
                var JsonArray = JSON.stringify(data);
                var Json = JSON.parse(JsonArray);
                if (Json.iTotalRecords == 0) {
                }
                else {
                    $('[id$="txt_CodemdlAddDiv"]').val("");
                    alert("Code already Exists");
                }
            }
        });
            });


            $('[id$="btnSubmit_mdlAddDiv"]').click(function () {

                var itmCode = $('[id$="txt_CodemdlAddDiv"]').val();
                var itmDesc = $('[id$="txt_NamemdlAddDiv"]').val();
                var itmIsactive = $('[id$="chk_ActivemdlAddDiv"]').is(':checked') ? 'True' : 'False';
                var itmSeq = $('[id$="txt_CodemdlAddDiv"]').val();

                $.ajax({
                    type: "POST",
                    url: 'ItemMaster.aspx/AddDivMasterData',
                    data: "{'itmCode':'" + itmCode + "','itmDesc':'" + itmDesc + "','itmIsactive':'" + itmIsactive + "','itmSeq':'" + itmSeq + "'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                        $("#divResult").html("success");
                    },
                    error: function (e) {
                        $("#divResult").html("Something Wrong.");
                    }
                });

                $('#ddl_Div').append('<option value="'+ itmCode + '" selected="selected">'+ itmDesc + '</option>');
                $("#mdlAddDiv").modal('hide');
            });

             $('[id$="btn_AddDeptItemMaster"]').click(function () {
                 $("#mdlAddDept").modal();

                   $.ajax({
            type: 'POST',
            url: 'Utilities/DataModels.ashx?ID=DeptControlNo',
            dataType: "json",
            Cache: false,
            success: function (data) {
                    var JsonArray = JSON.stringify(data);
                    var Json = JSON.parse(JsonArray);
                //$('[id$="txtDeptCode_mdlAddDept"]').val(Json.aaData[0][0]);
                $('[id$="txtDeptCode_mdlAddDept"]').val("");
                $('[id$="txtDeptDesc_mdlAddDept"]').val("");
                $("#chkActive_mdlAddDept").prop("checked", false);
                $('[id$="txtSeqNo_mdlAddDept"]').val("");
                $("#chkAllowCashSales_mdlAddDept").prop("checked", false);
                $("#chkFirstTrial_mdlAddDept").prop("checked", false);
                $("#chkVoucher_mdlAddDept").prop("checked", false);
                $("#chkPrepaid_mdlAddDept").prop("checked", false);
                $("#chkRetail_mdlAddDept").prop("checked", false);
                $("#chkSaolon_mdlAddDept").prop("checked", false);
                $("#chkService_mdlAddDept").prop("checked", false);
                $('[id$="ddl_ValidityPeriodmdlAddDept"]').val("");
                $("#chkService_mdlAddDept").prop("checked", false);
                $("#chkCompound_mdlAddDept").prop("checked", false);
                }
                });

             });

        //    $('[id$="txtDeptCode_mdlAddDept"]').change(function () {
        //$.ajax({
        //    type: 'POST',
        //    url: 'Utilities/DataModels.ashx?ID=DeptCodeCheck&PKey=' + this.value + '',
        //    dataType: "json",
        //    Cache: false,
        //    success: function (data) {
        //        var JsonArray = JSON.stringify(data);
        //        var Json = JSON.parse(JsonArray);
        //        if (Json.iTotalRecords == 0) {
        //        }
        //        else {
        //            $('[id$="txtDeptCode_mdlAddDept"]').val("");
        //            alert("Code already Exists");
        //        }
        //    }
        //});
        //    });


            $('[id$="btnSubmit_mdlAddDept"]').click(function () {

                  var itmCode = $('[id$="txtDeptCode_mdlAddDept"]').val();
                  var itmDesc = $('[id$="txtDeptDesc_mdlAddDept"]').val();
                  var itmStatus = $('[id$="chkActive_mdlAddDept"]').is(':checked') ? 'True' : 'False';
                  var itmSeq= $('[id$="txtSeqNo_mdlAddDept"]').val();
                  var allowcashsales = $('[id$="chkAllowCashSales_mdlAddDept"]').is(':checked') ? 'True' : 'False';
                  var itmShowonsales ='False';
                  var isfirsttrial = $('[id$="chkFirstTrial_mdlAddDept"]').is(':checked') ? 'True' : 'False';
                  var isVoucher = $('[id$="chkVoucher_mdlAddDept"]').is(':checked') ? 'True' : 'False';
                  var isPrepaid = $('[id$="chkPrepaid_mdlAddDept"]').is(':checked') ? 'True' : 'False';
                  var isRetailproduct = $('[id$="chkRetail_mdlAddDept"]').is(':checked') ? 'True' : 'False';
                  var isSalonproduct = $('[id$="chkSaolon_mdlAddDept"]').is(':checked') ? 'True' : 'False';
                  var isPackage = 'False';
                  var validityPeriod= $('[id$="ddl_ValidityPeriodmdlAddDept"]').val();
                  var isService = $('[id$="chkService_mdlAddDept"]').is(':checked') ? 'True' : 'False';
                  var isCompound = $('[id$="chkCompound_mdlAddDept"]').is(':checked') ? 'True' : 'False';

				   $.ajax({
                        type: "POST",
                        url: 'DepartmentMaster.aspx/AddDeptMasterData',
                        data: "{'itmCode':'" + itmCode + "','itmDesc':'" + itmDesc + "','itmStatus':'" + itmStatus + "','itmSeq':'" + itmSeq + "','allowcashsales':'" + allowcashsales + "','itmShowonsales':'" + itmShowonsales + "','isfirsttrial':'" + isfirsttrial + "','isVoucher':'" + isVoucher + "','isPrepaid':'" + isPrepaid + "','isRetailproduct':'" + isRetailproduct + "','isSalonproduct':'" + isSalonproduct + "','isPackage':'" + isPackage + "','isService':'" + isService + "','isCompound':'" + isCompound + "','validityPeriod':'" + validityPeriod + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });

                $('#ddl_Dept').append('<option value="'+ itmCode + '" selected="selected">'+ itmDesc + '</option>');
                $("#mdlAddDept").modal('hide');
            });

            $('[id$="btn_AddClassItemMaster"]').click(function () {
                $("#mdlAddClass").modal();

                  $.ajax({
            type: 'POST',
            url: 'Utilities/DataModels.ashx?ID=ClassControlNo',
            dataType: "json",
            Cache: false,
            success: function (data) {
                    var JsonArray = JSON.stringify(data);
                    var Json = JSON.parse(JsonArray);
                $('[id$="txt_CodemdlAddClass"]').val(Json.aaData[0][0]);
                $('[id$="txt_NamemdlAddClass"]').val("");
                $("#chk_ActivemdlAddClass").prop("checked", false);
                }
                });

             });

            $('[id$="txt_CodemdlAddClass"]').change(function () {
        $.ajax({
            type: 'POST',
            url: 'Utilities/DataModels.ashx?ID=ClassCodeCheck&PKey=' + this.value + '',
            dataType: "json",
            Cache: false,
            success: function (data) {
                var JsonArray = JSON.stringify(data);
                var Json = JSON.parse(JsonArray);
                if (Json.iTotalRecords == 0){
                }
                else {
                    $('[id$="txt_CodemdlAddClass"]').val("");
                    alert("Code already Exists");
                }
            }
        });
            });


            $('[id$="btnSubmit_mdlAddClass"]').click(function () {

                var itmCode = $('[id$="txt_CodemdlAddClass"]').val();
                var itmDesc = $('[id$="txt_NamemdlAddClass"]').val();
                var itmIsactive = $('[id$="chk_ActivemdlAddClass"]').is(':checked') ? 'True' : 'False';

                $.ajax({
                    type: "POST",
                    url: 'ItemMaster.aspx/AddClassMasterData',
                    data: "{'itmCode':'" + itmCode + "','itmDesc':'" + itmDesc + "','itmIsactive':'" + itmIsactive + "'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                        $("#divResult").html("success");
                    },
                    error: function (e) {
                        $("#divResult").html("Something Wrong.");
                    }
                });

                $('#ddl_Class').append('<option value="'+ itmCode + '" selected="selected">'+ itmDesc + '</option>');
                $("#mdlAddClass").modal('hide');
            });

            $('[id$="btn_AddBrandItemMaster"]').click(function () {
                $("#mdlAddBrand").modal();
                $.ajax({
            type: 'POST',
            url: 'Utilities/DataModels.ashx?ID=BrandControlNo',
            dataType: "json",
            Cache: false,
            success: function (data) {
                    var JsonArray = JSON.stringify(data);
                    var Json = JSON.parse(JsonArray);
                $('[id$="txtCode_mdlAddBrand"]').val(Json.aaData[0][0]);
                $('[id$="txtName_mdlAddBrand"]').val("");
                $("#chk_showRetailmdlAddBrand").prop("checked", false);
                $("#chk_showVouchermdlAddBrand").prop("checked", false);
                $("#chk_showPrepaidmdlAddBrand").prop("checked",false);
                }
                });

            });

            $('[id$="btnSubmit_mdlAddBrand"]').click(function () {

                 var itmCode = $('[id$="txtCode_mdlAddBrand"]').val();
                var itmDesc = $('[id$="txtName_mdlAddBrand"]').val();
                var itmStatus = $('[id$="chk_ActivemdlAddBrand"]').is(':checked') ? 'True' : 'False';
                var retailProductBrand = $('[id$="chk_showRetailmdlAddBrand"]').is(':checked') ? 'True' : 'False';
                var voucherBrand = $('[id$="chk_showVouchermdlAddBrand"]').is(':checked') ? 'True' : 'False';
                var prepaidBrand = $('[id$="chk_showPrepaidmdlAddBrand"]').is(':checked') ? 'True' : 'False';

                $.ajax({
                        type: "POST",
                        url: 'BrandMaster.aspx/AddBrandMasterData',
                        data: "{'itmCode':'" + itmCode + "','itmDesc':'" + itmDesc + "','itmStatus':'" + itmStatus + "','retailProductBrand':'" + retailProductBrand + "','voucherBrand':'" + voucherBrand + "','prepaidBrand':'" + prepaidBrand + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            $("#divResult").html("success");
                        },
                        error: function (e) {
                            $("#divResult").html("Something Wrong.");
                        }
                    });

                $('#ddl_Brand').append('<option value="'+ itmCode + '" selected="selected">'+ itmDesc + '</option>');
                $("#mdlAddBrand").modal('hide');
            });



              $('[id$="btn_AddRow_LINK"]').click(function () {
        $("#mdlAddLink").modal();
            });

            

            $('[id$="btnSubmit_mdlAddLink"]').click(function () {

                var Index = $('#lbl_Index_mdlAddLink').text();
            if (Index == '-1') {
                var counter = 0;
                var newRow = $("<tr>");
                var cols = "";
                cols += '<td>' + $('#txtLinkCode_mdlAddLink').val().replace("'", "") + '</td>';
                cols += '<td>' + $('#txtLinkDesc_mdlAddLink').val().replace("'", "") + '</td>';
                cols += '<td>' + "" + '</td>';
                cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="edit_mdlAddLink glyphicon glyphicon-pencil"></i></div></td>';
                newRow.append(cols);
                $("#LinkModule").append(newRow);
                counter++;
            }
            else {
                $('#LinkModule tr').eq(Index).find('td:eq(0)').html($('#txtLinkCode_mdlAddLink').val().replace("'", ""));
                $('#LinkModule tr').eq(Index).find('td:eq(1)').html($('#txtLinkDesc_mdlAddLink').val().replace("'", ""));
                $('#LinkModule tr').eq(Index).find('td:eq(2)').html("");
                $('#LinkModule tr').eq(Index).find('td:eq(3)').html('<div class="tools"><i class="edit_mdlAddLink glyphicon glyphicon-pencil"></div>');

                }
                $("#mdlAddLink").modal('hide');
            });

            $(document).on("click", ".edit_mdlAddLink", function () {
        $("#mdlAddLink").modal();
        var rowIndex = $('#LinkModule tr').index($(this).closest('tr'));
        $("#mdlAddLink #lbl_Type_mdlAddLink").text('Edit');
        $("#mdlAddLink #lbl_Index_mdlAddLink").text(rowIndex);
        $("#mdlAddLink #txtLinkCode_mdlAddLink").val($('#LinkModule tr').eq(rowIndex).find('td:eq(0)').html());
        $("#mdlAddLink #txtLinkDesc_mdlAddLink").val($('#LinkModule tr').eq(rowIndex).find('td:eq(1)').html()).trigger();
    });


             function valueInTableUOMModule(tableID, columnNum, searchString){
  var found = false;
                $("#UOMModule tr").each(function () {
      var itemCode = $(this).find("td").eq(1).html();
    if (itemCode == searchString ){
      found = true;
      return false;
    }
  });

  return found;
            }



            $('[id$="btnSubmit_mdlAddUOM"]').click(function () {

                var _Code=$('#ddlUomCDesc_mdladdUom').val();
                 if (valueInTableUOMModule('UOMModule', 0, _Code)) { 
                    alert("Code already Exists");
                    return false;
                }

        var counter = 0;
        var newRow = $("<tr>");
                var cols = "";
                cols += '<td>' + "" + '</td>';
                cols += '<td>' + $('#ddlUomCDesc_mdladdUom').val() + '</td>';
                cols += '<td>' + $('#ddlUomCDesc_mdladdUom').find("option:selected").text() + '</td>';
                cols += '<td>' + "=" + '</td>';
                cols += '<td>' + $('#addUOMUnit_mdlAddUom').val().replace("'", "") + '</td>';
                cols += '<td>' + $('#ddlUomDesc_mdladdUom').val().replace("'", "") + '</td>';
                cols += '<td>' + $('#ddlUomDesc_mdladdUom').find("option:selected").text() + '</td>';
        cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Remove_mdlAddUOM glyphicon glyphicon-trash"></i></div></td>';
        newRow.append(cols);
                $("#UOMModule").append(newRow);

                var newRow1 = $("<tr>");
                var cols1 = "";
                cols1 += '<td>' + "" + '</td>';
        cols1 += '<td>' + $('#ddlUomCDesc_mdladdUom').val() + '</td>';
                cols1 += '<td style="width: 20%;"><input type="number" style="width: 100%; Height:30px;" class="form-control" id="txtPrice_ItemMaster" runat="server" maxlength="255" placeholder="Enter Price"></td>';
                cols1 += '<td style="width: 20%;"><input type="number" style="width: 100%; Height:30px;" class="form-control" id="txtCost_ItemMaster" runat="server" maxlength="255" placeholder="Enter Cost"></td>';
                cols1 += '<td style="width: 20%;"><input type="number" style="width: 100%; Height:30px;" class="form-control" id="txtMargin_ItemMaster" runat="server" maxlength="255" placeholder="Enter Margin"></td>';
        cols1 += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Remove_mdlAddUOMEntry glyphicon glyphicon-trash"></i></div></td>';
        newRow1.append(cols1);
                $("#UOMEntryModule").append(newRow1);

                $('#UOMModule').find('tr').each(
        function (i) {
            $('#UOMModule').find('tr:eq(' + (i + 1) + ') td:eq(0)').text((i + 1));
                    });

                $('#UOMEntryModule').find('tr').each(
        function (i) {
            $('#UOMEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(0)').text((i + 1));
                    });


        counter++;
        $("#mdlAddUOM").modal('hide');

            });

            //$('.input_Price').on('change keyup', function () {
            //     alert("axddf");
            //    //var rowIndex = $('#UOMEntryModule tr').index($(this).closest('tr'));
            //    //alert(rowIndex);
            //}); 


            //$('[id$="txtPrice_ItemMaster"]').change(function () {
            //    var rowIndex = $('#UOMEntryModule tr').index($(this).closest('tr'));
            //    alert(rowIndex);
            //});


             $(document).on("click", ".Remove_mdlAddUOM", function () {
        var rowIndex = $('#UOMModule tr').index($(this).closest('tr'));
                 $(this).closest("tr").remove();
                 document.getElementById("UOMEntryModule").deleteRow(rowIndex);

                  $('#UOMModule').find('tr').each(
        function (i) {
            $('#UOMModule').find('tr:eq(' + (i + 1) + ') td:eq(0)').text((i + 1));
                    });

                $('#UOMEntryModule').find('tr').each(
        function (i) {
            $('#UOMEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(0)').text((i + 1));
                     });

             });

            $(document).on("click", ".Remove_mdlAddUOMEntry", function () {
        var rowIndex = $('#UOMEntryModule tr').index($(this).closest('tr'));
                $(this).closest("tr").remove();
                document.getElementById("UOMModule").deleteRow(rowIndex);

                  $('#UOMModule').find('tr').each(
        function (i) {
            $('#UOMModule').find('tr:eq(' + (i + 1) + ') td:eq(0)').text((i + 1));
                    });

                $('#UOMEntryModule').find('tr').each(
        function (i) {
            $('#UOMEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(0)').text((i + 1));
                     });

            });


$("#fileupload").change(function () {
    fileName=$(this).val();
    $('#lblImageName').text(fileName);
    $("#dvPreview").append("<img />");
    $('#removeImg').show();
    var reader = new FileReader();
    reader.onload = function (e) {               
        $("#dvPreview img").attr("src", e.target.result).css('height','50px');
    }
    reader.readAsDataURL($(this)[0].files[0]);
});

$('#removeImg').click(function(){
	$("#dvPreview").html('');
    $('#lblImageName').text('');
    $('#removeImg').hide();
});


            //Mari
//poreq

$(function () {
                $('#itemSearchPOReq').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=ItemUsage',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Link Code/Item Code/Item Name/Brand/Range "
                    },
                    'columns': [
                        null, null, null,null, null, null,null,null,null,
                        {
                            'data': null,
                            'render': function (data, type, row, meta) {
                                data = '<i class="edit_mdlAddItemUsage glyphicon glyphicon-pencil"></i></a>';
                                return data;
                            }
                        }


                    ]
                });
            });

            function showAlert(Msg, MsgType, MsgDuration) {

                if (MsgType == 'Error') {
                    document.getElementById('lblErrorMessage').innerText = Msg;
                    if (MsgDuration == 'Short') {
                        $("#Alert_Error").removeClass('hide').slideDown(500, function () {
                            $(this).delay(500).fadeTo(2000, 500).slideUp(500, function () {
                                $(this).addClass('hide');
                            });
                        });
                    }
                    if (MsgDuration == 'Medium') {
                        $("#Alert_Error").removeClass('hide').slideDown(500, function () {
                            $(this).delay(1500).fadeTo(2000, 500).slideUp(500, function () {
                                $(this).addClass('hide');
                            });
                        });
                    }
                    if (MsgDuration == 'Long') {
                        $("#Alert_Error").removeClass('hide').slideDown(500, function () {
                            $(this).delay(2500).fadeTo(2000, 500).slideUp(500, function () {
                                $(this).addClass('hide');
                            });
                        });
                    }
                }
                if (MsgType == 'Success') {
                    document.getElementById('lblSuccessMessage').innerText = Msg;
                    if (MsgDuration == 'Short') {
                        $("#Alert_Sucess").removeClass('hide').slideDown(500, function () {
                            $(this).delay(500).fadeTo(2000, 500).slideUp(500, function () {
                                $(this).addClass('hide');
                            });
                        });
                    }
                    if (MsgDuration == 'Medium') {
                        $("#Alert_Sucess").removeClass('hide').slideDown(500, function () {
                            $(this).delay(1500).fadeTo(2000, 500).slideUp(500, function () {
                                $(this).addClass('hide');
                            });
                        });
                    }
                    if (MsgDuration == 'Long') {
                        $("#Alert_Sucess").removeClass('hide').slideDown(500, function () {
                            $(this).delay(2500).fadeTo(2000, 500).slideUp(500, function () {
                                $(this).addClass('hide');
                            });
                        });
                    }

                }
                if (MsgType == 'Warning') {
                    document.getElementById('lblWarningMessage').innerText = Msg;
                    if (MsgDuration == 'Short') {
                        $("#Alert_Warning").removeClass('hide').slideDown(500, function () {
                            $(this).delay(500).fadeTo(2000, 500).slideUp(500, function () {
                                $(this).addClass('hide');
                            });
                        });
                    }
                    if (MsgDuration == 'Medium') {
                        $("#Alert_Warning").removeClass('hide').slideDown(500, function () {
                            $(this).delay(1500).fadeTo(2000, 500).slideUp(500, function () {
                                $(this).addClass('hide');
                            });
                        });
                    }
                    if (MsgDuration == 'Long') {
                        $("#Alert_Warning").removeClass('hide').slideDown(500, function () {
                            $(this).delay(2500).fadeTo(2000, 500).slideUp(500, function () {
                                $(this).addClass('hide');
                            });
                        });
                    }
                }



            };

             $(function () {
                $('#tblSiteList').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=SiteList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': false,
                    'ordering': true,
                    'info': false,
                    'autoWidth': true,
                    'columns': [
                      {
                          'data': 'itemsiteId',
                          'render': function (data, type, row, meta) {
                              data = '<a href="#"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                      }, null, null,null]
                })
             });

        //$(function () {
        //    $('#tblPaymentTypeList').DataTable({
        //        'sAjaxSource': 'Utilities/DataModels.ashx?ID=PaymentTypeList',
        //        'paging': true,
        //        'lengthChange': true,
        //        'searching': false,
        //        'ordering': true,
        //        'info': false,
        //        'autoWidth': true,
        //        'columns': [
        //            {
        //                'data': 'payId',
        //                'render': function (data, type, row, meta) {
        //                    data = '<a href="#"><font color="#6a6000"><b>' + row[0] + '</b></a>';
        //                    return data;
        //                }
        //            }, null, null, null,null]
        //    })
        //});

            $(function () {
                $('#StudentMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=StudentList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Code/Name/ID/Contact"
                    },
                    'columns': [
                      {
                          'data': 'StudentCode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="StudentMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                      }, null, null, null, null, { "sType": "date-uk" },
                       {
                           'data': 'Balance',
                           'render': function (data, type, row, meta) {
                               data = '<a href="StudentAccount.aspx?PKey=' + row[0] + '">' + row[6] + '</b>';
                               return data;
                           }
                       }, null]
                })
            });
            $(function () {
                $('#StudentList_Sales').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=CRMStudents',
                    'paging': true,
                    'pageLength': 5,
                    'lengthChange': false,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Code/Name/ID/Contact"
                    },
                    'columns': [
                      {
                          'data': 'StudentCode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="StudentMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                      }, null, null, null, null, {
                          'data': 'Balance',
                          'render': function (data, type, row, meta) {
                              data = '<a href="StudentAccount.aspx?PKey=' + row[0] + '">' + row[5] + '</b>'; return data;
                          }
                      },
                       {
                           'data': 'Action',
                           'render': function (data, type, row, meta) {
                               data = '<a href="Invoice.aspx?Type=Student&PKey=' + row[0] + '"><i class="rotate glyphicon glyphicon-shopping-cart margin-r-5"></i></a><a href="Payment.aspx?Type=Student&PKey=' + row[0] + '"><i class="rotate glyphicon glyphicon glyphicon-usd margin-r-5"></i></a><a href="Quotation.aspx?Type=Student&PKey=' + row[0] + '"><i class="rotate glyphicon glyphicon glyphicon-file margin-r-5"></i></a>';
                               return data;
                           }
                       },
                    ],
                    'columnDefs': [
                   { 'className': 'dt-center', 'targets': 'Action' }
                    ]
                })
            });

            $(function () {
                $('#CourseMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=CourseList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    'columns': [
                      {
                          'data': 'CourseCode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="CourseMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                      }, null, null, null, null, null]
                })
            });
            $(function () {
                $('#ModuleMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=ModuleList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    'columns': [
                      {
                          'data': 'ModuleCode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="ModuleMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                      }, null, null, null, null]
                })
            });
            $(function () {
                $('#ProductMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=ProductList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    'columns': [
                      {
                          'data': 'ProductCode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="ProductMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                      }, null, null, null, null, null]
                })
            });
            $(function () {
                $('#EmployeeMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=EmployeeList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    'columns': [
                      {
                          'data': 'EmployeeCode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="EmployeeMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                      }, null, null, null, null, {
                          'data': 'Info',
                          'render': function (data, type, row, meta) {
                              data = '<a href="EmployeeAccount.aspx?PKey=' + row[0] + '"><i class="rotate glyphicon glyphicon-info-sign margin-r-5"></i></a>';
                              return data;
                          }
                      }]
                })
            });
            $(function () {
                $('#UserMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=UserList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,

                    'columns': [
                     {
                         'data': 'UserCode',
                         'render': function (data, type, row, meta) {
                             data = '<a href="UserMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                             return data;
                         }
                     }, null, null, null]
                })
            });
            $(function () {
                $('#LeadGroupList').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=LeadGroup',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    'columns': [
                     {
                         'data': 'Code',
                         'render': function (data, type, row, meta) {
                             data = '<a href="LeadGroups.aspx?Type=Existing&PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                             return data;
                         }
                     }, null, null, null, null]
                })
            });
            $(function () {
                $('#TemplateList').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=Template',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    'columns': [
                     {
                         'data': 'Code',
                         'render': function (data, type, row, meta) {
                             data = '<a href="Template.aspx?Type=Existing&PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                             return data;
                         }
                     }, null, null, null, null]
                })
            });
            $(function () {
                $('#CampaignMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=Campaign',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    'columns': [
                     {
                         'data': 'Code',
                         'render': function (data, type, row, meta) {
                             data = '<a href="Campaign.aspx?Type=Existing&PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                             return data;
                         }
                     }, null, null, null, null]
                })
            });
            $(function () {
                $('#SiteMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=SiteList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    'columns': [
                     {
                         'data': 'SiteCode',
                         'render': function (data, type, row, meta) {
                             data = '<a href="SiteMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                             return data;
                         }
                     }, null, null, null]
                })
            });
            $(function () {
                $('#LeadMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=LeadList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,                    
                    'columns': [
                     {
                         'data': 'LeadCode',
                         'render': function (data, type, row, meta) {
                             data = '<a href="LeadMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                             return data;
                         }
                     }, null, { "sType": "date-uk" }, null, null, null, null, null,
                     {
                         'data': 'Info',
                         'render': function (data, type, row, meta) {
                             data = '<a href="LeadAccount.aspx?PKey=' + row[0] + '"><i class="rotate glyphicon glyphicon-info-sign margin-r-5"></i></a>';
                             return data;
                         }
                     }]
                })
            });

            $(function () {
                $('#ActivityList').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=ActivityList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    'columns': [null,
                     {
                         'data': 'Code',
                         'render': function (data, type, row, meta) {
                             data = '<a href="Activity.aspx?Type=Existing&PKey=' + row[1] + '"><font color="#6a6000"><b>' + row[1] + '</b></a>';
                             return data;
                         }
                     }, null, null, null, null, null
                    ]
                })
            });

            $(function () {
                $('#CorporateMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=CorporateList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    'columns': [
                     {
                         'data': 'CorporateCode',
                         'render': function (data, type, row, meta) {
                             data = '<a href="CorporateMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                             return data;
                         }
                     }, null, null, null, null,
                     {
                         'data': 'Info',
                         'render': function (data, type, row, meta) {
                             data = '<a href="CorporateAccount.aspx?PKey=' + row[0] + '"><i class="rotate glyphicon glyphicon-info-sign margin-r-5"></i></a>';
                             return data;
                         }
                     }]
                })
            });

            $(function () {
                $('#CorporateList_Sales').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=CRMCorporates',
                    'paging': true,
                    'pageLength': 5,
                    'lengthChange': false,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    'columns': [
                      {
                          'data': 'CorporateCode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="CorporateMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                      }, null, null, null,
                       {
                           'data': 'Action',
                           'render': function (data, type, row, meta) {
                               data = '<a href="CorporateInvoice.aspx?Type=Corporate&PKey=' + row[0] + '"><i class="rotate glyphicon glyphicon-shopping-cart margin-r-5"></i></a><a href="CorporateAccount.aspx?PKey=' + row[0] + '"><i class="rotate glyphicon glyphicon glyphicon-usd margin-r-5"></i></a>';
                               return data;
                           }
                       },
                    ],
                    'columnDefs': [
                   { 'className': 'dt-center', 'targets': 'Action' }
                    ]
                })
            });

            $(function () {
                $('#Invoices_Sales').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=InvoiceList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    'columns': [
                     {
                         'data': 'InvoiceNo',
                         'render': function (data, type, row, meta) {
                             data = '<a href="Invoice.aspx?Type=Invoice&PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                             return data;
                         }
                     }, null, null, null, null, null]
                })
            });

            $(function () {
                $('#Quotation_Sales').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=QuotationList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    'columns': [
                     {
                         'data': 'InvoiceNo',
                         'render': function (data, type, row, meta) {
                             data = '<a href="Quotation.aspx?Type=Quotation&PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                             return data;
                         }
                     }, null, null, null]
                })
            });

            $(function () {
                $('#Payments_Sales').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=PaymentList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    'columns': [
                     {
                         'data': 'PaymentNo',
                         'render': function (data, type, row, meta) {
                             data = '<a href="Payment.aspx?Type=Payment&PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                             return data;
                         }
                     }, null, null, null]
                })
            });
            $(function () {
                $('#CorporateInvoices_Sales').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=CorporateInvoiceList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    'columns': [
                     {
                         'data': 'InvoiceNo',
                         'render': function (data, type, row, meta) {
                             data = '<a href="CorporateInvoice.aspx?Type=Invoice&PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                             return data;
                         }
                     }, null, null, null, null]
                })
            });
            $(function () {
                $('#AcedemicYear').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=AcedemicYear',
                    'paging': false,
                    'lengthChange': true,
                    'searching': false,
                    'ordering': false,
                    'info': false,
                    'autoWidth': true,
                    'columns': [
                      {
                          'data': 'Code',
                          'render': function (data, type, row, meta) {
                              data = '<a href="AcedemicYear.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                      }, null]
                })
            });
            $(function () {
                $('#Holidays').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=Holidays',
                    'paging': false,
                    'lengthChange': true,
                    'searching': false,
                    'ordering': false,
                    'info': false,
                    'autoWidth': true,
                    'columns': [
                      {
                          'data': 'Code',
                          'render': function (data, type, row, meta) {
                              data = '<a href="Holidays.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                      }, null]
                })
            });



            function TemplateFormatSelection(Template) {
                if (Template == 'SMS') {
                    $('.Content_EMail').hide();
                } else {
                    $('.Content_EMail').show();
                }
            };


            function SchduleTypeSelection(Type) {
                if (Type == 'O') {
                    $('.Week_SchduleType').hide();
                    $('.Month_SchduleType').hide();
                } else if (Type == 'D') {
                    $('.Week_SchduleType').hide();
                    $('.Month_SchduleType').hide();
                } else if (Type == 'W') {
                    $('.Week_SchduleType').show();
                    $('.Month_SchduleType').hide();
                } else if (Type == 'M') {
                    $('.Week_SchduleType').hide();
                    $('.Month_SchduleType').show();
                }
                var e = document.getElementById("ddlBasedOnMonthly_Campign");
                MonthlyBasedOnSelection(e.options[e.selectedIndex].value);
            };


            function MonthlyBasedOnSelection(Type) {
                if (Type == 'D') {
                    $('.Month_BasedOnDays').show();
                    $('.Month_BasedOnOn').hide();
                } else {
                    $('.Month_BasedOnDays').hide();
                    $('.Month_BasedOnOn').show();
                }
            };
            function PopulateMasterDropDowns(ID) {
                $.ajax({
                    type: "POST",
                    url: "Utilities/DataModels.ashx?ID=" + ID + "",
                    dataType: "json",
                    Cache: false,
                    success: function (data) {
                        var JsonArray = JSON.stringify(data);
                        var Json = JSON.parse(JsonArray);
                        var div_data = ""
                        for (i = 0; i < Json.aaData.length; i++) {
                            div_data += "<option value=" + Json.aaData[i][0] + ">" + Json.aaData[i][1] + "</option>";
                        }
                        $('#ddlCountry').append(div_data);
                    }
                });
            };

            jQuery.extend(jQuery.fn.dataTableExt.oSort, {
                "date-uk-pre": function (a) {
                    var ukDatea = a.split('/');
                    return (ukDatea[2] + ukDatea[1] + ukDatea[0]) * 1;
                },

                "date-uk-asc": function (a, b) {
                    return ((a < b) ? -1 : ((a > b) ? 1 : 0));
                },

                "date-uk-desc": function (a, b) {
                    return ((a < b) ? 1 : ((a > b) ? -1 : 0));
                }
            });


            function DefineSignPad() {
                $('.sigPad').signaturePad({ drawOnly: true, validateFields: false });
            }

            function CourseSyllabus_Search(ColID, SearchKey) {
                var filter, table, tr, td, i, txtValue;
                filter = SearchKey.toUpperCase();
                table = document.getElementById("CourseSyllabus");
                tr = table.getElementsByTagName("tr");
                // Loop through all table rows, and hide those who don't match the search query
                for (i = 0; i < tr.length; i++) {
                    td = tr[i].getElementsByTagName("td")[ColID];
                    if (td) {
                        txtValue = td.textContent || td.innerText;
                        if (txtValue.toUpperCase().indexOf(filter) > -1) {
                            tr[i].style.display = "";
                        } else {
                            tr[i].style.display = "none";
                        }
                    }
                }
        };

        //Inventory
        $(function () {
                $('#GRNMasterPage').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=ListWithSupplier&PKey=GRN',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Invoice Number/ Invoice Date/ Ref Num / Supplier / Total Amount/ Status is currently active"
                    },
                    'columns': [
                        {
                          'data': 'docNo',
                          'render': function (data, type, row, meta) {
                              data = '<a href="GRN.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null, null, null, null, null,
                        {
                            'data': 'docNo',
                            'render': function (data, type, row, meta) {
                                data = '<a href="GRNPrint.aspx?PKey=' + row[0] + '"><i class="fa fa-print" style="font-size:24px"></i></a>';
                                return data;
                            }
                        }
                      ]
                })
            });

        $(".btnFillter_GRNListMaster .btn").click(function () {
                
        var inputValue = $(this).find("input").val();
        var table = $('#GRNMasterPage').DataTable();
        table
            .column(5)
            .search(inputValue)
            .draw();
        });

        var dateToday = new Date();


        //$('[id$="dt_DocDateGRN"]').datepicker({
        //    format: 'dd/mm/yyyy',
        //    autoclose: true,
        //    forceParse: false,
        //    startDate: '+0d',
        //}).on('changeDate', function (selected) {
        //    var startDate = new Date(selected.date.valueOf());
        //    $('[id$="dt_DeliveryDateGRN"]').datepicker('setStartDate', startDate);
        //}).on('clearDate', function (selected) {
        //    $('[id$="dt_DeliveryDateGRN"]').datepicker('setStartDate', null);
        //});

        //$('[id$="dt_DeliveryDateGRN"]').datepicker({
        //    format: 'dd/mm/yyyy',
        //    autoclose: true,
        //}).on('changeDate', function (selected) {
        //    var endDate = new Date(selected.date.valueOf());
        //    $('[id$="dt_DocDateGRN"]').datepicker('setEndDate', endDate);
        //}).on('clearDate', function (selected) {
        //    $('[id$="dt_DocDateGRN"]').datepicker('setEndDate', null);
        //});


         $('[id$="dt_DocDateGRN"]').datepicker({
             format: 'dd/mm/yyyy',
             autoclose: true,
             forceParse: false
             //,startDate: '+0d'
        });

        $('[id$="dt_DeliveryDateGRN"]').datepicker({
        format: 'dd/mm/yyyy',
            autoclose: true,
            forceParse: false
            //,startDate: '+0d'
        });

         $('[id$="btn_AddRow_GRN"]').click(function () {
        $("#mdlAddUOM").modal();
            });

        function restrict(tis) {
            var prev = tis.getAttribute("data-prev");
            prev = (prev != '') ? prev : '';
            if (Math.round(tis.value * 100) / 100 != tis.value)
                tis.value = prev;
            tis.setAttribute("data-prev", tis.value =!!tis.value && Math.abs(tis.value) >= 0 ? Math.abs(tis.value) : null  )
        }

        function restrict1(tis) {
            var prev = tis.getAttribute("data-prev");
            prev = (prev != '') ? prev : '';
            if (Math.round(tis.value * 100) / 100 != tis.value)
                tis.value = prev;
            tis.setAttribute("data-prev", tis.value)
        }


        $(function () {
                $('#GRNItemSearch').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=GRNItemSearchList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    "iDisplayLength": 5,
                     "bLengthChange": false,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Item Code/Item Description/Item UOM/Item Brand/Link Code/Range"
                    },
                    'columns': [
                        null, null, null, null, null, null, null,null, null, null,
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtQty_GRN" value="0"  min="0" oninput="restrict(this);" onkeydown="javascript: return event.keyCode === 8 ||event.keyCode === 46 ? true : !isNaN(Number(event.key))">';
                              return data;
                          }
                        },
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtCost_GRN" min="0" oninput="restrict(this);">';
                              return data;
                          }
                        },

                        {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              //data = '<button type="button" class="btn btn-primary" id="btnAdd_GRN">Select</button>';
                              //data = '<a><i class="Add_ItemToGRN glyphicon glyphicon-hand-up"></i></a>';
                              data = '<a class="Add_ItemToGRN btn btn-info btn-primaryIcon"><i class=" glyphicon glyphicon-hand-up"></i></a></p>';
                              return data;
                          }
                        }

                    ],
                     "columnDefs": [
                         {
                                "targets": [ 7 ],
                                "visible": false,
                                "searchable": false
                         },
                         {
                               "targets": [ 8 ],
                               "visible": false,
                             "searchable": false
                         },
                         {
                               "targets": [ 9 ],
                               "visible": false,
                             "searchable": false
                             
                         }

                    ],  



                })

        });


            $(document).on("click", ".Add_ItemToGRN", function () {

                var rowIndex = $('#GRNItemSearch tr').index($(this).closest('tr'));

                var currentRow = $(this).closest("tr");
                var sData = $('#GRNItemSearch').DataTable().row(currentRow).data();
                //alert(data);

                //var sData = $("#GRNItemSearch").dataTable().fnGetData($(this));
                //alert(sData);
                //alert($('#GRNItemSearch tr').eq(rowIndex).find(".uomcode").html());
                //alert($('#GRNItemSearch tr').eq(rowIndex).find('td:eq(7)').html());
                //alert($('#GRNItemSearch tr').eq(rowIndex).find('td:eq(8)').html());
                //alert($('#GRNItemSearch tr').eq(rowIndex).find('td:eq(9)').html());

            var searchString = $('#GRNItemSearch tr').eq(rowIndex).find('td:eq(0)').html();
            if (valueInGRNTable('GRNItemSearch', 0, searchString)) { 
                alert("already Exists");
                return false;
            }    
                   
            var counter = 0;
            var newRow = $("<tr>");
                var cols = "";
                cols += '<td style="width: 0%;visibility:hidden;">' + "" + '</td>';
                cols += '<td style="width: 0%;visibility:hidden;">' + sData[7] + '</td>';
                cols += '<td>' + "" + '</td>';
                cols += '<td >' + $('#GRNItemSearch tr').eq(rowIndex).find('td:eq(0)').html() + '</td>';
                cols += '<td>' + $('#GRNItemSearch tr').eq(rowIndex).find('td:eq(1)').html() + '</td>';
                cols += '<td>' + $('#GRNItemSearch tr').eq(rowIndex).find('td:eq(3)').html() + '</td>';
                cols += '<td>' + $('#GRNItemSearch tr').eq(rowIndex).find('td:eq(5)').html() + '</td>';

                var table = document.getElementById("GRNItemSearch");
                var row = table.rows[rowIndex];

                var qty = row.cells[7].children[0].value;
                var cost =row.cells[8].children[0].value;
                var Ucost = qty * cost;
                if (qty == "" || qty == "0") {
                    alert("Qty is Invalid");
                    return false;
                }
                if (cost=="") {
                    alert("Cost is Empty");
                    return false;
                }

                cols += '<td>' + cost + '</td>';

                cols += '<td>' + $('#GRNItemSearch tr').eq(rowIndex).find('td:eq(2)').html() + '</td>';
                cols += '<td>' + qty + '</td>';
                cols += '<td>' + Ucost.toFixed(2) + '</td>';
                cols += '<td>' + "" + '</td>';
                cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="edit_AddItemToGRN glyphicon glyphicon-pencil"></i></div></td>';
                cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Remove_AddItemToGRN glyphicon glyphicon-trash"></i></div></td>';
                
                cols += '<td style="width: 0%;visibility:hidden;">' + sData[8] + '</td>';
                cols += '<td style="width: 0%;visibility:hidden;">' + sData[9] + '</td>';
                newRow.append(cols);
                $("#GRNEntryModule").append(newRow);

                var _Total = 0;
                $('#GRNEntryModule').find('tr').each(
                function (i) {
                    $('#GRNEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#GRNEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#GRNEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
                $('[id$="txt_TotAmntGRN"]').val(_Total.toFixed(2));
                counter++;
        });

        $(document).on("click", ".edit_AddItemToGRN", function () {
        $("#mdlEditPriceGRN").modal();
        var rowIndex = $('#GRNEntryModule tr').index($(this).closest('tr'));
            $("#mdlEditPriceGRN #lbl_Index_mdlEditPriceGRN").text(rowIndex);
            //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
            $("#mdlEditPriceGRN #txtQty_EditPriceGRN").val($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(9)').html());
            $("#mdlEditPriceGRN #txtRemark_EditPriceGRN").val($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
        $("#mdlEditPriceGRN #txtPrice_EditPriceGRN").val($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(7)').html()).trigger();
        });

        $('[id$="btnSubmit_mdlEditPriceGRN"]').click(function () {

            var Qty = $('#txtQty_EditPriceGRN').val();
            var Cost = $('#txtPrice_EditPriceGRN').val();
            var remark = $('#txtRemark_EditPriceGRN').val();
            var Ucost = Qty * Cost;
            if (Qty == "") {
                alert("Qty is Empty");

                $("#mdlEditPriceGRN").modal();
                var rowIndex = $('#GRNEntryModule tr').index($(this).closest('tr'));
                $("#mdlEditPriceGRN #lbl_Index_mdlEditPriceGRN").text(rowIndex);
                //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
                $("#mdlEditPriceGRN #txtQty_EditPriceGRN").val($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(9)').html());
                $("#mdlEditPriceGRN #txtRemark_EditPriceGRN").val(remark);
                $("#mdlEditPriceGRN #txtPrice_EditPriceGRN").val(Cost).trigger();

                return false
            }
            if (Cost == "") {
                alert("Cost is Empty");

                $("#mdlEditPriceGRN").modal();
                var rowIndex = $('#GRNEntryModule tr').index($(this).closest('tr'));
                $("#mdlEditPriceGRN #lbl_Index_mdlEditPriceGRN").text(rowIndex);
                //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
                $("#mdlEditPriceGRN #txtQty_EditPriceGRN").val(Qty);
                $("#mdlEditPriceGRN #txtRemark_EditPriceGRN").val(remark);
                $("#mdlEditPriceGRN #txtPrice_EditPriceGRN").val($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(7)').html()).trigger();

                return false
            }
                var Index = $('#lbl_Index_mdlEditPriceGRN').text();
                $('#GRNEntryModule tr').eq(Index).find('td:eq(9)').html($('#txtQty_EditPriceGRN').val().replace("'", ""));
                $('#GRNEntryModule tr').eq(Index).find('td:eq(7)').html($('#txtPrice_EditPriceGRN').val().replace("'", ""));
                $('#GRNEntryModule tr').eq(Index).find('td:eq(10)').html(Ucost.toFixed(2));
                $('#GRNEntryModule tr').eq(Index).find('td:eq(11)').html($('#txtRemark_EditPriceGRN').val().replace("'", ""));
                $("#mdlEditPriceGRN").modal('hide');

                var _Total = 0;
                $('#GRNEntryModule').find('tr').each(
                    function (i) {
                        $('#GRNEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                        if ($('#GRNEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '') { _Total = parseFloat(_Total) + parseFloat($('#GRNEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
                $('[id$="txt_TotAmntGRN"]').val(_Total.toFixed(2));

        });

         $(document).on("click", ".Remove_AddItemToGRN", function () {
        var rowIndex = $('#GRNEntryModule tr').index($(this).closest('tr'));
             $(this).closest("tr").remove();
             var _Total = 0;
                $('#GRNEntryModule').find('tr').each(
                function (i) {
                    $('#GRNEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#GRNEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#GRNEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
                $('[id$="txt_TotAmntGRN"]').val(_Total.toFixed(2));

        });

        $(document).on("click", ".Remove_AddItemToGRNAfterSave", function () {
        var rowIndex = $('#GRNEntryModule tr').index($(this).closest('tr'));
             

            var StkMovdocDtl = [];
            var StkMovdocDtlobj = {};
            var rows = $('#GRNEntryModule tbody >tr');
            var columns;
            columns = $(rows[rowIndex]).find('td');
            StkMovdocDtlobj.docId = $(columns[0]).html();
            StkMovdocDtl.push(StkMovdocDtlobj);
             $.ajax({
                    type: "POST",
                    url: "GRN.aspx/DelStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocDtl) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

            $(this).closest("tr").remove();
             var _Total = 0;
                $('#GRNEntryModule').find('tr').each(
                function (i) {
                    $('#GRNEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#GRNEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#GRNEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
                $('[id$="txt_TotAmntGRN"]').val(_Total.toFixed(2));

            });

        function valueInGRNTable(tableID, columnNum, searchString)
            {
                var found = false;
                $("#GRNEntryModule tr").each(function () {
                var itemCode = $(this).find("td").eq(3).html();
                if (itemCode == searchString)
                    {
                        found = true;
                        return false;
                    }
             });

                return found;
        }

        $('[id$="ddl_supplierGRN"]').change(function () {
                var SuppCode = this.value;
            $.ajax({
                type: 'POST',
                url: 'Utilities/DataModels.ashx?ID=SupplierInfo&PKey=' + this.value + '',
                dataType: "json",
                Cache: false,
                success: function (data) {
                    var JsonArray = JSON.stringify(data);
                    var Json = JSON.parse(JsonArray);
                    $('[id$="txtAttnTo_GRN"]').val(Json.aaData[0][0]);
                    $('[id$="txtAddress1_GRN"]').val(Json.aaData[0][1]);
                    $('[id$="txtAddress2_GRN"]').val(Json.aaData[0][2]);
                    $('[id$="txtAddress3_GRN"]').val(Json.aaData[0][3]);
                    $('[id$="txtPostCode_GRN"]').val(Json.aaData[0][4]);
                    $('[id$="txtCity_GRN"]').val(Json.aaData[0][5]);
                    $('[id$="txtState_GRN"]').val(Json.aaData[0][6]);
                    $('[id$="txtCountry_GRN"]').val(Json.aaData[0][7]);
                    $('[id$="txtRemark1_GRN"]').val(Json.aaData[0][8]);
                    $('[id$="txtRemark2_GRN"]').val(Json.aaData[0][9]);
                    $('[id$="txtShipToAddress1_GRN"]').val(Json.aaData[0][10]);
                    $('[id$="txtShipToAddress2_GRN"]').val(Json.aaData[0][11]);
                    $('[id$="txtShipToAddress3_GRN"]').val(Json.aaData[0][12]);
                    $('[id$="txtPostCodeTo_GRN"]').val(Json.aaData[0][13]);
                    $('[id$="txtCityTo_GRN"]').val(Json.aaData[0][14]);
                    $('[id$="txtStateTo_GRN"]').val(Json.aaData[0][15]);
                    $('[id$="txtCountryTo_GRN"]').val(Json.aaData[0][16]);
                    }
                });
        });


         $('[id$="btnSubmit_mdlSuccessMsg"]').click(function () {
             $(location).attr('href',"GRNList.aspx");

        });

        $('[id$="btnSubmit_AddGRN"]').click(function () {
                  this.disabled = true;

            //$.ajax({
            //    type: 'POST',
            //    url: 'Utilities/DataModels.ashx?ID=GetControlNo&PKey=Goods Receive Note',
            //    dataType: "json",
            //    Cache: false,
            //    success: function (data) {
            //        var JsonArray = JSON.stringify(data);
            //        var Json = JSON.parse(JsonArray);
            //        $('[id$="txtDocNo_GRN"]').val(Json.aaData[0][0] + Json.aaData[0][1] + + Json.aaData[0][2]);
            //        }
            //      });

                var StkMovdocHdrdetails = [];
                  var StkMovdocHdrsobj = {};
                  
                  StkMovdocHdrsobj.docNo = $('[id$="txtDocNo_GRN"]').val();
                  //alert($('[id$="txtDocNo_GRN"]').val());
                StkMovdocHdrsobj.movCode = "GRN";
                StkMovdocHdrsobj.movType = "GRN";
                StkMovdocHdrsobj.storeNo = $('[id$="ddlStoreCode_GRN"]').val();
                StkMovdocHdrsobj.fstoreNo = null;
                StkMovdocHdrsobj.tstoreNo = null;
                //var itemName = $('[id$="txt_StockName"]').val();;
                StkMovdocHdrsobj.supplyNo = $('[id$="ddl_supplierGRN"]').val();
                StkMovdocHdrsobj.docRef1 = $('[id$="txtPO1Ref_GRN"]').val();
                StkMovdocHdrsobj.docRef2 = $('[id$="txtGrn1Ref_GRN"]').val();
                StkMovdocHdrsobj.accCode = null;
                  StkMovdocHdrsobj.staffNo = $('[id$="ddlCreatedBy_GRN"]').val();
                  var tablerows = $('#GRNEntryModule tbody >tr');
                  StkMovdocHdrsobj.docLines = tablerows.length-1;
            var DocDate = $('[id$="dt_DocDateGRN"]').val();
            var DelivryDate = $('[id$="dt_DeliveryDateGRN"]').val();
                  if (DocDate == "") {
                    StkMovdocHdrsobj.docDate = null;
                }
                else {
                      StkMovdocHdrsobj.docDate = DocDate.split("/").reverse().join("/") + " 00:00:00";
                  }

                //StkMovdocHdrsobj.docDate = $('[id$="dt_DocDateGRN"]').val();
                StkMovdocHdrsobj.postDate = null;
                //StkMovdocHdrsobj.postDate = $('[id$="dt_DocDateGRN"]').val();
                StkMovdocHdrsobj.docStatus = "0";
                StkMovdocHdrsobj.docTerm = $('[id$="txtTerm_GRN"]').val();
                StkMovdocHdrsobj.docTime = null;
                StkMovdocHdrsobj.docQty = null;
                StkMovdocHdrsobj.docFoc = null;
                StkMovdocHdrsobj.docDisc = null;
                StkMovdocHdrsobj.docAmt =$('[id$="txt_TotAmntGRN"]').val();
                StkMovdocHdrsobj.docTrnspt = "0";
                StkMovdocHdrsobj.docTax = "0";
                StkMovdocHdrsobj.docAttn = $('[id$="txtAttnTo_GRN"]').val();
                StkMovdocHdrsobj.docRemk1 = $('[id$="txtRemark_GRN"]').val();
                StkMovdocHdrsobj.docRemk2 = $('[id$="txtRemark1_GRN"]').val();
                StkMovdocHdrsobj.docRemk3 = $('[id$="txtRemark2_GRN"]').val();
                StkMovdocHdrsobj.docShip = null;
                StkMovdocHdrsobj.bname = $('[id$="txtAttnTo_GRN"]').val();
                StkMovdocHdrsobj.baddr1 = $('[id$="txtAddress1_GRN"]').val();
                StkMovdocHdrsobj.baddr2 = $('[id$="txtAddress2_GRN"]').val();
                StkMovdocHdrsobj.baddr3 = $('[id$="txtAddress3_GRN"]').val();
                StkMovdocHdrsobj.bpostcode = $('[id$="txtPostCode_GRN"]').val();
                StkMovdocHdrsobj.bstate = $('[id$="txtState_GRN"]').val();
                StkMovdocHdrsobj.bcity = $('[id$="txtCity_GRN"]').val();
                StkMovdocHdrsobj.bcountry = $('[id$="txtCountry_GRN"]').val();
                StkMovdocHdrsobj.daddr1 = $('[id$="txtShipToAddress1_GRN"]').val();
                StkMovdocHdrsobj.daddr2 = $('[id$="txtShipToAddress2_GRN"]').val();
                StkMovdocHdrsobj.daddr3 = $('[id$="txtShipToAddress3_GRN"]').val();
                StkMovdocHdrsobj.dpostcode = $('[id$="txtPostCodeTo_GRN"]').val();
                StkMovdocHdrsobj.dstate = $('[id$="txtStateTo_GRN"]').val();
                StkMovdocHdrsobj.dcity = $('[id$="txtCityTo_GRN"]').val();
                StkMovdocHdrsobj.dcountry = $('[id$="txtCountryTo_GRN"]').val();
                StkMovdocHdrsobj.cancelQty = "0";
            StkMovdocHdrsobj.recStatus = "0";

            var DelivryDate = $('[id$="dt_DeliveryDateGRN"]').val();
            if (DelivryDate == "") {
                StkMovdocHdrsobj.recExpect = null;
            }
            else {
                var arrStartDate = DocDate.split("/");
                var date1 = new Date(arrStartDate[2], arrStartDate[1], arrStartDate[0]);
                var arrEndDate = DelivryDate.split("/");
                var date2 = new Date(arrEndDate[2], arrEndDate[1], arrEndDate[0]);

                if (date1 > date2) {

                    alert(DelivryDate + ' DeliveryDate Should be greather  than Doc Date' + DocDate);
                    return false;
                }
                else {
                    StkMovdocHdrsobj.recExpect = DelivryDate.split("/").reverse().join("/") + " 00:00:00";
                }
            }

                  
                //StkMovdocHdrsobj.recExpect = $('[id$="dt_DocDateGRN"]').val();
                StkMovdocHdrsobj.recTtl = "0";
                StkMovdocHdrsobj.createUser = null;
                StkMovdocHdrsobj.createDate = null;
                StkMovdocHdrsobj.phyNo = null;
                StkMovdocHdrsobj.PoNo = "";
                  StkMovdocHdrdetails.push(StkMovdocHdrsobj);
                  
                if (StkMovdocHdrsobj.storeNo == "") {
                    alert("Store Code is Empty");
                    this.disabled = false;
                    return false;
                }
                if (StkMovdocHdrsobj.supplyNo == "") {
                    alert("Supply No is Empty");
                    return false;
                }
                if (StkMovdocHdrsobj.staffNo == "") {
                    alert("Created By is Empty");
                    return false;
                  }

                  
                  if (tablerows.length == 1) {
                      alert("Pls Add Item");
                      this.disabled = false;
                    return false;
                  }

                  var successResult;
                var btnTextGRN = $('[id$="btnSubmit_AddGRN"]').text();
                if (btnTextGRN == "Add") {
                    $.ajax({
                    type: "POST",
                    url: "GRN.aspx/AddStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

                    var details = [];
                var details1 = [];

                var rows = $('#GRNEntryModule tbody >tr');
                var GRNEntryrows = $('#GRNEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_GRN"]').val();
                    obj.movCode = "GRN";
                    obj.movType = "GRN";
                    obj.docLineno = $(columns[2]).html();
                    if (DocDate == "") {
                    obj.docDate = null;
                }
                else {
                        obj.docDate = DocDate.split("/").reverse().join("/") + " 00:00:00";
                  }
                    //obj.docDate = $('[id$="dt_DocDateGRN"]').val();
                    obj.grnNo = null;
                    obj.refNo = null;
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();
                    
                     if (DocDate == "") {
                    obj.docExpdate = null;
                }
                else {
                         obj.docExpdate = DocDate.split("/").reverse().join("/") + " 00:00:00";
                  }
                    //obj.docExpdate = $('[id$="dt_DocDateGRN"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "GRN.aspx/AddStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });

                }
                else {

                        $.ajax({
                    type: "POST",
                    url: "GRN.aspx/EditStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });
                    

                var details = [];
                var rows = $('#GRNEntryModule tbody >tr');
                var GRNEntryrows = $('#GRNEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_GRN"]').val();
                    obj.movCode = "GRN";
                    obj.movType = "GRN";
                    obj.docLineno = $(columns[2]).html();
                    if (DocDate == "") {
                    obj.docDate = null;
                }
                else {
                        obj.docDate = DocDate.split("/").reverse().join("/") + " 00:00:00";
                  }
                    //obj.docDate = $('[id$="dt_DocDateGRN"]').val();
                    obj.grnNo = null;
                    obj.refNo = null;
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();
                    
                     if (DocDate == "") {
                    obj.docExpdate = null;
                }
                else {
                         obj.docExpdate = DocDate.split("/").reverse().join("/") + " 00:00:00";
                  }
                    //obj.docExpdate = $('[id$="dt_DocDateGRN"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
					obj.docId = $(columns[0]).html();
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "GRN.aspx/EditStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });
                  }
                  //if (btnTextGRN == "Add") {
                  //      $("#mdlSuccessMsg").modal();
                  //      $("#mdlSuccessMsg #lbl_text_mdlSuccessMsg").val("Data Saved Successfully");
                  //      $("#mdlSuccessMsg #lbl_DocNo_mdlSuccessMsg").val($('[id$="txtDocNo_GRN"]').val());
                  //}
                  //else {
                  //    $("#mdlSuccessMsg").modal();
                  //      $("#mdlSuccessMsg #lbl_text_mdlSuccessMsg").val("Data Modify Successfully");
                  //      $("#mdlSuccessMsg #lbl_DocNo_mdlSuccessMsg").val($('[id$="txtDocNo_GRN"]').val());
                  //}
                  $(location).attr('href', "GRNList.aspx");


                  //if (successResult == "True") {
                  //    $('[id$="btnSubmit_PostGRN"]').prop('disabled', false);
                  //    $('[id$="btnSubmit_AddGRN"]').prop('disabled', true);
                  //    //$(location).attr('href',"ItemMasterList.aspx");
                  //    alert("Data Saved Successfully");
                  //}

        });

        $('[id$="btnSubmit_PostGRN"]').click(function () {

            this.disabled = true;

            var StkMovdocHdrdetails = [];
                  var StkMovdocHdrsobj = {};
                  
                  StkMovdocHdrsobj.docNo = $('[id$="txtDocNo_GRN"]').val();
                  //alert($('[id$="txtDocNo_GRN"]').val());
                StkMovdocHdrsobj.movCode = "GRN";
                StkMovdocHdrsobj.movType = "GRN";
                StkMovdocHdrsobj.storeNo = $('[id$="ddlStoreCode_GRN"]').val();
                StkMovdocHdrsobj.fstoreNo = null;
                StkMovdocHdrsobj.tstoreNo = null;
                //var itemName = $('[id$="txt_StockName"]').val();;
                StkMovdocHdrsobj.supplyNo = $('[id$="ddl_supplierGRN"]').val();
                StkMovdocHdrsobj.docRef1 = $('[id$="txtPO1Ref_GRN"]').val();
                StkMovdocHdrsobj.docRef2 = $('[id$="txtGrn1Ref_GRN"]').val();
                StkMovdocHdrsobj.accCode = null;
                  StkMovdocHdrsobj.staffNo = $('[id$="ddlCreatedBy_GRN"]').val();
                  var tablerows = $('#GRNEntryModule tbody >tr');
                  StkMovdocHdrsobj.docLines = tablerows.length-1;
                  var DocDate = $('[id$="dt_DocDateGRN"]').val();
                  if (DocDate == "") {
                    StkMovdocHdrsobj.docDate = null;
                }
                else {
                    StkMovdocHdrsobj.docDate = DocDate.split("/").reverse().join("/")
                  }

                    var d = new Date();
                    //StkMovdocHdrsobj.postDate = DocDate.split("/").reverse().join("/") + " 00:00:00";
                    //StkMovdocHdrsobj.postDate = d.toISOString();
                StkMovdocHdrsobj.postDate = d.getFullYear() + "/" + (d.getMonth() + 1) + '/' + d.getDate();

                StkMovdocHdrsobj.docStatus = "7";
                StkMovdocHdrsobj.docTerm = $('[id$="txtTerm_GRN"]').val();
                StkMovdocHdrsobj.docTime = null;
                StkMovdocHdrsobj.docQty = null;
                StkMovdocHdrsobj.docFoc = null;
                StkMovdocHdrsobj.docDisc = null;
                StkMovdocHdrsobj.docAmt = $('[id$="txt_TotAmntGRN"]').val();
                StkMovdocHdrsobj.docTrnspt = "0";
                StkMovdocHdrsobj.docTax = "0";
                StkMovdocHdrsobj.docAttn = $('[id$="txtAttnTo_GRN"]').val();
                StkMovdocHdrsobj.docRemk1 = $('[id$="txtRemark_GRN"]').val();
                StkMovdocHdrsobj.docRemk2 = $('[id$="txtRemark1_GRN"]').val();
                StkMovdocHdrsobj.docRemk3 = $('[id$="txtRemark2_GRN"]').val();
                StkMovdocHdrsobj.docShip = null;
                StkMovdocHdrsobj.bname = $('[id$="txtAttnTo_GRN"]').val();
                StkMovdocHdrsobj.baddr1 = $('[id$="txtAddress1_GRN"]').val();
                StkMovdocHdrsobj.baddr2 = $('[id$="txtAddress2_GRN"]').val();
                StkMovdocHdrsobj.baddr3 = $('[id$="txtAddress3_GRN"]').val();
                StkMovdocHdrsobj.bpostcode = $('[id$="txtPostCode_GRN"]').val();
                StkMovdocHdrsobj.bstate = $('[id$="txtState_GRN"]').val();
                StkMovdocHdrsobj.bcity = $('[id$="txtCity_GRN"]').val();
                StkMovdocHdrsobj.bcountry = $('[id$="txtCountry_GRN"]').val();
                StkMovdocHdrsobj.daddr1 = $('[id$="txtShipToAddress1_GRN"]').val();
                StkMovdocHdrsobj.daddr2 = $('[id$="txtShipToAddress2_GRN"]').val();
                StkMovdocHdrsobj.daddr3 = $('[id$="txtShipToAddress3_GRN"]').val();
                StkMovdocHdrsobj.dpostcode = $('[id$="txtPostCodeTo_GRN"]').val();
                StkMovdocHdrsobj.dstate = $('[id$="txtStateTo_GRN"]').val();
                StkMovdocHdrsobj.dcity = $('[id$="txtCityTo_GRN"]').val();
                StkMovdocHdrsobj.dcountry = $('[id$="txtCountryTo_GRN"]').val();
                StkMovdocHdrsobj.cancelQty = "0";
                  StkMovdocHdrsobj.recStatus = "1";
            var DelivryDate = $('[id$="dt_DeliveryDateGRN"]').val();
            if (DelivryDate == "") {
                StkMovdocHdrsobj.recExpect = null;
            }
            else {
                var arrStartDate = DocDate.split("/");
                var date1 = new Date(arrStartDate[2], arrStartDate[1], arrStartDate[0]);
                var arrEndDate = DelivryDate.split("/");
                var date2 = new Date(arrEndDate[2], arrEndDate[1], arrEndDate[0]);

                if (date1 > date2) {

                    alert(DelivryDate + ' DeliveryDate Should be greather  than Doc Date' + DocDate);
                    return false;
                }
                else {
                    StkMovdocHdrsobj.recExpect = DelivryDate.split("/").reverse().join("/") + " 00:00:00";
                }
            }
                //StkMovdocHdrsobj.recExpect = $('[id$="dt_DocDateGRN"]').val();
                StkMovdocHdrsobj.recTtl = "0";
                StkMovdocHdrsobj.createUser = null;
                StkMovdocHdrsobj.createDate = null;
                StkMovdocHdrsobj.phyNo = null;
                StkMovdocHdrsobj.PoNo = "";
                  StkMovdocHdrdetails.push(StkMovdocHdrsobj);
                  
                if (StkMovdocHdrsobj.storeNo == "") {
                    alert("Store Code is Empty");
                    return false;
                }
                if (StkMovdocHdrsobj.supplyNo == "") {
                    alert("Supply No is Empty");
                    return false;
                }
                if (StkMovdocHdrsobj.staffNo == "") {
                    alert("Created By is Empty");
                    return false;
                  }

                  
                  if (tablerows.length == 1) {
                    alert("Pls Add Item");
                    return false;
                  }

                  
                var btnTextGRN = $('[id$="btnSubmit_AddGRN"]').text();
                var successResult;

                        $.ajax({
                    type: "POST",
                    url: "GRN.aspx/EditStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });
                    

            var details = [];
            var stkdetails = [];
            
                var rows = $('#GRNEntryModule tbody >tr');
                var GRNEntryrows = $('#GRNEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_GRN"]').val();
                    obj.movCode = "GRN";
                    obj.movType = "GRN";
                    obj.docLineno = $(columns[2]).html();
                    if (DocDate == "") {
                    obj.docDate = null;
                }
                else {
                    obj.docDate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docDate = $('[id$="dt_DocDateGRN"]').val();
                    obj.grnNo = null;
                    obj.refNo = null;
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();
                    
                     if (DocDate == "") {
                    obj.docExpdate = null;
                }
                else {
                    obj.docExpdate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docExpdate = $('[id$="dt_DocDateGRN"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
                    obj.docId = $(columns[0]).html();
                    details.push(obj);



                    var stktrnobj = {};

                    var d1 = new Date();
                    //stktrnobj.trnPost = d1.toISOString();
                    stktrnobj.trnPost = d1.getFullYear() + "/" + (d1.getMonth()+1) + '/' + d1.getDate();

                    //if (DocDate == "") {
                    //    stktrnobj.trnPost = null;
                    //}
                    //else
                    //{
                    //    stktrnobj.trnPost = DocDate.split("/").reverse().join("/")
                    //}

                    stktrnobj.trnNo = null;
                    //stktrnobj.trnDate = d1.toISOString();
                    if (DocDate == "") {
                        stktrnobj.trnDate = null;
                    }
                    else
                    {
                        stktrnobj.trnDate = DocDate.split("/").reverse().join("/")
                    }
                    var today = new Date();
                    var str1 = ('0' + today.getHours()).substr(-2) + "" + ('0' + today.getMinutes()).substr(-2) + "" + ('0' + today.getSeconds()).substr(-2);
                    stktrnobj.postTime = str1;
                    stktrnobj.aperiod = null;
                    stktrnobj.itemcode = $(columns[3]).html()+"0000";
                    stktrnobj.storeNo = $('[id$="ddlStoreCode_GRN"]').val();
                    stktrnobj.tstoreNo = null;
                    stktrnobj.fstoreNo = null;
                    stktrnobj.trnDocno = $('[id$="txtDocNo_GRN"]').val();
                    stktrnobj.trnType = "GRN";
                    stktrnobj.trnDbQty = null;
                    stktrnobj.trnCrQty = null;
                    stktrnobj.trnQty = $(columns[9]).html();
                    stktrnobj.trnBalqty = $(columns[9]).html();
                    stktrnobj.trnBalcst = $(columns[10]).html();
                    stktrnobj.trnAmt = $(columns[10]).html();
                    stktrnobj.trnCost = $(columns[10]).html();
                    stktrnobj.trnRef = null;
                    stktrnobj.hqUpdate = false;
                    stktrnobj.lineNo = $(columns[2]).html();
                    stktrnobj.itemUom = $(columns[1]).html();
                    stktrnobj.itemBatch = "";
                    stktrnobj.movType = "GRN";
                    stktrnobj.itemBatchCost = $(columns[7]).html();
                    stktrnobj.stockIn = null;
                    stktrnobj.transPackageLineNo = null;
                    stkdetails.push(stktrnobj);

                }

                   $.ajax({
                    type: "POST",
                    url: "GRN.aspx/EditStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
            });

            $.ajax({
                    type: "POST",
                    url: "GRN.aspx/AddStktrnsData",
                    data: '{ Details :' + JSON.stringify(stkdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });
                
                $(location).attr('href',"GRNList.aspx");

        });

        $('[id$="btnSubmit_ListGRN"]').click(function () {
                $(location).attr('href',"GRNList.aspx");

        });


        //Out

        $(function () {
                $('#GRNOutMasterPage').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=ListWithoutSupplier&PKey=TFRT',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Doc Number/ Doc Date/ Ref Num 1/ Ref Num 2/ Total Amount/ Status "
                    },
                    'columns': [
                        {
                          'data': 'docNo',
                          'render': function (data, type, row, meta) {
                              data = '<a href="GRNOut.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null, null, null, null, null,
                        {
                            'data': 'docNo',
                            'render': function (data, type, row, meta) {
                                data = '<a href="GRNOutPrint.aspx?PKey=' + row[0] + '"><i class="fa fa-print" style="font-size:24px"></i></a>';
                                return data;
                            }
                        }
                      ]
                })
            });

            $(".btnFillter_GRNOutListMaster .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#GRNOutMasterPage').DataTable();
        table
            .column(5)
            .search(inputValue)
            .draw();
        });

         $('[id$="dt_DocDateGRNOut"]').datepicker({
            format: 'dd/mm/yyyy',
             autoclose: true,
             forceParse: false
             //,startDate: '+0d'
        });

        $('[id$="dt_DeliveryDateGRNOut"]').datepicker({
        format: 'dd/mm/yyyy',
        autoclose: true
        });

         $('[id$="btn_AddRow_GRNOut"]').click(function () {
        $("#mdlAddUOM").modal();
            });

        $(function () {
                $('#GRNOutItemSearch').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=GRNItemSearchList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    "iDisplayLength": 5,
                     "bLengthChange": false,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Item Code/Item Description/Item UOM/Item Brand/Link Code/Range"
                    },
                    'columns': [
                        null, null, null, null, null, null, null,null, null, null,
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtQty_GRNOut" value="0" min="0" oninput="restrict(this);" onkeydown="javascript: return event.keyCode === 8 ||event.keyCode === 46 ? true : !isNaN(Number(event.key))">';
                              return data;
                          }
                        },
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtCost_GRNOut" min="0" oninput="restrict(this);">';
                              return data;
                          }
                        },

                        {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              //data = '<button type="button" class="btn btn-primary" id="btnAdd_GRN">Select</button>';
                              //data = '<i class="Add_ItemToGRNOut glyphicon glyphicon-ok"></i></a>';
                              data = '<a class="Add_ItemToGRNOut btn btn-info btn-primary"><i class=" glyphicon glyphicon-hand-up"></i></a></p>';
                              
                              return data;
                          }
                        }

                    ],
                     "columnDefs": [
                         {
                               "targets": [ 7 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 8 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 9 ],
                               "visible": false,
                               "searchable": false               
                         }

                    ],  



                })

        });


        function valueInGRNOutTable(tableID, columnNum, searchString) {
            var found = false;
            $("#GRNOutEntryModule tr").each(function () {
                var itemCode = $(this).find("td").eq(3).html();
                if (itemCode == searchString) {
                    found = true;
                    return false;
                }
            });

            return found;
        }

            $(document).on("click", ".Add_ItemToGRNOut", function () {

                var rowIndex = $('#GRNOutItemSearch tr').index($(this).closest('tr'));

                //var sData=$("#GRNOutItemSearch").dataTable().fnGetData(rowIndex);

                var currentRow = $(this).closest("tr");
                var sData = $('#GRNOutItemSearch').DataTable().row(currentRow).data();

                //alert(sData[8]);

            var searchString = $('#GRNOutItemSearch tr').eq(rowIndex).find('td:eq(0)').html();
            if (valueInGRNOutTable('GRNOutItemSearch', 0, searchString)) { 
                alert("already Exists");
                return false;
            }    
                   
            var counter = 0;
            var newRow = $("<tr>");
                var cols = "";
                cols += '<td style="width: 0%;visibility:hidden;">' + "" + '</td>';
                cols += '<td style="width: 0%;visibility:hidden;">' + sData[7] + '</td>';
                cols += '<td>' + "" + '</td>';
                cols += '<td >' + $('#GRNOutItemSearch tr').eq(rowIndex).find('td:eq(0)').html() + '</td>';
                cols += '<td>' + $('#GRNOutItemSearch tr').eq(rowIndex).find('td:eq(1)').html() + '</td>';
                cols += '<td>' + $('#GRNOutItemSearch tr').eq(rowIndex).find('td:eq(3)').html() + '</td>';
                cols += '<td>' + $('#GRNOutItemSearch tr').eq(rowIndex).find('td:eq(5)').html() + '</td>';

                var table = document.getElementById("GRNOutItemSearch");
                var row = table.rows[rowIndex];

                var qty = row.cells[7].children[0].value;
                var cost =row.cells[8].children[0].value;
                var Ucost = qty * cost;
                if (qty == "" || qty == "0") {
                    alert("Qty is Invalid");
                    return false;
                }
                if (cost=="") {
                    alert("Cost is Empty");
                    return false;
                }

                cols += '<td>' + cost + '</td>';

                cols += '<td>' + $('#GRNOutItemSearch tr').eq(rowIndex).find('td:eq(2)').html() + '</td>';
                cols += '<td>' + qty + '</td>';
                cols += '<td>' + Ucost.toFixed(2) + '</td>';
                cols += '<td>' + "" + '</td>';
                cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="edit_AddItemToGRNOut glyphicon glyphicon-pencil"></i></div></td>';
                cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Remove_AddItemToGRNOut glyphicon glyphicon-trash"></i></div></td>';
                
                cols += '<td style="width: 0%;visibility:hidden;">' + sData[8] + '</td>';
                cols += '<td style="width: 0%;visibility:hidden;">' + sData[9] + '</td>';
                newRow.append(cols);
                $("#GRNOutEntryModule").append(newRow);

                var _Total = 0;
                $('#GRNOutEntryModule').find('tr').each(
                function (i) {
                    $('#GRNOutEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#GRNOutEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#GRNOutEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
                $('[id$="txt_TotAmntGRNOut"]').val(_Total.toFixed(2));
                counter++;
        });

        $(document).on("click", ".edit_AddItemToGRNOut", function () {
        $("#mdlEditPriceGRN").modal();
        var rowIndex = $('#GRNOutEntryModule tr').index($(this).closest('tr'));
            $("#mdlEditPriceGRN #lbl_Index_mdlEditPriceGRN").text(rowIndex);
            //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
            $("#mdlEditPriceGRN #txtQty_EditPriceGRN").val($('#GRNOutEntryModule tr').eq(rowIndex).find('td:eq(9)').html());
            $("#mdlEditPriceGRN #txtRemark_EditPriceGRN").val($('#GRNOutEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
        $("#mdlEditPriceGRN #txtPrice_EditPriceGRN").val($('#GRNOutEntryModule tr').eq(rowIndex).find('td:eq(7)').html()).trigger();
        });

        $('[id$="btnSubmit_mdlEditPriceGRN"]').click(function () {

            var Qty = $('#txtQty_EditPriceGRN').val();
            var Cost = $('#txtPrice_EditPriceGRN').val();
            var remark = $('#txtRemark_EditPriceGRN').val();
            var Ucost = Qty * Cost;
            if (Qty == "") {
                alert("Qty is Empty");

                $("#mdlEditPriceGRN").modal();
                var rowIndex = $('#GRNOutEntryModule tr').index($(this).closest('tr'));
                $("#mdlEditPriceGRN #lbl_Index_mdlEditPriceGRN").text(rowIndex);
                //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
                $("#mdlEditPriceGRN #txtQty_EditPriceGRN").val($('#GRNOutEntryModule tr').eq(rowIndex).find('td:eq(9)').html());
                $("#mdlEditPriceGRN #txtRemark_EditPriceGRN").val(remark);
                $("#mdlEditPriceGRN #txtPrice_EditPriceGRN").val(Cost).trigger();

                return false
            }
            if (Cost == "") {
                alert("Cost is Empty");

                $("#mdlEditPriceGRN").modal();
                var rowIndex = $('#GRNOutEntryModule tr').index($(this).closest('tr'));
                $("#mdlEditPriceGRN #lbl_Index_mdlEditPriceGRN").text(rowIndex);
                //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
                $("#mdlEditPriceGRN #txtQty_EditPriceGRN").val(Qty);
                $("#mdlEditPriceGRN #txtRemark_EditPriceGRN").val(remark);
                $("#mdlEditPriceGRN #txtPrice_EditPriceGRN").val($('#GRNOutEntryModule tr').eq(rowIndex).find('td:eq(7)').html()).trigger();

                return false
            } 

                var Index = $('#lbl_Index_mdlEditPriceGRN').text();
                $('#GRNOutEntryModule tr').eq(Index).find('td:eq(9)').html($('#txtQty_EditPriceGRN').val().replace("'", ""));
                $('#GRNOutEntryModule tr').eq(Index).find('td:eq(7)').html($('#txtPrice_EditPriceGRN').val().replace("'", ""));
            $('#GRNOutEntryModule tr').eq(Index).find('td:eq(10)').html(Ucost.toFixed(2));
            $('#GRNOutEntryModule tr').eq(Index).find('td:eq(11)').html($('#txtRemark_EditPriceGRN').val().replace("'", ""));
            $("#mdlEditPriceGRN").modal('hide');

            var _Total = 0;
                $('#GRNOutEntryModule').find('tr').each(
                function (i) {
                    $('#GRNOutEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#GRNOutEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#GRNOutEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
            $('[id$="txt_TotAmntGRNOut"]').val(_Total.toFixed(2));

        });



         $(document).on("click", ".Remove_AddItemToGRNOut", function () {
        var rowIndex = $('#GRNOutEntryModule tr').index($(this).closest('tr'));
             $(this).closest("tr").remove();
             var _Total = 0;
                $('#GRNOutEntryModule').find('tr').each(
                function (i) {
                    $('#GRNOutEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#GRNOutEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#GRNOutEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
                $('[id$="txt_TotAmntGRNOut"]').val(_Total.toFixed(2));

        });

        $(document).on("click", ".Remove_AddItemToGRNOutAfterSave", function () {
        var rowIndex = $('#GRNOutEntryModule tr').index($(this).closest('tr'));
             

            var StkMovdocDtl = [];
            var StkMovdocDtlobj = {};
            var rows = $('#GRNOutEntryModule tbody >tr');
            var columns;
            columns = $(rows[rowIndex]).find('td');
            StkMovdocDtlobj.docId = $(columns[0]).html();
            StkMovdocDtl.push(StkMovdocDtlobj);
             $.ajax({
                    type: "POST",
                    url: "GRNOut.aspx/DelStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocDtl) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

            $(this).closest("tr").remove();
             var _Total = 0;
                $('#GRNOutEntryModule').find('tr').each(
                function (i) {
                    $('#GRNOutEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#GRNOutEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#GRNOutEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
                $('[id$="txt_TotAmntGRNOut"]').val(_Total.toFixed(2));

            });

        function valueInGRNOutTable(tableID, columnNum, searchString)
            {
                var found = false;
                $("#GRNOutEntryModule tr").each(function () {
                var itemCode = $(this).find("td").eq(3).html();
                if (itemCode == searchString)
                    {
                        found = true;
                        return false;
                    }
             });

                return found;
        }



              $('[id$="btnSubmit_AddGRNOut"]').click(function () {
                  this.disabled = true;
                //  $.ajax({
                //type: 'POST',
                //url: 'Utilities/DataModels.ashx?ID=GetControlNo&PKey=Transfer To Other Store',
                //dataType: "json",
                //Cache: false,
                //success: function (data) {
                //    var JsonArray = JSON.stringify(data);
                //    var Json = JSON.parse(JsonArray);
                //    $('[id$="txtDocNo_GRNOut"]').val(Json.aaData[0][0] + Json.aaData[0][1] + + Json.aaData[0][2]);
                //    }
                //  });

                var StkMovdocHdrdetails = [];
                  var StkMovdocHdrsobj = {};
                  
                  StkMovdocHdrsobj.docNo = $('[id$="txtDocNo_GRNOut"]').val();
                  //alert($('[id$="txtDocNo_GRN"]').val());
                StkMovdocHdrsobj.movCode = "TFRT";
                StkMovdocHdrsobj.movType = "TFR";
                StkMovdocHdrsobj.storeNo = $('[id$="ddlStoreCode_GRNOut"]').val();
                StkMovdocHdrsobj.fstoreNo = $('[id$="ddl_FromStoreGRNOut"]').val();
                StkMovdocHdrsobj.tstoreNo = $('[id$="ddl_ToStoreGRNOut"]').val();
                //var itemName = $('[id$="txt_StockName"]').val();;
                StkMovdocHdrsobj.supplyNo = $('[id$="ddl_supplierGRNOut"]').val();
                StkMovdocHdrsobj.docRef1 = $('[id$="txtPO1Ref_GRNOut"]').val();
                StkMovdocHdrsobj.docRef2 = $('[id$="txtGrn1Ref_GRNOut"]').val();
                StkMovdocHdrsobj.accCode = null;
                  StkMovdocHdrsobj.staffNo = $('[id$="ddlCreatedBy_GRNOut"]').val();
                  var tablerows = $('#GRNOutEntryModule tbody >tr');
                  StkMovdocHdrsobj.docLines = tablerows.length-1;
                  var DocDate = $('[id$="dt_DocDateGRNOut"]').val();
                  if (DocDate == "") {
                    StkMovdocHdrsobj.docDate = null;
                }
                else {
                    StkMovdocHdrsobj.docDate = DocDate.split("/").reverse().join("/")
                  }
                  StkMovdocHdrsobj.postDate = null;

                
                StkMovdocHdrsobj.docStatus = "0";
                StkMovdocHdrsobj.docTerm = null;
                StkMovdocHdrsobj.docTime = null;
                StkMovdocHdrsobj.docQty = null;
                StkMovdocHdrsobj.docFoc = null;
                StkMovdocHdrsobj.docDisc = null;
                StkMovdocHdrsobj.docAmt = $('[id$="txt_TotAmntGRNOut"]').val();
                StkMovdocHdrsobj.docTrnspt = "0";
                StkMovdocHdrsobj.docTax = "0";
                StkMovdocHdrsobj.docAttn = null;
                StkMovdocHdrsobj.docRemk1 = $('[id$="txtRemark_GRNOut"]').val();
                StkMovdocHdrsobj.docRemk2 = null;
                StkMovdocHdrsobj.docRemk3 = null;
                StkMovdocHdrsobj.docShip = null;
                StkMovdocHdrsobj.bname = null;
                StkMovdocHdrsobj.baddr1 = null;
                StkMovdocHdrsobj.baddr2 = null;
                StkMovdocHdrsobj.baddr3 = null;
                StkMovdocHdrsobj.bpostcode = null;
                StkMovdocHdrsobj.bstate = null;
                StkMovdocHdrsobj.bcity = null;
                StkMovdocHdrsobj.bcountry =null;
                StkMovdocHdrsobj.daddr1 = null;
                StkMovdocHdrsobj.daddr2 = null;
                StkMovdocHdrsobj.daddr3 = null;
                StkMovdocHdrsobj.dpostcode = null;
                StkMovdocHdrsobj.dstate = null;
                StkMovdocHdrsobj.dcity = null;
                StkMovdocHdrsobj.dcountry = null;
                StkMovdocHdrsobj.cancelQty = "0";
                  StkMovdocHdrsobj.recStatus = "0";
                  if (DocDate == "") {
                    StkMovdocHdrsobj.recExpect = null;
                }
                else {
                    StkMovdocHdrsobj.recExpect = DocDate.split("/").reverse().join("/")
                  }
                //StkMovdocHdrsobj.recExpect = $('[id$="dt_DocDateGRN"]').val();
                StkMovdocHdrsobj.recTtl = "0";
                StkMovdocHdrsobj.createUser = null;
                StkMovdocHdrsobj.createDate = null;
                  StkMovdocHdrsobj.phyNo = null;

                  StkMovdocHdrdetails.push(StkMovdocHdrsobj);
                  
                if (StkMovdocHdrsobj.storeNo == "") {
                    alert("Store Code is Empty");
                    return false;
                  }

                  if (StkMovdocHdrsobj.fstoreNo == "") {
                      alert("From Site is Empty");
                      return false;
                  }

                  if (StkMovdocHdrsobj.tstoreNo == "") {
                      alert("To Site is Empty");
                      return false;
                  }


                //if (StkMovdocHdrsobj.supplyNo == "") {
                //    alert("Supply No is Empty");
                //    return false;
                //}
                if (StkMovdocHdrsobj.staffNo == "") {
                    alert("Created By is Empty");
                    return false;
                  }

                  
                  if (tablerows.length == 1) {
                    alert("Pls Add Item");
                    return false;
                  }

                  var successResult;
                var btnTextGRN = $('[id$="btnSubmit_AddGRNOut"]').text();
                if (btnTextGRN == "Add") {
                    $.ajax({
                    type: "POST",
                    url: "GRNOut.aspx/AddStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

                    var details = [];
                var details1 = [];

                var rows = $('#GRNOutEntryModule tbody >tr');
                var GRNEntryrows = $('#GRNOutEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_GRNOut"]').val();
                    obj.movCode = "TFRT";
                    obj.movType = "TFR";
                    obj.docLineno = $(columns[2]).html();
                    if (DocDate == "") {
                    obj.docDate = null;
                }
                else {
                    obj.docDate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docDate = $('[id$="dt_DocDateGRN"]').val();
                    obj.grnNo = null;
                    obj.refNo = null;
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();
                    
                     if (DocDate == "") {
                    obj.docExpdate = null;
                }
                else {
                    obj.docExpdate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docExpdate = $('[id$="dt_DocDateGRN"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "GRNOut.aspx/AddStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });

                }
                else {

                        $.ajax({
                    type: "POST",
                    url: "GRNOut.aspx/EditStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });
                    

                var details = [];
                var rows = $('#GRNOutEntryModule tbody >tr');
                var GRNEntryrows = $('#GRNOutEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_GRNOut"]').val();
                    obj.movCode = "TFRT";
                    obj.movType = "TFR";
                    obj.docLineno = $(columns[2]).html();
                     if (DocDate == "") {
                    obj.docDate = null;
                }
                else {
                    obj.docDate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docDate = $('[id$="dt_DocDateGRN"]').val();
                    obj.grnNo = null;
                    obj.refNo = null;
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();
                      if (DocDate == "") {
                         obj.docDate = null;
                        }
                        else {
                                obj.docExpdate = DocDate.split("/").reverse().join("/")
                        }
                    //obj.docExpdate = $('[id$="dt_DocDateGRN"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
					obj.docId = $(columns[0]).html();
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "GRNOut.aspx/EditStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });
                  }
                  $(location).attr('href',"GRNOutList.aspx");
                  //if (successResult == "True") {
                  //    $('[id$="btnSubmit_PostGRN"]').prop('disabled', false);
                  //    $('[id$="btnSubmit_AddGRN"]').prop('disabled', true);
                  //    //$(location).attr('href',"ItemMasterList.aspx");
                  //    alert("Data Saved Successfully");
                  //}

        });

        $('[id$="btnSubmit_PostGRNOut"]').click(function () {
            this.disabled = true;
            var StkMovdocHdrdetails = [];
                  var StkMovdocHdrsobj = {};
                  
                  StkMovdocHdrsobj.docNo = $('[id$="txtDocNo_GRNOut"]').val();
                  //alert($('[id$="txtDocNo_GRN"]').val());
                StkMovdocHdrsobj.movCode = "TFRT";
                StkMovdocHdrsobj.movType = "TFR";
                StkMovdocHdrsobj.storeNo = $('[id$="ddlStoreCode_GRNOut"]').val();
                StkMovdocHdrsobj.fstoreNo = $('[id$="ddl_FromStoreGRNOut"]').val();
                StkMovdocHdrsobj.tstoreNo = $('[id$="ddl_ToStoreGRNOut"]').val();
                //var itemName = $('[id$="txt_StockName"]').val();;
                StkMovdocHdrsobj.supplyNo = $('[id$="ddl_supplierGRNOut"]').val();
                StkMovdocHdrsobj.docRef1 = $('[id$="txtPO1Ref_GRNOut"]').val();
                StkMovdocHdrsobj.docRef2 = $('[id$="txtGrn1Ref_GRNOut"]').val();
                StkMovdocHdrsobj.accCode = null;
                  StkMovdocHdrsobj.staffNo = $('[id$="ddlCreatedBy_GRNOut"]').val();
                  var tablerows = $('#GRNOutEntryModule tbody >tr');
                  StkMovdocHdrsobj.docLines = tablerows.length-1;
                  var DocDate = $('[id$="dt_DocDateGRNOut"]').val();
                  if (DocDate == "") {
                    StkMovdocHdrsobj.docDate = null;
                }
                else {
                    StkMovdocHdrsobj.docDate = DocDate.split("/").reverse().join("/")
                  }

                var d = new Date();
            StkMovdocHdrsobj.postDate = d.getFullYear() + "/" + (d.getMonth() + 1) + '/' + d.getDate();

                //StkMovdocHdrsobj.postDate = $('[id$="dt_DocDateGRN"]').val();
                StkMovdocHdrsobj.docStatus = "7";
                StkMovdocHdrsobj.docTerm = null;
                StkMovdocHdrsobj.docTime = null;
                StkMovdocHdrsobj.docQty = null;
                StkMovdocHdrsobj.docFoc = null;
                StkMovdocHdrsobj.docDisc = null;
                StkMovdocHdrsobj.docAmt = $('[id$="txt_TotAmntGRNOut"]').val();
                StkMovdocHdrsobj.docTrnspt = "0";
                StkMovdocHdrsobj.docTax = "0";
                StkMovdocHdrsobj.docAttn = null;
                StkMovdocHdrsobj.docRemk1 = $('[id$="txtRemark_GRNOut"]').val();
                StkMovdocHdrsobj.docRemk2 = null;
                StkMovdocHdrsobj.docRemk3 = null;
                StkMovdocHdrsobj.docShip = null;
                StkMovdocHdrsobj.bname = null;
                StkMovdocHdrsobj.baddr1 = null;
                StkMovdocHdrsobj.baddr2 = null;
                StkMovdocHdrsobj.baddr3 = null;
                StkMovdocHdrsobj.bpostcode = null;
                StkMovdocHdrsobj.bstate = null;
                StkMovdocHdrsobj.bcity = null;
                StkMovdocHdrsobj.bcountry =null;
                StkMovdocHdrsobj.daddr1 = null;
                StkMovdocHdrsobj.daddr2 = null;
                StkMovdocHdrsobj.daddr3 = null;
                StkMovdocHdrsobj.dpostcode = null;
                StkMovdocHdrsobj.dstate = null;
                StkMovdocHdrsobj.dcity = null;
                StkMovdocHdrsobj.dcountry = null;
                StkMovdocHdrsobj.cancelQty = "0";
                  StkMovdocHdrsobj.recStatus = "1";
                  if (DocDate == "") {
                    StkMovdocHdrsobj.recExpect = null;
                }
                else {
                    StkMovdocHdrsobj.recExpect = DocDate.split("/").reverse().join("/")
                  }
                //StkMovdocHdrsobj.recExpect = $('[id$="dt_DocDateGRN"]').val();
                StkMovdocHdrsobj.recTtl = "0";
                StkMovdocHdrsobj.createUser = null;
                StkMovdocHdrsobj.createDate = null;
                StkMovdocHdrsobj.phyNo = null;
                  StkMovdocHdrdetails.push(StkMovdocHdrsobj);
                  
                if (StkMovdocHdrsobj.storeNo == "") {
                    alert("Store Code is Empty");
                    return false;
            }

            if (StkMovdocHdrsobj.fstoreNo == "") {
                alert("From Site is Empty");
                return false;
            }

            if (StkMovdocHdrsobj.tstoreNo == "") {
                alert("To Site is Empty");
                return false;
            }


                //if (StkMovdocHdrsobj.supplyNo == "") {
                //    alert("Supply No is Empty");
                //    return false;
                //}
                if (StkMovdocHdrsobj.staffNo == "") {
                    alert("Created By is Empty");
                    return false;
                  }

                  
                  if (tablerows.length == 1) {
                    alert("Pls Add Item");
                    return false;
                  }

                  
                var btnTextGRN = $('[id$="btnSubmit_AddGRNOut"]').text();
                var successResult;

                        $.ajax({
                    type: "POST",
                    url: "GRNOut.aspx/EditStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });
                    

            var details = [];
            var stkdetails = [];
            var stkdetails1 = [];
            
                var rows = $('#GRNOutEntryModule tbody >tr');
                var GRNEntryrows = $('#GRNOutEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_GRNOut"]').val();
                    obj.movCode = "TFRT";
                    obj.movType = "TFR";
                    obj.docLineno = $(columns[2]).html();
                    if (DocDate == "") {
                    obj.docDate = null;
                }
                else {
                    obj.docDate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docDate = $('[id$="dt_DocDateGRN"]').val();
                    obj.grnNo = null;
                    obj.refNo = null;
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();
                    
                     if (DocDate == "") {
                    obj.docExpdate = null;
                }
                else {
                    obj.docExpdate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docExpdate = $('[id$="dt_DocDateGRN"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
                    obj.docId = $(columns[0]).html();
                    details.push(obj);



                    var stktrnobj = {};
                    var d1 = new Date();
                    stktrnobj.trnPost = d1.getFullYear() + "/" + (d1.getMonth() + 1) + '/' + d1.getDate();
                    if (DocDate == "") {
                        stktrnobj.trnDate = null;
                    }
                    else {
                        stktrnobj.trnDate = DocDate.split("/").reverse().join("/")
                    }
                    var today = new Date();
                    var str1 = ('0' + today.getHours()).substr(-2) + "" + ('0' + today.getMinutes()).substr(-2) + "" + ('0' + today.getSeconds()).substr(-2);
                    stktrnobj.postTime = str1;
                    stktrnobj.aperiod = null;
                    stktrnobj.itemcode = $(columns[3]).html()+"0000";
                    stktrnobj.storeNo = $('[id$="ddl_FromStoreGRNOut"]').val();
                    stktrnobj.tstoreNo = $('[id$="ddl_ToStoreGRNOut"]').val();
                    stktrnobj.fstoreNo = $('[id$="ddl_FromStoreGRNOut"]').val();
                    stktrnobj.trnDocno = $('[id$="txtDocNo_GRNOut"]').val();
                    stktrnobj.trnType = "TFRT";
                    stktrnobj.trnDbQty = null;
                    stktrnobj.trnCrQty = null;
                    stktrnobj.trnQty = $(columns[9]).html() * (-1);
                    stktrnobj.trnBalqty = $(columns[9]).html() * (-1);
                    stktrnobj.trnBalcst = $(columns[10]).html() * (-1);
                    stktrnobj.trnAmt = $(columns[10]).html() * (-1);
                    stktrnobj.trnCost = $(columns[10]).html() * (-1);
                    stktrnobj.trnRef = null;
                    stktrnobj.hqUpdate = false;
                    stktrnobj.lineNo = $(columns[2]).html();
                    stktrnobj.itemUom = $(columns[1]).html();
                    stktrnobj.itemBatch = "";
                    stktrnobj.movType = "TFR";
                    stktrnobj.itemBatchCost = $(columns[7]).html();
                    stktrnobj.stockIn = null;
                    stktrnobj.transPackageLineNo = null;
                    stkdetails.push(stktrnobj);

                    var stktrnobj1 = {};

                    stktrnobj1.trnPost = d1.getFullYear() + "/" + (d1.getMonth() + 1) + '/' + d1.getDate();
                    if (DocDate == "") {
                        stktrnobj1.trnDate = null;
                    }
                    else {
                        stktrnobj1.trnDate = DocDate.split("/").reverse().join("/")
                    }
                    stktrnobj1.postTime = str1;
                    stktrnobj1.aperiod = null;
                    stktrnobj1.itemcode = $(columns[3]).html() + "0000";
                    stktrnobj1.storeNo = $('[id$="ddl_ToStoreGRNOut"]').val();
                    stktrnobj1.tstoreNo = $('[id$="ddl_ToStoreGRNOut"]').val();
                    stktrnobj1.fstoreNo = $('[id$="ddl_FromStoreGRNOut"]').val();
                    stktrnobj1.trnDocno = $('[id$="txtDocNo_GRNOut"]').val();
                    stktrnobj1.trnType = "TFRT";
                    stktrnobj1.trnDbQty = null;
                    stktrnobj1.trnCrQty = null;
                    stktrnobj1.trnQty = $(columns[9]).html();
                    stktrnobj1.trnBalqty = $(columns[9]).html();
                    stktrnobj1.trnBalcst = $(columns[10]).html();
                    stktrnobj1.trnAmt = $(columns[10]).html();
                    stktrnobj1.trnCost = $(columns[10]).html();
                    stktrnobj1.trnRef = null;
                    stktrnobj1.hqUpdate = false;
                    stktrnobj1.lineNo = $(columns[2]).html();
                    stktrnobj1.itemUom = $(columns[1]).html();
                    stktrnobj1.itemBatch = "";
                    stktrnobj1.movType = "TFR";
                    stktrnobj1.itemBatchCost = $(columns[7]).html();
                    stktrnobj1.stockIn = null;
                    stktrnobj1.transPackageLineNo = null;
                    stkdetails1.push(stktrnobj1);



                }

                   $.ajax({
                    type: "POST",
                    url: "GRNOut.aspx/EditStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
            });

            $.ajax({
                    type: "POST",
                    url: "GRNOut.aspx/AddStktrnsData",
                    data: '{ Details :' + JSON.stringify(stkdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
            });

            $.ajax({
                type: "POST",
                url: "GRNOut.aspx/AddStktrnsData1",
                data: '{ Details1 :' + JSON.stringify(stkdetails1) + '}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    //   alert(r.d);
                    successResult = "True";
                },
                error: function (data, errorThrown) {
                    successResult = "False";
                }
            });

                
                $(location).attr('href',"GRNOutList.aspx");

        });

        $('[id$="btnSubmit_ListGRNOut"]').click(function () {
                $(location).attr('href',"GRNOutList.aspx");

        });

        //Out

        //IN

        $(function () {
                $('#GRNInMasterPage').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=ListWithoutSupplier&PKey=TFRF',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Doc Number/ Doc Date/ Ref Num 1/ Ref Num 1 / Total Amount/ Status "
                    },
                    'columns': [
                        {
                          'data': 'docNo',
                          'render': function (data, type, row, meta) {
                              data = '<a href="GRNIn.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null, null, null, null, null,
                        {
                            'data': 'docNo',
                            'render': function (data, type, row, meta) {
                                data = '<a href="GRNInPrint.aspx?PKey=' + row[0] + '"><i class="fa fa-print" style="font-size:24px"></i></a>';
                                return data;
                            }
                        }
                      ]
                })
            });

            $(".btnFillter_GRNInListMaster .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#GRNInMasterPage').DataTable();
        table
            .column(5)
            .search(inputValue)
            .draw();
        });

         $('[id$="dt_DocDateGRNIn"]').datepicker({
        format: 'dd/mm/yyyy',
             autoclose: true,
             forceParse: false
             //,startDate: '+0d'
        });

        $('[id$="dt_DeliveryDateGRNIn"]').datepicker({
        format: 'dd/mm/yyyy',
        autoclose: true
        });

         $('[id$="btn_AddRow_GRNIn"]').click(function () {
        $("#mdlAddUOM").modal();
            });

        $(function () {
                $('#GRNInItemSearch').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=GRNItemSearchList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    "iDisplayLength": 5,
                     "bLengthChange": false,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Item Code/Item Description/Item UOM/Item Brand/Link Code/Range"
                    },
                    'columns': [
                        null, null, null, null, null, null, null,null, null, null,
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtQty_GRNIn" value="0" min="0" oninput="restrict(this);" onkeydown="javascript: return event.keyCode === 8 ||event.keyCode === 46 ? true : !isNaN(Number(event.key))">';
                              return data;
                          }
                        },
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtCost_GRNIn" min="0"  oninput="restrict(this);">';
                              return data;
                          }
                        },

                        {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              //data = '<button type="button" class="btn btn-primary" id="btnAdd_GRN">Select</button>';
                              //data = '<i class="Add_ItemToGRNIn glyphicon glyphicon-ok"></i></a>';
                              data = '<a class="Add_ItemToGRNIn btn btn-info btn-primary"><i class=" glyphicon glyphicon-hand-up"></i></a></p>';
                              
                              return data;
                          }
                        }

                    ],
                     "columnDefs": [
                         {
                               "targets": [ 7 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 8 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 9 ],
                               "visible": false,
                               "searchable": false               
                         }

                    ],  



                })

        });

        function valueInGRNInTable(tableID, columnNum, searchString) {
            var found = false;
            $("#GRNInItemSearch tr").each(function () {
                var itemCode = $(this).find("td").eq(3).html();
                if (itemCode == searchString) {
                    found = true;
                    return false;
                }
            });

            return found;
        }


            $(document).on("click", ".Add_ItemToGRNIn", function () {

                var rowIndex = $('#GRNInItemSearch tr').index($(this).closest('tr'));

                //var sData=$("#GRNInItemSearch").dataTable().fnGetData(rowIndex);
                var currentRow = $(this).closest("tr");
                var sData = $('#GRNInItemSearch').DataTable().row(currentRow).data();

                //alert(sData[8]);

            var searchString = $('#GRNInItemSearch tr').eq(rowIndex).find('td:eq(0)').html();
            if (valueInGRNInTable('GRNInItemSearch', 0, searchString)) { 
                alert("already Exists");
                return false;
            }    
                   
            var counter = 0;
            var newRow = $("<tr>");
                var cols = "";
                cols += '<td style="width: 0%;visibility:hidden;">' + "" + '</td>';
                cols += '<td style="width: 0%;visibility:hidden;">' + sData[7] + '</td>';
                cols += '<td>' + "" + '</td>';
                cols += '<td >' + $('#GRNInItemSearch tr').eq(rowIndex).find('td:eq(0)').html() + '</td>';
                cols += '<td>' + $('#GRNInItemSearch tr').eq(rowIndex).find('td:eq(1)').html() + '</td>';
                cols += '<td>' + $('#GRNInItemSearch tr').eq(rowIndex).find('td:eq(3)').html() + '</td>';
                cols += '<td>' + $('#GRNInItemSearch tr').eq(rowIndex).find('td:eq(5)').html() + '</td>';

                var table = document.getElementById("GRNInItemSearch");
                var row = table.rows[rowIndex];

                var qty = row.cells[7].children[0].value;
                var cost =row.cells[8].children[0].value;
                var Ucost = qty * cost;
                if (qty == "" || qty == "0") {
                    alert("Qty is Invalid");
                    return false;
                }
                if (cost=="") {
                    alert("Cost is Empty");
                    return false;
                }

                cols += '<td>' + cost + '</td>';

                cols += '<td>' + $('#GRNInItemSearch tr').eq(rowIndex).find('td:eq(2)').html() + '</td>';
                cols += '<td>' + qty + '</td>';
                cols += '<td>' + Ucost.toFixed(2) + '</td>';
                cols += '<td>' + "" + '</td>';
                cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="edit_AddItemToGRNIn glyphicon glyphicon-pencil"></i></div></td>';
                cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Remove_AddItemToGRNIn glyphicon glyphicon-trash"></i></div></td>';
                
                cols += '<td style="width: 0%;visibility:hidden;">' + sData[8] + '</td>';
                cols += '<td style="width: 0%;visibility:hidden;">' + sData[9] + '</td>';
                newRow.append(cols);
                $("#GRNInEntryModule").append(newRow);

                var _Total = 0;
                $('#GRNInEntryModule').find('tr').each(
                function (i) {
                    $('#GRNInEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#GRNInEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#GRNInEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
                $('[id$="txt_TotAmntGRNIn"]').val(_Total.toFixed(2));
                counter++;
        });

        $(document).on("click", ".edit_AddItemToGRNIn", function () {
        $("#mdlEditPriceGRN").modal();
        var rowIndex = $('#GRNInEntryModule tr').index($(this).closest('tr'));
            $("#mdlEditPriceGRN #lbl_Index_mdlEditPriceGRN").text(rowIndex);
            //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
            $("#mdlEditPriceGRN #txtQty_EditPriceGRN").val($('#GRNInEntryModule tr').eq(rowIndex).find('td:eq(9)').html());
            $("#mdlEditPriceGRN #txtRemark_EditPriceGRN").val($('#GRNInEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
        $("#mdlEditPriceGRN #txtPrice_EditPriceGRN").val($('#GRNInEntryModule tr').eq(rowIndex).find('td:eq(7)').html()).trigger();
        });

        $('[id$="btnSubmit_mdlEditPriceGRN"]').click(function () {

            var Qty = $('#txtQty_EditPriceGRN').val();
            var Cost = $('#txtPrice_EditPriceGRN').val();
            var remark = $('#txtRemark_EditPriceGRN').val();
            var Ucost = Qty * Cost;
            if (Qty == "") {
                alert("Qty is Empty");

                $("#mdlEditPriceGRN").modal();
                var rowIndex = $('#GRNInEntryModule tr').index($(this).closest('tr'));
                $("#mdlEditPriceGRN #lbl_Index_mdlEditPriceGRN").text(rowIndex);
                //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
                $("#mdlEditPriceGRN #txtQty_EditPriceGRN").val($('#GRNInEntryModule tr').eq(rowIndex).find('td:eq(9)').html());
                $("#mdlEditPriceGRN #txtRemark_EditPriceGRN").val(remark);
                $("#mdlEditPriceGRN #txtPrice_EditPriceGRN").val(Cost).trigger();

                return false
            }
            if (Cost == "") {
                alert("Cost is Empty");

                $("#mdlEditPriceGRN").modal();
                var rowIndex = $('#GRNInEntryModule tr').index($(this).closest('tr'));
                $("#mdlEditPriceGRN #lbl_Index_mdlEditPriceGRN").text(rowIndex);
                //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
                $("#mdlEditPriceGRN #txtQty_EditPriceGRN").val(Qty);
                $("#mdlEditPriceGRN #txtRemark_EditPriceGRN").val(remark);
                $("#mdlEditPriceGRN #txtPrice_EditPriceGRN").val($('#GRNInEntryModule tr').eq(rowIndex).find('td:eq(7)').html()).trigger();

                return false
            }

                var Index = $('#lbl_Index_mdlEditPriceGRN').text();
                $('#GRNInEntryModule tr').eq(Index).find('td:eq(9)').html($('#txtQty_EditPriceGRN').val().replace("'", ""));
                $('#GRNInEntryModule tr').eq(Index).find('td:eq(7)').html($('#txtPrice_EditPriceGRN').val().replace("'", ""));
            $('#GRNInEntryModule tr').eq(Index).find('td:eq(10)').html(Ucost.toFixed(2));
            $('#GRNInEntryModule tr').eq(Index).find('td:eq(11)').html($('#txtRemark_EditPriceGRN').val().replace("'", ""));
            $("#mdlEditPriceGRN").modal('hide');

            var _Total = 0;
                $('#GRNInEntryModule').find('tr').each(
                function (i) {
                    $('#GRNInEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#GRNInEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#GRNInEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
            $('[id$="txt_TotAmntGRNIn"]').val(_Total.toFixed(2));

        });



         $(document).on("click", ".Remove_AddItemToGRNIn", function () {
        var rowIndex = $('#GRNInEntryModule tr').index($(this).closest('tr'));
             $(this).closest("tr").remove();
             var _Total = 0;
                $('#GRNInEntryModule').find('tr').each(
                function (i) {
                    $('#GRNInEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#GRNInEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#GRNInEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
                $('[id$="txt_TotAmntGRNIn"]').val(_Total.toFixed(2));

        });

        $(document).on("click", ".Remove_AddItemToGRNInAfterSave", function () {
        var rowIndex = $('#GRNInEntryModule tr').index($(this).closest('tr'));
             

            var StkMovdocDtl = [];
            var StkMovdocDtlobj = {};
            var rows = $('#GRNInEntryModule tbody >tr');
            var columns;
            columns = $(rows[rowIndex]).find('td');
            StkMovdocDtlobj.docId = $(columns[0]).html();
            StkMovdocDtl.push(StkMovdocDtlobj);
             $.ajax({
                    type: "POST",
                    url: "GRNIn.aspx/DelStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocDtl) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

            $(this).closest("tr").remove();
             var _Total = 0;
                $('#GRNInEntryModule').find('tr').each(
                function (i) {
                    $('#GRNInEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#GRNInEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#GRNInEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
                $('[id$="txt_TotAmntGRNIn"]').val(_Total.toFixed(2));

            });

        function valueInGRNInTable(tableID, columnNum, searchString)
            {
                var found = false;
                $("#GRNInEntryModule tr").each(function () {
                var itemCode = $(this).find("td").eq(3).html();
                if (itemCode == searchString)
                    {
                        found = true;
                        return false;
                    }
             });

                return found;
        }



        $('[id$="btnSubmit_AddGRNIn"]').click(function () {
            this.disabled = true;

                //  $.ajax({
                //type: 'POST',
                //url: 'Utilities/DataModels.ashx?ID=GetControlNo&PKey=Transfer To Other Store',
                //dataType: "json",
                //Cache: false,
                //success: function (data) {
                //    var JsonArray = JSON.stringify(data);
                //    var Json = JSON.parse(JsonArray);
                //    $('[id$="txtDocNo_GRNIn"]').val(Json.aaData[0][0] + Json.aaData[0][1] + + Json.aaData[0][2]);
                //    }
                //  });

                var StkMovdocHdrdetails = [];
                  var StkMovdocHdrsobj = {};
                  
                  StkMovdocHdrsobj.docNo = $('[id$="txtDocNo_GRNIn"]').val();
                  //alert($('[id$="txtDocNo_GRN"]').val());
                StkMovdocHdrsobj.movCode = "TFRF";
                StkMovdocHdrsobj.movType = "TFR";
                StkMovdocHdrsobj.storeNo = $('[id$="ddlStoreCode_GRNIn"]').val();
                StkMovdocHdrsobj.fstoreNo = $('[id$="ddl_FromStoreGRNIn"]').val();
                StkMovdocHdrsobj.tstoreNo = $('[id$="ddl_ToStoreGRNIn"]').val();
                //var itemName = $('[id$="txt_StockName"]').val();;
                StkMovdocHdrsobj.supplyNo = $('[id$="ddl_supplierGRNIn"]').val();
                StkMovdocHdrsobj.docRef1 = $('[id$="txtPO1Ref_GRNIn"]').val();
                StkMovdocHdrsobj.docRef2 = $('[id$="txtGrn1Ref_GRNIn"]').val();
                StkMovdocHdrsobj.accCode = null;
                  StkMovdocHdrsobj.staffNo = $('[id$="ddlCreatedBy_GRNIn"]').val();
                  var tablerows = $('#GRNInEntryModule tbody >tr');
                  StkMovdocHdrsobj.docLines = tablerows.length-1;
                  var DocDate = $('[id$="dt_DocDateGRNIn"]').val();
                  if (DocDate == "") {
                    StkMovdocHdrsobj.docDate = null;
                }
                else {
                    StkMovdocHdrsobj.docDate = DocDate.split("/").reverse().join("/")
                  }

                  StkMovdocHdrsobj.postDate = null;
                //StkMovdocHdrsobj.postDate = $('[id$="dt_DocDateGRN"]').val();
                StkMovdocHdrsobj.docStatus = "0";
                StkMovdocHdrsobj.docTerm = null;
                StkMovdocHdrsobj.docTime = null;
                StkMovdocHdrsobj.docQty = null;
                StkMovdocHdrsobj.docFoc = null;
                StkMovdocHdrsobj.docDisc = null;
                StkMovdocHdrsobj.docAmt = $('[id$="txt_TotAmntGRNIn"]').val();
                StkMovdocHdrsobj.docTrnspt = "0";
                StkMovdocHdrsobj.docTax = "0";
                StkMovdocHdrsobj.docAttn = null;
                StkMovdocHdrsobj.docRemk1 = $('[id$="txtRemark_GRNIn"]').val();
                StkMovdocHdrsobj.docRemk2 = null;
                StkMovdocHdrsobj.docRemk3 = null;
                StkMovdocHdrsobj.docShip = null;
                StkMovdocHdrsobj.bname = null;
                StkMovdocHdrsobj.baddr1 = null;
                StkMovdocHdrsobj.baddr2 = null;
                StkMovdocHdrsobj.baddr3 = null;
                StkMovdocHdrsobj.bpostcode = null;
                StkMovdocHdrsobj.bstate = null;
                StkMovdocHdrsobj.bcity = null;
                StkMovdocHdrsobj.bcountry =null;
                StkMovdocHdrsobj.daddr1 = null;
                StkMovdocHdrsobj.daddr2 = null;
                StkMovdocHdrsobj.daddr3 = null;
                StkMovdocHdrsobj.dpostcode = null;
                StkMovdocHdrsobj.dstate = null;
                StkMovdocHdrsobj.dcity = null;
                StkMovdocHdrsobj.dcountry = null;
                StkMovdocHdrsobj.cancelQty = "0";
                  StkMovdocHdrsobj.recStatus = "0";
                  if (DocDate == "") {
                    StkMovdocHdrsobj.recExpect = null;
                }
                else {
                    StkMovdocHdrsobj.recExpect = DocDate.split("/").reverse().join("/")
                  }
                //StkMovdocHdrsobj.recExpect = $('[id$="dt_DocDateGRN"]').val();
                StkMovdocHdrsobj.recTtl = "0";
                StkMovdocHdrsobj.createUser = null;
                StkMovdocHdrsobj.createDate = null;
                StkMovdocHdrsobj.phyNo = null;
                  StkMovdocHdrdetails.push(StkMovdocHdrsobj);
                  
                if (StkMovdocHdrsobj.storeNo == "") {
                    alert("Store Code is Empty");
                    return false;
                  }
                  if (StkMovdocHdrsobj.fstoreNo == "") {
                      alert("From Site is Empty");
                      return false;
                  }

                  if (StkMovdocHdrsobj.tstoreNo == "") {
                      alert("To Site is Empty");
                      return false;
                  }


                //if (StkMovdocHdrsobj.supplyNo == "") {
                //    alert("Supply No is Empty");
                //    return false;
                //}
                if (StkMovdocHdrsobj.staffNo == "") {
                    alert("Created By is Empty");
                    return false;
                  }

                  
                  if (tablerows.length == 1) {
                    alert("Pls Add Item");
                    return false;
                  }

                  var successResult;
                var btnTextGRN = $('[id$="btnSubmit_AddGRNIn"]').text();
                if (btnTextGRN == "Add") {
                    $.ajax({
                    type: "POST",
                    url: "GRNIn.aspx/AddStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

                    var details = [];
                var details1 = [];

                var rows = $('#GRNInEntryModule tbody >tr');
                var GRNEntryrows = $('#GRNInEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_GRNIn"]').val();
                    obj.movCode = "TFRF";
                    obj.movType = "TFR";
                    obj.docLineno = $(columns[2]).html();
                    if (DocDate == "") {
                    obj.docDate = null;
                }
                else {
                    obj.docDate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docDate = $('[id$="dt_DocDateGRN"]').val();
                    obj.grnNo = null;
                    obj.refNo = null;
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();
                    
                     if (DocDate == "") {
                    obj.docExpdate = null;
                }
                else {
                    obj.docExpdate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docExpdate = $('[id$="dt_DocDateGRN"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "GRNIn.aspx/AddStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });

                }
                else {

                        $.ajax({
                    type: "POST",
                    url: "GRNIn.aspx/EditStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });
                    

                var details = [];
                var rows = $('#GRNInEntryModule tbody >tr');
                var GRNEntryrows = $('#GRNInEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_GRNIn"]').val();
                    obj.movCode = "TFRF";
                    obj.movType = "TFR";
                    obj.docLineno = $(columns[2]).html();
                     if (DocDate == "") {
                    obj.docDate = null;
                }
                else {
                    obj.docDate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docDate = $('[id$="dt_DocDateGRN"]').val();
                    obj.grnNo = null;
                    obj.refNo = null;
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();
                      if (DocDate == "") {
                         obj.docDate = null;
                        }
                        else {
                                obj.docExpdate = DocDate.split("/").reverse().join("/")
                        }
                    //obj.docExpdate = $('[id$="dt_DocDateGRN"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
					obj.docId = $(columns[0]).html();
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "GRNIn.aspx/EditStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });
                  }
                  $(location).attr('href',"GRNInList.aspx");
                  //if (successResult == "True") {
                  //    $('[id$="btnSubmit_PostGRN"]').prop('disabled', false);
                  //    $('[id$="btnSubmit_AddGRN"]').prop('disabled', true);
                  //    //$(location).attr('href',"ItemMasterList.aspx");
                  //    alert("Data Saved Successfully");
                  //}

        });

        $('[id$="btnSubmit_PostGRNIn"]').click(function () {
            this.disabled = true;
            var StkMovdocHdrdetails = [];
                  var StkMovdocHdrsobj = {};
                  
                  StkMovdocHdrsobj.docNo = $('[id$="txtDocNo_GRNIn"]').val();
                  //alert($('[id$="txtDocNo_GRN"]').val());
                StkMovdocHdrsobj.movCode = "TFRF";
                StkMovdocHdrsobj.movType = "TFR";
                StkMovdocHdrsobj.storeNo = $('[id$="ddlStoreCode_GRNIn"]').val();
                StkMovdocHdrsobj.fstoreNo = $('[id$="ddl_FromStoreGRNIn"]').val();
                StkMovdocHdrsobj.tstoreNo = $('[id$="ddl_ToStoreGRNIn"]').val();
                //var itemName = $('[id$="txt_StockName"]').val();;
                StkMovdocHdrsobj.supplyNo = $('[id$="ddl_supplierGRNIn"]').val();
                StkMovdocHdrsobj.docRef1 = $('[id$="txtPO1Ref_GRNIn"]').val();
                StkMovdocHdrsobj.docRef2 = $('[id$="txtGrn1Ref_GRNIn"]').val();
                StkMovdocHdrsobj.accCode = null;
                  StkMovdocHdrsobj.staffNo = $('[id$="ddlCreatedBy_GRNIn"]').val();
                  var tablerows = $('#GRNInEntryModule tbody >tr');
                  StkMovdocHdrsobj.docLines = tablerows.length-1;
                  var DocDate = $('[id$="dt_DocDateGRNIn"]').val();
                  if (DocDate == "") {
                    StkMovdocHdrsobj.docDate = null;
                }
                else {
                    StkMovdocHdrsobj.docDate = DocDate.split("/").reverse().join("/")
                  }
                var d = new Date();
            StkMovdocHdrsobj.postDate = d.getFullYear() + "/" + (d.getMonth() + 1) + '/' + d.getDate();
                //StkMovdocHdrsobj.postDate = $('[id$="dt_DocDateGRN"]').val();
                StkMovdocHdrsobj.docStatus = "7";
                StkMovdocHdrsobj.docTerm = null;
                StkMovdocHdrsobj.docTime = null;
                StkMovdocHdrsobj.docQty = null;
                StkMovdocHdrsobj.docFoc = null;
                StkMovdocHdrsobj.docDisc = null;
                StkMovdocHdrsobj.docAmt = $('[id$="txt_TotAmntGRNIn"]').val();
                StkMovdocHdrsobj.docTrnspt = "0";
                StkMovdocHdrsobj.docTax = "0";
                StkMovdocHdrsobj.docAttn = null;
                StkMovdocHdrsobj.docRemk1 = $('[id$="txtRemark_GRNIn"]').val();
                StkMovdocHdrsobj.docRemk2 = null;
                StkMovdocHdrsobj.docRemk3 = null;
                StkMovdocHdrsobj.docShip = null;
                StkMovdocHdrsobj.bname = null;
                StkMovdocHdrsobj.baddr1 = null;
                StkMovdocHdrsobj.baddr2 = null;
                StkMovdocHdrsobj.baddr3 = null;
                StkMovdocHdrsobj.bpostcode = null;
                StkMovdocHdrsobj.bstate = null;
                StkMovdocHdrsobj.bcity = null;
                StkMovdocHdrsobj.bcountry =null;
                StkMovdocHdrsobj.daddr1 = null;
                StkMovdocHdrsobj.daddr2 = null;
                StkMovdocHdrsobj.daddr3 = null;
                StkMovdocHdrsobj.dpostcode = null;
                StkMovdocHdrsobj.dstate = null;
                StkMovdocHdrsobj.dcity = null;
                StkMovdocHdrsobj.dcountry = null;
                StkMovdocHdrsobj.cancelQty = "0";
                  StkMovdocHdrsobj.recStatus = "1";
                  if (DocDate == "") {
                    StkMovdocHdrsobj.recExpect = null;
                }
                else {
                    StkMovdocHdrsobj.recExpect = DocDate.split("/").reverse().join("/")
                  }
                //StkMovdocHdrsobj.recExpect = $('[id$="dt_DocDateGRN"]').val();
                StkMovdocHdrsobj.recTtl = "0";
                StkMovdocHdrsobj.createUser = null;
                StkMovdocHdrsobj.createDate = null;
                StkMovdocHdrsobj.phyNo = null;
                  StkMovdocHdrdetails.push(StkMovdocHdrsobj);
                  
                if (StkMovdocHdrsobj.storeNo == "") {
                    alert("Store Code is Empty");
                    return false;
            }
            if (StkMovdocHdrsobj.fstoreNo == "") {
                alert("From Site is Empty");
                return false;
            }

            if (StkMovdocHdrsobj.tstoreNo == "") {
                alert("To Site is Empty");
                return false;
            }


                //if (StkMovdocHdrsobj.supplyNo == "") {
                //    alert("Supply No is Empty");
                //    return false;
                //}
                if (StkMovdocHdrsobj.staffNo == "") {
                    alert("Created By is Empty");
                    return false;
                  }

                  
                  if (tablerows.length == 1) {
                    alert("Pls Add Item");
                    return false;
                  }

                  
                var btnTextGRN = $('[id$="btnSubmit_AddGRNIn"]').text();
                var successResult;

                        $.ajax({
                    type: "POST",
                    url: "GRNIn.aspx/EditStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });
                    

            var details = [];
            var stkdetails = [];
            var stkdetails1 = [];
            
                var rows = $('#GRNInEntryModule tbody >tr');
                var GRNEntryrows = $('#GRNInEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_GRNIn"]').val();
                    obj.movCode = "TFRF";
                    obj.movType = "TFR";
                    obj.docLineno = $(columns[2]).html();
                    if (DocDate == "") {
                    obj.docDate = null;
                }
                else {
                    obj.docDate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docDate = $('[id$="dt_DocDateGRN"]').val();
                    obj.grnNo = null;
                    obj.refNo = null;
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();
                    
                     if (DocDate == "") {
                    obj.docExpdate = null;
                }
                else {
                    obj.docExpdate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docExpdate = $('[id$="dt_DocDateGRN"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
                    obj.docId = $(columns[0]).html();
                    details.push(obj);



                    var stktrnobj = {};
                    var d1 = new Date();
                    stktrnobj.trnPost = d1.getFullYear() + "/" + (d1.getMonth() + 1) + '/' + d1.getDate();
                    if (DocDate == "") {
                        stktrnobj.trnDate = null;
                    }
                    else {
                        stktrnobj.trnDate = DocDate.split("/").reverse().join("/")
                    }
                    stktrnobj.trnNo = null;
                    var today = new Date();
                    var str1 = ('0' + today.getHours()).substr(-2) + "" + ('0' + today.getMinutes()).substr(-2) + "" + ('0' + today.getSeconds()).substr(-2);
                    stktrnobj.postTime = str1;
                    stktrnobj.aperiod = null;
                    stktrnobj.itemcode = $(columns[3]).html()+"0000";
                    stktrnobj.storeNo = $('[id$="ddl_ToStoreGRNIn"]').val();
                    stktrnobj.tstoreNo = $('[id$="ddl_ToStoreGRNIn"]').val();
                    stktrnobj.fstoreNo = $('[id$="ddl_FromStoreGRNIn"]').val();
                    stktrnobj.trnDocno = $('[id$="txtDocNo_GRNIn"]').val();
                    stktrnobj.trnType = "TFR";
                    stktrnobj.trnDbQty = null;
                    stktrnobj.trnCrQty = null;
                    stktrnobj.trnQty = $(columns[9]).html();
                    stktrnobj.trnBalqty = $(columns[9]).html();
                    stktrnobj.trnBalcst = $(columns[10]).html();
                    stktrnobj.trnAmt = $(columns[10]).html();
                    stktrnobj.trnCost = $(columns[10]).html();
                    stktrnobj.trnRef = null;
                    stktrnobj.hqUpdate = false;
                    stktrnobj.lineNo = $(columns[2]).html();
                    stktrnobj.itemUom = $(columns[1]).html();
                    stktrnobj.itemBatch = "";
                    stktrnobj.movType = "TFR";
                    stktrnobj.itemBatchCost = $(columns[7]).html();
                    stktrnobj.stockIn = null;
                    stktrnobj.transPackageLineNo = null;
                    stkdetails.push(stktrnobj);

                    var stktrnobj1 = {};
                    stktrnobj1.trnPost = d1.getFullYear() + "/" + (d1.getMonth() + 1) + '/' + d1.getDate();
                    if (DocDate == "") {
                        stktrnobj1.trnDate = null;
                    }
                    else {
                        stktrnobj1.trnDate = DocDate.split("/").reverse().join("/")
                    }
                    stktrnobj1.trnNo = null;
                    stktrnobj1.postTime = str1;
                    stktrnobj1.aperiod = null;
                    stktrnobj1.itemcode = $(columns[3]).html() + "0000";
                    stktrnobj1.storeNo = $('[id$="ddl_FromStoreGRNIn"]').val();
                    stktrnobj1.tstoreNo = $('[id$="ddl_ToStoreGRNIn"]').val();
                    stktrnobj1.fstoreNo = $('[id$="ddl_FromStoreGRNIn"]').val();
                    stktrnobj1.trnDocno = $('[id$="txtDocNo_GRNIn"]').val();
                    stktrnobj1.trnType = "TFR";
                    stktrnobj1.trnDbQty = null;
                    stktrnobj1.trnCrQty = null;
                    stktrnobj1.trnQty = $(columns[9]).html() * (-1);
                    stktrnobj1.trnBalqty = $(columns[9]).html() * (-1);
                    stktrnobj1.trnBalcst = $(columns[10]).html() * (-1);
                    stktrnobj1.trnAmt = $(columns[10]).html() * (-1);
                    stktrnobj1.trnCost = $(columns[10]).html() * (-1);
                    stktrnobj1.trnRef = null;
                    stktrnobj1.hqUpdate = false;
                    stktrnobj1.lineNo = $(columns[2]).html();
                    stktrnobj1.itemUom = $(columns[1]).html();
                    stktrnobj1.itemBatch = "";
                    stktrnobj1.movType = "TFR";
                    stktrnobj1.itemBatchCost = $(columns[7]).html();
                    stktrnobj1.stockIn = null;
                    stktrnobj1.transPackageLineNo = null;
                    stkdetails1.push(stktrnobj1);


                }

                   $.ajax({
                    type: "POST",
                    url: "GRNIn.aspx/EditStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
            });

            $.ajax({
                    type: "POST",
                    url: "GRNIn.aspx/AddStktrnsData",
                    data: '{ Details :' + JSON.stringify(stkdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
            });

            $.ajax({
                type: "POST",
                url: "GRNIn.aspx/AddStktrnsData1",
                data: '{ Details1 :' + JSON.stringify(stkdetails1) + '}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    //   alert(r.d);
                    successResult = "True";
                },
                error: function (data, errorThrown) {
                    successResult = "False";
                }
            });
                
                $(location).attr('href',"GRNInList.aspx");

        });

        $('[id$="btnSubmit_ListGRNIn"]').click(function () {
                $(location).attr('href',"GRNInList.aspx");

              });


        //Return
        $(function () {
                $('#GRNReturnMasterPage').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=ListWithSupplier&PKey=VGRN',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Invoice Number/ Invoice Date/ Ref Num / Supplier / Total Amount/ Status is currently active"
                    },
                    'columns': [
                        {
                          'data': 'docNo',
                          'render': function (data, type, row, meta) {
                              data = '<a href="GRNReturn.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null, null, null, null, null,
                        {
                            'data': 'docNo',
                            'render': function (data, type, row, meta) {
                                data = '<a href="GRNReturnPrint.aspx?PKey=' + row[0] + '"><i class="fa fa-print" style="font-size:24px"></i></a>';
                                return data;
                            }
                        }
                      ]
                })
            });

            $(".btnFillter_GRNReturnListMaster .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#GRNReturnMasterPage').DataTable();
        table
            .column(5)
            .search(inputValue)
            .draw();
        });

         $('[id$="dt_DocDateGRNReturn"]').datepicker({
        format: 'dd/mm/yyyy',
             autoclose: true,
             forceParse: false
             //,startDate: '+0d'
        });

        //$('[id$="dt_DocDateGRNReturn"]').datepicker({
        //    format: 'dd/mm/yyyy',
        //    autoclose: true,
        //    forceParse: false,
        //    startDate: '+0d',
        //}).on('changeDate', function (selected) {
        //    var startDate = new Date(selected.date.valueOf());
        //    $('[id$="dt_DeliveryDateGRNReturn"]').datepicker('setStartDate', startDate);
        //}).on('clearDate', function (selected) {
        //    $('[id$="dt_DeliveryDateGRNReturn"]').datepicker('setStartDate', null);
        //});

        $('[id$="dt_DeliveryDateGRNReturn"]').datepicker({
        format: 'dd/mm/yyyy',
            autoclose: true,
            forceParse: false
            //,startDate: '+0d'
        });

         $('[id$="btn_AddRow_GRNReturn"]').click(function () {
        $("#mdlAddUOM").modal();
            });

        $(function () {
                $('#GRNReturnItemSearch').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=GRNItemSearchList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    "iDisplayLength": 5,
                     "bLengthChange": false,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Item Code/Item Description/Item UOM/Item Brand/Link Code/Range"
                    },
                    'columns': [
                        null, null, null, null, null, null, null,null, null, null,
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtQty_GRNReturn" value="0" min="0" oninput="restrict(this);" onkeydown="javascript: return event.keyCode === 8 ||event.keyCode === 46 ? true : !isNaN(Number(event.key))">';
                              return data;
                          }
                        },
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtCost_GRNReturn" min="0" oninput="restrict(this);">';
                              return data;
                          }
                        },

                        {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              //data = '<button type="button" class="btn btn-primary" id="btnAdd_GRNReturn">Select</button>';
                              //data = '<i class="Add_ItemToGRNReturn glyphicon glyphicon-ok"></i></a>';
                              data = '<a class="Add_ItemToGRNReturn btn btn-info btn-primary"><i class=" glyphicon glyphicon-hand-up"></i></a></p>';
                              
                              return data;
                          }
                        }

                    ],
                     "columnDefs": [
                         {
                               "targets": [ 7 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 8 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 9 ],
                               "visible": false,
                               "searchable": false               
                         }

                    ],  



                })

        });


            $(document).on("click", ".Add_ItemToGRNReturn", function () {

                var rowIndex = $('#GRNReturnItemSearch tr').index($(this).closest('tr'));

                //var sData=$("#GRNReturnItemSearch").dataTable().fnGetData(rowIndex);
                var currentRow = $(this).closest("tr");
                var sData = $('#GRNReturnItemSearch').DataTable().row(currentRow).data();
                //alert(sData[8]);

            var searchString = $('#GRNReturnItemSearch tr').eq(rowIndex).find('td:eq(0)').html();
            if (valueInGRNReturnTable('GRNReturnItemSearch', 0, searchString)) { 
                alert("already Exists");
                return false;
            }    
                   
            var counter = 0;
            var newRow = $("<tr>");
                var cols = "";
                cols += '<td style="width: 0%;visibility:hidden;">' + "" + '</td>';
                cols += '<td style="width: 0%;visibility:hidden;">' + sData[7] + '</td>';
                cols += '<td>' + "" + '</td>';
                cols += '<td >' + $('#GRNReturnItemSearch tr').eq(rowIndex).find('td:eq(0)').html() + '</td>';
                cols += '<td>' + $('#GRNReturnItemSearch tr').eq(rowIndex).find('td:eq(1)').html() + '</td>';
                cols += '<td>' + $('#GRNReturnItemSearch tr').eq(rowIndex).find('td:eq(3)').html() + '</td>';
                cols += '<td>' + $('#GRNReturnItemSearch tr').eq(rowIndex).find('td:eq(5)').html() + '</td>';

                var table = document.getElementById("GRNReturnItemSearch");
                var row = table.rows[rowIndex];

                var qty = row.cells[7].children[0].value;
                var cost =row.cells[8].children[0].value;
                var Ucost = qty * cost;
                if (qty == "" || qty == "0") {
                    alert("Qty is Invalid");
                    return false;
                }
                if (cost=="") {
                    alert("Cost is Empty");
                    return false;
                }

                cols += '<td>' + cost + '</td>';

                cols += '<td>' + $('#GRNReturnItemSearch tr').eq(rowIndex).find('td:eq(2)').html() + '</td>';
                cols += '<td>' + qty + '</td>';
                cols += '<td>' + Ucost.toFixed(2) + '</td>';
                cols += '<td>' + "" + '</td>';
                cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="edit_AddItemToGRNReturn glyphicon glyphicon-pencil"></i></div></td>';
                cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Remove_AddItemToGRNReturn glyphicon glyphicon-trash"></i></div></td>';
                
                cols += '<td style="width: 0%;visibility:hidden;">' + sData[8] + '</td>';
                cols += '<td style="width: 0%;visibility:hidden;">' + sData[9] + '</td>';
                newRow.append(cols);
                $("#GRNReturnEntryModule").append(newRow);

                var _Total = 0;
                $('#GRNReturnEntryModule').find('tr').each(
                function (i) {
                    $('#GRNReturnEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#GRNReturnEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#GRNReturnEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
                $('[id$="txt_TotAmntGRNReturn"]').val(_Total.toFixed(2));
                counter++;
        });

        $(document).on("click", ".edit_AddItemToGRNReturn", function () {
        $("#mdlEditPriceGRN").modal();
        var rowIndex = $('#GRNReturnEntryModule tr').index($(this).closest('tr'));
            $("#mdlEditPriceGRN #lbl_Index_mdlEditPriceGRN").text(rowIndex);
            //alert($('#GRNReturnEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
            $("#mdlEditPriceGRN #txtQty_EditPriceGRN").val($('#GRNReturnEntryModule tr').eq(rowIndex).find('td:eq(9)').html());
            $("#mdlEditPriceGRN #txtRemark_EditPriceGRN").val($('#GRNReturnEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
        $("#mdlEditPriceGRN #txtPrice_EditPriceGRN").val($('#GRNReturnEntryModule tr').eq(rowIndex).find('td:eq(7)').html()).trigger();
        });

        $('[id$="btnSubmit_mdlEditPriceGRN"]').click(function () {

            var Qty = $('#txtQty_EditPriceGRN').val();
            var Cost = $('#txtPrice_EditPriceGRN').val();
            var remark = $('#txtRemark_EditPriceGRN').val();
            var Ucost = Qty * Cost;
            if (Qty == "") {
                alert("Qty is Empty");

                $("#mdlEditPriceGRN").modal();
                var rowIndex = $('#GRNReturnEntryModule tr').index($(this).closest('tr'));
                $("#mdlEditPriceGRN #lbl_Index_mdlEditPriceGRN").text(rowIndex);
                //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
                $("#mdlEditPriceGRN #txtQty_EditPriceGRN").val($('#GRNReturnEntryModule tr').eq(rowIndex).find('td:eq(9)').html());
                $("#mdlEditPriceGRN #txtRemark_EditPriceGRN").val(remark);
                $("#mdlEditPriceGRN #txtPrice_EditPriceGRN").val(Cost).trigger();

                return false
            }
            if (Cost == "") {
                alert("Cost is Empty");

                $("#mdlEditPriceGRN").modal();
                var rowIndex = $('#GRNReturnEntryModule tr').index($(this).closest('tr'));
                $("#mdlEditPriceGRN #lbl_Index_mdlEditPriceGRN").text(rowIndex);
                //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
                $("#mdlEditPriceGRN #txtQty_EditPriceGRN").val(Qty);
                $("#mdlEditPriceGRN #txtRemark_EditPriceGRN").val(remark);
                $("#mdlEditPriceGRN #txtPrice_EditPriceGRN").val($('#GRNReturnEntryModule tr').eq(rowIndex).find('td:eq(7)').html()).trigger();

                return false
            }

            var Index = $('#lbl_Index_mdlEditPriceGRN').text();
                $('#GRNReturnEntryModule tr').eq(Index).find('td:eq(9)').html($('#txtQty_EditPriceGRN').val().replace("'", ""));
                $('#GRNReturnEntryModule tr').eq(Index).find('td:eq(7)').html($('#txtPrice_EditPriceGRN').val().replace("'", ""));
            $('#GRNReturnEntryModule tr').eq(Index).find('td:eq(10)').html(Ucost.toFixed(2));
            $('#GRNReturnEntryModule tr').eq(Index).find('td:eq(11)').html($('#txtRemark_EditPriceGRN').val().replace("'", ""));
            $("#mdlEditPriceGRN").modal('hide');

            var _Total = 0;
                $('#GRNReturnEntryModule').find('tr').each(
                function (i) {
                    $('#GRNReturnEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#GRNReturnEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#GRNReturnEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
            $('[id$="txt_TotAmntGRNReturn"]').val(_Total.toFixed(2));

        });

         $(document).on("click", ".Remove_AddItemToGRNReturn", function () {
        var rowIndex = $('#GRNReturnEntryModule tr').index($(this).closest('tr'));
             $(this).closest("tr").remove();
             var _Total = 0;
                $('#GRNReturnEntryModule').find('tr').each(
                function (i) {
                    $('#GRNReturnEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#GRNReturnEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#GRNReturnEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
                $('[id$="txt_TotAmntGRNReturn"]').val(_Total.toFixed(2));

        });

        $(document).on("click", ".Remove_AddItemToGRNReturnAfterSave", function () {
        var rowIndex = $('#GRNReturnEntryModule tr').index($(this).closest('tr'));
             

            var StkMovdocDtl = [];
            var StkMovdocDtlobj = {};
            var rows = $('#GRNReturnEntryModule tbody >tr');
            var columns;
            columns = $(rows[rowIndex]).find('td');
            StkMovdocDtlobj.docId = $(columns[0]).html();
            StkMovdocDtl.push(StkMovdocDtlobj);
             $.ajax({
                    type: "POST",
                    url: "GRNReturn.aspx/DelStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocDtl) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

            $(this).closest("tr").remove();
             var _Total = 0;
                $('#GRNReturnEntryModule').find('tr').each(
                function (i) {
                    $('#GRNReturnEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#GRNReturnEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#GRNReturnEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
                $('[id$="txt_TotAmntGRNReturn"]').val(_Total.toFixed(2));

            });

        function valueInGRNReturnTable(tableID, columnNum, searchString)
            {
                var found = false;
                $("#GRNReturnEntryModule tr").each(function () {
                var itemCode = $(this).find("td").eq(3).html();
                if (itemCode == searchString)
                    {
                        found = true;
                        return false;
                    }
             });

                return found;
        }

        $('[id$="ddl_supplierGRNReturn"]').change(function () {
                var SuppCode = this.value;
            $.ajax({
                type: 'POST',
                url: 'Utilities/DataModels.ashx?ID=SupplierInfo&PKey=' + this.value + '',
                dataType: "json",
                Cache: false,
                success: function (data) {
                    var JsonArray = JSON.stringify(data);
                    var Json = JSON.parse(JsonArray);
                    $('[id$="txtAttnTo_GRNReturn"]').val(Json.aaData[0][0]);
                    $('[id$="txtAddress1_GRNReturn"]').val(Json.aaData[0][1]);
                    $('[id$="txtAddress2_GRNReturn"]').val(Json.aaData[0][2]);
                    $('[id$="txtAddress3_GRNReturn"]').val(Json.aaData[0][3]);
                    $('[id$="txtPostCode_GRNReturn"]').val(Json.aaData[0][4]);
                    $('[id$="txtCity_GRNReturn"]').val(Json.aaData[0][5]);
                    $('[id$="txtState_GRNReturn"]').val(Json.aaData[0][6]);
                    $('[id$="txtCountry_GRNReturn"]').val(Json.aaData[0][7]);
                    $('[id$="txtRemark1_GRNReturn"]').val(Json.aaData[0][8]);
                    $('[id$="txtRemark2_GRNReturn"]').val(Json.aaData[0][9]);
                    $('[id$="txtShipToAddress1_GRNReturn"]').val(Json.aaData[0][10]);
                    $('[id$="txtShipToAddress2_GRNReturn"]').val(Json.aaData[0][11]);
                    $('[id$="txtShipToAddress3_GRNReturn"]').val(Json.aaData[0][12]);
                    $('[id$="txtPostCodeTo_GRNReturn"]').val(Json.aaData[0][13]);
                    $('[id$="txtCityTo_GRNReturn"]').val(Json.aaData[0][14]);
                    $('[id$="txtStateTo_GRNReturn"]').val(Json.aaData[0][15]);
                    $('[id$="txtCountryTo_GRNReturn"]').val(Json.aaData[0][16]);
                    }
                });
        });


         $('[id$="btnSubmit_mdlSuccessMsg"]').click(function () {
             $(location).attr('href',"GRNReturnList.aspx");

        });

        $('[id$="btnSubmit_AddGRNReturn"]').click(function () {
            this.disabled = true;

                //  $.ajax({
                //type: 'POST',
                //url: 'Utilities/DataModels.ashx?ID=GetControlNo&PKey=Goods Return Note',
                //dataType: "json",
                //Cache: false,
                //success: function (data) {
                //    var JsonArray = JSON.stringify(data);
                //    var Json = JSON.parse(JsonArray);
                //    $('[id$="txtDocNo_GRNReturn"]').val(Json.aaData[0][0] + Json.aaData[0][1] + + Json.aaData[0][2]);
                //    }
                //  });

                var StkMovdocHdrdetails = [];
                  var StkMovdocHdrsobj = {};
                  
                  StkMovdocHdrsobj.docNo = $('[id$="txtDocNo_GRNReturn"]').val();
                  //alert($('[id$="txtDocNo_GRNReturn"]').val());
                StkMovdocHdrsobj.movCode = "VGRN";
                StkMovdocHdrsobj.movType = "VGRN";
                StkMovdocHdrsobj.storeNo = $('[id$="ddlStoreCode_GRNReturn"]').val();
                StkMovdocHdrsobj.fstoreNo = null;
                StkMovdocHdrsobj.tstoreNo = null;
                //var itemName = $('[id$="txt_StockName"]').val();;
                StkMovdocHdrsobj.supplyNo = $('[id$="ddl_supplierGRNReturn"]').val();
                StkMovdocHdrsobj.docRef1 = $('[id$="txtPO1Ref_GRNReturn"]').val();
                StkMovdocHdrsobj.docRef2 = $('[id$="txtGrn1Ref_GRNReturn"]').val();
                StkMovdocHdrsobj.accCode = null;
                  StkMovdocHdrsobj.staffNo = $('[id$="ddlCreatedBy_GRNReturn"]').val();
                  var tablerows = $('#GRNReturnEntryModule tbody >tr');
                  StkMovdocHdrsobj.docLines = tablerows.length-1;
                  var DocDate = $('[id$="dt_DocDateGRNReturn"]').val();
                  if (DocDate == "") {
                    StkMovdocHdrsobj.docDate = null;
                }
                else {
                    StkMovdocHdrsobj.docDate = DocDate.split("/").reverse().join("/")
                  }

                //StkMovdocHdrsobj.docDate = $('[id$="dt_DocDateGRNReturn"]').val();
                  StkMovdocHdrsobj.postDate = null;
                //StkMovdocHdrsobj.postDate = $('[id$="dt_DocDateGRNReturn"]').val();
                StkMovdocHdrsobj.docStatus = "0";
                StkMovdocHdrsobj.docTerm = $('[id$="txtTerm_GRNReturn"]').val();
                StkMovdocHdrsobj.docTime = null;
                StkMovdocHdrsobj.docQty = null;
                StkMovdocHdrsobj.docFoc = null;
                StkMovdocHdrsobj.docDisc = null;
                StkMovdocHdrsobj.docAmt = $('[id$="txt_TotAmntGRNReturn"]').val();
                StkMovdocHdrsobj.docTrnspt = "0";
                StkMovdocHdrsobj.docTax = "0";
                StkMovdocHdrsobj.docAttn = $('[id$="txtAttnTo_GRNReturn"]').val();
                StkMovdocHdrsobj.docRemk1 = $('[id$="txtRemark_GRNReturn"]').val();
                StkMovdocHdrsobj.docRemk2 = $('[id$="txtRemark1_GRNReturn"]').val();
                StkMovdocHdrsobj.docRemk3 = $('[id$="txtRemark2_GRNReturn"]').val();
                StkMovdocHdrsobj.docShip = null;
                StkMovdocHdrsobj.bname = $('[id$="txtAttnTo_GRNReturn"]').val();
                StkMovdocHdrsobj.baddr1 = $('[id$="txtAddress1_GRNReturn"]').val();
                StkMovdocHdrsobj.baddr2 = $('[id$="txtAddress2_GRNReturn"]').val();
                StkMovdocHdrsobj.baddr3 = $('[id$="txtAddress3_GRNReturn"]').val();
                StkMovdocHdrsobj.bpostcode = $('[id$="txtPostCode_GRNReturn"]').val();
                StkMovdocHdrsobj.bstate = $('[id$="txtState_GRNReturn"]').val();
                StkMovdocHdrsobj.bcity = $('[id$="txtCity_GRNReturn"]').val();
                StkMovdocHdrsobj.bcountry = $('[id$="txtCountry_GRNReturn"]').val();
                StkMovdocHdrsobj.daddr1 = $('[id$="txtShipToAddress1_GRNReturn"]').val();
                StkMovdocHdrsobj.daddr2 = $('[id$="txtShipToAddress2_GRNReturn"]').val();
                StkMovdocHdrsobj.daddr3 = $('[id$="txtShipToAddress3_GRNReturn"]').val();
                StkMovdocHdrsobj.dpostcode = $('[id$="txtPostCodeTo_GRNReturn"]').val();
                StkMovdocHdrsobj.dstate = $('[id$="txtStateTo_GRNReturn"]').val();
                StkMovdocHdrsobj.dcity = $('[id$="txtCityTo_GRNReturn"]').val();
                StkMovdocHdrsobj.dcountry = $('[id$="txtCountryTo_GRNReturn"]').val();
                StkMovdocHdrsobj.cancelQty = "0";
                  StkMovdocHdrsobj.recStatus = "0";
            var DelivryDate = $('[id$="dt_DeliveryDateGRNReturn"]').val();
            if (DelivryDate == "") {
                StkMovdocHdrsobj.recExpect = null;
            }
            else {
                var arrStartDate = DocDate.split("/");
                var date1 = new Date(arrStartDate[2], arrStartDate[1], arrStartDate[0]);
                var arrEndDate = DelivryDate.split("/");
                var date2 = new Date(arrEndDate[2], arrEndDate[1], arrEndDate[0]);

                if (date1 > date2) {

                    alert(DelivryDate + ' DeliveryDate Should be greather  than Doc Date' + DocDate);
                    return false;
                }
                else {
                    StkMovdocHdrsobj.recExpect = DelivryDate.split("/").reverse().join("/") + " 00:00:00";
                }
            }
                //StkMovdocHdrsobj.recExpect = $('[id$="dt_DocDateGRNReturn"]').val();
                StkMovdocHdrsobj.recTtl = "0";
                StkMovdocHdrsobj.createUser = null;
                StkMovdocHdrsobj.createDate = null;
                StkMovdocHdrsobj.phyNo = null;
                  StkMovdocHdrdetails.push(StkMovdocHdrsobj);
                  
                if (StkMovdocHdrsobj.storeNo == "") {
                    alert("Store Code is Empty");
                    return false;
                }
                if (StkMovdocHdrsobj.supplyNo == "") {
                    alert("Supply No is Empty");
                    return false;
                }
                if (StkMovdocHdrsobj.staffNo == "") {
                    alert("Created By is Empty");
                    return false;
                  }

                  
                  if (tablerows.length == 1) {
                    alert("Pls Add Item");
                    return false;
                  }

                  var successResult;
                var btnTextGRNReturn = $('[id$="btnSubmit_AddGRNReturn"]').text();
                if (btnTextGRNReturn == "Add") {
                    $.ajax({
                    type: "POST",
                    url: "GRNReturn.aspx/AddStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

                    var details = [];
                var details1 = [];

                var rows = $('#GRNReturnEntryModule tbody >tr');
                var GRNReturnEntryrows = $('#GRNReturnEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_GRNReturn"]').val();
                    obj.movCode = "VGRN";
                    obj.movType = "VGRN";
                    obj.docLineno = $(columns[2]).html();
                    if (DocDate == "") {
                    obj.docDate = null;
                }
                else {
                    obj.docDate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docDate = $('[id$="dt_DocDateGRNReturn"]').val();
                    obj.grnNo = null;
                    obj.refNo = null;
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();
                    
                     if (DocDate == "") {
                    obj.docExpdate = null;
                }
                else {
                    obj.docExpdate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docExpdate = $('[id$="dt_DocDateGRNReturn"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "GRNReturn.aspx/AddStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });

                }
                else {

                        $.ajax({
                    type: "POST",
                    url: "GRNReturn.aspx/EditStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });
                    

                var details = [];
                var rows = $('#GRNReturnEntryModule tbody >tr');
                var GRNReturnEntryrows = $('#GRNReturnEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_GRNReturn"]').val();
                    obj.movCode = "VGRN";
                    obj.movType = "VGRN";
                    obj.docLineno = $(columns[2]).html();
                    if (DocDate == "") {
                    obj.docDate = null;
                }
                else {
                    obj.docDate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docDate = $('[id$="dt_DocDateGRNReturn"]').val();
                    obj.grnNo = null;
                    obj.refNo = null;
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();
                    
                     if (DocDate == "") {
                    obj.docExpdate = null;
                }
                else {
                    obj.docExpdate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docExpdate = $('[id$="dt_DocDateGRNReturn"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
					obj.docId = $(columns[0]).html();
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "GRNReturn.aspx/EditStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });
                  }
                  //if (btnTextGRNReturn == "Add") {
                  //      $("#mdlSuccessMsg").modal();
                  //      $("#mdlSuccessMsg #lbl_text_mdlSuccessMsg").val("Data Saved Successfully");
                  //      $("#mdlSuccessMsg #lbl_DocNo_mdlSuccessMsg").val($('[id$="txtDocNo_GRNReturn"]').val());
                  //}
                  //else {
                  //    $("#mdlSuccessMsg").modal();
                  //      $("#mdlSuccessMsg #lbl_text_mdlSuccessMsg").val("Data Modify Successfully");
                  //      $("#mdlSuccessMsg #lbl_DocNo_mdlSuccessMsg").val($('[id$="txtDocNo_GRNReturn"]').val());
                  //}
                  $(location).attr('href', "GRNReturnList.aspx");


                  //if (successResult == "True") {
                  //    $('[id$="btnSubmit_PostGRNReturn"]').prop('disabled', false);
                  //    $('[id$="btnSubmit_AddGRNReturn"]').prop('disabled', true);
                  //    //$(location).attr('href',"ItemMasterList.aspx");
                  //    alert("Data Saved Successfully");
                  //}

        });

        $('[id$="btnSubmit_PostGRNReturn"]').click(function () {
            this.disabled = true;
            var StkMovdocHdrdetails = [];
                  var StkMovdocHdrsobj = {};
                  
                  StkMovdocHdrsobj.docNo = $('[id$="txtDocNo_GRNReturn"]').val();
                  //alert($('[id$="txtDocNo_GRNReturn"]').val());
                StkMovdocHdrsobj.movCode = "VGRN";
                StkMovdocHdrsobj.movType = "VGRN";
                StkMovdocHdrsobj.storeNo = $('[id$="ddlStoreCode_GRNReturn"]').val();
                StkMovdocHdrsobj.fstoreNo = null;
                StkMovdocHdrsobj.tstoreNo = null;
                //var itemName = $('[id$="txt_StockName"]').val();;
                StkMovdocHdrsobj.supplyNo = $('[id$="ddl_supplierGRNReturn"]').val();
                StkMovdocHdrsobj.docRef1 = $('[id$="txtPO1Ref_GRNReturn"]').val();
                StkMovdocHdrsobj.docRef2 = $('[id$="txtGrn1Ref_GRNReturn"]').val();
                StkMovdocHdrsobj.accCode = null;
                  StkMovdocHdrsobj.staffNo = $('[id$="ddlCreatedBy_GRNReturn"]').val();
                  var tablerows = $('#GRNReturnEntryModule tbody >tr');
                  StkMovdocHdrsobj.docLines = tablerows.length-1;
                  var DocDate = $('[id$="dt_DocDateGRNReturn"]').val();
                  if (DocDate == "") {
                    StkMovdocHdrsobj.docDate = null;
                }
                else {
                    StkMovdocHdrsobj.docDate = DocDate.split("/").reverse().join("/")
                  }

                //StkMovdocHdrsobj.docDate = $('[id$="dt_DocDateGRNReturn"]').val();
                var d = new Date();
            StkMovdocHdrsobj.postDate = d.getFullYear() + "/" + (d.getMonth() + 1) + '/' + d.getDate();
                //StkMovdocHdrsobj.postDate = $('[id$="dt_DocDateGRNReturn"]').val();
                StkMovdocHdrsobj.docStatus = "7";
                StkMovdocHdrsobj.docTerm = $('[id$="txtTerm_GRNReturn"]').val();
                StkMovdocHdrsobj.docTime = null;
                StkMovdocHdrsobj.docQty = null;
                StkMovdocHdrsobj.docFoc = null;
                StkMovdocHdrsobj.docDisc = null;
                StkMovdocHdrsobj.docAmt = $('[id$="txt_TotAmntGRNReturn"]').val();
                StkMovdocHdrsobj.docTrnspt = "0";
                StkMovdocHdrsobj.docTax = "0";
                StkMovdocHdrsobj.docAttn = $('[id$="txtAttnTo_GRNReturn"]').val();
                StkMovdocHdrsobj.docRemk1 = $('[id$="txtRemark_GRNReturn"]').val();
                StkMovdocHdrsobj.docRemk2 = $('[id$="txtRemark1_GRNReturn"]').val();
                StkMovdocHdrsobj.docRemk3 = $('[id$="txtRemark2_GRNReturn"]').val();
                StkMovdocHdrsobj.docShip = null;
                StkMovdocHdrsobj.bname = $('[id$="txtAttnTo_GRNReturn"]').val();
                StkMovdocHdrsobj.baddr1 = $('[id$="txtAddress1_GRNReturn"]').val();
                StkMovdocHdrsobj.baddr2 = $('[id$="txtAddress2_GRNReturn"]').val();
                StkMovdocHdrsobj.baddr3 = $('[id$="txtAddress3_GRNReturn"]').val();
                StkMovdocHdrsobj.bpostcode = $('[id$="txtPostCode_GRNReturn"]').val();
                StkMovdocHdrsobj.bstate = $('[id$="txtState_GRNReturn"]').val();
                StkMovdocHdrsobj.bcity = $('[id$="txtCity_GRNReturn"]').val();
                StkMovdocHdrsobj.bcountry = $('[id$="txtCountry_GRNReturn"]').val();
                StkMovdocHdrsobj.daddr1 = $('[id$="txtShipToAddress1_GRNReturn"]').val();
                StkMovdocHdrsobj.daddr2 = $('[id$="txtShipToAddress2_GRNReturn"]').val();
                StkMovdocHdrsobj.daddr3 = $('[id$="txtShipToAddress3_GRNReturn"]').val();
                StkMovdocHdrsobj.dpostcode = $('[id$="txtPostCodeTo_GRNReturn"]').val();
                StkMovdocHdrsobj.dstate = $('[id$="txtStateTo_GRNReturn"]').val();
                StkMovdocHdrsobj.dcity = $('[id$="txtCityTo_GRNReturn"]').val();
                StkMovdocHdrsobj.dcountry = $('[id$="txtCountryTo_GRNReturn"]').val();
                StkMovdocHdrsobj.cancelQty = "0";
                  StkMovdocHdrsobj.recStatus = "1";
            var DelivryDate = $('[id$="dt_DeliveryDateGRNReturn"]').val();
            if (DelivryDate == "") {
                StkMovdocHdrsobj.recExpect = null;
            }
            else {
                var arrStartDate = DocDate.split("/");
                var date1 = new Date(arrStartDate[2], arrStartDate[1], arrStartDate[0]);
                var arrEndDate = DelivryDate.split("/");
                var date2 = new Date(arrEndDate[2], arrEndDate[1], arrEndDate[0]);

                if (date1 > date2) {

                    alert(DelivryDate + ' DeliveryDate Should be greather  than Doc Date' + DocDate);
                    return false;
                }
                else {
                    StkMovdocHdrsobj.recExpect = DelivryDate.split("/").reverse().join("/") + " 00:00:00";
                }
            }
                //StkMovdocHdrsobj.recExpect = $('[id$="dt_DocDateGRNReturn"]').val();
                StkMovdocHdrsobj.recTtl = "0";
                StkMovdocHdrsobj.createUser = null;
                StkMovdocHdrsobj.createDate = null;
                StkMovdocHdrsobj.phyNo = null;
                  StkMovdocHdrdetails.push(StkMovdocHdrsobj);
                  
                if (StkMovdocHdrsobj.storeNo == "") {
                    alert("Store Code is Empty");
                    return false;
                }
                if (StkMovdocHdrsobj.supplyNo == "") {
                    alert("Supply No is Empty");
                    return false;
                }
                if (StkMovdocHdrsobj.staffNo == "") {
                    alert("Created By is Empty");
                    return false;
                  }

                  
                  if (tablerows.length == 1) {
                    alert("Pls Add Item");
                    return false;
                  }

                  
                var btnTextGRNReturn = $('[id$="btnSubmit_AddGRNReturn"]').text();
                var successResult;

                        $.ajax({
                    type: "POST",
                    url: "GRNReturn.aspx/EditStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });
                    

            var details = [];
            var stkdetails = [];
            
                var rows = $('#GRNReturnEntryModule tbody >tr');
                var GRNReturnEntryrows = $('#GRNReturnEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_GRNReturn"]').val();
                    obj.movCode = "VGRN";
                    obj.movType = "VGRN";
                    obj.docLineno = $(columns[2]).html();
                    if (DocDate == "") {
                    obj.docDate = null;
                }
                else {
                    obj.docDate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docDate = $('[id$="dt_DocDateGRNReturn"]').val();
                    obj.grnNo = null;
                    obj.refNo = null;
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();
                    
                     if (DocDate == "") {
                    obj.docExpdate = null;
                }
                else {
                    obj.docExpdate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docExpdate = $('[id$="dt_DocDateGRNReturn"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
                    obj.docId = $(columns[0]).html();
                    details.push(obj);



                    var stktrnobj = {};
                    var d1 = new Date();
                    stktrnobj.trnPost = d1.getFullYear() + "/" + (d1.getMonth() + 1) + '/' + d1.getDate();
                    if (DocDate == "") {
                        stktrnobj.trnDate = null;
                    }
                    else {
                        stktrnobj.trnDate = DocDate.split("/").reverse().join("/")
                    }
                    stktrnobj.trnNo = null;
                    var today = new Date();
                    var str1 = ('0' + today.getHours()).substr(-2) + "" + ('0' + today.getMinutes()).substr(-2) + "" + ('0' + today.getSeconds()).substr(-2);
                    stktrnobj.postTime = str1;
                    stktrnobj.aperiod = null;
                    stktrnobj.itemcode = $(columns[3]).html()+"0000";
                    stktrnobj.storeNo = $('[id$="ddlStoreCode_GRNReturn"]').val();
                    stktrnobj.tstoreNo = null;
                    stktrnobj.fstoreNo = null;
                    stktrnobj.trnDocno = $('[id$="txtDocNo_GRNReturn"]').val();
                    stktrnobj.trnType = "VGRN";
                    stktrnobj.trnDbQty = null;
                    stktrnobj.trnCrQty = null;
                    stktrnobj.trnQty = $(columns[9]).html() * (-1);
                    stktrnobj.trnBalqty = $(columns[9]).html() * (-1);
                    stktrnobj.trnBalcst = $(columns[10]).html() * (-1);
                    stktrnobj.trnAmt = $(columns[10]).html() * (-1);
                    stktrnobj.trnCost = $(columns[10]).html() * (-1);
                    stktrnobj.trnRef = null;
                    stktrnobj.hqUpdate = false;
                    stktrnobj.lineNo = $(columns[2]).html();
                    stktrnobj.itemUom = $(columns[1]).html();
                    stktrnobj.itemBatch = "";
                    stktrnobj.movType = "VGRN";
                    stktrnobj.itemBatchCost = $(columns[7]).html();
                    stktrnobj.stockIn = null;
                    stktrnobj.transPackageLineNo = null;
                    stkdetails.push(stktrnobj);

                }

                   $.ajax({
                    type: "POST",
                    url: "GRNReturn.aspx/EditStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
            });

            $.ajax({
                    type: "POST",
                    url: "GRNReturn.aspx/AddStktrnsData",
                    data: '{ Details :' + JSON.stringify(stkdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });
                
                $(location).attr('href',"GRNReturnList.aspx");

        });

        $('[id$="btnSubmit_ListGRNReturn"]').click(function () {
                $(location).attr('href',"GRNReturnList.aspx");

        });

        //Usage Memo

        $(function () {
            $('#StkUsageMemoListMasterPage').DataTable({
                'sAjaxSource': 'Utilities/DataModels.ashx?ID=ListWithoutSupplier&PKey=SUM',
                'paging': true,
                'lengthChange': true,
                'searching': true,
                'ordering': true,
                'info': true,
                'autoWidth': true,
                language: {
                    searchPlaceholder: "Search By Invoice Number/ Invoice Date/ Ref Num 1/ Ref Num 2/ Total Amount/ Status is currently active"
                },
                'columns': [
                    {
                        'data': 'docNo',
                        'render': function (data, type, row, meta) {
                            data = '<a href="StockUsageMemo.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                            return data;
                        }
                    }, null, null, null, null, null,
                    {
                        'data': 'docNo',
                        'render': function (data, type, row, meta) {
                            data = '<a href="StockUsageMemoPrint.aspx?PKey=' + row[0] + '"><i class="fa fa-print" style="font-size:24px"></i></a>';
                            return data;
                        }
                    }
                ]
            })
        });

        $(".btnFillter_StkUsageMemoList .btn").click(function () {
            var inputValue = $(this).find("input").val();
            var table = $('#StkUsageMemoListMasterPage').DataTable();
            table
                .column(5)
                .search(inputValue)
                .draw();
        });

        $('[id$="dt_DocDateStockUsageMemo"]').datepicker({
            format: 'dd/mm/yyyy',
            autoclose: true
        });


        $('[id$="btn_AddRow_StockAdj"]').click(function () {
            $("#mdlAddUOM").modal();
        });

        $(function () {
            $('#StockUsageMemoItemSearch').DataTable({
                'sAjaxSource': 'Utilities/DataModels.ashx?ID=GRNItemSearchList',
                'paging': true,
                'lengthChange': true,
                'searching': true,
                'ordering': true,
                'info': true,
                "iDisplayLength": 5,
                "bLengthChange": false,
                'autoWidth': true,
                language: {
                    searchPlaceholder: "Search By Item Code/Item Description/Item UOM/Item Brand/Link Code/Range"
                },
                'columns': [
                    null, null, null, null, null, null, null, null, null, null,
                    {
                        'data': null,
                        'render': function (data, type, row, meta) {
                            data = '<input type="number" style="width: 80%;" class="form-control" id="txtQty_StockUsageMemo" value="0" min="0" oninput="restrict(this);" onkeydown="javascript: return event.keyCode === 8 ||event.keyCode === 46 ? true : !isNaN(Number(event.key))">';
                            return data;
                        }
                    },
                    {
                        'data': null,
                        'render': function (data, type, row, meta) {
                            data = '<input type="number" style="width: 80%;" class="form-control" id="txtCost_StockUsageMemo" min="0" oninput="restrict(this);">';
                            return data;
                        }
                    },

                    {
                        'data': null,
                        'render': function (data, type, row, meta) {
                            //data = '<button type="button" class="btn btn-primary" id="btnAdd_GRN">Select</button>';
                            //data = '<i class="Add_ItemToStockAdj glyphicon glyphicon-ok"></i></a>';
                            data = '<a class="Add_ItemToStockUsageMemo btn btn-info btn-primary"><i class=" glyphicon glyphicon-hand-up"></i></a></p>';
                            return data;
                        }
                    }

                ],
                "columnDefs": [
                    {
                        "targets": [7],
                        "visible": false,
                        "searchable": false
                    },
                    {
                        "targets": [8],
                        "visible": false,
                        "searchable": false
                    },
                    {
                        "targets": [9],
                        "visible": false,
                        "searchable": false
                    }

                ],



            })

        });

        function valueInSTKADJTable(tableID, columnNum, searchString) {
            var found = false;
            $("#StockUsageMemoEntryModule tr").each(function () {
                var itemCode = $(this).find("td").eq(3).html();
                if (itemCode == searchString) {
                    found = true;
                    return false;
                }
            });

            return found;
        }


        $(document).on("click", ".Add_ItemToStockUsageMemo", function () {

            var rowIndex = $('#StockUsageMemoItemSearch tr').index($(this).closest('tr'));

            //var sData=$("#StockAdjItemSearch").dataTable().fnGetData(rowIndex);
            var currentRow = $(this).closest("tr");
            var sData = $('#StockUsageMemoItemSearch').DataTable().row(currentRow).data();
            //alert(sData[8]);

            var searchString = $('#StockUsageMemoItemSearch tr').eq(rowIndex).find('td:eq(0)').html();
            if (valueInSTKMemoTable('StockUsageMemoItemSearch', 0, searchString)) {
                alert("already Exists");
                return false;
            }

            var counter = 0;
            var newRow = $("<tr>");
            var cols = "";
            cols += '<td style="width: 0%;visibility:hidden;">' + "" + '</td>';
            cols += '<td style="width: 0%;visibility:hidden;">' + sData[7] + '</td>';
            cols += '<td>' + "" + '</td>';
            cols += '<td >' + $('#StockUsageMemoItemSearch tr').eq(rowIndex).find('td:eq(0)').html() + '</td>';
            cols += '<td>' + $('#StockUsageMemoItemSearch tr').eq(rowIndex).find('td:eq(1)').html() + '</td>';
            cols += '<td>' + $('#StockUsageMemoItemSearch tr').eq(rowIndex).find('td:eq(3)').html() + '</td>';
            cols += '<td>' + $('#StockUsageMemoItemSearch tr').eq(rowIndex).find('td:eq(5)').html() + '</td>';

            var table = document.getElementById("StockUsageMemoItemSearch");
            var row = table.rows[rowIndex];

            var qty = row.cells[7].children[0].value;
            var cost = row.cells[8].children[0].value;
            var Ucost = qty * cost;
            if (qty == "" || qty == "0") {
                alert("Qty is Invalid");
                return false;
            }
            if (cost == "") {
                alert("Cost is Empty");
                return false;
            }

            cols += '<td>' + cost + '</td>';

            cols += '<td>' + $('#StockUsageMemoItemSearch tr').eq(rowIndex).find('td:eq(2)').html() + '</td>';
            cols += '<td>' + qty + '</td>';
            cols += '<td>' + Ucost.toFixed(2) + '</td>';
            cols += '<td>' + "" + '</td>';
            cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="edit_AddItemToStockUsageMemo glyphicon glyphicon-pencil"></i></div></td>';
            cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Remove_AddItemToStockUsageMemo glyphicon glyphicon-trash"></i></div></td>';

            cols += '<td style="width: 0%;visibility:hidden;">' + sData[8] + '</td>';
            cols += '<td style="width: 0%;visibility:hidden;">' + sData[9] + '</td>';
            newRow.append(cols);
            $("#StockUsageMemoEntryModule").append(newRow);

            var _Total = 0;
            $('#StockUsageMemoEntryModule').find('tr').each(
                function (i) {
                    $('#StockUsageMemoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#StockUsageMemoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '') { _Total = parseFloat(_Total) + parseFloat($('#StockUsageMemoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                });
            $('[id$="txt_TotAmntStockUsageMemo"]').val(_Total.toFixed(2));
            counter++;
        });

        $(document).on("click", ".edit_AddItemToStockUsageMemo", function () {
            $("#mdlEditPriceGRN").modal();
            var rowIndex = $('#StockUsageMemoEntryModule tr').index($(this).closest('tr'));
            $("#mdlEditPriceGRN #lbl_Index_mdlEditPriceGRN").text(rowIndex);
            //alert($('#GRNReturnEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
            $("#mdlEditPriceGRN #txtQty_EditPriceGRN").val($('#StockUsageMemoEntryModule tr').eq(rowIndex).find('td:eq(9)').html());
            $("#mdlEditPriceGRN #txtRemark_EditPriceGRN").val($('#StockUsageMemoEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
            $("#mdlEditPriceGRN #txtPrice_EditPriceGRN").val($('#StockUsageMemoEntryModule tr').eq(rowIndex).find('td:eq(7)').html()).trigger();
        });

        $('[id$="btnSubmit_mdlEditPriceGRN"]').click(function () {

            var Qty = $('#txtQty_EditPriceGRN').val();
            var Cost = $('#txtPrice_EditPriceGRN').val();
            var remark = $('#txtRemark_EditPriceGRN').val();
            var Ucost = Qty * Cost;
            if (Qty == "") {
                alert("Qty is Empty");

                $("#mdlEditPriceGRN").modal();
                var rowIndex = $('#StockUsageMemoEntryModule tr').index($(this).closest('tr'));
                $("#mdlEditPriceGRN #lbl_Index_mdlEditPriceGRN").text(rowIndex);
                //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
                $("#mdlEditPriceGRN #txtQty_EditPriceGRN").val($('#StockUsageMemoEntryModule tr').eq(rowIndex).find('td:eq(9)').html());
                $("#mdlEditPriceGRN #txtRemark_EditPriceGRN").val(remark);
                $("#mdlEditPriceGRN #txtPrice_EditPriceGRN").val(Cost).trigger();

                return false
            }
            if (Cost == "") {
                alert("Cost is Empty");

                $("#mdlEditPriceGRN").modal();
                var rowIndex = $('#StockUsageMemoEntryModule tr').index($(this).closest('tr'));
                $("#mdlEditPriceGRN #lbl_Index_mdlEditPriceGRN").text(rowIndex);
                //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
                $("#mdlEditPriceGRN #txtQty_EditPriceGRN").val(Qty);
                $("#mdlEditPriceGRN #txtRemark_EditPriceGRN").val(remark);
                $("#mdlEditPriceGRN #txtPrice_EditPriceGRN").val($('#StockUsageMemoEntryModule tr').eq(rowIndex).find('td:eq(7)').html()).trigger();

                return false
            }

            var Index = $('#lbl_Index_mdlEditPriceGRN').text();
            $('#StockUsageMemoEntryModule tr').eq(Index).find('td:eq(9)').html($('#txtQty_EditPriceGRN').val().replace("'", ""));
            $('#StockUsageMemoEntryModule tr').eq(Index).find('td:eq(7)').html($('#txtPrice_EditPriceGRN').val().replace("'", ""));
            $('#StockUsageMemoEntryModule tr').eq(Index).find('td:eq(10)').html(Ucost.toFixed(2));
            $('#StockUsageMemoEntryModule tr').eq(Index).find('td:eq(11)').html($('#txtRemark_EditPriceGRN').val().replace("'", ""));
            $("#mdlEditPriceGRN").modal('hide');

            var _Total = 0;
            $('#StockUsageMemoEntryModule').find('tr').each(
                function (i) {
                    $('#StockUsageMemoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#StockUsageMemoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '') { _Total = parseFloat(_Total) + parseFloat($('#StockUsageMemoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                });
            $('[id$="txt_TotAmntStockUsageMemo"]').val(_Total.toFixed(2));

        });




        $(document).on("click", ".Remove_AddItemToStockUsageMemo", function () {
            var rowIndex = $('#StockUsageMemoEntryModule tr').index($(this).closest('tr'));
            $(this).closest("tr").remove();
            var _Total = 0;
            $('#StockUsageMemoEntryModule').find('tr').each(
                function (i) {
                    $('#StockUsageMemoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#StockUsageMemoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '') { _Total = parseFloat(_Total) + parseFloat($('#StockUsageMemoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                });
            $('[id$="txt_TotAmntStockAdj"]').val(_Total.toFixed(2));

        });

        $(document).on("click", ".Remove_AddItemToStockUsageMemoAfterSave", function () {
            var rowIndex = $('#StockUsageMemoEntryModule tr').index($(this).closest('tr'));


            var StkMovdocDtl = [];
            var StkMovdocDtlobj = {};
            var rows = $('#StockUsageMemoEntryModule tbody >tr');
            var columns;
            columns = $(rows[rowIndex]).find('td');
            StkMovdocDtlobj.docId = $(columns[0]).html();
            StkMovdocDtl.push(StkMovdocDtlobj);
            $.ajax({
                type: "POST",
                url: "StockUsageMemo.aspx/DelStkMovdocDtlsData",
                data: '{ Details :' + JSON.stringify(StkMovdocDtl) + '}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: false,
                success: function (r) {
                    //   alert(r.d);
                    successResult = "True";
                },
                error: function (data, errorThrown) {
                    successResult = "False";
                }
            });

            $(this).closest("tr").remove();
            var _Total = 0;
            $('#StockUsageMemoEntryModule').find('tr').each(
                function (i) {
                    $('#StockUsageMemoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#StockUsageMemoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '') { _Total = parseFloat(_Total) + parseFloat($('#StockUsageMemoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                });
            $('[id$="txt_TotAmntStockUsageMemo"]').val(_Total.toFixed(2));

        });

        function valueInSTKMemoTable(tableID, columnNum, searchString) {
            var found = false;
            $("#StockUsageMemoEntryModule tr").each(function () {
                var itemCode = $(this).find("td").eq(3).html();
                if (itemCode == searchString) {
                    found = true;
                    return false;
                }
            });

            return found;
        }



        $('[id$="btnSubmit_AddStockUsageMemo"]').click(function () {
            this.disabled = true;
            var StkMovdocHdrdetails = [];
            var StkMovdocHdrsobj = {};

            StkMovdocHdrsobj.docNo = $('[id$="txtDocNo_StockUsageMemo"]').val();
            //alert($('[id$="txtDocNo_GRN"]').val());
            StkMovdocHdrsobj.movCode = "SUM";
            StkMovdocHdrsobj.movType = "SUM";
            StkMovdocHdrsobj.storeNo = $('[id$="ddlStoreCode_StockUsageMemo"]').val();
            StkMovdocHdrsobj.fstoreNo = null;
            StkMovdocHdrsobj.tstoreNo = null;
            //var itemName = $('[id$="txt_StockName"]').val();;
            StkMovdocHdrsobj.supplyNo = null;
            StkMovdocHdrsobj.docRef1 = $('[id$="txtPO1Ref_StockUsageMemo"]').val();
            StkMovdocHdrsobj.docRef2 = $('[id$="txtGrn1Ref_StockUsageMemo"]').val();
            StkMovdocHdrsobj.accCode = null;
            StkMovdocHdrsobj.staffNo = $('[id$="ddlCreatedBy_StockUsageMemo"]').val();
            var tablerows = $('#StockUsageMemoEntryModule tbody >tr');
            StkMovdocHdrsobj.docLines = tablerows.length - 1;
            var DocDate = $('[id$="dt_DocDateStockUsageMemo"]').val();
            if (DocDate == "") {
                StkMovdocHdrsobj.docDate = null;
            }
            else {
                StkMovdocHdrsobj.docDate = DocDate.split("/").reverse().join("/")
            }

            //StkMovdocHdrsobj.docDate = $('[id$="dt_DocDateGRN"]').val();
            StkMovdocHdrsobj.postDate = null;
            //StkMovdocHdrsobj.postDate = $('[id$="dt_DocDateGRN"]').val();
            StkMovdocHdrsobj.docStatus = "0";
            StkMovdocHdrsobj.docTerm = null;
            StkMovdocHdrsobj.docTime = null;
            StkMovdocHdrsobj.docQty = null;
            StkMovdocHdrsobj.docFoc = null;
            StkMovdocHdrsobj.docDisc = null;
            StkMovdocHdrsobj.docAmt = $('[id$="txt_TotAmntStockUsageMemo"]').val();
            StkMovdocHdrsobj.docTrnspt = "0";
            StkMovdocHdrsobj.docTax = "0";
            StkMovdocHdrsobj.docAttn = null;
            StkMovdocHdrsobj.docRemk1 = $('[id$="txtRemark_StockUsageMemo"]').val();
            StkMovdocHdrsobj.docRemk2 = null;
            StkMovdocHdrsobj.docRemk3 = null;
            StkMovdocHdrsobj.docShip = null;
            StkMovdocHdrsobj.bname = null;
            StkMovdocHdrsobj.baddr1 = null;
            StkMovdocHdrsobj.baddr2 = null;
            StkMovdocHdrsobj.baddr3 = null;
            StkMovdocHdrsobj.bpostcode = null;
            StkMovdocHdrsobj.bstate = null;
            StkMovdocHdrsobj.bcity = null;
            StkMovdocHdrsobj.bcountry = null;
            StkMovdocHdrsobj.daddr1 = null;
            StkMovdocHdrsobj.daddr2 = null;
            StkMovdocHdrsobj.daddr3 = null;
            StkMovdocHdrsobj.dpostcode = null;
            StkMovdocHdrsobj.dstate = null;
            StkMovdocHdrsobj.dcity = null;
            StkMovdocHdrsobj.dcountry = null;
            StkMovdocHdrsobj.cancelQty = "0";
            StkMovdocHdrsobj.recStatus = "0";
            if (DocDate == "") {
                StkMovdocHdrsobj.recExpect = null;
            }
            else {
                StkMovdocHdrsobj.recExpect = DocDate.split("/").reverse().join("/")
            }
            //StkMovdocHdrsobj.recExpect = $('[id$="dt_DocDateGRN"]').val();
            StkMovdocHdrsobj.recTtl = "0";
            StkMovdocHdrsobj.createUser = null;
            StkMovdocHdrsobj.createDate = null;
            StkMovdocHdrsobj.phyNo = null;
            StkMovdocHdrdetails.push(StkMovdocHdrsobj);

            if (StkMovdocHdrsobj.storeNo == "") {
                alert("Store Code is Empty");
                return false;
            }
            //if (StkMovdocHdrsobj.supplyNo == "") {
            //    alert("Supply No is Empty");
            //    return false;
            //}
            if (StkMovdocHdrsobj.staffNo == "") {
                alert("Created By is Empty");
                return false;
            }


            if (tablerows.length == 1) {
                alert("Pls Add Item");
                return false;
            }

            var successResult;
            var btnTextGRN = $('[id$="btnSubmit_AddStockUsageMemo"]').text();
            if (btnTextGRN == "Add") {
                $.ajax({
                    type: "POST",
                    url: "StockUsageMemo.aspx/AddStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                        //   alert(r.d);
                        successResult = "True";
                    },
                    error: function (data, errorThrown) {
                        successResult = "False";
                    }
                });

                var details = [];
                var details1 = [];

                var rows = $('#StockUsageMemoEntryModule tbody >tr');
                var GRNEntryrows = $('#StockUsageMemoEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_StockUsageMemo"]').val();
                    obj.movCode = "SUM";
                    obj.movType = "SUM";
                    obj.docLineno = $(columns[2]).html();
                    if (DocDate == "") {
                        obj.docDate = null;
                    }
                    else {
                        obj.docDate = DocDate.split("/").reverse().join("/")
                    }
                    //obj.docDate = $('[id$="dt_DocDateGRN"]').val();
                    obj.grnNo = null;
                    obj.refNo = null;
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();

                    if (DocDate == "") {
                        obj.docExpdate = null;
                    }
                    else {
                        obj.docExpdate = DocDate.split("/").reverse().join("/")
                    }
                    //obj.docExpdate = $('[id$="dt_DocDateGRN"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
                    details.push(obj);
                }

                $.ajax({
                    type: "POST",
                    url: "StockUsageMemo.aspx/AddStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                        //   alert(r.d);
                        successResult = "True";
                    },
                    error: function (data, errorThrown) {
                        successResult = "False";
                    }
                });

            }
            else {

                $.ajax({
                    type: "POST",
                    url: "StockUsageMemo.aspx/EditStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                        //   alert(r.d);
                        successResult = "True";
                    },
                    error: function (data, errorThrown) {
                        successResult = "False";
                    }
                });


                var details = [];
                var rows = $('#StockUsageMemoEntryModule tbody >tr');
                var GRNEntryrows = $('#StockUsageMemoEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_StockUsageMemo"]').val();
                    obj.movCode = "SUM";
                    obj.movType = "SUM";
                    obj.docLineno = $(columns[2]).html();
                    if (DocDate == "") {
                        obj.docDate = null;
                    }
                    else {
                        obj.docDate = DocDate.split("/").reverse().join("/")
                    }
                    //obj.docDate = $('[id$="dt_DocDateGRN"]').val();
                    obj.grnNo = null;
                    obj.refNo = null;
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();
                    if (DocDate == "") {
                        obj.docDate = null;
                    }
                    else {
                        obj.docExpdate = DocDate.split("/").reverse().join("/")
                    }
                    //obj.docExpdate = $('[id$="dt_DocDateGRN"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
                    obj.docId = $(columns[0]).html();
                    details.push(obj);
                }

                $.ajax({
                    type: "POST",
                    url: "StockUsageMemo.aspx/EditStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                        //   alert(r.d);
                        successResult = "True";
                    },
                    error: function (data, errorThrown) {
                        successResult = "False";
                    }
                });
            }
            $(location).attr('href', "StkUsageMemoList.aspx");
            //if (successResult == "True") {
            //    $('[id$="btnSubmit_PostGRN"]').prop('disabled', false);
            //    $('[id$="btnSubmit_AddGRN"]').prop('disabled', true);
            //    //$(location).attr('href',"ItemMasterList.aspx");
            //    alert("Data Saved Successfully");
            //}

        });

        $('[id$="btnSubmit_PostStockUsageMemo"]').click(function () {
            this.disabled = true;
            var StkMovdocHdrdetails = [];
            var StkMovdocHdrsobj = {};

            StkMovdocHdrsobj.docNo = $('[id$="txtDocNo_StockUsageMemo"]').val();
            //alert($('[id$="txtDocNo_GRN"]').val());
            StkMovdocHdrsobj.movCode = "SUM";
            StkMovdocHdrsobj.movType = "SUM";
            StkMovdocHdrsobj.storeNo = $('[id$="ddlStoreCode_StockUsageMemo"]').val();
            StkMovdocHdrsobj.fstoreNo = null;
            StkMovdocHdrsobj.tstoreNo = null;
            //var itemName = $('[id$="txt_StockName"]').val();;
            StkMovdocHdrsobj.supplyNo = null;
            StkMovdocHdrsobj.docRef1 = $('[id$="txtPO1Ref_StockUsageMemo"]').val();
            StkMovdocHdrsobj.docRef2 = $('[id$="txtGrn1Ref_StockUsageMemo"]').val();
            StkMovdocHdrsobj.accCode = null;
            StkMovdocHdrsobj.staffNo = $('[id$="ddlCreatedBy_StockUsageMemo"]').val();
            var tablerows = $('#StockUsageMemoEntryModule tbody >tr');
            StkMovdocHdrsobj.docLines = tablerows.length - 1;
            var DocDate = $('[id$="dt_DocDateStockUsageMemo"]').val();
            if (DocDate == "") {
                StkMovdocHdrsobj.docDate = null;
            }
            else {
                StkMovdocHdrsobj.docDate = DocDate.split("/").reverse().join("/")
            }

            //StkMovdocHdrsobj.docDate = $('[id$="dt_DocDateGRN"]').val();
            var d = new Date();
            StkMovdocHdrsobj.postDate = d.getFullYear() + "/" + (d.getMonth() + 1) + '/' + d.getDate();
            //StkMovdocHdrsobj.postDate = $('[id$="dt_DocDateGRN"]').val();
            StkMovdocHdrsobj.docStatus = "7";
            StkMovdocHdrsobj.docTerm = null;
            StkMovdocHdrsobj.docTime = null;
            StkMovdocHdrsobj.docQty = null;
            StkMovdocHdrsobj.docFoc = null;
            StkMovdocHdrsobj.docDisc = null;
            StkMovdocHdrsobj.docAmt = $('[id$="txt_TotAmntStockUsageMemo"]').val();
            StkMovdocHdrsobj.docTrnspt = "0";
            StkMovdocHdrsobj.docTax = "0";
            StkMovdocHdrsobj.docAttn = null;
            StkMovdocHdrsobj.docRemk1 = $('[id$="txtRemark_StockUsageMemo"]').val();
            StkMovdocHdrsobj.docRemk2 = null;
            StkMovdocHdrsobj.docRemk3 = null;
            StkMovdocHdrsobj.docShip = null;
            StkMovdocHdrsobj.bname = null;
            StkMovdocHdrsobj.baddr1 = null;
            StkMovdocHdrsobj.baddr2 = null;
            StkMovdocHdrsobj.baddr3 = null;
            StkMovdocHdrsobj.bpostcode = null;
            StkMovdocHdrsobj.bstate = null;
            StkMovdocHdrsobj.bcity = null;
            StkMovdocHdrsobj.bcountry = null;
            StkMovdocHdrsobj.daddr1 = null;
            StkMovdocHdrsobj.daddr2 = null;
            StkMovdocHdrsobj.daddr3 = null;
            StkMovdocHdrsobj.dpostcode = null;
            StkMovdocHdrsobj.dstate = null;
            StkMovdocHdrsobj.dcity = null;
            StkMovdocHdrsobj.dcountry = null;
            StkMovdocHdrsobj.cancelQty = "0";
            StkMovdocHdrsobj.recStatus = "1";
            if (DocDate == "") {
                StkMovdocHdrsobj.recExpect = null;
            }
            else {
                StkMovdocHdrsobj.recExpect = DocDate.split("/").reverse().join("/")
            }
            //StkMovdocHdrsobj.recExpect = $('[id$="dt_DocDateGRN"]').val();
            StkMovdocHdrsobj.recTtl = "0";
            StkMovdocHdrsobj.createUser = null;
            StkMovdocHdrsobj.createDate = null;
            StkMovdocHdrsobj.phyNo = null;
            StkMovdocHdrdetails.push(StkMovdocHdrsobj);

            if (StkMovdocHdrsobj.storeNo == "") {
                alert("Store Code is Empty");
                return false;
            }
            //if (StkMovdocHdrsobj.supplyNo == "") {
            //    alert("Supply No is Empty");
            //    return false;
            //}
            if (StkMovdocHdrsobj.staffNo == "") {
                alert("Created By is Empty");
                return false;
            }


            if (tablerows.length == 1) {
                alert("Pls Add Item");
                return false;
            }


            var btnTextGRN = $('[id$="btnSubmit_AddStockUsageMemo"]').text();
            var successResult;

            $.ajax({
                type: "POST",
                url: "StockUsageMemo.aspx/EditStkMovdocHdrsData",
                data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    //   alert(r.d);
                    successResult = "True";
                },
                error: function (data, errorThrown) {
                    successResult = "False";
                }
            });


            var details = [];
            var stkdetails = [];

            var rows = $('#StockUsageMemoEntryModule tbody >tr');
            var GRNEntryrows = $('#StockUsageMemoEntryModule tbody >tr');
            var columns;
            for (var i = 1; i < rows.length; i++) {
                columns = $(rows[i]).find('td');
                var obj = {};
                obj.docNo = $('[id$="txtDocNo_StockUsageMemo"]').val();
                obj.movCode = "SUM";
                obj.movType = "SUM";
                obj.docLineno = $(columns[2]).html();
                if (DocDate == "") {
                    obj.docDate = null;
                }
                else {
                    obj.docDate = DocDate.split("/").reverse().join("/")
                }
                //obj.docDate = $('[id$="dt_DocDateGRN"]').val();
                obj.grnNo = null;
                obj.refNo = null;
                obj.itemcode = $(columns[3]).html();
                obj.itemdesc = $(columns[4]).html();
                obj.itemprice = "0";
                obj.docUomtype = null;
                obj.docUomqty = null;
                obj.docQty = $(columns[9]).html();
                obj.docFocqty = "0";
                obj.docTtlqty = $(columns[9]).html();
                obj.docPrice = $(columns[7]).html();
                obj.docMdisc = "0";
                obj.docPdisc = "0";
                obj.docDisc = "0";
                obj.docAmt = $(columns[10]).html();
                obj.recQty1 = null;
                obj.recQty2 = null;
                obj.recQty3 = null;
                obj.recQty5 = null;
                obj.recTtl = "0";
                obj.postedQty = null;
                obj.cancelQty = null;
                obj.ordMemo1 = null;
                obj.ordMemo2 = null;
                obj.ordMemo3 = null;
                obj.ordMemo4 = null;
                obj.createUser = null;
                obj.createDate = null;
                obj.docUom = $(columns[1]).html();

                if (DocDate == "") {
                    obj.docExpdate = null;
                }
                else {
                    obj.docExpdate = DocDate.split("/").reverse().join("/")
                }
                //obj.docExpdate = $('[id$="dt_DocDateGRN"]').val();
                obj.docBatchNo = "";
                obj.phyNo = null;
                obj.itmBrand = $(columns[14]).html();
                obj.itmRange = $(columns[15]).html();
                obj.itmBrandDesc = $(columns[5]).html();
                obj.itmRangeDesc = $(columns[6]).html();
                obj.DOCUOMDesc = $(columns[8]).html();
                obj.stkAdjReasonCode = null;
                obj.itemRemark = $(columns[11]).html();
                obj.docId = $(columns[0]).html();
                details.push(obj);



                var stktrnobj = {};
                var d1 = new Date();
                stktrnobj.trnPost = d1.getFullYear() + "/" + (d1.getMonth() + 1) + '/' + d1.getDate();
                if (DocDate == "") {
                    stktrnobj.trnDate = null;
                }
                else {
                    stktrnobj.trnDate = DocDate.split("/").reverse().join("/")
                }
                stktrnobj.trnNo = null;
                var today = new Date();
                var str1 = ('0' + today.getHours()).substr(-2) + "" + ('0' + today.getMinutes()).substr(-2) + "" + ('0' + today.getSeconds()).substr(-2);
                stktrnobj.postTime = str1;
                stktrnobj.aperiod = null;
                stktrnobj.itemcode = $(columns[3]).html() + "0000";
                stktrnobj.storeNo = $('[id$="ddlStoreCode_StockUsageMemo"]').val();
                stktrnobj.tstoreNo = null;
                stktrnobj.fstoreNo = null;
                stktrnobj.trnDocno = $('[id$="txtDocNo_StockUsageMemo"]').val();
                stktrnobj.trnType = "SUM";
                stktrnobj.trnDbQty = null;
                stktrnobj.trnCrQty = null;
                stktrnobj.trnQty = $(columns[9]).html() * (-1);
                stktrnobj.trnBalqty = $(columns[9]).html() * (-1);
                stktrnobj.trnBalcst = $(columns[10]).html() * (-1);
                stktrnobj.trnAmt = $(columns[10]).html() * (-1);
                stktrnobj.trnCost = $(columns[10]).html() * (-1);
                stktrnobj.trnRef = null;
                stktrnobj.hqUpdate = false;
                stktrnobj.lineNo = $(columns[2]).html();
                stktrnobj.itemUom = $(columns[1]).html();
                stktrnobj.itemBatch = "";
                stktrnobj.movType = "SUM";
                stktrnobj.itemBatchCost = $(columns[7]).html();
                stktrnobj.stockIn = null;
                stktrnobj.transPackageLineNo = null;
                stkdetails.push(stktrnobj);

            }

            $.ajax({
                type: "POST",
                url: "StockUsageMemo.aspx/EditStkMovdocDtlsData",
                data: '{ Details :' + JSON.stringify(details) + '}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    //   alert(r.d);
                    successResult = "True";
                },
                error: function (data, errorThrown) {
                    successResult = "False";
                }
            });

            $.ajax({
                type: "POST",
                url: "StockUsageMemo.aspx/AddStktrnsData",
                data: '{ Details :' + JSON.stringify(stkdetails) + '}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    //   alert(r.d);
                    successResult = "True";
                },
                error: function (data, errorThrown) {
                    successResult = "False";
                }
            });

            $(location).attr('href', "StkUsageMemoList.aspx");

        });

        $('[id$="btnSubmit_ListStockUsageMemo"]').click(function () {
            $(location).attr('href', "StkUsageMemoList.aspx");

        });


        //adj

        $(function () {
                $('#StockAdjMasterPage').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=ListWithoutSupplier&PKey=ADJ',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Invoice Number/ Invoice Date/ Ref Num / Supplier / Total Amount/ Status is currently active"
                    },
                    'columns': [
                        {
                          'data': 'docNo',
                          'render': function (data, type, row, meta) {
                              data = '<a href="StockAdj.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null, null, null, null, null,
                        {
                            'data': 'docNo',
                            'render': function (data, type, row, meta) {
                                data = '<a href="StockADJPrint.aspx?PKey=' + row[0] + '"><i class="fa fa-print" style="font-size:24px"></i></a>';
                                return data;
                            }
                        }
                      ]
                })
            });

            $(".btnFillter_StockAdjListMaster .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#StockAdjMasterPage').DataTable();
        table
            .column(5)
            .search(inputValue)
            .draw();
        });

         $('[id$="dt_DocDateStockAdj"]').datepicker({
        format: 'dd/mm/yyyy',
        autoclose: true
        });

        $('[id$="dt_DeliveryDateStockAdj"]').datepicker({
        format: 'dd/mm/yyyy',
        autoclose: true
        });

         $('[id$="btn_AddRow_StockAdj"]').click(function () {
        $("#mdlAddUOM").modal();
            });

        $(function () {
                $('#StockAdjItemSearch').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=GRNItemSearchList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    "iDisplayLength": 5,
                     "bLengthChange": false,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Item Code/Item Description/Item UOM/Item Brand/Link Code/Range"
                    },
                    'columns': [
                        null, null, null, null, null, null, null,null, null, null,
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtQty_StockAdj" value="1" min="0" pattern="[0-9]" onkeypress="return !(event.charCode == 46)" >';
                              return data;
                          }
                        },
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtCost_StockAdj" min="0" oninput="restrict1(this);">';
                              return data;
                          }
                        },

                        {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              //data = '<button type="button" class="btn btn-primary" id="btnAdd_GRN">Select</button>';
                              //data = '<i class="Add_ItemToStockAdj glyphicon glyphicon-ok"></i></a>';
                              data = '<a class="Add_ItemToStockAdj btn btn-info btn-primary"><i class=" glyphicon glyphicon-hand-up"></i></a></p>';
                              return data;
                          }
                        }

                    ],
                     "columnDefs": [
                         {
                               "targets": [ 7 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 8 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 9 ],
                               "visible": false,
                               "searchable": false               
                         }

                    ],  



                })

        });

        function valueInSTKADJTable(tableID, columnNum, searchString) {
            var found = false;
            $("#StockAdjEntryModule tr").each(function () {
                var itemCode = $(this).find("td").eq(3).html();
                if (itemCode == searchString) {
                    found = true;
                    return false;
                }
            });

            return found;
        }


            $(document).on("click", ".Add_ItemToStockAdj", function () {

                var rowIndex = $('#StockAdjItemSearch tr').index($(this).closest('tr'));

                //var sData=$("#StockAdjItemSearch").dataTable().fnGetData(rowIndex);
                var currentRow = $(this).closest("tr");
                var sData = $('#StockAdjItemSearch').DataTable().row(currentRow).data();
                //alert(sData[8]);

            var searchString = $('#StockAdjItemSearch tr').eq(rowIndex).find('td:eq(0)').html();
                if (valueInSTKADJTable('StockAdjItemSearch', 0, searchString)) { 
                alert("already Exists");
                return false;
            }    
                   
            var counter = 0;
            var newRow = $("<tr>");
                var cols = "";
                cols += '<td style="width: 0%;visibility:hidden;">' + "" + '</td>';
                cols += '<td style="width: 0%;visibility:hidden;">' + sData[7] + '</td>';
                cols += '<td>' + "" + '</td>';
                cols += '<td >' + $('#StockAdjItemSearch tr').eq(rowIndex).find('td:eq(0)').html() + '</td>';
                cols += '<td>' + $('#StockAdjItemSearch tr').eq(rowIndex).find('td:eq(1)').html() + '</td>';
                cols += '<td>' + $('#StockAdjItemSearch tr').eq(rowIndex).find('td:eq(3)').html() + '</td>';
                cols += '<td>' + $('#StockAdjItemSearch tr').eq(rowIndex).find('td:eq(5)').html() + '</td>';

                var table = document.getElementById("StockAdjItemSearch");
                var row = table.rows[rowIndex];

                var qty = row.cells[7].children[0].value;
                var cost =row.cells[8].children[0].value;
                var Ucost = qty * cost;
                if (qty == "" || qty == "0") {
                    alert("Qty is Invalid");
                    return false;
                }
                if (cost=="") {
                    alert("Cost is Empty");
                    return false;
                }

                cols += '<td>' + cost + '</td>';

                cols += '<td>' + $('#StockAdjItemSearch tr').eq(rowIndex).find('td:eq(2)').html() + '</td>';
                cols += '<td>' + qty + '</td>';
                cols += '<td>' + Ucost.toFixed(2) + '</td>';
                cols += '<td>' + "" + '</td>';
                cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="edit_AddItemToStockAdj glyphicon glyphicon-pencil"></i></div></td>';
                cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Remove_AddItemToStockAdj glyphicon glyphicon-trash"></i></div></td>';
                
                cols += '<td style="width: 0%;visibility:hidden;">' + sData[8] + '</td>';
                cols += '<td style="width: 0%;visibility:hidden;">' + sData[9] + '</td>';
                newRow.append(cols);
                $("#StockAdjEntryModule").append(newRow);

                var _Total = 0;
                $('#StockAdjEntryModule').find('tr').each(
                function (i) {
                    $('#StockAdjEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#StockAdjEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#StockAdjEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
                $('[id$="txt_TotAmntStockAdj"]').val(_Total.toFixed(2));
                counter++;
        });

        $(document).on("click", ".edit_AddItemToStockAdj", function () {
        $("#mdlEditPriceADJ").modal();
        var rowIndex = $('#StockAdjEntryModule tr').index($(this).closest('tr'));
            $("#mdlEditPriceADJ #lbl_Index_mdlEditPriceADJ").text(rowIndex);
            //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
            $("#mdlEditPriceADJ #txtQty_EditPriceADJ").val($('#StockAdjEntryModule tr').eq(rowIndex).find('td:eq(9)').html());
            $("#mdlEditPriceADJ #txtRemark_EditPriceADJ").val($('#StockAdjEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
            $("#mdlEditPriceADJ #txtPrice_EditPriceADJ").val($('#StockAdjEntryModule tr').eq(rowIndex).find('td:eq(7)').html()).trigger();
        });

        $('[id$="btnSubmit_mdlEditPriceADJ"]').click(function () {

            var Qty = $('#txtQty_EditPriceADJ').val();
            var Cost = $('#txtPrice_EditPriceADJ').val();
            var remark = $('#txtRemark_EditPriceADJ').val();
            if (Qty == "") {
                alert("Qty is Empty");

                $("#mdlEditPriceADJ").modal();
                var rowIndex = $('#StockAdjEntryModule tr').index($(this).closest('tr'));
                $("#mdlEditPriceADJ #lbl_Index_mdlEditPriceADJ").text(rowIndex);
                //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
                $("#mdlEditPriceADJ #txtQty_EditPriceADJ").val($('#StockAdjEntryModule tr').eq(rowIndex).find('td:eq(9)').html());
                $("#mdlEditPriceADJ #txtRemark_EditPriceADJ").val(remark);
                $("#mdlEditPriceADJ #txtPrice_EditPriceADJ").val(Cost).trigger();

                return false
            }
            if (Cost == "") {
                alert("Cost is Empty");

                $("#mdlEditPriceADJ").modal();
                var rowIndex = $('#StockAdjEntryModule tr').index($(this).closest('tr'));
                $("#mdlEditPriceADJ #lbl_Index_mdlEditPriceADJ").text(rowIndex);
                //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
                $("#mdlEditPriceADJ #txtQty_EditPriceADJ").val(Qty);
                $("#mdlEditPriceADJ #txtRemark_EditPriceADJ").val(remark);
                $("#mdlEditPriceADJ #txtPrice_EditPriceADJ").val($('#StockAdjEntryModule tr').eq(rowIndex).find('td:eq(7)').html()).trigger();

                return false
            }

            var Index = $('#lbl_Index_mdlEditPriceADJ').text();
            $('#StockAdjEntryModule tr').eq(Index).find('td:eq(9)').html($('#txtQty_EditPriceADJ').val().replace("'", ""));
            $('#StockAdjEntryModule tr').eq(Index).find('td:eq(7)').html($('#txtPrice_EditPriceADJ').val().replace("'", ""));
            $('#StockAdjEntryModule tr').eq(Index).find('td:eq(10)').html($('#txtQty_EditPriceADJ').val().replace("'", "") * $('#txtPrice_EditPriceADJ').val().replace("'", ""));
            $('#StockAdjEntryModule tr').eq(Index).find('td:eq(11)').html($('#txtRemark_EditPriceADJ').val().replace("'", ""));
            $("#mdlEditPriceADJ").modal('hide');

            var _Total = 0;
                $('#StockAdjEntryModule').find('tr').each(
                function (i) {
                    $('#StockAdjEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#StockAdjEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#StockAdjEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
            $('[id$="txt_TotAmntStockAdj"]').val(_Total.toFixed(2));

        });



         $(document).on("click", ".Remove_AddItemToStockAdj", function () {
        var rowIndex = $('#StockAdjEntryModule tr').index($(this).closest('tr'));
             $(this).closest("tr").remove();
             var _Total = 0;
                $('#StockAdjEntryModule').find('tr').each(
                function (i) {
                    $('#StockAdjEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#StockAdjEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#StockAdjEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
                $('[id$="txt_TotAmntStockAdj"]').val(_Total.toFixed(2));

        });

        $(document).on("click", ".Remove_AddItemToStockAdjAfterSave", function () {
        var rowIndex = $('#StockAdjEntryModule tr').index($(this).closest('tr'));
             

            var StkMovdocDtl = [];
            var StkMovdocDtlobj = {};
            var rows = $('#StockAdjEntryModule tbody >tr');
            var columns;
            columns = $(rows[rowIndex]).find('td');
            StkMovdocDtlobj.docId = $(columns[0]).html();
            StkMovdocDtl.push(StkMovdocDtlobj);
             $.ajax({
                    type: "POST",
                    url: "StockAdj.aspx/DelStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocDtl) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

            $(this).closest("tr").remove();
             var _Total = 0;
                $('#StockAdjEntryModule').find('tr').each(
                function (i) {
                    $('#StockAdjEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#StockAdjEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#StockAdjEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
                $('[id$="txt_TotAmntStockAdj"]').val(_Total.toFixed(2));

            });

        function valueInStockAdjTable(tableID, columnNum, searchString)
            {
                var found = false;
                $("#StockAdjEntryModule tr").each(function () {
                var itemCode = $(this).find("td").eq(3).html();
                if (itemCode == searchString)
                    {
                        found = true;
                        return false;
                    }
             });

                return found;
        }



              $('[id$="btnSubmit_AddStockAdj"]').click(function () {
                  this.disabled = true;
                //  $.ajax({
                //type: 'POST',
                //url: 'Utilities/DataModels.ashx?ID=GetControlNo&PKey=Adjustment Stock',
                //dataType: "json",
                //Cache: false,
                //success: function (data) {
                //    var JsonArray = JSON.stringify(data);
                //    var Json = JSON.parse(JsonArray);
                //    $('[id$="txtDocNo_StockAdj"]').val(Json.aaData[0][0] + Json.aaData[0][1] + + Json.aaData[0][2]);
                //    }
                //  });

                var StkMovdocHdrdetails = [];
                  var StkMovdocHdrsobj = {};
                  
                  StkMovdocHdrsobj.docNo = $('[id$="txtDocNo_StockAdj"]').val();
                  //alert($('[id$="txtDocNo_GRN"]').val());
                StkMovdocHdrsobj.movCode = "ADJ";
                StkMovdocHdrsobj.movType = "ADJ";
                StkMovdocHdrsobj.storeNo = $('[id$="ddlStoreCode_StockAdj"]').val();
                StkMovdocHdrsobj.fstoreNo = null;
                StkMovdocHdrsobj.tstoreNo = null;
                //var itemName = $('[id$="txt_StockName"]').val();;
                StkMovdocHdrsobj.supplyNo = null;
                StkMovdocHdrsobj.docRef1 = $('[id$="txtPO1Ref_StockAdj"]').val();
                StkMovdocHdrsobj.docRef2 = $('[id$="txtGrn1Ref_StockAdj"]').val();
                StkMovdocHdrsobj.accCode = null;
                  StkMovdocHdrsobj.staffNo = $('[id$="ddlCreatedBy_StockAdj"]').val();
                  var tablerows = $('#StockAdjEntryModule tbody >tr');
                  StkMovdocHdrsobj.docLines = tablerows.length-1;
                  var DocDate = $('[id$="dt_DocDateStockAdj"]').val();
                  if (DocDate == "") {
                    StkMovdocHdrsobj.docDate = null;
                }
                else {
                    StkMovdocHdrsobj.docDate = DocDate.split("/").reverse().join("/")
                  }

                //StkMovdocHdrsobj.docDate = $('[id$="dt_DocDateGRN"]').val();
                StkMovdocHdrsobj.postDate = null;
                //StkMovdocHdrsobj.postDate = $('[id$="dt_DocDateGRN"]').val();
                StkMovdocHdrsobj.docStatus = "0";
                StkMovdocHdrsobj.docTerm = null;
                StkMovdocHdrsobj.docTime = null;
                StkMovdocHdrsobj.docQty = null;
                StkMovdocHdrsobj.docFoc = null;
                StkMovdocHdrsobj.docDisc = null;
                StkMovdocHdrsobj.docAmt = $('[id$="txt_TotAmntStockAdj"]').val();
                StkMovdocHdrsobj.docTrnspt = "0";
                StkMovdocHdrsobj.docTax = "0";
                StkMovdocHdrsobj.docAttn = null;
                StkMovdocHdrsobj.docRemk1 = $('[id$="txtRemark_StockAdj"]').val();
                StkMovdocHdrsobj.docRemk2 = null;
                StkMovdocHdrsobj.docRemk3 = null;
                StkMovdocHdrsobj.docShip = null;
                StkMovdocHdrsobj.bname = null;
                StkMovdocHdrsobj.baddr1 = null;
                StkMovdocHdrsobj.baddr2 = null;
                StkMovdocHdrsobj.baddr3 = null;
                StkMovdocHdrsobj.bpostcode = null;
                StkMovdocHdrsobj.bstate = null;
                StkMovdocHdrsobj.bcity = null;
                StkMovdocHdrsobj.bcountry =null;
                StkMovdocHdrsobj.daddr1 = null;
                StkMovdocHdrsobj.daddr2 = null;
                StkMovdocHdrsobj.daddr3 = null;
                StkMovdocHdrsobj.dpostcode = null;
                StkMovdocHdrsobj.dstate = null;
                StkMovdocHdrsobj.dcity = null;
                StkMovdocHdrsobj.dcountry = null;
                StkMovdocHdrsobj.cancelQty = "0";
                  StkMovdocHdrsobj.recStatus = "0";
                  if (DocDate == "") {
                    StkMovdocHdrsobj.recExpect = null;
                }
                else {
                    StkMovdocHdrsobj.recExpect = DocDate.split("/").reverse().join("/")
                  }
                //StkMovdocHdrsobj.recExpect = $('[id$="dt_DocDateGRN"]').val();
                StkMovdocHdrsobj.recTtl = "0";
                StkMovdocHdrsobj.createUser = null;
                StkMovdocHdrsobj.createDate = null;
                StkMovdocHdrsobj.phyNo = null;
                  StkMovdocHdrdetails.push(StkMovdocHdrsobj);
                  
                if (StkMovdocHdrsobj.storeNo == "") {
                    alert("Store Code is Empty");
                    return false;
                }
                //if (StkMovdocHdrsobj.supplyNo == "") {
                //    alert("Supply No is Empty");
                //    return false;
                //}
                if (StkMovdocHdrsobj.staffNo == "") {
                    alert("Created By is Empty");
                    return false;
                  }

                  
                  if (tablerows.length == 1) {
                    alert("Pls Add Item");
                    return false;
                  }

                  var successResult;
                var btnTextGRN = $('[id$="btnSubmit_AddStockAdj"]').text();
                if (btnTextGRN == "Add") {
                    $.ajax({
                    type: "POST",
                    url: "StockAdj.aspx/AddStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

                    var details = [];
                var details1 = [];

                var rows = $('#StockAdjEntryModule tbody >tr');
                var GRNEntryrows = $('#StockAdjEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_StockAdj"]').val();
                    obj.movCode = "ADJ";
                    obj.movType = "ADJ";
                    obj.docLineno = $(columns[2]).html();
                    if (DocDate == "") {
                    obj.docDate = null;
                }
                else {
                    obj.docDate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docDate = $('[id$="dt_DocDateGRN"]').val();
                    obj.grnNo = null;
                    obj.refNo = null;
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();
                    
                     if (DocDate == "") {
                    obj.docExpdate = null;
                }
                else {
                    obj.docExpdate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docExpdate = $('[id$="dt_DocDateGRN"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "StockAdj.aspx/AddStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });

                }
                else {

                        $.ajax({
                    type: "POST",
                    url: "StockAdj.aspx/EditStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });
                    

                var details = [];
                var rows = $('#StockAdjEntryModule tbody >tr');
                var GRNEntryrows = $('#StockAdjEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_StockAdj"]').val();
                    obj.movCode = "ADJ";
                    obj.movType = "ADJ";
                    obj.docLineno = $(columns[2]).html();
                     if (DocDate == "") {
                    obj.docDate = null;
                }
                else {
                    obj.docDate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docDate = $('[id$="dt_DocDateGRN"]').val();
                    obj.grnNo = null;
                    obj.refNo = null;
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();
                      if (DocDate == "") {
                         obj.docDate = null;
                        }
                        else {
                                obj.docExpdate = DocDate.split("/").reverse().join("/")
                        }
                    //obj.docExpdate = $('[id$="dt_DocDateGRN"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
					obj.docId = $(columns[0]).html();
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "StockAdj.aspx/EditStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });
                  }
                  $(location).attr('href',"StockAdjList.aspx");
                  //if (successResult == "True") {
                  //    $('[id$="btnSubmit_PostGRN"]').prop('disabled', false);
                  //    $('[id$="btnSubmit_AddGRN"]').prop('disabled', true);
                  //    //$(location).attr('href',"ItemMasterList.aspx");
                  //    alert("Data Saved Successfully");
                  //}

        });

        $('[id$="btnSubmit_PostStockAdj"]').click(function () {
            this.disabled = true;
            var StkMovdocHdrdetails = [];
                  var StkMovdocHdrsobj = {};
                  
                  StkMovdocHdrsobj.docNo = $('[id$="txtDocNo_StockAdj"]').val();
                  //alert($('[id$="txtDocNo_GRN"]').val());
                StkMovdocHdrsobj.movCode = "ADJ";
                StkMovdocHdrsobj.movType = "ADJ";
                StkMovdocHdrsobj.storeNo = $('[id$="ddlStoreCode_StockAdj"]').val();
                StkMovdocHdrsobj.fstoreNo = null;
                StkMovdocHdrsobj.tstoreNo = null;
                //var itemName = $('[id$="txt_StockName"]').val();;
                StkMovdocHdrsobj.supplyNo = null;
                StkMovdocHdrsobj.docRef1 = $('[id$="txtPO1Ref_StockAdj"]').val();
                StkMovdocHdrsobj.docRef2 = $('[id$="txtGrn1Ref_StockAdj"]').val();
                StkMovdocHdrsobj.accCode = null;
                  StkMovdocHdrsobj.staffNo = $('[id$="ddlCreatedBy_StockAdj"]').val();
                  var tablerows = $('#StockAdjEntryModule tbody >tr');
                  StkMovdocHdrsobj.docLines = tablerows.length-1;
                  var DocDate = $('[id$="dt_DocDateStockAdj"]').val();
                  if (DocDate == "") {
                    StkMovdocHdrsobj.docDate = null;
                }
                else {
                    StkMovdocHdrsobj.docDate = DocDate.split("/").reverse().join("/")
                  }

                //StkMovdocHdrsobj.docDate = $('[id$="dt_DocDateGRN"]').val();
                var d = new Date();
            StkMovdocHdrsobj.postDate = d.getFullYear() + "/" + (d.getMonth() + 1) + '/' + d.getDate();
                //StkMovdocHdrsobj.postDate = $('[id$="dt_DocDateGRN"]').val();
                StkMovdocHdrsobj.docStatus = "7";
                StkMovdocHdrsobj.docTerm = null;
                StkMovdocHdrsobj.docTime = null;
                StkMovdocHdrsobj.docQty = null;
                StkMovdocHdrsobj.docFoc = null;
                StkMovdocHdrsobj.docDisc = null;
                StkMovdocHdrsobj.docAmt = $('[id$="txt_TotAmntStockAdj"]').val();
                StkMovdocHdrsobj.docTrnspt = "0";
                StkMovdocHdrsobj.docTax = "0";
                StkMovdocHdrsobj.docAttn = null;
                StkMovdocHdrsobj.docRemk1 = $('[id$="txtRemark_StockAdj"]').val();
                StkMovdocHdrsobj.docRemk2 = null;
                StkMovdocHdrsobj.docRemk3 = null;
                StkMovdocHdrsobj.docShip = null;
                StkMovdocHdrsobj.bname = null;
                StkMovdocHdrsobj.baddr1 = null;
                StkMovdocHdrsobj.baddr2 = null;
                StkMovdocHdrsobj.baddr3 = null;
                StkMovdocHdrsobj.bpostcode = null;
                StkMovdocHdrsobj.bstate = null;
                StkMovdocHdrsobj.bcity = null;
                StkMovdocHdrsobj.bcountry =null;
                StkMovdocHdrsobj.daddr1 = null;
                StkMovdocHdrsobj.daddr2 = null;
                StkMovdocHdrsobj.daddr3 = null;
                StkMovdocHdrsobj.dpostcode = null;
                StkMovdocHdrsobj.dstate = null;
                StkMovdocHdrsobj.dcity = null;
                StkMovdocHdrsobj.dcountry = null;
                StkMovdocHdrsobj.cancelQty = "0";
                  StkMovdocHdrsobj.recStatus = "1";
                  if (DocDate == "") {
                    StkMovdocHdrsobj.recExpect = null;
                }
                else {
                    StkMovdocHdrsobj.recExpect = DocDate.split("/").reverse().join("/")
                  }
                //StkMovdocHdrsobj.recExpect = $('[id$="dt_DocDateGRN"]').val();
                StkMovdocHdrsobj.recTtl = "0";
                StkMovdocHdrsobj.createUser = null;
                StkMovdocHdrsobj.createDate = null;
                StkMovdocHdrsobj.phyNo = null;
                  StkMovdocHdrdetails.push(StkMovdocHdrsobj);
                  
                if (StkMovdocHdrsobj.storeNo == "") {
                    alert("Store Code is Empty");
                    return false;
                }
                //if (StkMovdocHdrsobj.supplyNo == "") {
                //    alert("Supply No is Empty");
                //    return false;
                //}
                if (StkMovdocHdrsobj.staffNo == "") {
                    alert("Created By is Empty");
                    return false;
                  }

                  
                  if (tablerows.length == 1) {
                    alert("Pls Add Item");
                    return false;
                  }

                  
                var btnTextGRN = $('[id$="btnSubmit_AddStockAdj"]').text();
                var successResult;

                        $.ajax({
                    type: "POST",
                    url: "StockAdj.aspx/EditStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });
                    

            var details = [];
            var stkdetails = [];
            
                var rows = $('#StockAdjEntryModule tbody >tr');
                var GRNEntryrows = $('#StockAdjEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_StockAdj"]').val();
                    obj.movCode = "ADJ";
                    obj.movType = "ADJ";
                    obj.docLineno = $(columns[2]).html();
                    if (DocDate == "") {
                    obj.docDate = null;
                }
                else {
                    obj.docDate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docDate = $('[id$="dt_DocDateGRN"]').val();
                    obj.grnNo = null;
                    obj.refNo = null;
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();
                    
                     if (DocDate == "") {
                    obj.docExpdate = null;
                }
                else {
                    obj.docExpdate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docExpdate = $('[id$="dt_DocDateGRN"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
                    obj.docId = $(columns[0]).html();
                    details.push(obj);



                    var stktrnobj = {};
                    var d1 = new Date();
                    stktrnobj.trnPost = d1.getFullYear() + "/" + (d1.getMonth() + 1) + '/' + d1.getDate();
                    if (DocDate == "") {
                        stktrnobj.trnDate = null;
                    }
                    else {
                        stktrnobj.trnDate = DocDate.split("/").reverse().join("/")
                    }
                    stktrnobj.trnNo = null;
                    var today = new Date();
                    var str1 = ('0' + today.getHours()).substr(-2) + "" + ('0' + today.getMinutes()).substr(-2) + "" + ('0' + today.getSeconds()).substr(-2);
                    stktrnobj.postTime = str1;
                    stktrnobj.aperiod = null;
                    stktrnobj.itemcode = $(columns[3]).html()+"0000";
                    stktrnobj.storeNo = $('[id$="ddlStoreCode_StockAdj"]').val();
                    stktrnobj.tstoreNo = null;
                    stktrnobj.fstoreNo = null;
                    stktrnobj.trnDocno = $('[id$="txtDocNo_StockAdj"]').val();
                    stktrnobj.trnType = "ADJ";
                    stktrnobj.trnDbQty = null;
                    stktrnobj.trnCrQty = null;
                    stktrnobj.trnQty = $(columns[9]).html();
                    stktrnobj.trnBalqty = $(columns[9]).html();
                    stktrnobj.trnBalcst = $(columns[10]).html();
                    stktrnobj.trnAmt = $(columns[10]).html();
                    stktrnobj.trnCost = $(columns[10]).html();
                    stktrnobj.trnRef = null;
                    stktrnobj.hqUpdate = false;
                    stktrnobj.lineNo = $(columns[2]).html();
                    stktrnobj.itemUom = $(columns[1]).html();
                    stktrnobj.itemBatch = "";
                    stktrnobj.movType = "ADJ";
                    stktrnobj.itemBatchCost = $(columns[7]).html();
                    stktrnobj.stockIn = null;
                    stktrnobj.transPackageLineNo = null;
                    stkdetails.push(stktrnobj);

                }

                   $.ajax({
                    type: "POST",
                    url: "StockAdj.aspx/EditStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
            });

            $.ajax({
                    type: "POST",
                    url: "StockAdj.aspx/AddStktrnsData",
                    data: '{ Details :' + JSON.stringify(stkdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });
                
                $(location).attr('href',"StockAdjList.aspx");

        });

        $('[id$="btnSubmit_ListStockAdj"]').click(function () {
                $(location).attr('href',"StockAdjList.aspx");

              });



        //Request

          $(function () {
                $('#PoReqListMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=REQListMaster',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Req Number/ Date/ Branch / Qty / Status /Remarks "
                    },
                    'columns': [
                        {
                          'data': 'reqNo',
                          'render': function (data, type, row, meta) {
                              data = '<a href="PoRequest.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null,null, null,null, null
                      ]
                })
            });

            $(".btnFillter_PoReqListMaster .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#PoReqListMaster').DataTable();
        table
            .column(4)
            .search(inputValue)
            .draw();
        });

            $(function () {
                $('#POReqItemSearch').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=POItemSearchList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    "iDisplayLength": 5,
                     "bLengthChange": false,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Item Code/Item Description/Item UOM/Item Brand/Link Code/Range"
                    },
                    'columns': [
                        null, null, null, null, null, null, null,null, null, null,null,null,
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtReqQty_POReq" min="1" onkeydown="javascript: return event.keyCode === 8 ||event.keyCode === 46 ? true : !isNaN(Number(event.key))">';
                              return data;
                          }
                        },

                        {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              //data = '<button type="button" class="btn btn-primary" id="btnAdd_GRN">Select</button>';
                              //data = '<i class="Add_ItemToPOReq glyphicon glyphicon-ok"></i></a>';
                              data = '<a class="Add_ItemToPOReq btn btn-info btn-primary"><i class=" glyphicon glyphicon-hand-up"></i></a></p>';
                              return data;
                          }
                        }

                    ],
                     "columnDefs": [
                         {
                               "targets": [ 9 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 10 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 11 ],
                               "visible": false,
                               "searchable": false               
                         }

                    ],  



                })

        });

        $(document).on("click", ".Add_ItemToPOReq", function () {

                var rowIndex = $('#POReqItemSearch tr').index($(this).closest('tr'));

                //var sData=$("#POReqItemSearch").dataTable().fnGetData(rowIndex);
            var currentRow = $(this).closest("tr");
            var sData = $('#POReqItemSearch').DataTable().row(currentRow).data();
                //alert(sData[8]);

            var searchString = $('#POReqItemSearch tr').eq(rowIndex).find('td:eq(0)').html();
            if (valueInPOReqTable('POReqItemSearch', 0, searchString)) { 
                alert("already Exists");
                return false;
            }    
                   
            var counter = 0;
            var newRow = $("<tr>");
                var cols = "";
                cols += '<td style="width: 0%;visibility:hidden;">' + "" + '</td>';
                cols += '<td>' + "" + '</td>';
                cols += '<td >' + $('#POReqItemSearch tr').eq(rowIndex).find('td:eq(0)').html() + '</td>';
                cols += '<td>' + $('#POReqItemSearch tr').eq(rowIndex).find('td:eq(1)').html() + '</td>';
                cols += '<td>' + $('#POReqItemSearch tr').eq(rowIndex).find('td:eq(3)').html() + '</td>';
                cols += '<td>' + $('#POReqItemSearch tr').eq(rowIndex).find('td:eq(4)').html() + '</td>';
            cols += '<td>' + $('#POReqItemSearch tr').eq(rowIndex).find('td:eq(5)').html() + '</td>';
            cols += '<td>' + $('#POReqItemSearch tr').eq(rowIndex).find('td:eq(6)').html() + '</td>';

                var table = document.getElementById("POReqItemSearch");
                var row = table.rows[rowIndex];

                var qty = row.cells[9].children[0].value;
            if (qty == "" || qty == "0") {
                    alert("Qty is Invalid");
                    return false;
                }

                cols += '<td>' + qty + '</td>';

                //cols += '<td>' + $('#POReqItemSearch tr').eq(rowIndex).find('td:eq(7)').html() + '</td>';
                cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Remove_AddItemToPOReq glyphicon glyphicon-trash"></i></div></td>';
                
                newRow.append(cols);
            $("#POReqEntryModule").append(newRow);
            row.cells[9].children[0].value = 1;

                var _Total = 0;
                $('#POReqEntryModule').find('tr').each(
                    function (i) {
                    $('#POReqEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(1)').text((i + 1));
                    if ($('#POReqEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(8)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#POReqEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(8)').text()); }
                    });
            $('[id$="txtTotQty_POReq"]').val(_Total.toFixed(2));
            $('[id$="txt_TotAmntPOReq"]').val(_Total.toFixed(2));
                counter++;
        });

        function valueInPOReqTable(tableID, columnNum, searchString)
            {
                var found = false;
                $("#POReqEntryModule tr").each(function () {
                var itemCode = $(this).find("td").eq(2).html();
                if (itemCode == searchString)
                    {
                        found = true;
                        return false;
                    }
             });

                return found;
        }

         $(document).on("click", ".Remove_AddItemToPOReq", function () {
        var rowIndex = $('#POReqEntryModule tr').index($(this).closest('tr'));
             $(this).closest("tr").remove();
             var _Total = 0;
                $('#POReqEntryModule').find('tr').each(
                    function (i) {
                    $('#POReqEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(1)').text((i + 1));
                    if ($('#POReqEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(8)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#GRNEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(8)').text()); }
                    });
                $('[id$="txtTotQty_POReq"]').val(_Total.toFixed(2));
            $('[id$="txt_TotAmntPOReq"]').val(_Total.toFixed(2));

        });

        $(document).on("click", ".Remove_AddItemToPOReqAfterSave", function () {
        var rowIndex = $('#POReqEntryModule tr').index($(this).closest('tr'));
             

            var ReqDtl = [];
            var ReqDtlobj = {};
            var rows = $('#POReqEntryModule tbody >tr');
            var columns;
            columns = $(rows[rowIndex]).find('td');
            ReqDtlobj.reqId = $(columns[0]).html();
            ReqDtl.push(ReqDtlobj);
             $.ajax({
                    type: "POST",
                    url: "PoRequest.aspx/DelreqdetailsData",
                    data: '{ Details :' + JSON.stringify(ReqDtl) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

            $(this).closest("tr").remove();
             var _Total = 0;
                $('#POReqEntryModule').find('tr').each(
                    function (i) {
                    $('#POReqEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(1)').text((i + 1));
                    if ($('#POReqEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(8)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#POReqEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(8)').text()); }
                    });
                $('[id$="txtTotQty_POReq"]').val(_Total.toFixed(2));
            $('[id$="txt_TotAmntPOReq"]').val(_Total.toFixed(2));

            });

        $('[id$="btnSubmit_AddPOReq"]').click(function () {

                  $.ajax({
                type: 'POST',
                url: 'Utilities/DataModels.ashx?ID=GetControlNo&PKey=PO REQUISITE',
                dataType: "json",
                Cache: false,
                success: function (data) {
                    var JsonArray = JSON.stringify(data);
                    var Json = JSON.parse(JsonArray);
                    $('[id$="txtDocNo_POReq"]').val(Json.aaData[0][0] + Json.aaData[0][1] + + Json.aaData[0][2]);
                    }
                  });

                var reqsdetails = [];
                  var reqsobj = {};
                  
                  reqsobj.reqNo = $('[id$="txtDocNo_POReq"]').val();
                reqsobj.itemsiteCode = $('[id$="ddlStoreCode_POReq"]').val();
                reqsobj.suppCode = $('[id$="ddl_supplierPOReq"]').val();
                reqsobj.reqRef = null;
                reqsobj.reqUser = null;
                  var DocDate = $('[id$="dt_DocDatePOReq"]').val();
                  if (DocDate == "") {
                    reqsobj.reqDate = null;
                }
                else {
                    reqsobj.reqDate = DocDate.split("/").reverse().join("/")
                  }
                reqsobj.reqStatus = "Open";
                reqsobj.reqTtqty = $('[id$="txtTotQty_POReq"]').val();
                reqsobj.reqTtfoc = null;
                reqsobj.reqTtdisc = null;
                reqsobj.reqTtamt = null;
                reqsobj.reqAttn = $('[id$="ddl_supplierPOReq"]').val();
                reqsobj.reqRemk1 = $('[id$="txtRemark_POReq"]').val();
                reqsobj.reqRemk2 = null;
                reqsobj.reqBname = null;
                reqsobj.reqBaddr1 = null;
                reqsobj.reqBaddr2 = null;
                reqsobj.reqBaddr3 = null;
                reqsobj.reqBpostcode = null;
                reqsobj.reqBstate = null;
                reqsobj.reqBcity = null;
                reqsobj.reqBcountry = null;
                reqsobj.reqDaddr1 = null;
                reqsobj.reqDaddr2 = null;
                reqsobj.reqDaddr3 = null;
                reqsobj.reqDpostcode = null;
                reqsobj.reqDstate = null;
                reqsobj.reqDcity = null;
                reqsobj.reqDcountry = null;
                reqsobj.reqCancelqty = null;
                reqsobj.reqRecstatus = null;
                reqsobj.supplierName = $("#ddl_supplierPOReq option:selected").text();
                reqsobj.reqRecexpect = null;
            reqsobj.reqRecttl = null;
            if (DocDate == "") {
                    reqsobj.reqTime = null;
                }
                else {
                    reqsobj.reqTime = DocDate.split("/").reverse().join("/")
            }

                reqsdetails.push(reqsobj);

            var tablerows = $('#POReqEntryModule tbody >tr');
                  if (tablerows.length == 1) {
                    alert("Pls Add Item");
                    return false;
                  }

            if (reqsobj.suppCode == "") {
                    alert("Supply No is Empty");
                    return false;
            }

                  var successResult;
                var btnTextGRN = $('[id$="btnSubmit_AddPOReq"]').text();
                if (btnTextGRN == "Add") {
                    $.ajax({
                    type: "POST",
                    url: "PoRequest.aspx/AddreqsData",
                    data: '{ Details :' + JSON.stringify(reqsdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

                    var details = [];
                var details1 = [];

                var rows = $('#POReqEntryModule tbody >tr');
                var GRNEntryrows = $('#POReqEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.itemsiteCode = $('[id$="ddlStoreCode_POReq"]').val();
                    obj.status = "";
                    obj.reqdItemcode = $(columns[2]).html();
                    obj.reqdItemdesc = $(columns[3]).html();
                    obj.reqdItemprice = $(columns[5]).html();
                    obj.reqdQty = $(columns[8]).html();
                    obj.reqAppqty = null;
                    obj.reqdFocqty = null;
                    obj.reqdTtlqty = $(columns[8]).html() * (-1);
                    obj.reqdPrice = $(columns[5]).html();
                    obj.reqdDiscper = $(columns[6]).html();
                    obj.reqdDiscamt = $(columns[7]).html();
                    obj.reqdAmt = null;
                    obj.reqdRecqty = null;
                    obj.reqdCancelqty = null;
                    obj.reqdOutqty = null;
                    if (DocDate == "")
                    {
                        obj.reqdDate = null;
                    }
                    else
                    {
                        obj.reqdDate = DocDate.split("/").reverse().join("/")
                    }
                    if (DocDate == "")
                    {
                        obj.reqdTime = null;
                    }
                    else
                    {
                        obj.reqdTime = DocDate.split("/").reverse().join("/")
                    }
                    obj.syncGuid = "D6358EAD-46E0-406A-8118-7F2DE6C6A4B2";
                    obj.syncClientindex = null;
                    obj.syncLstupd = null;
                    obj.syncClientindexstring = null;
                    obj.brandcode = $(columns[4]).html();
                    obj.brandname = $(columns[4]).html();
                    obj.linenumber = $(columns[1]).html();
                    obj.reqNo = $('[id$="txtDocNo_POReq"]').val();
                    obj.poststatus = "False";
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "PoRequest.aspx/AddreqDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });

                }
                else {

                        $.ajax({
                    type: "POST",
                    url: "PoRequest.aspx/EditreqsData",
                    data: '{ Details :' + JSON.stringify(reqsdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });
                    

                var details = [];
                var rows = $('#POReqEntryModule tbody >tr');
                var GRNEntryrows = $('#POReqEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.itemsiteCode = $('[id$="ddlStoreCode_POReq"]').val();
                    obj.status = "";
                    obj.reqdItemcode = $(columns[2]).html();
                    obj.reqdItemdesc = $(columns[3]).html();
                    obj.reqdItemprice = $(columns[5]).html();
                    obj.reqdQty = $(columns[8]).html();
                    obj.reqAppqty = null;
                    obj.reqdFocqty = null;
                    obj.reqdTtlqty = $(columns[8]).html() * (-1);
                    obj.reqdPrice = $(columns[5]).html();
                    obj.reqdDiscper = $(columns[6]).html();
                    obj.reqdDiscamt = $(columns[7]).html();
                    obj.reqdAmt = null;
                    obj.reqdRecqty = null;
                    obj.reqdCancelqty = null;
                    obj.reqdOutqty = null;
                    if (DocDate == "")
                    {
                        obj.reqdDate = null;
                    }
                    else
                    {
                        obj.reqdDate = DocDate.split("/").reverse().join("/")
                    }
                    if (DocDate == "")
                    {
                        obj.reqdTime = null;
                    }
                    else
                    {
                        obj.reqdTime = DocDate.split("/").reverse().join("/")
                    }
                    obj.syncGuid = "D6358EAD-46E0-406A-8118-7F2DE6C6A4B2";
                    obj.syncClientindex = null;
                    obj.syncLstupd = null;
                    obj.syncClientindexstring = null;
                    obj.brandcode = $(columns[4]).html();
                    obj.brandname = $(columns[4]).html();
                    obj.linenumber = $(columns[1]).html();
                    obj.reqNo = $('[id$="txtDocNo_POReq"]').val();
                    obj.poststatus = "False";
					obj.reqId = $(columns[0]).html();
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "PoRequest.aspx/EditreqDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });
                  }
                  //if (btnTextGRN == "Add") {
                  //      $("#mdlSuccessMsg").modal();
                  //      $("#mdlSuccessMsg #lbl_text_mdlSuccessMsg").val("Data Saved Successfully");
                  //      $("#mdlSuccessMsg #lbl_DocNo_mdlSuccessMsg").val($('[id$="txtDocNo_GRN"]').val());
                  //}
                  //else {
                  //    $("#mdlSuccessMsg").modal();
                  //      $("#mdlSuccessMsg #lbl_text_mdlSuccessMsg").val("Data Modify Successfully");
                  //      $("#mdlSuccessMsg #lbl_DocNo_mdlSuccessMsg").val($('[id$="txtDocNo_GRN"]').val());
                  //}
                  $(location).attr('href', "POReqList.aspx");


                  //if (successResult == "True") {
                  //    $('[id$="btnSubmit_PostGRN"]').prop('disabled', false);
                  //    $('[id$="btnSubmit_AddGRN"]').prop('disabled', true);
                  //    //$(location).attr('href',"ItemMasterList.aspx");
                  //    alert("Data Saved Successfully");
                  //}

        });

        $('[id$="btnSubmit_PostPOReq"]').click(function () {
            var reqsdetails = [];
                  var reqsobj = {};
                  
                  reqsobj.reqNo = $('[id$="txtDocNo_POReq"]').val();
                reqsobj.itemsiteCode = $('[id$="ddlStoreCode_POReq"]').val();
                reqsobj.suppCode = $('[id$="ddl_supplierPOReq"]').val();
                reqsobj.reqRef = null;
                reqsobj.reqUser = null;
                  var DocDate = $('[id$="dt_DocDatePOReq"]').val();
                  if (DocDate == "") {
                    reqsobj.reqDate = null;
                }
                else {
                    reqsobj.reqDate = DocDate.split("/").reverse().join("/")
                  }
                reqsobj.reqStatus = "Posted";
                reqsobj.reqTtqty = $('[id$="txtTotQty_POReq"]').val();
                reqsobj.reqTtfoc = null;
                reqsobj.reqTtdisc = null;
                reqsobj.reqTtamt = null;
                reqsobj.reqAttn = $('[id$="ddl_supplierPOReq"]').val();
                reqsobj.reqRemk1 = $('[id$="txtRemark_POReq"]').val();
                reqsobj.reqRemk2 = null;
                reqsobj.reqBname = null;
                reqsobj.reqBaddr1 = null;
                reqsobj.reqBaddr2 = null;
                reqsobj.reqBaddr3 = null;
                reqsobj.reqBpostcode = null;
                reqsobj.reqBstate = null;
                reqsobj.reqBcity = null;
                reqsobj.reqBcountry = null;
                reqsobj.reqDaddr1 = null;
                reqsobj.reqDaddr2 = null;
                reqsobj.reqDaddr3 = null;
                reqsobj.reqDpostcode = null;
                reqsobj.reqDstate = null;
                reqsobj.reqDcity = null;
                reqsobj.reqDcountry = null;
                reqsobj.reqCancelqty = null;
                reqsobj.reqRecstatus = null;
                reqsobj.supplierName = $("#ddl_supplierPOReq option:selected").text();
                reqsobj.reqRecexpect = null;
                reqsobj.reqRecttl = null;
                if (DocDate == "") {
                    reqsobj.reqTime = null;
                }
                else {
                    reqsobj.reqTime = DocDate.split("/").reverse().join("/")
            }
                reqsdetails.push(reqsobj);

            var tablerows = $('#POReqEntryModule tbody >tr');
                  if (tablerows.length == 1) {
                    alert("Pls Add Item");
                    return false;
                  }
            if (reqsobj.suppCode == "") {
                    alert("Supply No is Empty");
                    return false;
                }
                  
                var btnTextGRN = $('[id$="btnSubmit_AddPOReq"]').text();
                var successResult;

                        $.ajax({
                    type: "POST",
                    url: "PoRequest.aspx/EditreqsData",
                    data: '{ Details :' + JSON.stringify(reqsdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });
                    

            var details = [];
                var rows = $('#POReqEntryModule tbody >tr');
                var GRNEntryrows = $('#POReqEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.itemsiteCode = $('[id$="ddlStoreCode_POReq"]').val();
                    obj.status = "";
                    obj.reqdItemcode = $(columns[2]).html();
                    obj.reqdItemdesc = $(columns[3]).html();
                    obj.reqdItemprice = $(columns[5]).html();
                    obj.reqdQty = $(columns[8]).html();
                    obj.reqAppqty = null;
                    obj.reqdFocqty = null;
                    obj.reqdTtlqty = $(columns[8]).html() * (-1);
                    obj.reqdPrice = $(columns[5]).html();
                    obj.reqdDiscper = $(columns[6]).html();
                    obj.reqdDiscamt = $(columns[7]).html();
                    obj.reqdAmt = null;
                    obj.reqdRecqty = null;
                    obj.reqdCancelqty = null;
                    obj.reqdOutqty = null;
                    if (DocDate == "")
                    {
                        obj.reqdDate = null;
                    }
                    else
                    {
                        obj.reqdDate = DocDate.split("/").reverse().join("/")
                    }
                    if (DocDate == "")
                    {
                        obj.reqdTime = null;
                    }
                    else
                    {
                        obj.reqdTime = DocDate.split("/").reverse().join("/")
                    }
                    obj.syncGuid = "D6358EAD-46E0-406A-8118-7F2DE6C6A4B2";
                    obj.syncClientindex = null;
                    obj.syncLstupd = null;
                    obj.syncClientindexstring = null;
                    obj.brandcode = $(columns[4]).html();
                    obj.brandname = $(columns[4]).html();
                    obj.linenumber = $(columns[1]).html();
                    obj.reqNo = $('[id$="txtDocNo_POReq"]').val();
                    obj.poststatus = "True";
					obj.reqId = $(columns[0]).html();
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "PoRequest.aspx/EditreqDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
            });

                $(location).attr('href',"POReqList.aspx");

        });

        $('[id$="btnSubmit_ListPOReq"]').click(function () {
                $(location).attr('href',"POReqList.aspx");

        });

        $('[id$="btnSubmit_List_PoApprovedView"]').click(function () {
            $(location).attr('href', "POApprovedList.aspx");

        });

        //approval
        $(function () {
            $('#PoApprovedListMaster').DataTable({
                'sAjaxSource': 'Utilities/DataModels.ashx?ID=ApprovedListMaster',
                'paging': true,
                'lengthChange': true,
                'searching': true,
                'ordering': true,
                'info': true,
                'autoWidth': true,
                language: {
                    searchPlaceholder: "Search By PO Number/ Date/ Supplier/ Qty / Status /Remarks "
                },
                'columns': [
                    {
                        'data': 'pono',
                        'render': function (data, type, row, meta) {
                            data = '<a href="PoApprovedView.aspx?PKey=' + row[0] + '&PKey1=' + row[6] + '&PKey2=' + row[1] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                            return data;
                        }
                    }, null, null, null, null, null, null
                ]
            })
        });


         $(function () {
                $('#PoAppListMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=AppListMaster',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By PO Number/Invoice Number/ Date/ Supplier/ Qty / Status /Remarks "
                    },
                    'columns': [
                        {
                          'data': 'ponumber',
                          'render': function (data, type, row, meta) {
                              //data = '<a href="PoApproval.aspx?PKey=' + row[0] + '&PKey1=' + row[6] + '&PKey2=' + row[1] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              data = '<a href="InvDoWithOutletPO.aspx?PKey=' + row[0] + '&PKey1=' + row[6] + '&PKey2=' + row[1] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null,null, null,null, null,null,null
                      ]
                })
            });

            $(".btnFillter_PoReqListMaster .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#PoReqListMaster').DataTable();
        table
            .column(4)
            .search(inputValue)
            .draw();
        });

         $(function () {
                $('#POAppItemSearch').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=POItemSearchList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    "iDisplayLength": 5,
                     "bLengthChange": false,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Item Code/Item Description/Item UOM/Item Brand/Link Code/Range"
                    },
                    'columns': [
                        null, null, null, null, null, null, null,null, null, null,null,null,
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtReqQty_POApp" >';
                              return data;
                          }
                        },

                        {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              //data = '<button type="button" class="btn btn-primary" id="btnAdd_GRN">Select</button>';
                              //data = '<i class="Add_ItemToPOApp glyphicon glyphicon-ok"></i></a>';
                              data = '<a class="Add_ItemToPOApp btn btn-info btn-primary"><i class=" glyphicon glyphicon-hand-up"></i></a></p>';
                              return data;
                          }
                        }

                    ],
                     "columnDefs": [
                         {
                               "targets": [ 9 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 10 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 11 ],
                               "visible": false,
                               "searchable": false               
                         }

                    ],  



                })

        });

        $(document).on("click", ".Add_ItemToPOApp", function () {

                var rowIndex = $('#POAppItemSearch tr').index($(this).closest('tr'));

                //var sData=$("#POAppItemSearch").dataTable().fnGetData(rowIndex);
            var currentRow = $(this).closest("tr");
            var sData = $('#POAppItemSearch').DataTable().row(currentRow).data();
                //alert(sData[8]);

            var searchString = $('#POAppItemSearch tr').eq(rowIndex).find('td:eq(0)').html();
            if (valueInPOAppTable('POAppItemSearch', 0, searchString)) { 
                alert("already Exists");
                return false;
            }    
                   
            var counter = 0;
            var newRow = $("<tr>");
                var cols = "";
                cols += '<td style="width: 0%;visibility:hidden;">' + "" + '</td>';
                cols += '<td>' + "" + '</td>';
                cols += '<td >' + $('#POAppItemSearch tr').eq(rowIndex).find('td:eq(0)').html() + '</td>';
                cols += '<td>' + $('#POAppItemSearch tr').eq(rowIndex).find('td:eq(1)').html() + '</td>';
                cols += '<td>' + $('#POAppItemSearch tr').eq(rowIndex).find('td:eq(3)').html() + '</td>';
                cols += '<td>' + $('#POAppItemSearch tr').eq(rowIndex).find('td:eq(4)').html() + '</td>';
                cols += '<td>' + $('#POAppItemSearch tr').eq(rowIndex).find('td:eq(5)').html() + '</td>';
                cols += '<td>' + $('#POAppItemSearch tr').eq(rowIndex).find('td:eq(6)').html() + '</td>';

                var table = document.getElementById("POAppItemSearch");
                var row = table.rows[rowIndex];

                var qty = row.cells[9].children[0].value;
                if (qty=="") {
                    alert("Qty is Invalid");
                    return false;
                }

                cols += '<td>' + qty + '</td>';
                //cols += '<input type="number" class="quantity form-control" id="txtAppqty_POApp" runat="server">';

                //cols += '<td>' + $('#POAppItemSearch tr').eq(rowIndex).find('td:eq(7)').html() + '</td>';
                cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Remove_AddItemToPOApp glyphicon glyphicon-trash"></i></div></td>';
                
                newRow.append(cols);
                $("#POAppEntryModule").append(newRow);

                var _Total = 0;
                $('#POAppEntryModule').find('tr').each(
                    function (i) {
                    $('#POAppEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(1)').text((i + 1));
                    if ($('#POAppEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(8)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#POAppEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(8)').text()); }
                    });
            $('[id$="txtTotQty_POApp"]').val(_Total.toFixed(2));
            $('[id$="txt_TotAmntPOApp"]').val(_Total.toFixed(2));
                counter++;
        });

        function valueInPOAppTable(tableID, columnNum, searchString)
            {
                var found = false;
                $("#POAppEntryModule tr").each(function () {
                var itemCode = $(this).find("td").eq(2).html();
                if (itemCode == searchString)
                    {
                        found = true;
                        return false;
                    }
             });

                return found;
        }

         $(document).on("click", ".Remove_AddItemToPOApp", function () {
        var rowIndex = $('#POAppEntryModule tr').index($(this).closest('tr'));
             $(this).closest("tr").remove();
             var rows = $('#POAppEntryModule tbody >tr');
                var GRNEntryrows = $('#POAppEntryModule tbody >tr');
            var columns;
            var _Total = 0;
            for (var i = 1; i < rows.length; i++) {
                var table = document.getElementById("POAppEntryModule");
                var row = table.rows[i];
                var qty = row.cells[8].children[0].value;
                _Total = parseFloat(_Total) + parseFloat(qty);
            }
                $('[id$="txtTotQty_POApp"]').val(_Total.toFixed(2));
            $('[id$="txt_TotAmntPOApp"]').val(_Total.toFixed(2));

        });

        $(document).on("click", ".Remove_AddItemToPOAppAfterSave", function () {
        var rowIndex = $('#POAppEntryModule tr').index($(this).closest('tr'));
             

            var ReqDtl = [];
            var ReqDtlobj = {};
            var rows = $('#POAppEntryModule tbody >tr');
            var columns;
            columns = $(rows[rowIndex]).find('td');
            ReqDtlobj.reqId = $(columns[0]).html();
            ReqDtl.push(ReqDtlobj);
             $.ajax({
                    type: "POST",
                    url: "PoRequest.aspx/DelreqdetailsData",
                    data: '{ Details :' + JSON.stringify(ReqDtl) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

            $(this).closest("tr").remove();
             var _Total = 0;
                $('#POAppEntryModule').find('tr').each(
                    function (i) {
                    $('#POAppEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(1)').text((i + 1));
                    if ($('#POAppEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(8)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#POAppEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(8)').text()); }
                    });
                $('[id$="txtTotQty_POApp"]').val(_Total.toFixed(2));
            $('[id$="txt_TotAmntPOApp"]').val(_Total.toFixed(2));

            });

        $('[id$="btnSubmit_PostPOApp"]').click(function () {

                  $.ajax({
                type: 'POST',
                url: 'Utilities/DataModels.ashx?ID=GetControlNo&PKey=PO REQUISITE',
                dataType: "json",
                Cache: false,
                success: function (data) {
                    var JsonArray = JSON.stringify(data);
                    var Json = JSON.parse(JsonArray);
                    $('[id$="txtPoNo_POApp"]').val(Json.aaData[0][0] + Json.aaData[0][1] + + Json.aaData[0][2]);
                    }
                  });

                var reqsdetails = [];
                  var reqsobj = {};
                  
                  reqsobj.poNo = $('[id$="txtPoNo_POApp"]').val();
                reqsobj.itemsiteCode = $('[id$="ddlStoreCode_POApp"]').val();
                reqsobj.suppCode = $('[id$="ddl_supplierPOApp"]').val();
                reqsobj.poRef = null;
                reqsobj.poUser = null;
                  var DocDate = $('[id$="dt_DocDatePOApp"]').val();
                  if (DocDate == "") {
                    reqsobj.poDate = null;
                }
                else {
                    reqsobj.poDate = DocDate.split("/").reverse().join("/")
                  }
                reqsobj.poStatus = "Approved";
                reqsobj.poTtqty = $('[id$="txtTotQty_POApp"]').val();
                reqsobj.poTtfoc = null;
                reqsobj.poTtdisc = null;
                reqsobj.poTtamt = null;
                reqsobj.poAttn = $('[id$="ddl_supplierPOApp"]').val();
                reqsobj.poRemk1 = $('[id$="txtRemark_POApp"]').val();
                reqsobj.poRemk2 = null;
                reqsobj.poBname = null;
                reqsobj.poBaddr1 = null;
                reqsobj.poBaddr2 = null;
                reqsobj.poBaddr3 = null;
                reqsobj.poBpostcode = null;
                reqsobj.poBstate = null;
                reqsobj.poBcity = null;
                reqsobj.poBcountry = null;
                reqsobj.poDaddr1 = null;
                reqsobj.poDaddr2 = null;
                reqsobj.poDaddr3 = null;
                reqsobj.poDpostcode = null;
                reqsobj.poDstate = null;
                reqsobj.poDcity = null;
                reqsobj.poDcountry = null;
                reqsobj.poCancelqty = null;
                reqsobj.poRecstatus = null;
                reqsobj.poRecexpect = null;
            reqsobj.poRecttl = null;
            reqsobj.syncGuid = "D6358EAD-46E0-406A-8118-7F2DE6C6A4B2";
                    reqsobj.syncClientindex = null;
                    reqsobj.syncLstupd = null;
                    reqsobj.syncClientindexstring = null;
            if (DocDate == "") {
                    reqsobj.poTime = null;
                }
                else {
                    reqsobj.poTime = DocDate.split("/").reverse().join("/")
            }
            reqsobj.reqNo = $('[id$="txtDocNo_POApp"]').val();
                reqsdetails.push(reqsobj);

            var tablerows = $('#POAppEntryModule tbody >tr');
                  if (tablerows.length == 1) {
                    alert("Pls Add Item");
                    return false;
                  }

            if (reqsobj.suppCode == "") {
                    alert("Supply No is Empty");
                    return false;
            }

                  var successResult;

            $.ajax({
                    type: "POST",
                    url: "PoApproval.aspx/AddPosData",
                    data: '{ Details :' + JSON.stringify(reqsdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

                    var details = [];
                var details1 = [];

                var rows = $('#POAppEntryModule tbody >tr');
                var GRNEntryrows = $('#POAppEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.itemsiteCode = $('[id$="ddlStoreCode_POApp"]').val();
                    obj.status = "";
                    obj.podItemcode = $(columns[2]).html();
                    obj.podItemdesc = $(columns[3]).html();
                    obj.podItemprice = $(columns[5]).html();

                    var table = document.getElementById("POAppEntryModule");
                    var row = table.rows[i];
                    var qty = row.cells[8].children[0].value;

                    obj.podQty = qty;// $(columns[8]).html();
                    obj.podFocqty = null;
                    obj.podTtlqty = qty * (-1); // $(columns[8]).html() * (-1);
                    obj.podPrice = $(columns[5]).html();
                    obj.podDiscper = $(columns[6]).html();
                    obj.podDiscamt = $(columns[7]).html();
                    obj.podAmt = null;
                    obj.podRecqty = null;
                    obj.podCancelqty = null;
                    obj.podOutqty = null;
                    if (DocDate == "")
                    {
                        obj.podDate = null;
                    }
                    else
                    {
                        obj.podDate = DocDate.split("/").reverse().join("/")
                    }
                    if (DocDate == "")
                    {
                        obj.podTime = null;
                    }
                    else
                    {
                        obj.podTime = DocDate.split("/").reverse().join("/")
                    }
                    obj.brandcode = $(columns[4]).html();
                    obj.brandname = $(columns[4]).html();
                    obj.linenumber = $(columns[1]).html();
                    obj.poNo = $('[id$="txtPoNo_POApp"]').val();
                    obj.poststatus = "True";
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "PoApproval.aspx/AddPoDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });

                
                  //if (btnTextGRN == "Add") {
                  //      $("#mdlSuccessMsg").modal();
                  //      $("#mdlSuccessMsg #lbl_text_mdlSuccessMsg").val("Data Saved Successfully");
                  //      $("#mdlSuccessMsg #lbl_DocNo_mdlSuccessMsg").val($('[id$="txtDocNo_GRN"]').val());
                  //}
                  //else {
                  //    $("#mdlSuccessMsg").modal();
                  //      $("#mdlSuccessMsg #lbl_text_mdlSuccessMsg").val("Data Modify Successfully");
                  //      $("#mdlSuccessMsg #lbl_DocNo_mdlSuccessMsg").val($('[id$="txtDocNo_GRN"]').val());
                  //}
                  $(location).attr('href', "POAppList.aspx");


                  //if (successResult == "True") {
                  //    $('[id$="btnSubmit_PostGRN"]').prop('disabled', false);
                  //    $('[id$="btnSubmit_AddGRN"]').prop('disabled', true);
                  //    //$(location).attr('href',"ItemMasterList.aspx");
                  //    alert("Data Saved Successfully");
                  //}

        });



        $('[id$="btnSubmit_ListPOApp"]').click(function () {
            
                $(location).attr('href',"POAppList.aspx");

        });

           $('.quantity').on('change, keyup',function(){

            var rows = $('#POAppEntryModule tbody >tr');
                var GRNEntryrows = $('#POAppEntryModule tbody >tr');
            var columns;
            var _Total = 0;
            for (var i = 1; i < rows.length; i++) {
                var table = document.getElementById("POAppEntryModule");
                var row = table.rows[i];
                var qty = row.cells[8].children[0].value;
                _Total = parseFloat(_Total) + parseFloat(qty);
            }
            $('[id$="txtTotQty_POApp"]').val(_Total.toFixed(2));
            $('[id$="txt_TotAmntPOApp"]').val(_Total.toFixed(2));
        });

        $('[id$="dtFromDatePackage_ItemMaster"]').datepicker({
        format: 'dd/mm/yyyy',
        autoclose: true
        });

        $('[id$="dtToDatePackage_ItemMaster"]').datepicker({
        format: 'dd/mm/yyyy',
        autoclose: true
        });

        $('[id$="dtFromTimePackage_ItemMaster"]').timepicker({
            timeFormat: "HH:mm:ss",
        autoclose: true
        });

        $('[id$="dtToTimePackage_ItemMaster"]').timepicker({
        timeFormat: "HH:mm:ss",
        autoclose: true
        });

        $(function () {
                $('#PackageItemSearch').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=PackageItemSearchList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    "iDisplayLength": 3,
                     "bLengthChange": false,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Item Code/Item Description/Item UOM/Item Brand/Link Code/Range"
                    },
                    'columns': [
                        null, null, null, null, null, null, null,null, null, null,
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtQty_Package" value="1" >';
                              return data;
                          }
                        },
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtCost_Package" >';
                              return data;
                          }
                        },

                        {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              //data = '<button type="button" class="btn btn-primary" id="btnAdd_GRN">Select</button>';
                              //data = '<a><i class="Add_ItemToGRN glyphicon glyphicon-hand-up"></i></a>';
                              data = '<a class="Add_ItemToPackage btn btn-info btn-primary"><i class=" glyphicon glyphicon-hand-up"></i></a></p>';
                              return data;
                          }
                        }

                    ],
                     "columnDefs": [
                         {
                               "targets": [ 7 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 8 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 9 ],
                               "visible": false,
                               "searchable": false               
                         }

                    ],  



                })

        });


            $(document).on("click", ".Add_ItemToPackage", function () {

                var rowIndex = $('#PackageItemSearch tr').index($(this).closest('tr'));

                //var sData=$("#PackageItemSearch").dataTable().fnGetData(rowIndex);
                var currentRow = $(this).closest("tr");
                var sData = $('#PackageItemSearch').DataTable().row(currentRow).data();
                //alert(sData[8]);

            var searchString = $('#PackageItemSearch tr').eq(rowIndex).find('td:eq(0)').html();
            if (valueInGRNTable('PackageItemSearch', 0, searchString)) { 
                alert("already Exists");
                return false;
            }    
                   
            var counter = 0;
            var newRow = $("<tr>");
                var cols = "";
                cols += '<td >' + $('#PackageItemSearch tr').eq(rowIndex).find('td:eq(0)').html() + '</td>';
                cols += '<td>' + $('#PackageItemSearch tr').eq(rowIndex).find('td:eq(1)').html() + '</td>';

                var table = document.getElementById("PackageItemSearch");
                var row = table.rows[rowIndex];

                var qty = row.cells[7].children[0].value;
                var cost =row.cells[8].children[0].value;
                var Ucost = qty * cost;
                if (qty=="") {
                    alert("Qty is Invalid");
                    return false;
                }
                if (cost=="") {
                    alert("Cost is Empty");
                    return false;
                }

                cols += '<td>' + qty + '</td>';
                cols += '<td>' + cost + '</td>';
                cols += '<td>' + Ucost.toFixed(2) + '</td>';
                cols += '<td>' + '0' + '</td>';
                cols += '<td>' + Ucost.toFixed(2) + '</td>';
                cols += '<td >' + $('#PackageItemSearch tr').eq(rowIndex).find('td:eq(2)').html() + '</td>';
                cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Remove_AddItemToPackage glyphicon glyphicon-trash"></i></div></td>';
                
                newRow.append(cols);
                $("#PackageEntryModule").append(newRow);

                var _Total = 0;
                $('#PackageEntryModule').find('tr').each(
                function (i) {
                    if ($('#PackageEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(6)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#PackageEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(6)').text()); }
                    });
                $('[id$="txtcontentTot_ItemMaster"]').val(_Total.toFixed(2));
                $('[id$="txtPackageTot_ItemMaster"]').val(_Total.toFixed(2));
                counter++;
        });

         $(document).on("click", ".Remove_AddItemToPackage", function () {
        var rowIndex = $('#PackageEntryModule tr').index($(this).closest('tr'));
             $(this).closest("tr").remove();
             var _Total = 0;
                $('#PackageEntryModule').find('tr').each(
                function (i) {
                    if ($('#PackageEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(6)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#PackageEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(6)').text()); }
                    });
                $('[id$="txtcontentTot_ItemMaster"]').val(_Total.toFixed(2));
                $('[id$="txtPackageTot_ItemMaster"]').val(_Total.toFixed(2));

        });


        function ApptClick(element) {
                if (element.checked) {
                    document.getElementById("txtminAppt_ItemMaster").removeAttribute("readonly");
                }
                else {
                    document.getElementById("txtminAppt_ItemMaster").setAttribute("readonly", true);
                }

        }
        
        function CommisionClick(element) {
                if (element.checked) {
                    document.getElementById('brid13_ItemMaster').style.display = "";
                    document.getElementById('divCommission').style.display = "";
                    document.getElementById('divCommissionHeader').style.display = "";
                }
                else {
                    document.getElementById('brid13_ItemMaster').style.display = "none";
                    document.getElementById('divCommission').style.display = "none";
                    document.getElementById('divCommissionHeader').style.display = "none";
                }

        }

        function TaxClick(element) {
                if (element.checked) {
                    document.getElementById('brid11_ItemMaster').style.display = "";
                    document.getElementById('divTax').style.display = "";
                    document.getElementById('divTaxHeader').style.display = "";
                }
                else {
                    document.getElementById('brid11_ItemMaster').style.display = "none";
                    document.getElementById('divTax').style.display = "none";
                    document.getElementById('divTaxHeader').style.display = "none";
                }

        }


        $('[id$="ddl_stockType"]').change(function () {
            var TypeVal = this.value;
            var divVal = $('[id$="ddl_Div"]').val();

                    if (divVal == 3 && TypeVal == "SINGLE") {
                        document.getElementById('lblopenPrepiad').style.display = "";
                        document.getElementById('OpenCodeId').style.display = "";
                    }
                    else {
                        document.getElementById('lblopenPrepiad').style.display = "none";
                        document.getElementById('OpenCodeId').style.display = "none";
                    }

            if (TypeVal == "SINGLE") {
                    document.getElementById('brid10_ItemMaster').style.display = "none";
                    document.getElementById('divPackage').style.display = "none";
                    document.getElementById('divPackageHeader').style.display = "none";

                    document.getElementById('brid8_ItemMaster').style.display = "none";
                    document.getElementById('divService').style.display = "none";
                    document.getElementById('divServiceHeader').style.display = "none";
                }
                else if (TypeVal == "PACKAGE") {
                    document.getElementById('brid10_ItemMaster').style.display = "";
                    document.getElementById('divPackage').style.display = "";
                    document.getElementById('divPackageHeader').style.display = "";

                    document.getElementById('brid8_ItemMaster').style.display = "none";
                    document.getElementById('divService').style.display = "none";
                    document.getElementById('divServiceHeader').style.display = "none";
                    
                }
                else if (TypeVal == "COURSE") {
                    document.getElementById('brid10_ItemMaster').style.display = "none";
                    document.getElementById('divPackage').style.display = "none";
                    document.getElementById('divPackageHeader').style.display = "none";

                    document.getElementById('brid8_ItemMaster').style.display = "";
                    document.getElementById('divService').style.display = "";
                    document.getElementById('divServiceHeader').style.display = "";
                }
        });

        function stockChange() {

            var TypeVal = $('[id$="ddl_stockType"]').val();
            var divVal = $('[id$="ddl_Div"]').val();

                    if (divVal == 3 && TypeVal == "SINGLE") {
                        document.getElementById('lblopenPrepiad').style.display = "";
                        document.getElementById('OpenCodeId').style.display = "";
                    }
                    else {
                        document.getElementById('lblopenPrepiad').style.display = "none";
                        document.getElementById('OpenCodeId').style.display = "none";
                    }

            if (TypeVal == "SINGLE") {
                    document.getElementById('brid10_ItemMaster').style.display = "none";
                    document.getElementById('divPackage').style.display = "none";
                    document.getElementById('divPackageHeader').style.display = "none";

                    document.getElementById('brid8_ItemMaster').style.display = "none";
                    document.getElementById('divService').style.display = "none";
                    document.getElementById('divServiceHeader').style.display = "none";
                }
                else if (TypeVal == "PACKAGE") {
                    document.getElementById('brid10_ItemMaster').style.display = "";
                    document.getElementById('divPackage').style.display = "";
                    document.getElementById('divPackageHeader').style.display = "";

                    document.getElementById('brid8_ItemMaster').style.display = "none";
                    document.getElementById('divService').style.display = "none";
                    document.getElementById('divServiceHeader').style.display = "none";
                    
                }
                else if (TypeVal == "COURSE") {
                    document.getElementById('brid10_ItemMaster').style.display = "none";
                    document.getElementById('divPackage').style.display = "none";
                    document.getElementById('divPackageHeader').style.display = "none";

                    document.getElementById('brid8_ItemMaster').style.display = "";
                    document.getElementById('divService').style.display = "";
                    document.getElementById('divServiceHeader').style.display = "";
                }
        }

        $('[id$="option_EvenlyAvg_ItemMaster"]').change(function () {
            if (this.value == "Evenly Average") {
                document.getElementById('lblPackageDisc').style.display = "";
                document.getElementById('packageDisc').style.display = "";
            }
            else {
                document.getElementById('lblPackageDisc').style.display = "none";
                document.getElementById('packageDisc').style.display = "none";
            }

        });

        $('[id$="option_Manual_ItemMaster"]').change(function () {
            if (this.value == "Evenly Average") {
                document.getElementById('lblPackageDisc').style.display = "";
                document.getElementById('packageDisc').style.display = "";
            }
            else {
                document.getElementById('lblPackageDisc').style.display = "none";
                document.getElementById('packageDisc').style.display = "none";
            }
        });

        function ExpiryStatusClick(element) {
                if (element.checked) {
                    document.getElementById('serviceExpiryMonth').style.display = "";
                }
                else {
                    document.getElementById('serviceExpiryMonth').style.display = "none";
                }

        }

        function ServiceLimitClick(element) {
                if (element.checked) {
                    document.getElementById('ServiceLimit').style.display = "";
                }
                else {
                    document.getElementById('ServiceLimit').style.display = "none";
                }
        }


        function ServiceFlexiClick(element) {
            if (element.checked) {

                    $(function () {
                $('#ServiceSearch').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=ServiceItemSearchList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    "iDisplayLength": 3,
                     "bLengthChange": false,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Item Code/Item Description/Item UOM/Item Brand/Link Code/Range"
                    },
                    'columns': [
                        null, null, null, null, null, null, null,null, null, null,
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtQty_Service" value="1" >';
                              return data;
                          }
                        },
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtCost_Service" >';
                              return data;
                          }
                        },

                        {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              //data = '<button type="button" class="btn btn-primary" id="btnAdd_GRN">Select</button>';
                              //data = '<a><i class="Add_ItemToGRN glyphicon glyphicon-hand-up"></i></a>';
                              data = '<a class="Add_ItemToService btn btn-info btn-primary"><i class=" glyphicon glyphicon-hand-up"></i></a></p>';
                              return data;
                          }
                        }

                    ],
                     "columnDefs": [
                         {
                               "targets": [ 7 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 8 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 9 ],
                               "visible": false,
                               "searchable": false               
                         }

                    ],  



                })

                });

                    document.getElementById('serviceOption1').style.display = "";
                    document.getElementById('serviceOption2').style.display = "";
                    document.getElementById('ServiceSearch').style.display = "";
                    document.getElementById('ServiceAvailabe').style.display = "";
                }
                else
                {
                    $('#ServiceSearch').dataTable().fnClearTable();
                    $('#ServiceSearch').dataTable().fnDestroy();
                    document.getElementById('serviceOption1').style.display = "none";
                    document.getElementById('serviceOption2').style.display = "none";
                    document.getElementById('ServiceSearch').style.display = "none";
                    document.getElementById('ServiceAvailabe').style.display = "none";
                }
        }

        function SeviceChange() {
            var _val = $('#chkServiceFlexi_ItemMaster').is(':checked') ? 'checked' : 'unchecked';

            if (_val == 'checked') {

                    $(function () {
                $('#ServiceSearch').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=GRNItemSearchList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    "iDisplayLength": 3,
                     "bLengthChange": false,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Item Code/Item Description/Item UOM/Item Brand/Link Code/Range"
                    },
                    'columns': [
                        null, null, null, null, null, null, null,null, null, null,
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtQty_Service" value="1" >';
                              return data;
                          }
                        },
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtCost_Service" >';
                              return data;
                          }
                        },

                        {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              //data = '<button type="button" class="btn btn-primary" id="btnAdd_GRN">Select</button>';
                              //data = '<a><i class="Add_ItemToGRN glyphicon glyphicon-hand-up"></i></a>';
                              data = '<a class="Add_ItemToService btn btn-info btn-primary"><i class=" glyphicon glyphicon-hand-up"></i></a></p>';
                              return data;
                          }
                        }

                    ],
                     "columnDefs": [
                         {
                               "targets": [ 7 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 8 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 9 ],
                               "visible": false,
                               "searchable": false               
                         }

                    ],  



                })

                });

                    document.getElementById('serviceOption1').style.display = "";
                    document.getElementById('serviceOption2').style.display = "";
                    document.getElementById('ServiceSearch').style.display = "";
                    document.getElementById('ServiceAvailabe').style.display = "";
                }
                else
                {
                    $('#ServiceSearch').dataTable().fnClearTable();
                    $('#ServiceSearch').dataTable().fnDestroy();
                    document.getElementById('serviceOption1').style.display = "none";
                    document.getElementById('serviceOption2').style.display = "none";
                    document.getElementById('ServiceSearch').style.display = "none";
                    document.getElementById('ServiceAvailabe').style.display = "none";
                }
        }
        


            $(document).on("click", ".Add_ItemToService", function () {

                var rowIndex = $('#ServiceSearch tr').index($(this).closest('tr'));

                //var sData = $("#ServiceSearch").dataTable().fnGetData(rowIndex);
                var currentRow = $(this).closest("tr");
                var sData = $('#ServiceSearch').DataTable().row(currentRow).data();
                //alert(sData[8]);

            //var searchString = $('#ServiceSearch tr').eq(rowIndex).find('td:eq(0)').html();
            //if (valueInGRNTable('ServiceSearch', 0, searchString)) { 
            //    alert("already Exists");
            //    return false;
            //}    
                   
            var counter = 0;
            var newRow = $("<tr>");
                var cols = "";
                cols += '<td >' + "" + '</td>';
                cols += '<td >' + $('#ServiceSearch tr').eq(rowIndex).find('td:eq(1)').html() + '</td>';
                cols += '<td>' + $('#ServiceSearch tr').eq(rowIndex).find('td:eq(0)').html() + '</td>';

                var table = document.getElementById("ServiceSearch");
                var row = table.rows[rowIndex];

                var qty = row.cells[7].children[0].value;
                var cost =row.cells[8].children[0].value;
                var Ucost = qty * cost;
                if (qty=="") {
                    alert("Qty is Invalid");
                    return false;
                }
                if (cost=="") {
                    alert("Cost is Empty");
                    return false;
                }
                cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Remove_AddItemToService glyphicon glyphicon-trash"></i></div></td>';
                
                newRow.append(cols);
                $("#ServiceAvailabe").append(newRow);

                var _Total = 0;
                $('#ServiceAvailabe').find('tr').each(
                    function (i) {
                        $('#ServiceAvailabe').find('tr:eq(' + (i + 1) + ') td:eq(0)').text((i + 1));
                    });
                counter++;
        });

         $(document).on("click", ".Remove_AddItemToService", function () {
        var rowIndex = $('#ServiceAvailabe tr').index($(this).closest('tr'));
             $(this).closest("tr").remove();
             var _Total = 0;
                $('#ServiceAvailabe').find('tr').each(
                function (i) {
                        $('#ServiceAvailabe').find('tr:eq(' + (i + 1) + ') td:eq(0)').text((i + 1));
                    });
        });


        $(document).on("click", ".Remove_AddItemToServiceAfterSave", function () {
        var rowIndex = $('#ServiceAvailabe tr').index($(this).closest('tr'));

            var ServiceDtl = [];
            var Serviceobj = {};
            var rows = $('#ServiceAvailabe tbody >tr');
            var columns;
            columns = $(rows[rowIndex]).find('td');
            Serviceobj.itmId = $(columns).find('input:hidden').val();
            ServiceDtl.push(Serviceobj);
             $.ajax({
                    type: "POST",
                    url: "ItemMaster.aspx/DelServiceData",
                    data: '{ Details :' + JSON.stringify(ServiceDtl) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

            $(this).closest("tr").remove();
             var _Total = 0;
                $('#ServiceAvailabe').find('tr').each(
                function (i) {
                    $('#ServiceAvailabe').find('tr:eq(' + (i + 1) + ') td:eq(0)').text((i + 1));
                    });
        });

        $(document).on("click", ".Remove_AddItemToPackageAfterSave", function () {
        var rowIndex = $('#PackageEntryModule tr').index($(this).closest('tr'));

            var ServiceDtl = [];
            var Serviceobj = {};
            var rows = $('#PackageEntryModule tbody >tr');
            var columns;
            columns = $(rows[rowIndex]).find('td');
            Serviceobj.ID = $(columns).find('input:hidden').val();
            ServiceDtl.push(Serviceobj);
             $.ajax({
                    type: "POST",
                    url: "ItemMaster.aspx/DelPackageData",
                    data: '{ Details :' + JSON.stringify(ServiceDtl) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

            $(this).closest("tr").remove();
        });

        //PO

        $(function () {
                $('#PoListMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=POListMaster',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Req Number/ Date/ Branch / Qty / Status /Remarks "
                    },
                    'columns': [
                        {
                          'data': 'poNo',
                          'render': function (data, type, row, meta) {
                              data = '<a href="Po.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null, null, null, null, null,
                        {
                            'data': 'poNo',
                            'render': function (data, type, row, meta) {
                                data = '<a href="PoPrint.aspx?PKey=' + row[0] + '"><i class="fa fa-print" style="font-size:24px"></i></a>';
                                return data;
                            }
                        }
                      ]
                })
            });

            $(".btnFillter_PoList .btn").click(function () {
        var inputValue = $(this).find("input").val();
        var table = $('#PoListMaster').DataTable();
        table
            .column(4)
            .search(inputValue)
            .draw();
        });

            $(function () {
                $('#PoItemSearch').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=POItemSearchList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    "iDisplayLength": 5,
                     "bLengthChange": false,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Item Code/Item Description/Item UOM/Item Brand/Link Code/Range"
                    },
                    'columns': [
                        null, null, null, null, null, null, null,null, null, null,null,null,
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtReqQty_Po" value="0" min="0" onkeydown="javascript: return event.keyCode === 8 ||event.keyCode === 46 ? true : !isNaN(Number(event.key))">';
                              return data;
                          }
                        },

                        {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              //data = '<button type="button" class="btn btn-primary" id="btnAdd_GRN">Select</button>';
                              //data = '<i class="Add_ItemToPo glyphicon glyphicon-ok"></i></a>';
                              data = '<a class="Add_ItemToPo btn btn-info btn-primary"><i class=" glyphicon glyphicon-hand-up"></i></a></p>';
                              return data;
                          }
                        }

                    ],
                     "columnDefs": [
                         {
                               "targets": [ 9 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 10 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 11 ],
                               "visible": false,
                               "searchable": false               
                         }

                    ],  



                })

        });

        $(document).on("click", ".Add_ItemToPo", function () {

                var rowIndex = $('#PoItemSearch tr').index($(this).closest('tr'));

                //var sData=$("#PoItemSearch").dataTable().fnGetData(rowIndex);
            var currentRow = $(this).closest("tr");
            var sData = $('#PoItemSearch').DataTable().row(currentRow).data();
                //alert(sData[8]);

            var searchString = $('#PoItemSearch tr').eq(rowIndex).find('td:eq(0)').html();
            if (valueInPoTable('PoItemSearch', 0, searchString)) { 
                alert("already Exists");
                return false;
            }    
                   
            var counter = 0;
            var newRow = $("<tr>");
                var cols = "";
                cols += '<td style="width: 0%;visibility:hidden;">' + "" + '</td>';
                cols += '<td>' + "" + '</td>';
                cols += '<td >' + $('#PoItemSearch tr').eq(rowIndex).find('td:eq(0)').html() + '</td>';
                cols += '<td>' + $('#PoItemSearch tr').eq(rowIndex).find('td:eq(1)').html() + '</td>';
                cols += '<td>' + $('#PoItemSearch tr').eq(rowIndex).find('td:eq(2)').html() + '</td>';
                cols += '<td>' + $('#PoItemSearch tr').eq(rowIndex).find('td:eq(4)').html() + '</td>';
            cols += '<td>' + $('#PoItemSearch tr').eq(rowIndex).find('td:eq(5)').html() + '</td>';
            cols += '<td>' + $('#PoItemSearch tr').eq(rowIndex).find('td:eq(6)').html() + '</td>';

                var table = document.getElementById("PoItemSearch");
                var row = table.rows[rowIndex];

                var qty = row.cells[9].children[0].value;
            if (qty == "" || qty == "0") {
                    alert("Qty is Invalid");
                    return false;
                }

                cols += '<td>' + qty + '</td>';

                //cols += '<td>' + $('#PoItemSearch tr').eq(rowIndex).find('td:eq(7)').html() + '</td>';
                cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Remove_AddItemToPo glyphicon glyphicon-trash"></i></div></td>';
                
                newRow.append(cols);
                $("#PoEntryModule").append(newRow);
            row.cells[9].children[0].value = 1;
                var _Total = 0;
                $('#PoEntryModule').find('tr').each(
                    function (i) {
                    $('#PoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(1)').text((i + 1));
                    if ($('#PoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(8)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#PoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(8)').text()); }
                    });
            $('[id$="txtTotQty_Po"]').val(_Total.toFixed(2));
            $('[id$="txt_TotAmntPo"]').val(_Total.toFixed(2));
                counter++;
        });

        function valueInPoTable(tableID, columnNum, searchString)
            {
                var found = false;
                $("#PoEntryModule tr").each(function () {
                var itemCode = $(this).find("td").eq(2).html();
                if (itemCode == searchString)
                    {
                        found = true;
                        return false;
                    }
             });

                return found;
        }

         $(document).on("click", ".Remove_AddItemToPo", function () {
        var rowIndex = $('#PoEntryModule tr').index($(this).closest('tr'));
             $(this).closest("tr").remove();
             var _Total = 0;
                $('#PoEntryModule').find('tr').each(
                    function (i) {
                    $('#PoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(1)').text((i + 1));
                    if ($('#PoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(8)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#GRNEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(8)').text()); }
                    });
                $('[id$="txtTotQty_Po"]').val(_Total.toFixed(2));
            $('[id$="txt_TotAmntPo"]').val(_Total.toFixed(2));

        });

        $(document).on("click", ".Remove_AddItemToPoAfterSave", function () {
        var rowIndex = $('#PoEntryModule tr').index($(this).closest('tr'));
             

            var ReqDtl = [];
            var ReqDtlobj = {};
            var rows = $('#PoEntryModule tbody >tr');
            var columns;
            columns = $(rows[rowIndex]).find('td');
            ReqDtlobj.reqId = $(columns[0]).html();
            ReqDtl.push(ReqDtlobj);
             $.ajax({
                    type: "POST",
                    url: "Po.aspx/DelpodetailsData",
                    data: '{ Details :' + JSON.stringify(ReqDtl) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

            $(this).closest("tr").remove();
             var _Total = 0;
                $('#PoEntryModule').find('tr').each(
                    function (i) {
                    $('#PoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(1)').text((i + 1));
                    if ($('#PoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(8)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#PoEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(8)').text()); }
                    });
                $('[id$="txtTotQty_Po"]').val(_Total.toFixed(2));
            $('[id$="txt_TotAmntPo"]').val(_Total.toFixed(2));

            });

        $('[id$="btnSubmit_AddPo"]').click(function () {

                //  $.ajax({
                //type: 'POST',
                //url: 'Utilities/DataModels.ashx?ID=GetControlNo&PKey=PO',
                //dataType: "json",
                //Cache: false,
                //success: function (data) {
                //    var JsonArray = JSON.stringify(data);
                //    var Json = JSON.parse(JsonArray);
                //    $('[id$="txtDocNo_Po"]').val(Json.aaData[0][0] + Json.aaData[0][1] + + Json.aaData[0][2]);
                //    }
                //  });

                var posdetails = [];
                  var posobj = {};
                  
                  posobj.poNo = $('[id$="txtDocNo_Po"]').val();
                posobj.itemsiteCode = $('[id$="ddlStoreCode_Po"]').val();
                posobj.suppCode = $('[id$="ddl_supplierPo"]').val();
                posobj.poRef = null;
                posobj.poUser = null;
                  var DocDate = $('[id$="dt_DocDatePo"]').val();
                  if (DocDate == "") {
                    posobj.poDate = null;
                }
                else {
                    posobj.poDate = DocDate.split("/").reverse().join("/")
                  }
                posobj.poStatus = "Open";
                posobj.poTtqty = $('[id$="txtTotQty_Po"]').val();
                posobj.poTtfoc = null;
                posobj.poTtdisc = null;
                posobj.poTtamt = null;
                posobj.poAttn = $('[id$="ddl_supplierPo"]').val();
                posobj.poRemk1 = $('[id$="txtRemark_Po"]').val();
                posobj.contactPerson = $('[id$="ddlCreatedBy_PO"]').val();
                posobj.terms = $('[id$="txt_termsOfPayment_PO1"]').val();
                posobj.poRemk2 = null;
                posobj.poBname = null;
                posobj.poBaddr1 = null;
                posobj.poBaddr2 = null;
                posobj.poBaddr3 = null;
                posobj.poBpostcode = null;
                posobj.poBstate = null;
                posobj.poBcity = null;
                posobj.poBcountry = null;
                posobj.poDaddr1 = null;
                posobj.poDaddr2 = null;
                posobj.poDaddr3 = null;
                posobj.poDpostcode = null;
                posobj.poDstate = null;
                posobj.poDcity = null;
                posobj.poDcountry = null;
                posobj.poCancelqty = null;
                posobj.poRecstatus = null;
                //posobj.supplierName = $("#ddl_supplierPo option:selected").text();
                posobj.poRecexpect = null;
            posobj.poRecttl = null;
            posobj.syncGuid = "D6358EAD-46E0-406A-8118-7F2DE6C6A4B2";
                    posobj.syncClientindex = null;
                    posobj.syncLstupd = null;
                    posobj.syncClientindexstring = null;
            if (DocDate == "") {
                    posobj.reqTime = null;
                }
                else {
                    posobj.reqTime = DocDate.split("/").reverse().join("/")
            }

            posdetails.push(posobj);

            if (posobj.suppCode == "") {
                alert("Supply No is Empty");
                return false;
            }
            if (posobj.contactPerson == "") {
                alert("Contact Person is Empty");
                return false;
            }


            var tablerows = $('#PoEntryModule tbody >tr');
                  if (tablerows.length == 1) {
                    alert("Pls Add Item");
                    return false;
                  }

            
            

                  var successResult;
                var btnTextGRN = $('[id$="btnSubmit_AddPo"]').text();
                if (btnTextGRN == "Add") {
                    $.ajax({
                    type: "POST",
                    url: "Po.aspx/AddposData",
                    data: '{ Details :' + JSON.stringify(posdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

                    var details = [];
                var details1 = [];

                var rows = $('#PoEntryModule tbody >tr');
                var GRNEntryrows = $('#PoEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.itemsiteCode = $('[id$="ddlStoreCode_Po"]').val();
                    obj.status = "";
                    obj.podItemcode = $(columns[2]).html();
                    obj.podItemdesc = $(columns[3]).html();
                    obj.podItemprice = $(columns[5]).html();
                    obj.podQty = $(columns[8]).html();
                    obj.poAppqty = null;
                    obj.podFocqty = null;
                    obj.podTtlqty = $(columns[8]).html() * (-1);
                    obj.podPrice = $(columns[5]).html();
                    obj.podDiscper = $(columns[6]).html();
                    obj.podDiscamt = $(columns[7]).html();
                    obj.podAmt = null;
                    obj.podRecqty = null;
                    obj.podCancelqty = null;
                    obj.podOutqty = null;
                    if (DocDate == "")
                    {
                        obj.podDate = null;
                    }
                    else
                    {
                        obj.podDate = DocDate.split("/").reverse().join("/")
                    }
                    if (DocDate == "")
                    {
                        obj.podTime = null;
                    }
                    else
                    {
                        obj.podTime = DocDate.split("/").reverse().join("/")
                    }
                    obj.syncGuid = "D6358EAD-46E0-406A-8118-7F2DE6C6A4B2";
                    obj.syncClientindex = null;
                    obj.syncLstupd = null;
                    obj.syncClientindexstring = null;
                    obj.brandcode = $(columns[4]).html();
                    obj.brandname = $(columns[4]).html();
                    obj.linenumber = $(columns[1]).html();
                    obj.reqNo = null;
                    obj.poststatus = "False";
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "Po.aspx/AddpoDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });

                }
                else {

                        $.ajax({
                    type: "POST",
                    url: "Po.aspx/EditposData",
                    data: '{ Details :' + JSON.stringify(posdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });
                    

                var details = [];
                var rows = $('#PoEntryModule tbody >tr');
                var GRNEntryrows = $('#PoEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.itemsiteCode = $('[id$="ddlStoreCode_Po"]').val();
                    obj.status = "";
                    obj.podItemcode = $(columns[2]).html();
                    obj.podItemdesc = $(columns[3]).html();
                    obj.podItemprice = $(columns[5]).html();
                    obj.podQty = $(columns[8]).html();
                    obj.poAppqty = null;
                    obj.podFocqty = null;
                    obj.podTtlqty = $(columns[8]).html() * (-1);
                    obj.podPrice = $(columns[5]).html();
                    obj.podDiscper = $(columns[6]).html();
                    obj.podDiscamt = $(columns[7]).html();
                    obj.podAmt = null;
                    obj.podRecqty = null;
                    obj.podCancelqty = null;
                    obj.podOutqty = null;
                    if (DocDate == "")
                    {
                        obj.podDate = null;
                    }
                    else
                    {
                        obj.podDate = DocDate.split("/").reverse().join("/")
                    }
                    if (DocDate == "")
                    {
                        obj.podTime = null;
                    }
                    else
                    {
                        obj.podTime = DocDate.split("/").reverse().join("/")
                    }
                    obj.syncGuid = "D6358EAD-46E0-406A-8118-7F2DE6C6A4B2";
                    obj.syncClientindex = null;
                    obj.syncLstupd = null;
                    obj.syncClientindexstring = null;
                    obj.brandcode = $(columns[4]).html();
                    obj.brandname = $(columns[4]).html();
                    obj.linenumber = $(columns[1]).html();
                    obj.poNo = $('[id$="txtDocNo_Po"]').val();
                    //obj.reqNo = null;
                    obj.poststatus = "False";
					obj.poId = $(columns[0]).html();
                    //obj.reqId = null;
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "Po.aspx/EditpoDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });
                  }
                  $(location).attr('href', "PoList.aspx");
        });

        $('[id$="btnSubmit_PostPo"]').click(function () {
            var posdetails = [];
                  var posobj = {};
                  
                  posobj.poNo = $('[id$="txtDocNo_Po"]').val();
                posobj.itemsiteCode = $('[id$="ddlStoreCode_Po"]').val();
                posobj.suppCode = $('[id$="ddl_supplierPo"]').val();
                posobj.poRef = null;
                posobj.poUser = null;
                  var DocDate = $('[id$="dt_DocDatePo"]').val();
                  if (DocDate == "") {
                    posobj.poDate = null;
                }
                else {
                      posobj.poDate = DocDate.split("/").reverse().join("/");
                  }
                posobj.poStatus = "Posted";
                posobj.poTtqty = $('[id$="txtTotQty_Po"]').val();
                posobj.poTtfoc = null;
                posobj.poTtdisc = null;
                posobj.poTtamt = null;
                posobj.poAttn = $('[id$="ddl_supplierPo"]').val();
                posobj.poRemk1 = $('[id$="txtRemark_Po"]').val();
                posobj.contactPerson = $('[id$="ddlCreatedBy_PO"]').val();
                posobj.terms = $('[id$="txt_termsOfPayment_PO1"]').val();
                posobj.poRemk2 = null;
                posobj.poBname = null;
                posobj.poBaddr1 = null;
                posobj.poBaddr2 = null;
                posobj.poBaddr3 = null;
                posobj.poBpostcode = null;
                posobj.poBstate = null;
                posobj.poBcity = null;
                posobj.poBcountry = null;
                posobj.poDaddr1 = null;
                posobj.poDaddr2 = null;
                posobj.poDaddr3 = null;
                posobj.poDpostcode = null;
                posobj.poDstate = null;
                posobj.poDcity = null;
                posobj.poDcountry = null;
                posobj.poCancelqty = null;
                posobj.poRecstatus = null;
                //posobj.supplierName = $("#ddl_supplierPo option:selected").text();
                posobj.poRecexpect = null;
                posobj.poRecttl = null;
                posobj.syncGuid = "D6358EAD-46E0-406A-8118-7F2DE6C6A4B2";
                if (DocDate == "") {
                    posobj.poTime = null;
                }
                else {
                    posobj.poTime = DocDate.split("/").reverse().join("/")
            }
                posdetails.push(posobj);

            var tablerows = $('#PoEntryModule tbody >tr');
                  if (tablerows.length == 1) {
                    alert("Pls Add Item");
                    return false;
                  }
            if (posobj.suppCode == "") {
                    alert("Supply No is Empty");
                    return false;
                }

            if (posobj.contactPerson == "") {
                alert("Contact Person is Empty");
                return false;
            }

                var btnTextGRN = $('[id$="btnSubmit_AddPo"]').text();
                var successResult;

                        $.ajax({
                    type: "POST",
                    url: "Po.aspx/EditposData",
                    data: '{ Details :' + JSON.stringify(posdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });
                    

            var details = [];
                var rows = $('#PoEntryModule tbody >tr');
                var GRNEntryrows = $('#PoEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.itemsiteCode = $('[id$="ddlStoreCode_Po"]').val();
                    obj.status = "";
                    obj.podItemcode = $(columns[2]).html();
                    obj.podItemdesc = $(columns[3]).html();
                    obj.podItemprice = $(columns[5]).html();
                    obj.podQty = $(columns[8]).html();
                    obj.poAppqty = null;
                    obj.podFocqty = null;
                    obj.podTtlqty = $(columns[8]).html() * (-1);
                    obj.podPrice = $(columns[5]).html();
                    obj.podDiscper = $(columns[6]).html();
                    obj.podDiscamt = $(columns[7]).html();
                    obj.podAmt = null;
                    obj.podRecqty = null;
                    obj.podCancelqty = null;
                    obj.podOutqty = null;
                    if (DocDate == "")
                    {
                        obj.podDate = null;
                    }
                    else
                    {
                        obj.podDate = DocDate.split("/").reverse().join("/")
                    }
                    if (DocDate == "")
                    {
                        obj.podTime = null;
                    }
                    else
                    {
                        obj.podTime = DocDate.split("/").reverse().join("/")
                    }
                    obj.syncGuid = "D6358EAD-46E0-406A-8118-7F2DE6C6A4B2";
                    obj.syncClientindex = null;
                    obj.syncLstupd = null;
                    obj.syncClientindexstring = null;
                    obj.brandcode = $(columns[4]).html();
                    obj.brandname = $(columns[4]).html();
                    obj.linenumber = $(columns[1]).html();
                    obj.poNo = $('[id$="txtDocNo_Po"]').val();
                    obj.poststatus = "True";
                    obj.poId = $(columns[0]).html();
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "Po.aspx/EditpoDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
            });

                $(location).attr('href',"PoList.aspx");

        });

        $('[id$="btnSubmit_ListPo"]').click(function () {
                $(location).attr('href',"PoList.aspx");

        });


        //POWithGRN
         $(function () {
                $('#POWithGRNListMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=AppGRNListMaster',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By PO Number/GRN Number/ Date/ Supplier/ Qty / Status /Remarks "
                    },
                    'columns': [
                        {
                          'data': 'ponumber',
                          'render': function (data, type, row, meta) {
                              data = '<a href="POrderApproval.aspx?PKey=' + row[0] + '&PKey1=' + row[6] + '&PKey2=' + row[1] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null, null, null, null, null, null, null,
                        {
                            'data': 'ponumber',
                            'render': function (data, type, row, meta) {
                                data = '<a href="PoAppPrint.aspx?PKey=' + row[1] + '"><i class="fa fa-print" style="font-size:24px"></i></a>';
                                return data;
                            }
                        }
                      ]
                })
            });


        $(".btnFillter_POWithGRNList .btn").click(function () {
                
        var inputValue = $(this).find("input").val();
        var table = $('#POWithGRNListMaster').DataTable();
        table
            .column(5)
            .search(inputValue)
            .draw();
        });

         $('[id$="dt_DocDatePOrderApproval"]').datepicker({
        format: 'dd/mm/yyyy',
        autoclose: true
        });

        //$('[id$="dt_DocDatePOrderApproval"]').datepicker({
        //    format: 'dd/mm/yyyy',
        //    autoclose: true,
        //    forceParse: false,
        //    startDate: '+0d',
        //}).on('changeDate', function (selected) {
        //    var startDate = new Date(selected.date.valueOf());
        //    $('[id$="dt_DeliveryDatePOrderApproval"]').datepicker('setStartDate', startDate);
        //}).on('clearDate', function (selected) {
        //    $('[id$="dt_DeliveryDatePOrderApproval"]').datepicker('setStartDate', null);
        //});

        $('[id$="dt_DeliveryDatePOrderApproval"]').datepicker({
        format: 'dd/mm/yyyy',
            autoclose: true,
            forceParse: false
            //,startDate: '+0d'
        });


        $(function () {
                $('#POrderApprovalItemSearch').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=GRNItemSearchList',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    "iDisplayLength": 5,
                     "bLengthChange": false,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Item Code/Item Description/Item UOM/Item Brand/Link Code/Range"
                    },
                    'columns': [
                        null, null, null, null, null, null, null,null, null, null,
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtQty_POrderApproval" value="1" >';
                              return data;
                          }
                        },
                    {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              data = '<input type="number" style="width: 80%;" class="form-control" id="txtCost_POrderApproval" >';
                              return data;
                          }
                        },

                        {
                          'data': null,
                          'render': function (data, type, row, meta) {
                              //data = '<button type="button" class="btn btn-primary" id="btnAdd_GRN">Select</button>';
                              //data = '<a><i class="Add_ItemToGRN glyphicon glyphicon-hand-up"></i></a>';
                              data = '<a class="Add_ItemToPOrderApproval btn btn-info btn-primary"><i class=" glyphicon glyphicon-hand-up"></i></a></p>';
                              return data;
                          }
                        }

                    ],
                     "columnDefs": [
                         {
                               "targets": [ 7 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 8 ],
                               "visible": false,
                               "searchable": false               
                         },
                         {
                               "targets": [ 9 ],
                               "visible": false,
                               "searchable": false               
                         }

                    ],  



                })

        });


            $(document).on("click", ".Add_ItemToPOrderApproval", function () {

                var rowIndex = $('#POrderApprovalItemSearch tr').index($(this).closest('tr'));

                //var sData=$("#POrderApprovalItemSearch").dataTable().fnGetData(rowIndex);
                var currentRow = $(this).closest("tr");
                var sData = $('#POrderApprovalItemSearch').DataTable().row(currentRow).data();
                //alert(sData[8]);

            var searchString = $('#POrderApprovalItemSearch tr').eq(rowIndex).find('td:eq(0)').html();
            if (valueInPOrderApprovalTable('POrderApprovalItemSearch', 0, searchString)) { 
                alert("already Exists");
                return false;
            }    
                   
            var counter = 0;
            var newRow = $("<tr>");
                var cols = "";
                cols += '<td style="width: 0%;visibility:hidden;">' + "" + '</td>';
                cols += '<td style="width: 0%;visibility:hidden;">' + sData[7] + '</td>';
                cols += '<td>' + "" + '</td>';
                cols += '<td >' + $('#POrderApprovalItemSearch tr').eq(rowIndex).find('td:eq(0)').html() + '</td>';
                cols += '<td>' + $('#POrderApprovalItemSearch tr').eq(rowIndex).find('td:eq(1)').html() + '</td>';
                cols += '<td>' + $('#POrderApprovalItemSearch tr').eq(rowIndex).find('td:eq(3)').html() + '</td>';
                cols += '<td>' + $('#POrderApprovalItemSearch tr').eq(rowIndex).find('td:eq(5)').html() + '</td>';

                var table = document.getElementById("POrderApprovalItemSearch");
                var row = table.rows[rowIndex];

                var qty = row.cells[7].children[0].value;
                var cost =row.cells[8].children[0].value;
                var Ucost = qty * cost;
                if (qty=="") {
                    alert("Qty is Invalid");
                    return false;
                }
                if (cost=="") {
                    alert("Cost is Empty");
                    return false;
                }

                cols += '<td>' + cost + '</td>';

                cols += '<td>' + $('#POrderApprovalItemSearch tr').eq(rowIndex).find('td:eq(2)').html() + '</td>';
                cols += '<td>' + qty + '</td>';
                cols += '<td>' + Ucost.toFixed(2) + '</td>';
                cols += '<td>' + "" + '</td>';
                cols += '<td style="width: 5%; text-align:center"><div class="tools"><i class="edit_AddItemToPOrderApproval glyphicon glyphicon-pencil"></i></div></td>';
                cols += '<td style="width: 10%; text-align:center"><div class="tools"><i class="Remove_AddItemToPOrderApproval glyphicon glyphicon-trash"></i></div></td>';
                
                cols += '<td style="width: 0%;visibility:hidden;">' + sData[8] + '</td>';
                cols += '<td style="width: 0%;visibility:hidden;">' + sData[9] + '</td>';
                newRow.append(cols);
                $("#POrderApprovalEntryModule").append(newRow);

                var _Total = 0;
                $('#POrderApprovalEntryModule').find('tr').each(
                function (i) {
                    $('#POrderApprovalEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#POrderApprovalEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#POrderApprovalEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
                $('[id$="txt_TotAmntPOrderApproval"]').val(_Total.toFixed(2));
                counter++;
        });

        $(document).on("click", ".edit_AddItemToPOrderApproval", function () {
        $("#mdlEditPricePOrderApproval").modal();
        var rowIndex = $('#POrderApprovalEntryModule tr').index($(this).closest('tr'));
            $("#mdlEditPricePOrderApproval #lbl_Index_mdlEditPricePOrderApproval").text(rowIndex);
            //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
            $("#mdlEditPricePOrderApproval #txtQty_EditPricePOrderApproval").val($('#POrderApprovalEntryModule tr').eq(rowIndex).find('td:eq(9)').html());
            $("#mdlEditPricePOrderApproval #txtRemark_EditPricePOrderApproval").val($('#POrderApprovalEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
        $("#mdlEditPricePOrderApproval #txtPrice_EditPricePOrderApproval").val($('#POrderApprovalEntryModule tr').eq(rowIndex).find('td:eq(7)').html()).trigger();
        });

        $('[id$="btnSubmit_mdlEditPricePOrderApproval"]').click(function () {

            var Qty = $('#txtQty_EditPricePOrderApproval').val();
            var Cost = $('#txtPrice_EditPricePOrderApproval').val();
            var remark = $('#txtRemark_EditPricePOrderApproval').val();
            if (Qty == "") {
                alert("Qty is Empty");

                $("#mdlEditPricePOrderApproval").modal();
                var rowIndex = $('#POrderApprovalEntryModule tr').index($(this).closest('tr'));
                $("#mdlEditPricePOrderApproval #lbl_Index_mdlEditPricePOrderApproval").text(rowIndex);
                //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
                $("#mdlEditPricePOrderApproval #txtQty_EditPricePOrderApproval").val($('#POrderApprovalEntryModule tr').eq(rowIndex).find('td:eq(9)').html());
                $("#mdlEditPricePOrderApproval #txtRemark_EditPricePOrderApproval").val(remark);
                $("#mdlEditPricePOrderApproval #txtPrice_EditPricePOrderApproval").val(Cost).trigger();

                return false
            }
            if (Cost == "") {
                alert("Cost is Empty");

                $("#mdlEditPricePOrderApproval").modal();
                var rowIndex = $('#POrderApprovalEntryModule tr').index($(this).closest('tr'));
                $("#mdlEditPricePOrderApproval #lbl_Index_mdlEditPriceGRN").text(rowIndex);
                //alert($('#GRNEntryModule tr').eq(rowIndex).find('td:eq(11)').html());
                $("#mdlEditPricePOrderApproval #txtQty_EditPricePOrderApproval").val(Qty);
                $("#mdlEditPricePOrderApproval #txtRemark_EditPricePOrderApproval").val(remark);
                $("#mdlEditPricePOrderApproval #txtPrice_EditPricePOrderApproval").val($('#POrderApprovalEntryModule tr').eq(rowIndex).find('td:eq(7)').html()).trigger();

                return false
            }

                var Index = $('#lbl_Index_mdlEditPricePOrderApproval').text();
                $('#POrderApprovalEntryModule tr').eq(Index).find('td:eq(9)').html($('#txtQty_EditPricePOrderApproval').val().replace("'", ""));
                $('#POrderApprovalEntryModule tr').eq(Index).find('td:eq(7)').html($('#txtPrice_EditPricePOrderApproval').val().replace("'", ""));
            $('#POrderApprovalEntryModule tr').eq(Index).find('td:eq(10)').html($('#txtQty_EditPricePOrderApproval').val().replace("'", "") * $('#txtPrice_EditPricePOrderApproval').val().replace("'", ""));
            $('#POrderApprovalEntryModule tr').eq(Index).find('td:eq(11)').html($('#txtRemark_EditPricePOrderApproval').val().replace("'", ""));
            $("#mdlEditPricePOrderApproval").modal('hide');

            var _Total = 0;
                $('#POrderApprovalEntryModule').find('tr').each(
                function (i) {
                    $('#POrderApprovalEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#POrderApprovalEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#POrderApprovalEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
            $('[id$="txt_TotAmntPOrderApproval"]').val(_Total.toFixed(2));

        });

         $(document).on("click", ".Remove_AddItemToPOrderApproval", function () {
        var rowIndex = $('#POrderApprovalEntryModule tr').index($(this).closest('tr'));
             $(this).closest("tr").remove();
             var _Total = 0;
                $('#POrderApprovalEntryModule').find('tr').each(
                function (i) {
                    $('#POrderApprovalEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(2)').text((i + 1));
                    if ($('#POrderApprovalEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#POrderApprovalEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(10)').text()); }
                    });
                $('[id$="txt_TotAmntPOrderApproval"]').val(_Total.toFixed(2));

        });


        function valueInPOrderApprovalTable(tableID, columnNum, searchString)
            {
                var found = false;
                $("#POrderApprovalEntryModule tr").each(function () {
                var itemCode = $(this).find("td").eq(3).html();
                if (itemCode == searchString)
                    {
                        found = true;
                        return false;
                    }
             });

                return found;
        }

        $('[id$="ddl_supplierPOrderApproval"]').change(function () {
                var SuppCode = this.value;
            $.ajax({
                type: 'POST',
                url: 'Utilities/DataModels.ashx?ID=SupplierInfo&PKey=' + this.value + '',
                dataType: "json",
                Cache: false,
                success: function (data) {
                    var JsonArray = JSON.stringify(data);
                    var Json = JSON.parse(JsonArray);
                    $('[id$="txtAttnTo_POrderApproval"]').val(Json.aaData[0][0]);
                    $('[id$="txtAddress1_POrderApproval"]').val(Json.aaData[0][1]);
                    $('[id$="txtAddress2_POrderApproval"]').val(Json.aaData[0][2]);
                    $('[id$="txtAddress3_POrderApproval"]').val(Json.aaData[0][3]);
                    $('[id$="txtPostCode_POrderApproval"]').val(Json.aaData[0][4]);
                    $('[id$="txtCity_POrderApproval"]').val(Json.aaData[0][5]);
                    $('[id$="txtState_POrderApproval"]').val(Json.aaData[0][6]);
                    $('[id$="txtCountry_POrderApproval"]').val(Json.aaData[0][7]);
                    $('[id$="txtRemark1_POrderApproval"]').val(Json.aaData[0][8]);
                    $('[id$="txtRemark2_POrderApproval"]').val(Json.aaData[0][9]);
                    $('[id$="txtShipToAddress1_POrderApproval"]').val(Json.aaData[0][10]);
                    $('[id$="txtShipToAddress2_POrderApproval"]').val(Json.aaData[0][11]);
                    $('[id$="txtShipToAddress3_POrderApproval"]').val(Json.aaData[0][12]);
                    $('[id$="txtPostCodeTo_POrderApproval"]').val(Json.aaData[0][13]);
                    $('[id$="txtCityTo_POrderApproval"]').val(Json.aaData[0][14]);
                    $('[id$="txtStateTo_POrderApproval"]').val(Json.aaData[0][15]);
                    $('[id$="txtCountryTo_POrderApproval"]').val(Json.aaData[0][16]);
                    }
                });
        });

        $('[id$="btnSubmit_PostPOrderApproval"]').click(function () {
                  this.disabled = true;
                //  $.ajax({
                //type: 'POST',
                //url: 'Utilities/DataModels.ashx?ID=GetControlNo&PKey=Goods Receive Note',
                //dataType: "json",
                //Cache: false,
                //success: function (data) {
                //    var JsonArray = JSON.stringify(data);
                //    var Json = JSON.parse(JsonArray);
                //    $('[id$="txtGRNNo_POrderApproval"]').val(Json.aaData[0][0] + Json.aaData[0][1] + + Json.aaData[0][2]);
                //    }
                //  });

                var StkMovdocHdrdetails = [];
                  var StkMovdocHdrsobj = {};
                  
                StkMovdocHdrsobj.docNo = $('[id$="txtGRNNo_POrderApproval"]').val();
                StkMovdocHdrsobj.PoNo = $('[id$="txtDocNo_POrderApproval"]').val();
                  //alert($('[id$="txtDocNo_GRN"]').val());
                StkMovdocHdrsobj.movCode = "GRN";
                StkMovdocHdrsobj.movType = "GRN";
                StkMovdocHdrsobj.storeNo = $('[id$="ddlPOStoreCode_POrderApproval"]').val();
                StkMovdocHdrsobj.ControlstoreNo = $('[id$="ddlStoreCode_POrderApproval"]').val();
                StkMovdocHdrsobj.fstoreNo = $('[id$="ddlStoreCode_POrderApproval"]').val();
                StkMovdocHdrsobj.tstoreNo = $('[id$="ddlPOStoreCode_POrderApproval"]').val();
                //var itemName = $('[id$="txt_StockName"]').val();;
                StkMovdocHdrsobj.supplyNo = $('[id$="ddl_supplierPOrderApproval"]').val();
                StkMovdocHdrsobj.docRef1 = $('[id$="txtDocNo_POrderApproval"]').val();
                StkMovdocHdrsobj.docRef2 = $('[id$="txtPO1Ref_POrderApproval"]').val();
                StkMovdocHdrsobj.accCode = null;
                  StkMovdocHdrsobj.staffNo = $('[id$="ddlCreatedBy_POrderApproval"]').val();
                  var tablerows = $('#POrderApprovalEntryModule tbody >tr');
                  StkMovdocHdrsobj.docLines = tablerows.length-1;
                  var DocDate = $('[id$="dt_DocDatePOrderApproval"]').val();
                  if (DocDate == "") {
                    StkMovdocHdrsobj.docDate = null;
                }
                else {
                    //StkMovdocHdrsobj.docDate = DocDate.split("/").reverse().join("/")
                      var d = new Date();
                      StkMovdocHdrsobj.docDate = d.getFullYear() + "/" + (d.getMonth() + 1) + '/' + d.getDate();
                  }

                //StkMovdocHdrsobj.docDate = $('[id$="dt_DocDateGRN"]').val();
                var dp = new Date();
                StkMovdocHdrsobj.postDate = dp.getFullYear() + "/" + (dp.getMonth() + 1) + '/' + dp.getDate();
                //StkMovdocHdrsobj.postDate = $('[id$="dt_DocDateGRN"]').val();
                StkMovdocHdrsobj.postDate = "";
                StkMovdocHdrsobj.docStatus = "7";
                StkMovdocHdrsobj.docTerm = $('[id$="txtTerm_POrderApproval"]').val();
                StkMovdocHdrsobj.docTime = null;

                var _Total = 0;
                $('#POrderApprovalEntryModule').find('tr').each(
                function (i) {
                    if ($('#POrderApprovalEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(9)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#POrderApprovalEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(9)').text()); }
                    });

                StkMovdocHdrsobj.docQty = _Total;
                StkMovdocHdrsobj.docFoc = null;
                StkMovdocHdrsobj.docDisc = null;
                StkMovdocHdrsobj.docAmt = $('[id$="txt_TotAmntPOrderApproval"]').val();
                StkMovdocHdrsobj.docTrnspt = "0";
                StkMovdocHdrsobj.docTax = "0";
                StkMovdocHdrsobj.docAttn = $('[id$="txtAttnTo_POrderApproval"]').val();
                StkMovdocHdrsobj.docRemk1 = $('[id$="txtRemark_POrderApproval"]').val();
                StkMovdocHdrsobj.docRemk2 = $('[id$="txtRemark1_POrderApproval"]').val();
                StkMovdocHdrsobj.docRemk3 = $('[id$="txtRemark2_POrderApproval"]').val();
                StkMovdocHdrsobj.docShip = null;
                StkMovdocHdrsobj.bname = $('[id$="txtAttnTo_POrderApproval"]').val();
                StkMovdocHdrsobj.baddr1 = $('[id$="txtAddress1_POrderApproval"]').val();
                StkMovdocHdrsobj.baddr2 = $('[id$="txtAddress2_POrderApproval"]').val();
                StkMovdocHdrsobj.baddr3 = $('[id$="txtAddress3_POrderApproval"]').val();
                StkMovdocHdrsobj.bpostcode = $('[id$="txtPostCode_POrderApproval"]').val();
                StkMovdocHdrsobj.bstate = $('[id$="txtState_POrderApproval"]').val();
                StkMovdocHdrsobj.bcity = $('[id$="txtCity_POrderApproval"]').val();
                StkMovdocHdrsobj.bcountry = $('[id$="txtCountry_POrderApproval"]').val();
                StkMovdocHdrsobj.daddr1 = $('[id$="txtShipToAddress1_POrderApproval"]').val();
                StkMovdocHdrsobj.daddr2 = $('[id$="txtShipToAddress2_POrderApproval"]').val();
                StkMovdocHdrsobj.daddr3 = $('[id$="txtShipToAddress3_POrderApproval"]').val();
                StkMovdocHdrsobj.dpostcode = $('[id$="txtPostCodeTo_POrderApproval"]').val();
                StkMovdocHdrsobj.dstate = $('[id$="txtStateTo_POrderApproval"]').val();
                StkMovdocHdrsobj.dcity = $('[id$="txtCityTo_POrderApproval"]').val();
                StkMovdocHdrsobj.dcountry = $('[id$="txtCountryTo_POrderApproval"]').val();
                StkMovdocHdrsobj.cancelQty = "0";
                  StkMovdocHdrsobj.recStatus = "0";
            var DelivryDate = $('[id$="dt_DeliveryDatePOrderApproval"]').val();
            if (DelivryDate == "") {
                StkMovdocHdrsobj.recExpect = null;
            }
            else {
                var arrStartDate = DocDate.split("/");
                var date1 = new Date(arrStartDate[2], arrStartDate[1], arrStartDate[0]);
                var arrEndDate = DelivryDate.split("/");
                var date2 = new Date(arrEndDate[2], arrEndDate[1], arrEndDate[0]);

                if (date1 > date2) {

                    alert(DelivryDate + ' DeliveryDate Should be greather  than Doc Date' + DocDate);
                    return false;
                }
                else {
                    StkMovdocHdrsobj.recExpect = DelivryDate.split("/").reverse().join("/") + " 00:00:00";
                }
            }
                //StkMovdocHdrsobj.recExpect = $('[id$="dt_DocDatePOrderApproval"]').val();
                StkMovdocHdrsobj.recTtl = "0";
                StkMovdocHdrsobj.createUser = null;
                StkMovdocHdrsobj.createDate = null;
                StkMovdocHdrsobj.phyNo = null;
                  StkMovdocHdrdetails.push(StkMovdocHdrsobj);
                  
                if (StkMovdocHdrsobj.storeNo == "") {
                    alert("Store Code is Empty");
                    this.disabled = false;
                    return false;
                }
                if (StkMovdocHdrsobj.supplyNo == "") {
                    alert("Supply No is Empty");
                    return false;
                }
                if (StkMovdocHdrsobj.staffNo == "") {
                    alert("Created By is Empty");
                    return false;
                  }

                  
                  if (tablerows.length == 1) {
                      alert("Pls Add Item");
                      this.disabled = false;
                    return false;
                  }

            $.ajax({
                    type: "POST",
                    url: "POrderApproval.aspx/AddStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

                    var details = [];
                var details1 = [];
            var stkdetails = [];
            var poAppdetails = [];
                var rows = $('#POrderApprovalEntryModule tbody >tr');
                var POrderApprovalEntryrows = $('#POrderApprovalEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_POrderApproval"]').val();
                    obj.movCode = "GRN";
                    obj.movType = "GRN";
                    obj.docLineno = $(columns[2]).html();
                    if (DocDate == "") {
                    obj.docDate = null;
                }
                    else {
                        
                    //obj.docDate = DocDate.split("/").reverse().join("/")
                        var d1 = new Date();
                        obj.docDate = d1.getFullYear() + "/" + (d1.getMonth() + 1) + '/' + d1.getDate();
                  }
                    //obj.docDate = $('[id$="dt_DocDateGRN"]').val();
                    obj.grnNo = null;
                    //obj.refNo = null;
                    obj.refNo = $('[id$="ddlPOStoreCode_POrderApproval"]').val();
                    obj.ControlstoreNo = $('[id$="ddlStoreCode_POrderApproval"]').val();
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();
                    
                     if (DocDate == "") {
                    obj.docExpdate = null;
                }
                else {
                    obj.docExpdate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docExpdate = $('[id$="dt_DocDateGRN"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
                    details.push(obj);


                            
                    var stktrnobj = {};
                    var d1 = new Date();
                    stktrnobj.trnPost = d1.getFullYear() + "/" + (d1.getMonth() + 1) + '/' + d1.getDate();
                    stktrnobj.trnNo = null;
                    if (DocDate == "") {
                        stktrnobj.trnDate = null;
                    }
                    else {
                        stktrnobj.trnDate = DocDate.split("/").reverse().join("/")
                    }
                    var today = new Date();
                    var str1 = ('0' + today.getHours()).substr(-2) + "" + ('0' + today.getMinutes()).substr(-2) + "" + ('0' + today.getSeconds()).substr(-2);
                    stktrnobj.postTime = str1;
                    stktrnobj.aperiod = null;
                    stktrnobj.itemcode = $(columns[3]).html()+"0000";
                    stktrnobj.storeNo = $('[id$="ddlStoreCode_POrderApproval"]').val();
                    stktrnobj.tstoreNo = $('[id$="ddlPOStoreCode_POrderApproval"]').val();
                    stktrnobj.fstoreNo = $('[id$="ddlStoreCode_POrderApproval"]').val();
                    stktrnobj.trnDocno = $('[id$="txtGRNNo_POrderApproval"]').val();
                    stktrnobj.trnType = "TFRT";
                    stktrnobj.trnDbQty = null;
                    stktrnobj.trnCrQty = null;
                    stktrnobj.trnQty = $(columns[9]).html() * (-1);
                    stktrnobj.trnBalqty = $(columns[9]).html() * (-1);
                    stktrnobj.trnBalcst = $(columns[10]).html() * (-1);
                    stktrnobj.trnAmt = $(columns[10]).html() * (-1);
                    stktrnobj.trnCost = $(columns[10]).html() * (-1);
                    stktrnobj.trnRef = null;
                    stktrnobj.hqUpdate = false;
                    stktrnobj.lineNo = $(columns[2]).html();
                    stktrnobj.itemUom = $(columns[1]).html();
                    stktrnobj.itemBatch = "";
                    stktrnobj.movType = "TFR";
                    stktrnobj.itemBatchCost = $(columns[7]).html();
                    stktrnobj.stockIn = null;
                    stktrnobj.transPackageLineNo = null;
                    stkdetails.push(stktrnobj);

                    var poAppobj = {};
                    poAppobj.poNo = $('[id$="txtDocNo_POrderApproval"]').val();
                    poAppobj.itemsiteCode = $('[id$="ddlStoreCode_POrderApproval"]').val();
                    poAppobj.status = "Approved";
                    poAppobj.poAppItemCode = $(columns[3]).html();
                    poAppobj.poAppItemDesc = $(columns[4]).html();
                    poAppobj.poUser = "";
                    poAppobj.poAppItemPrice = $(columns[10]).html();
                    poAppobj.poAppQty = $(columns[9]).html();
                    poAppobj.poAppTtlQty = $(columns[9]).html();
                    poAppobj.poAppAmt = $(columns[10]).html();
                    //poAppobj.syncGuid = "D6358EAD-46E0-406A-8118-7F2DE6C6A4B2";
                    //poAppobj.syncGuid = "";
                    poAppobj.syncClientindex = null;
                    poAppobj.syncLstupd = null;
                    poAppobj.syncClientindexstring = null;
                    poAppdetails.push(poAppobj);
                }

                   $.ajax({
                    type: "POST",
                    url: "POrderApproval.aspx/AddStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });
                  var successResult;

            

             $.ajax({
                    type: "POST",
                    url: "POrderApproval.aspx/AddStktrnsData",
                    data: '{ Details :' + JSON.stringify(stkdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
             });

            $.ajax({
                type: "POST",
                url: "POrderApproval.aspx/AddPoAppData",
                data: '{ Details :' + JSON.stringify(poAppdetails) + '}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    //   alert(r.d);
                    successResult = "True";
                },
                error: function (data, errorThrown) {
                    successResult = "False";
                }
            });

                  
                  $(location).attr('href', "POWithGRNList.aspx");
        });

        $('[id$="btnSubmit_ListPOrderApproval"]').click(function () {
            $(location).attr('href',"PoAppPrint.aspx");

        });


        //$('[id$="btnSubmit_PickingList"]').click(function () {
        //    $(location).attr('href', "PoAppPrint.aspx?PKey=" + $('[id$="txtDocNo_POrderApproval"]').val() + "");
        //});

        $('[id$="printBtnPicking"]').click(function () {
            $('#lblpoNo_PickingListPrint').text($('[id$="txtDocNo_POrderApproval"]').val());
            $('#lblpoDate_PickingListPrint').text($('[id$="dt_DocDatePOrderApproval"]').val());
            $('#lblsupplier_PickingListPrint').text($('[id$="ddl_supplierPOrderApproval"]').val());
            $('#lblstoreNo_PickingListPrint').text($('[id$="ddlStoreCode_POrderApproval"]').val());

            $('#PickingPrint tbody').empty();
            var rows = $('#POrderApprovalEntryModule tbody >tr');

            for (var i = 1; i < rows.length; i++) {
                columns = $(rows[i]).find('td');
                var counter = 0;
                var newRow = $("<tr>");
                var cols = "";
                cols += '<td style="width:3%;text-align:center">' + $(columns[2]).html() + '</td>';
                cols += '<td style="width:5%;text-align:center">' + $(columns[3]).html() + '</td>';
                cols += '<td style="width:5%;text-align:center">' + $(columns[4]).html() + '</td>';
                cols += '<td style="width:5%;text-align:center">' + $(columns[5]).html() + '</td>';
                cols += '<td style="width:5%;text-align:center">' + $(columns[9]).html() + '</td>';
                cols += '<td style="width:4%;text-align:center">' + "" + '</td>';
                newRow.append(cols);
                $("#PickingPrint").append(newRow);
                counter++;
            }
            $("#a1").css('display', 'none');
            $("#id_Picking").css('display', 'block');
            window.print();
            $("#a1").css('display', 'block');
            $("#id_Picking").css('display', 'none');

            //$('#a1').hide();
            //$('#id_Scheduler').Show();
            //window.print();
            //$('#a1').Show();
            //$('#id_Scheduler').hide();
            //window.open("PickingListPrint.html", "_blank");
        });


        $('[id$="printBtnPacking"]').click(function () {
            $('#lblpoNo_PackingListPrint').text($('[id$="txtDocNo_POrderApproval"]').val());
            $('#lblpoDate_PackingListPrint').text($('[id$="dt_DocDatePOrderApproval"]').val());
            $('#lblsupplier_PackingListPrint').text($('[id$="ddl_supplierPOrderApproval"]').val());
            $('#lblstoreNo_PackingListPrint').text($('[id$="ddlStoreCode_POrderApproval"]').val());

            $('#PackingPrint tbody').empty();
            var rows = $('#POrderApprovalEntryModule tbody >tr');

            for (var i = 1; i < rows.length; i++) {
                columns = $(rows[i]).find('td');
                var counter = 0;
                var newRow = $("<tr>");
                var cols = "";
                cols += '<td style="width:3%;text-align:center">' + $(columns[2]).html() + '</td>';
                cols += '<td style="width:5%;text-align:center">' + $(columns[3]).html() + '</td>';
                cols += '<td style="width:5%;text-align:center">' + $(columns[4]).html() + '</td>';
                cols += '<td style="width:5%;text-align:center">' + $(columns[5]).html() + '</td>';
                cols += '<td style="width:5%;text-align:center">' + $(columns[9]).html() + '</td>';
                newRow.append(cols);
                $("#PackingPrint").append(newRow);
                counter++;
            }
            $("#a1").css('display', 'none');
            $("#id_Packing").css('display', 'block');
            window.print();
            $("#a1").css('display', 'block');
            $("#id_Packing").css('display', 'none');
        });




        
        
        function supplierPOrderApprovalChange() {
            //$('#id_Scheduler').hide();
            $("#id_Picking").css('display', 'none');
            $("#id_Packing").css('display', 'none');
                var SuppCode = $('[id$="ddl_supplierPOrderApproval"]').val();
            $.ajax({
                type: 'POST',
                url: 'Utilities/DataModels.ashx?ID=SupplierInfo&PKey=' + SuppCode + '',
                dataType: "json",
                Cache: false,
                success: function (data) {
                    var JsonArray = JSON.stringify(data);
                    var Json = JSON.parse(JsonArray);
                    $('[id$="txtAttnTo_POrderApproval"]').val(Json.aaData[0][0]);
                    $('[id$="txtAddress1_POrderApproval"]').val(Json.aaData[0][1]);
                    $('[id$="txtAddress2_POrderApproval"]').val(Json.aaData[0][2]);
                    $('[id$="txtAddress3_POrderApproval"]').val(Json.aaData[0][3]);
                    $('[id$="txtPostCode_POrderApproval"]').val(Json.aaData[0][4]);
                    $('[id$="txtCity_POrderApproval"]').val(Json.aaData[0][5]);
                    $('[id$="txtState_POrderApproval"]').val(Json.aaData[0][6]);
                    $('[id$="txtCountry_POrderApproval"]').val(Json.aaData[0][7]);
                    $('[id$="txtRemark1_POrderApproval"]').val(Json.aaData[0][8]);
                    $('[id$="txtRemark2_POrderApproval"]').val(Json.aaData[0][9]);
                    $('[id$="txtShipToAddress1_POrderApproval"]').val(Json.aaData[0][10]);
                    $('[id$="txtShipToAddress2_POrderApproval"]').val(Json.aaData[0][11]);
                    $('[id$="txtShipToAddress3_POrderApproval"]').val(Json.aaData[0][12]);
                    $('[id$="txtPostCodeTo_POrderApproval"]').val(Json.aaData[0][13]);
                    $('[id$="txtCityTo_POrderApproval"]').val(Json.aaData[0][14]);
                    $('[id$="txtStateTo_POrderApproval"]').val(Json.aaData[0][15]);
                    $('[id$="txtCountryTo_POrderApproval"]').val(Json.aaData[0][16]);
                    }
                });
        }

        $('.InvDoWithOutletPOquantity').on('change, keyup',function(){

            var rows = $('#InvDoWithOutletPOEntryModule tbody >tr');
                var GRNEntryrows = $('#InvDoWithOutletPOEntryModule tbody >tr');
            var columns;
            var _Total = 0;
            for (var i = 1; i < rows.length; i++) {
                var table = document.getElementById("InvDoWithOutletPOEntryModule");
                var row = table.rows[i];
                var qty = row.cells[8].children[0].value;
                _Total = parseFloat(_Total) + parseFloat(qty);
            }
            $('[id$="txtTotQty_InvDoWithOutletPO"]').val(_Total.toFixed(2));
            $('[id$="txt_TotAmntInvDoWithOutletPO"]').val(_Total.toFixed(2));
        });


         $(document).on("click", ".Remove_AddItemToInvDoWithOutletPO", function () {
        var rowIndex = $('#InvDoWithOutletPOEntryModule tr').index($(this).closest('tr'));
             $(this).closest("tr").remove();
             var rows = $('#InvDoWithOutletPOEntryModule tbody >tr');
                var GRNEntryrows = $('#InvDoWithOutletPOEntryModule tbody >tr');
            var columns;
            var _Total = 0;
            for (var i = 1; i < rows.length; i++) {
                var table = document.getElementById("InvDoWithOutletPOEntryModule");
                var row = table.rows[i];
                var qty = row.cells[8].children[0].value;
                _Total = parseFloat(_Total) + parseFloat(qty);
             }

             $('#InvDoWithOutletPOEntryModule').find('tr').each(
                    function (i) {
                    $('#InvDoWithOutletPOEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(1)').text((i + 1));
                 });

                $('[id$="txtTotQty_InvDoWithOutletPO"]').val(_Total.toFixed(2));
            $('[id$="txt_TotAmntInvDoWithOutletPO"]').val(_Total.toFixed(2));

        });

        $(document).on("click", ".Remove_AddItemToInvDoWithOutletPOAfterSave", function () {
        var rowIndex = $('#InvDoWithOutletPOEntryModule tr').index($(this).closest('tr'));
             

            var ReqDtl = [];
            var ReqDtlobj = {};
            var rows = $('#InvDoWithOutletPOEntryModule tbody >tr');
            var columns;
            columns = $(rows[rowIndex]).find('td');
            ReqDtlobj.reqId = $(columns[0]).html();
            ReqDtl.push(ReqDtlobj);
             $.ajax({
                    type: "POST",
                    url: "InvDoWithOutletPO.aspx/DeldodetailsData",
                    data: '{ Details :' + JSON.stringify(ReqDtl) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

            $(this).closest("tr").remove();
            var _Total = 0;
            for (var i = 1; i < rows.length; i++) {
                var table = document.getElementById("InvDoWithOutletPOEntryModule");
                var row = table.rows[i];
                var qty = row.cells[8].children[0].value;
                _Total = parseFloat(_Total) + parseFloat(qty);
            }

                $('#InvDoWithOutletPOEntryModule').find('tr').each(
                    function (i) {
                    $('#InvDoWithOutletPOEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(1)').text((i + 1));
                });

                $('[id$="txtTotQty_InvDoWithOutletPO"]').val(_Total.toFixed(2));
            $('[id$="txt_TotAmntInvDoWithOutletPO"]').val(_Total.toFixed(2));

        });

          $('[id$="btnSubmit_AddInvDoWithOutletPO"]').click(function () {

                  $.ajax({
                type: 'POST',
                url: 'Utilities/DataModels.ashx?ID=GetControlNo&PKey=Outlet PO Invoice',
                dataType: "json",
                Cache: false,
                success: function (data) {
                    var JsonArray = JSON.stringify(data);
                    var Json = JSON.parse(JsonArray);
                    $('[id$="txtInvNo_InvDoWithOutletPO"]').val(Json.aaData[0][0] + Json.aaData[0][1] + + Json.aaData[0][2]);
                    }
                  });

                var dosdetails = [];
                  var dosobj = {};
                  
              dosobj.doNo = $('[id$="txtInvNo_InvDoWithOutletPO"]').val();
              dosobj.poNo = $('[id$="txtDocNo_InvDoWithOutletPO"]').val();
                dosobj.itemsiteCode = $('[id$="ddlStoreCode_InvDoWithOutletPO"]').val();
                dosobj.suppCode = $('[id$="ddl_supplierInvDoWithOutletPO"]').val();
                dosobj.doRef = null;
                dosobj.doUser = null;
                  var DocDate = $('[id$="dt_DocDateInvDoWithOutletPO"]').val();
                  if (DocDate == "") {
                    dosobj.doDate = null;
                }
                else {
                    dosobj.doDate = DocDate.split("/").reverse().join("/")
                  }
                dosobj.doStatus = "Posted";
                dosobj.doTtqty = $('[id$="txtTotQty_InvDoWithOutletPO"]').val();
                dosobj.doTtfoc = null;
                dosobj.doTtdisc = null;
                dosobj.doTtamt = null;
                dosobj.doAttn = $('[id$="ddl_supplierInvDoWithOutletPO"]').val();
                dosobj.doRemk1 = $('[id$="txtRemark_InvDoWithOutletPO"]').val();
                dosobj.doRemk2 = null;
                dosobj.doBname = $('[id$="txtAttnTo_InvDoWithOutletPO"]').val();
                dosobj.doBaddr1 = $('[id$="txtAddress1_InvDoWithOutletPO"]').val();
                dosobj.doBaddr2 = $('[id$="txtAddress2_InvDoWithOutletPO"]').val();
                dosobj.doBaddr3 = $('[id$="txtAddress3_InvDoWithOutletPO"]').val();
                dosobj.doBpostcode = $('[id$="txtPostCode_InvDoWithOutletPO"]').val();
                dosobj.doBstate = $('[id$="txtState_InvDoWithOutletPO"]').val();
                dosobj.doBcity = $('[id$="txtCity_InvDoWithOutletPO"]').val();
                dosobj.doBcountry = $('[id$="txtCountry_InvDoWithOutletPO"]').val();
                dosobj.doDaddr1 = $('[id$="txtShipToAddress1_InvDoWithOutletPO"]').val();
                dosobj.doDaddr2 = $('[id$="txtShipToAddress2_InvDoWithOutletPO"]').val();
                dosobj.doDaddr3 = $('[id$="txtShipToAddress3_InvDoWithOutletPO"]').val();
                dosobj.doDpostcode = $('[id$="txtPostCodeTo_InvDoWithOutletPO"]').val();
                dosobj.doDstate = $('[id$="txtStateTo_InvDoWithOutletPO"]').val();
                dosobj.doDcity = $('[id$="txtCityTo_InvDoWithOutletPO"]').val();
                dosobj.doDcountry = $('[id$="txtCountryTo_InvDoWithOutletPO"]').val();
                dosobj.doCancelqty = null;
                dosobj.doRecstatus = null;
                dosobj.supplierName = $("#ddl_supplierInvDoWithOutletPO option:selected").text();
              dosobj.doRecexpect = null;
              dosobj.syncGuid = "D6358EAD-46E0-406A-8118-7F2DE6C6A4B2";
                    dosobj.syncClientindex = null;
                    dosobj.syncLstupd = null;
                    dosobj.syncClientindexstring = null;
            dosobj.doRecttl = null;
            if (DocDate == "") {
                    dosobj.doTime = null;
                }
                else {
                    dosobj.doTime = DocDate.split("/").reverse().join("/")
            }

                dosdetails.push(dosobj);

            var tablerows = $('#InvDoWithOutletPOEntryModule tbody >tr');
                  if (tablerows.length == 1) {
                    alert("Pls Add Item");
                    return false;
                  }

            if (dosobj.suppCode == "") {
                    alert("Supply No is Empty");
                    return false;
            }

                  var successResult;
                var btnTextGRN = $('[id$="btnSubmit_AddInvDoWithOutletPO"]').text();
                if (btnTextGRN == "Add") {
                    $.ajax({
                    type: "POST",
                    url: "InvDoWithOutletPO.aspx/AdddosData",
                    data: '{ Details :' + JSON.stringify(dosdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

                    var details = [];
                var details1 = [];

                var rows = $('#InvDoWithOutletPOEntryModule tbody >tr');
                var GRNEntryrows = $('#InvDoWithOutletPOEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.itemsiteCode = $('[id$="ddlStoreCode_InvDoWithOutletPO"]').val();
                    obj.status = "";
                    obj.dodItemcode = $(columns[2]).html();
                    obj.dodItemdesc = $(columns[3]).html();

                    var table = document.getElementById("InvDoWithOutletPOEntryModule");
                    var row = table.rows[i];
                    var price = row.cells[5].children[0].value;
                    var qty = row.cells[8].children[0].value;

                    obj.dodItemprice = price;
                    obj.dodQty = qty;
                    obj.doAppqty = null;
                    obj.dodFocqty = null;
                    obj.dodTtlqty = qty * (-1);
                    obj.dodPrice = price;
                    obj.dodDiscper = $(columns[6]).html();
                    obj.dodDiscamt = $(columns[7]).html();
                    obj.dodAmt = null;
                    obj.dodRecqty = null;
                    obj.dodCancelqty = null;
                    obj.dodOutqty = null;
                    if (DocDate == "")
                    {
                        obj.dodDate = null;
                    }
                    else
                    {
                        obj.dodDate = DocDate.split("/").reverse().join("/")
                    }
                    if (DocDate == "")
                    {
                        obj.dodTime = null;
                    }
                    else
                    {
                        obj.dodTime = DocDate.split("/").reverse().join("/")
                    }
                    obj.syncGuid = "D6358EAD-46E0-406A-8118-7F2DE6C6A4B2";
                    obj.syncClientindex = null;
                    obj.syncLstupd = null;
                    obj.syncClientindexstring = null;
                    obj.brandcode = $(columns[4]).html();
                    obj.brandname = $(columns[4]).html();
                    obj.linenumber = $(columns[1]).html();
                    obj.doNo = $('[id$="txtInvNo_InvDoWithOutletPO"]').val();
                    obj.poststatus = "False";
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "InvDoWithOutletPO.aspx/AdddoDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });

                }
                else {

                        $.ajax({
                    type: "POST",
                    url: "InvDoWithOutletPO.aspx/EditdosData",
                    data: '{ Details :' + JSON.stringify(dosdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });
                    

                var details = [];
                var rows = $('#InvDoWithOutletPOEntryModule tbody >tr');
                var GRNEntryrows = $('#InvDoWithOutletPOEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.itemsiteCode = $('[id$="ddlStoreCode_InvDoWithOutletPO"]').val();
                    obj.status = "";
                    obj.dodItemcode = $(columns[2]).html();
                    obj.dodItemdesc = $(columns[3]).html();

                    var table = document.getElementById("InvDoWithOutletPOEntryModule");
                    var row = table.rows[i];
                    var price = row.cells[5].children[0].value;
                    var qty = row.cells[8].children[0].value;

                    obj.dodItemprice = price;
                    obj.dodQty = qty;
                    obj.doAppqty = null;
                    obj.dodFocqty = null;
                    obj.dodTtlqty = qty * (-1);
                    obj.dodPrice = price;
                    obj.dodDiscper = $(columns[6]).html();
                    obj.dodDiscamt = $(columns[7]).html();
                    obj.dodAmt = null;
                    obj.dodRecqty = null;
                    obj.dodCancelqty = null;
                    obj.dodOutqty = null;
                    if (DocDate == "")
                    {
                        obj.dodDate = null;
                    }
                    else
                    {
                        obj.dodDate = DocDate.split("/").reverse().join("/")
                    }
                    if (DocDate == "")
                    {
                        obj.dodTime = null;
                    }
                    else
                    {
                        obj.dodTime = DocDate.split("/").reverse().join("/")
                    }
                    obj.syncGuid = "D6358EAD-46E0-406A-8118-7F2DE6C6A4B2";
                    obj.syncClientindex = null;
                    obj.syncLstupd = null;
                    obj.syncClientindexstring = null;
                    obj.brandcode = $(columns[4]).html();
                    obj.brandname = $(columns[4]).html();
                    obj.linenumber = $(columns[1]).html();
                    obj.doNo = $('[id$="txtInvNo_InvDoWithOutletPO"]').val();
                    obj.poststatus = "False";
					obj.doId = $(columns[0]).html();
                    details.push(obj);
                }

                   $.ajax({
                    type: "POST",
                    url: "InvDoWithOutletPO.aspx/EditdoDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });
                  }
                  
                  $(location).attr('href', "POAppList.aspx");

        });

        $('[id$="btnSubmit_PostInvDoWithOutletPO"]').click(function () {
            var dosdetails = [];
                  var dosobj = {};
                  
                  dosobj.doNo = $('[id$="txtInvNo_InvDoWithOutletPO"]').val();
              dosobj.poNo = $('[id$="txtDocNo_InvDoWithOutletPO"]').val();
                dosobj.itemsiteCode = $('[id$="ddlStoreCode_InvDoWithOutletPO"]').val();
                dosobj.suppCode = $('[id$="ddl_supplierInvDoWithOutletPO"]').val();
                dosobj.doRef = null;
                dosobj.doUser = null;
                  var DocDate = $('[id$="dt_DocDateInvDoWithOutletPO"]').val();
                  if (DocDate == "") {
                    dosobj.doDate = null;
                }
                else {
                    dosobj.doDate = DocDate.split("/").reverse().join("/")
                  }
                dosobj.doStatus = "Approved";
                dosobj.doTtqty = $('[id$="txtTotQty_InvDoWithOutletPO"]').val();
                dosobj.doTtfoc = null;
                dosobj.doTtdisc = null;
                dosobj.doTtamt = null;
                dosobj.doAttn = $('[id$="ddl_supplierInvDoWithOutletPO"]').val();
                dosobj.doRemk1 = $('[id$="txtRemark_InvDoWithOutletPO"]').val();
                dosobj.doRemk2 = null;
                dosobj.doBname = $('[id$="txtAttnTo_InvDoWithOutletPO"]').val();
                dosobj.doBaddr1 = $('[id$="txtAddress1_InvDoWithOutletPO"]').val();
                dosobj.doBaddr2 = $('[id$="txtAddress2_InvDoWithOutletPO"]').val();
                dosobj.doBaddr3 = $('[id$="txtAddress3_InvDoWithOutletPO"]').val();
                dosobj.doBpostcode = $('[id$="txtPostCode_InvDoWithOutletPO"]').val();
                dosobj.doBstate = $('[id$="txtState_InvDoWithOutletPO"]').val();
                dosobj.doBcity = $('[id$="txtCity_InvDoWithOutletPO"]').val();
                dosobj.doBcountry = $('[id$="txtCountry_InvDoWithOutletPO"]').val();
                dosobj.doDaddr1 = $('[id$="txtShipToAddress1_InvDoWithOutletPO"]').val();
                dosobj.doDaddr2 = $('[id$="txtShipToAddress2_InvDoWithOutletPO"]').val();
                dosobj.doDaddr3 = $('[id$="txtShipToAddress3_InvDoWithOutletPO"]').val();
                dosobj.doDpostcode = $('[id$="txtPostCodeTo_InvDoWithOutletPO"]').val();
                dosobj.doDstate = $('[id$="txtStateTo_InvDoWithOutletPO"]').val();
                dosobj.doDcity = $('[id$="txtCityTo_InvDoWithOutletPO"]').val();
                dosobj.doDcountry = $('[id$="txtCountryTo_InvDoWithOutletPO"]').val();
                dosobj.doCancelqty = null;
                dosobj.doRecstatus = null;
                dosobj.supplierName = $("#ddl_supplierInvDoWithOutletPO option:selected").text();
            dosobj.doRecexpect = null;
            dosobj.syncGuid = "D6358EAD-46E0-406A-8118-7F2DE6C6A4B2";
                    dosobj.syncClientindex = null;
                    dosobj.syncLstupd = null;
                    dosobj.syncClientindexstring = null;
                dosobj.doRecttl = null;
                if (DocDate == "") {
                    dosobj.doTime = null;
                }
                else {
                    dosobj.doTime = DocDate.split("/").reverse().join("/")
            }
                dosdetails.push(dosobj);

            var tablerows = $('#InvDoWithOutletPOEntryModule tbody >tr');
                  if (tablerows.length == 1) {
                    alert("Pls Add Item");
                    return false;
                  }
            if (dosobj.suppCode == "") {
                    alert("Supply No is Empty");
                    return false;
                }
                  
                var btnTextGRN = $('[id$="btnSubmit_AddInvDoWithOutletPO"]').text();
                var successResult;

                        $.ajax({
                    type: "POST",
                    url: "InvDoWithOutletPO.aspx/EditdosData",
                    data: '{ Details :' + JSON.stringify(dosdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });
                    

            var details = [];
            var stkdetails = [];
                var rows = $('#InvDoWithOutletPOEntryModule tbody >tr');
                var GRNEntryrows = $('#InvDoWithOutletPOEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.itemsiteCode = $('[id$="ddlStoreCode_InvDoWithOutletPO"]').val();
                    obj.status = "";
                    obj.dodItemcode = $(columns[2]).html();
                    obj.dodItemdesc = $(columns[3]).html();

                    var table = document.getElementById("InvDoWithOutletPOEntryModule");
                    var row = table.rows[i];
                    var price = row.cells[5].children[0].value;
                    var qty = row.cells[8].children[0].value;

                    obj.dodItemprice = price;
                    obj.dodQty = qty;
                    obj.doAppqty = null;
                    obj.dodFocqty = null;
                    obj.dodTtlqty = qty * (-1);
                    obj.dodPrice = price;
                    obj.dodDiscper = $(columns[6]).html();
                    obj.dodDiscamt = $(columns[7]).html();
                    obj.dodAmt = null;
                    obj.dodRecqty = null;
                    obj.dodCancelqty = null;
                    obj.dodOutqty = null;
                    if (DocDate == "")
                    {
                        obj.dodDate = null;
                    }
                    else
                    {
                        obj.dodDate = DocDate.split("/").reverse().join("/")
                    }
                    if (DocDate == "")
                    {
                        obj.dodTime = null;
                    }
                    else
                    {
                        obj.dodTime = DocDate.split("/").reverse().join("/")
                    }
                    obj.syncGuid = "D6358EAD-46E0-406A-8118-7F2DE6C6A4B2";
                    obj.syncClientindex = null;
                    obj.syncLstupd = null;
                    obj.syncClientindexstring = null;
                    obj.brandcode = $(columns[4]).html();
                    obj.brandname = $(columns[4]).html();
                    obj.linenumber = $(columns[1]).html();
                    obj.doNo = $('[id$="txtInvNo_InvDoWithOutletPO"]').val();
                    obj.poststatus = "True";
					obj.doId = $(columns[0]).html();
                    details.push(obj);


                    var stktrnobj = {};
                    if (DocDate == "") {
                        stktrnobj.trnPost = null;
                    }
                    else
                    {
                        stktrnobj.trnPost = DocDate.split("/").reverse().join("/")
                    }
                    stktrnobj.trnNo = null;
                    if (DocDate == "") {
                        stktrnobj.trnDate = null;
                    }
                    else
                    {
                        stktrnobj.trnDate = DocDate.split("/").reverse().join("/")
                    }
                    stktrnobj.postTime = "";
                    stktrnobj.aperiod = null;
                    stktrnobj.itemcode = $(columns[2]).html();
                    stktrnobj.storeNo = $('[id$="ddlStoreCode_InvDoWithOutletPO"]').val();
                    stktrnobj.tstoreNo = null;
                    stktrnobj.fstoreNo = null;
                    stktrnobj.trnDocno = $('[id$="txtInvNo_InvDoWithOutletPO"]').val();
                    stktrnobj.trnType = "GRN";
                    stktrnobj.trnDbQty = null;
                    stktrnobj.trnCrQty = null;

                    stktrnobj.trnQty = qty * (-1);
                    stktrnobj.trnBalqty = qty;
                    stktrnobj.trnBalcst = price;
                    stktrnobj.trnAmt = price * (-1);
                    stktrnobj.trnCost = price * (-1);
                    stktrnobj.trnRef = null;
                    stktrnobj.hqUpdate = false;
                    stktrnobj.lineNo = $(columns[1]).html();
                    stktrnobj.itemUom = "";
                    stktrnobj.itemBatch = "";
                    stktrnobj.movType = "GRN";
                    stktrnobj.itemBatchCost = price;
                    stktrnobj.stockIn = null;
                    stktrnobj.transPackageLineNo = null;
                    stkdetails.push(stktrnobj);

                }

                   $.ajax({
                    type: "POST",
                    url: "InvDoWithOutletPO.aspx/EditdoDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
            });

            $.ajax({
                    type: "POST",
                    url: "InvDoWithOutletPO.aspx/AddStktrnsData",
                    data: '{ Details :' + JSON.stringify(stkdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });

                $(location).attr('href',"POAppList.aspx");

        });

        $('[id$="btnSubmit_ListInvDoWithOutletPO"]').click(function () {
                $(location).attr('href',"POAppList.aspx");

        });


         $(function () {
                $('#DOWithGRNListMaster').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=AppDOGRNListMaster',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By DO Number/Invoice Number/ Date/ Supplier/ Qty / Status /Remarks "
                    },
                    'columns': [
                        {
                          'data': 'ponumber',
                          'render': function (data, type, row, meta) {
                              data = '<a href="DOrderApproval.aspx?PKey=' + row[0] + '&PKey1=' + row[6] + '&PKey2=' + row[1] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null,null, null,null, null,null,null
                      ]
                })
            });


        $(".btnFillter_DOWithGRNList .btn").click(function () {
                
        var inputValue = $(this).find("input").val();
        var table = $('#DOWithGRNListMaster').DataTable();
        table
            .column(5)
            .search(inputValue)
            .draw();
        });

        $('[id$="btnSubmit_PostDOrderApproval"]').click(function () {
                  this.disabled = true;
                  $.ajax({
                type: 'POST',
                url: 'Utilities/DataModels.ashx?ID=GetControlNo&PKey=Goods Receive Note',
                dataType: "json",
                Cache: false,
                success: function (data) {
                    var JsonArray = JSON.stringify(data);
                    var Json = JSON.parse(JsonArray);
                    $('[id$="txtGRNNo_DOrderApproval"]').val(Json.aaData[0][0] + Json.aaData[0][1] + + Json.aaData[0][2]);
                    }
                  });

                var StkMovdocHdrdetails = [];
                  var StkMovdocHdrsobj = {};
                  
                StkMovdocHdrsobj.docNo = $('[id$="txtGRNNo_DOrderApproval"]').val();
                StkMovdocHdrsobj.PoNo = $('[id$="txtDocNo_DOrderApproval"]').val();
                  //alert($('[id$="txtDocNo_GRN"]').val());
                StkMovdocHdrsobj.movCode = "GRN";
                StkMovdocHdrsobj.movType = "GRN";
                StkMovdocHdrsobj.storeNo = $('[id$="ddlStoreCode_DOrderApproval"]').val();
                StkMovdocHdrsobj.fstoreNo = null;
                StkMovdocHdrsobj.tstoreNo = null;
                //var itemName = $('[id$="txt_StockName"]').val();;
                StkMovdocHdrsobj.supplyNo = $('[id$="ddl_supplierDOrderApproval"]').val();
                StkMovdocHdrsobj.docRef1 = $('[id$="txtPO1Ref_DOrderApproval"]').val();
                StkMovdocHdrsobj.docRef2 = $('[id$="txtGrn1Ref_DOrderApproval"]').val();
                StkMovdocHdrsobj.accCode = null;
                  StkMovdocHdrsobj.staffNo = $('[id$="ddlCreatedBy_DOrderApproval"]').val();
                  var tablerows = $('#DOrderApprovalEntryModule tbody >tr');
                  StkMovdocHdrsobj.docLines = tablerows.length-1;
                  var DocDate = $('[id$="dt_DocDateDOrderApproval"]').val();
                  if (DocDate == "") {
                    StkMovdocHdrsobj.docDate = null;
                }
                else {
                    StkMovdocHdrsobj.docDate = DocDate.split("/").reverse().join("/")
                  }

                //StkMovdocHdrsobj.docDate = $('[id$="dt_DocDateGRN"]').val();
                  if (DocDate == "") {
                    StkMovdocHdrsobj.postDate = null;
                }
                else {
                    StkMovdocHdrsobj.postDate = DocDate.split("/").reverse().join("/")
                  }
                //StkMovdocHdrsobj.postDate = $('[id$="dt_DocDateGRN"]').val();
                StkMovdocHdrsobj.docStatus = "0";
                StkMovdocHdrsobj.docTerm = $('[id$="txtTerm_DOrderApproval"]').val();
                StkMovdocHdrsobj.docTime = null;
                
                var _Total = 0;
                $('#DOrderApprovalEntryModule').find('tr').each(
                function (i) {
                    if ($('#DOrderApprovalEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(9)').text() != '')
                        { _Total = parseFloat(_Total) + parseFloat($('#DOrderApprovalEntryModule').find('tr:eq(' + (i + 1) + ') td:eq(9)').text()); }
                    });

                StkMovdocHdrsobj.docQty = _Total;
                StkMovdocHdrsobj.docFoc = null;
                StkMovdocHdrsobj.docDisc = null;
                StkMovdocHdrsobj.docAmt = $('[id$="txt_TotAmntDOrderApproval"]').val();
                StkMovdocHdrsobj.docTrnspt = "0";
                StkMovdocHdrsobj.docTax = "0";
                StkMovdocHdrsobj.docAttn = $('[id$="txtAttnTo_DOrderApproval"]').val();
                StkMovdocHdrsobj.docRemk1 = $('[id$="txtRemark_DOrderApproval"]').val();
                StkMovdocHdrsobj.docRemk2 = $('[id$="txtRemark1_DOrderApproval"]').val();
                StkMovdocHdrsobj.docRemk3 = $('[id$="txtRemark2_DOrderApproval"]').val();
                StkMovdocHdrsobj.docShip = null;
                StkMovdocHdrsobj.bname = $('[id$="txtAttnTo_DOrderApproval"]').val();
                StkMovdocHdrsobj.baddr1 = $('[id$="txtAddress1_DOrderApproval"]').val();
                StkMovdocHdrsobj.baddr2 = $('[id$="txtAddress2_DOrderApproval"]').val();
                StkMovdocHdrsobj.baddr3 = $('[id$="txtAddress3_DOrderApproval"]').val();
                StkMovdocHdrsobj.bpostcode = $('[id$="txtPostCode_DOrderApproval"]').val();
                StkMovdocHdrsobj.bstate = $('[id$="txtState_DOrderApproval"]').val();
                StkMovdocHdrsobj.bcity = $('[id$="txtCity_DOrderApproval"]').val();
                StkMovdocHdrsobj.bcountry = $('[id$="txtCountry_DOrderApproval"]').val();
                StkMovdocHdrsobj.daddr1 = $('[id$="txtShipToAddress1_DOrderApproval"]').val();
                StkMovdocHdrsobj.daddr2 = $('[id$="txtShipToAddress2_DOrderApproval"]').val();
                StkMovdocHdrsobj.daddr3 = $('[id$="txtShipToAddress3_DOrderApproval"]').val();
                StkMovdocHdrsobj.dpostcode = $('[id$="txtPostCodeTo_DOrderApproval"]').val();
                StkMovdocHdrsobj.dstate = $('[id$="txtStateTo_DOrderApproval"]').val();
                StkMovdocHdrsobj.dcity = $('[id$="txtCityTo_DOrderApproval"]').val();
                StkMovdocHdrsobj.dcountry = $('[id$="txtCountryTo_DOrderApproval"]').val();
                StkMovdocHdrsobj.cancelQty = "0";
                  StkMovdocHdrsobj.recStatus = "0";
                  if (DocDate == "") {
                    StkMovdocHdrsobj.recExpect = null;
                }
                else {
                    StkMovdocHdrsobj.recExpect = DocDate.split("/").reverse().join("/")
                  }
                //StkMovdocHdrsobj.recExpect = $('[id$="dt_DocDateDOrderApproval"]').val();
                StkMovdocHdrsobj.recTtl = "0";
                StkMovdocHdrsobj.createUser = null;
                StkMovdocHdrsobj.createDate = null;
                StkMovdocHdrsobj.phyNo = null;
                  StkMovdocHdrdetails.push(StkMovdocHdrsobj);
                  
                if (StkMovdocHdrsobj.storeNo == "") {
                    alert("Store Code is Empty");
                    this.disabled = false;
                    return false;
                }
                //if (StkMovdocHdrsobj.supplyNo == "") {
                //    alert("Supply No is Empty");
                //    return false;
                //}
                //if (StkMovdocHdrsobj.staffNo == "") {
                //    alert("Created By is Empty");
                //    return false;
                //  }

                  
                  if (tablerows.length == 1) {
                      alert("Pls Add Item");
                      this.disabled = false;
                    return false;
                  }

            $.ajax({
                    type: "POST",
                    url: "DOrderApproval.aspx/AddStkMovdocHdrsData",
                    data: '{ Details :' + JSON.stringify(StkMovdocHdrdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                    });

                    var details = [];
                var details1 = [];
                var stkdetails = [];
                var rows = $('#DOrderApprovalEntryModule tbody >tr');
                var DOrderApprovalEntryrows = $('#DOrderApprovalEntryModule tbody >tr');
                var columns;
                for (var i = 1; i < rows.length; i++) {
                    columns = $(rows[i]).find('td');
                    var obj = {};
                    obj.docNo = $('[id$="txtDocNo_DOrderApproval"]').val();
                    obj.movCode = "GRN";
                    obj.movType = "GRN";
                    obj.docLineno = $(columns[2]).html();
                    if (DocDate == "") {
                    obj.docDate = null;
                }
                else {
                    obj.docDate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docDate = $('[id$="dt_DocDateGRN"]').val();
                    obj.grnNo = null;
                    obj.refNo = null;
                    obj.itemcode = $(columns[3]).html();
                    obj.itemdesc = $(columns[4]).html();
                    obj.itemprice = "0";
                    obj.docUomtype = null;
                    obj.docUomqty = null;
                    obj.docQty = $(columns[9]).html();
                    obj.docFocqty = "0";
                    obj.docTtlqty = $(columns[9]).html();
                    obj.docPrice = $(columns[7]).html();
                    obj.docMdisc = "0";
                    obj.docPdisc = "0";
                    obj.docDisc = "0";
                    obj.docAmt = $(columns[10]).html();
                    obj.recQty1 = null;
                    obj.recQty2 = null;
                    obj.recQty3 = null;
                    obj.recQty5 = null;
                    obj.recTtl = "0";
                    obj.postedQty = null;
                    obj.cancelQty = null;
                    obj.ordMemo1 = null;
                    obj.ordMemo2 = null;
                    obj.ordMemo3 = null;
                    obj.ordMemo4 = null;
                    obj.createUser = null;
                    obj.createDate = null;
                    obj.docUom = $(columns[1]).html();
                    
                     if (DocDate == "") {
                    obj.docExpdate = null;
                }
                else {
                    obj.docExpdate = DocDate.split("/").reverse().join("/")
                  }
                    //obj.docExpdate = $('[id$="dt_DocDateGRN"]').val();
                    obj.docBatchNo = "";
                    obj.phyNo = null;
                    obj.itmBrand = $(columns[14]).html();
                    obj.itmRange = $(columns[15]).html();
                    obj.itmBrandDesc = $(columns[5]).html();
                    obj.itmRangeDesc = $(columns[6]).html();
                    obj.DOCUOMDesc = $(columns[8]).html();
                    obj.stkAdjReasonCode = null;
                    obj.itemRemark = $(columns[11]).html();
                    details.push(obj);


                            
                    var stktrnobj = {};
                    if (DocDate == "") {
                        stktrnobj.trnPost = null;
                    }
                    else
                    {
                        stktrnobj.trnPost = DocDate.split("/").reverse().join("/")
                    }
                    stktrnobj.trnNo = null;
                    if (DocDate == "") {
                        stktrnobj.trnDate = null;
                    }
                    else
                    {
                        stktrnobj.trnDate = DocDate.split("/").reverse().join("/")
                    }
                    stktrnobj.postTime = "";
                    stktrnobj.aperiod = null;
                    stktrnobj.itemcode = $(columns[3]).html();
                    stktrnobj.storeNo = $('[id$="ddlStoreCode_DOrderApproval"]').val();
                    stktrnobj.tstoreNo = null;
                    stktrnobj.fstoreNo = null;
                    stktrnobj.trnDocno = $('[id$="txtGRNNo_DOrderApproval"]').val();
                    stktrnobj.trnType = "GRN";
                    stktrnobj.trnDbQty = null;
                    stktrnobj.trnCrQty = null;
                    stktrnobj.trnQty = $(columns[9]).html();
                    stktrnobj.trnBalqty = $(columns[9]).html();
                    stktrnobj.trnBalcst = $(columns[10]).html();
                    stktrnobj.trnAmt = $(columns[10]).html();
                    stktrnobj.trnCost = $(columns[10]).html();
                    stktrnobj.trnRef = null;
                    stktrnobj.hqUpdate = false;
                    stktrnobj.lineNo = $(columns[2]).html();
                    stktrnobj.itemUom = $(columns[1]).html();
                    stktrnobj.itemBatch = "";
                    stktrnobj.movType = "GRN";
                    stktrnobj.itemBatchCost = $(columns[7]).html();
                    stktrnobj.stockIn = null;
                    stktrnobj.transPackageLineNo = null;
                    stkdetails.push(stktrnobj);
                }

                   $.ajax({
                    type: "POST",
                    url: "DOrderApproval.aspx/AddStkMovdocDtlsData",
                    data: '{ Details :' + JSON.stringify(details) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });
                  var successResult;

            

             $.ajax({
                    type: "POST",
                    url: "DOrderApproval.aspx/AddStktrnsData",
                    data: '{ Details :' + JSON.stringify(stkdetails) + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (r) {
                     //   alert(r.d);
                        successResult="True";
                        },
                    error: function(data, errorThrown){
                            successResult="False";
                        }
                });
                  
                  $(location).attr('href', "DOWithGRNList.aspx");
        });

        $('[id$="btnSubmit_ListDOrderApproval"]').click(function () {
                $(location).attr('href',"DOWithGRNList.aspx");

        });


$(function () {
                $('#tblVendorList').DataTable({
                    'sAjaxSource': 'Utilities/DataModels.ashx?ID=Supplier',
                    'paging': true,
                    'lengthChange': true,
                    'searching': true,
                    'ordering': true,
                    'info': true,
                    'autoWidth': true,
                    language: {
                        searchPlaceholder: "Search By Supply Code/ Supplier Name/ Supply Date / Active / Contact No/ No.of POS"
                    },
                    'columns': [
                        {
                          'data': 'splyCode',
                          'render': function (data, type, row, meta) {
                              data = '<a href="VendorMaster.aspx?PKey=' + row[0] + '"><font color="#6a6000"><b>' + row[0] + '</b></a>';
                              return data;
                          }
                        }, null,null, null,null, null
                      ]
                })
            });

        $(".btnFillter_tblVendorList .btn").click(function () {
                
        var inputValue = $(this).find("input").val();
        var table = $('#tblVendorList').DataTable();
        table
            .column(3)
            .search(inputValue)
            .draw();
        });


        //$('input[name="txtCode_DivMaster"]').on('change', function () {
        //    //if ($(this).val().length == 0) {
        //    //    alert('Input field is empty');
        //    //}
        //    alert('Input field is empty');
        //});

        //$("#txtCode_DivMaster").on("change", function () {
        //    alert(this.value);
        //});

        //$("#txtCode_DivMaster").keypress(function () {
        //    alert("Handler for .keypress() called.");
        //});

        $(".txtCodeDivMaster").on("change", function () {
            $.ajax({
                type: 'POST',
                url: 'Utilities/DataModels.ashx?ID=CodeCheckExist&PKey=' + "Div" + '&PKey1=' + this.value + '',
                dataType: "json",
                Cache: false,
                success: function (data) {
                    var JsonArray = JSON.stringify(data);
                    var Json = JSON.parse(JsonArray);
                    $('[id$="txtCode_DivMaster"]').val(Json.aaData[0][0]);
                    if (Json.aaData[0][0] == "") {
                        alert("Code already Exists");
                        $(".txtCodeDivMaster").focus();
                }
                else {
                    
                }
                }
            });
        });

        $(".txtDeptCodeDeptMaster").on("change", function () {
            $.ajax({
                type: 'POST',
                url: 'Utilities/DataModels.ashx?ID=CodeCheckExist&PKey=' + "Dept" + '&PKey1=' + this.value + '',
                dataType: "json",
                Cache: false,
                success: function (data) {
                    var JsonArray = JSON.stringify(data);
                    var Json = JSON.parse(JsonArray);
                    $('[id$="txtDeptCode_DeptMaster"]').val(Json.aaData[0][0]);
                    if (Json.aaData[0][0] == "") {
                        alert("Code already Exists");
                        $(".txtDeptCodeDeptMaster").focus();
                    }
                    else {

                    }
                }
            });
        });

        $(".txtDeptCodeDeptMastermdl").on("change", function () {
            $.ajax({
                type: 'POST',
                url: 'Utilities/DataModels.ashx?ID=CodeCheckExist&PKey=' + "Dept" + '&PKey1=' + this.value + '',
                dataType: "json",
                Cache: false,
                success: function (data) {
                    var JsonArray = JSON.stringify(data);
                    var Json = JSON.parse(JsonArray);
                    $('[id$="txtDeptCode_mdlAddDept"]').val(Json.aaData[0][0]);
                    if (Json.aaData[0][0] == "") {
                        alert("Code already Exists");
                        $(".txtDeptCodeDeptMastermdl").focus();
                    }
                    else {

                    }
                }
            });
        });

        $(".txtCodeClassMaster").on("change", function () {
            $.ajax({
                type: 'POST',
                url: 'Utilities/DataModels.ashx?ID=CodeCheckExist&PKey=' + "Class" + '&PKey1=' + this.value + '',
                dataType: "json",
                Cache: false,
                success: function (data) {
                    var JsonArray = JSON.stringify(data);
                    var Json = JSON.parse(JsonArray);
                    $('[id$="txtCode_ClassMaster"]').val(Json.aaData[0][0]);
                    if (Json.aaData[0][0] == "") {
                        alert("Code already Exists");
                        $(".txtCodeClassMaster").focus();
                    }
                    else {

                    }
                }
            });
        });


        $(document).on("click", ".chk_UserAuthorization", function () {
            var rowIndex = $('#UserAuthorizationHTML tr').index($(this).closest('tr'));
            var _User = $('[id$="ddlUser"]').val();
            var _Code = $('#UserAuthorizationHTML tr').eq(rowIndex).find('td:eq(0)').html();
            var _Checked = ($('#UserAuthorizationHTML tr').eq(rowIndex).find('td:eq(2) input').is(':checked') ? 'Y' : 'N');
            $.ajax({
                type: "POST",
                url: 'UserAuthorization.aspx/UserAuthorizationService',
                data: "{'User':'" + _User + "','Code':'" + _Code + "','Active':'" + _Checked + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    $("#divResult").html("success");
                },
                error: function (e) {
                    $("#divResult").html("Something Wrong.");
                }
            });

        });



        </script>

    </form>
</body>

</html>
